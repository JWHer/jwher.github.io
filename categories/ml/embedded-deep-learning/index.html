<!doctype html>
<html lang="kr" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-ml/embedded-deep-learning">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">임베디드 딥러닝 | JWHer Tech Blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://jwher.github.io/categories/ml/embedded-deep-learning"><meta data-rh="true" name="docusaurus_locale" content="kr"><meta data-rh="true" name="docsearch:language" content="kr"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="임베디드 딥러닝 | JWHer Tech Blog"><meta data-rh="true" name="description" content="하드웨어 소프트웨어 통합 설계와 병렬 처리"><meta data-rh="true" property="og:description" content="하드웨어 소프트웨어 통합 설계와 병렬 처리"><link data-rh="true" rel="icon" href="/img/logo.svg"><link data-rh="true" rel="canonical" href="https://jwher.github.io/categories/ml/embedded-deep-learning"><link data-rh="true" rel="alternate" href="https://jwher.github.io/en/categories/ml/embedded-deep-learning" hreflang="en"><link data-rh="true" rel="alternate" href="https://jwher.github.io/categories/ml/embedded-deep-learning" hreflang="kr"><link data-rh="true" rel="alternate" href="https://jwher.github.io/categories/ml/embedded-deep-learning" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/posts/rss.xml" title="JWHer Tech Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/posts/atom.xml" title="JWHer Tech Blog Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-XHBVCY40VB","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.ef8a0d43.css">
<link rel="preload" href="/assets/js/runtime~main.15f08e9c.js" as="script">
<link rel="preload" href="/assets/js/main.6a2ff877.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">JWHer Tech Blog</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/posts">Posts</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/categories">Categories</a><a href="https://github.com/jwher" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link icon-github"></a><a href="https://www.linkedin.com/in/jwher" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link icon-linkedin"></a><a href="https://www.instagram.com/jwher96" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link icon-instagram"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_tKWQ"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="categories__header_b1Ze"><div class="filter_R8oS"></div><h2 class="presentation__title">Categories</h2><h6 class="presentation__subtitle">God shall bless us; and all the ends of the earth shall fear him.</h6></div><div class="docPage_LfYH"><aside class="theme-doc-sidebar-container docSidebarContainer_rpaz"><div class="sidebarViewport_YVHi"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/categories/">소개</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/categories/category/computer-science">Computer Science</a><button aria-label="Toggle the collapsible sidebar category &#x27;Computer Science&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/categories/category/database">Database</a><button aria-label="Toggle the collapsible sidebar category &#x27;Database&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/categories/category/java">Java</a><button aria-label="Toggle the collapsible sidebar category &#x27;Java&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/categories/category/kubernetes">Kubernetes</a><button aria-label="Toggle the collapsible sidebar category &#x27;Kubernetes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/categories/category/linux">Linux</a><button aria-label="Toggle the collapsible sidebar category &#x27;Linux&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/categories/category/machine-learning">Machine Learning</a><button aria-label="Toggle the collapsible sidebar category &#x27;Machine Learning&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/categories/ml/embedded-deep-learning">임베디드 딥러닝</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/categories/ml/nuclio">nuclio</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/categories/ml/openvino">openvino</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/categories/ml/reinforcement-learning">강화학습</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/categories/category/mlops">MLOps</a><button aria-label="Toggle the collapsible sidebar category &#x27;MLOps&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/categories/category/web">Web</a><button aria-label="Toggle the collapsible sidebar category &#x27;Web&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_RiV8"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/categories/category/machine-learning"><span itemprop="name">Machine Learning</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">임베디드 딥러닝</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>임베디드 딥러닝</h1></header><p><a href="/categories/ml/embedded-deep-learning/"><img loading="lazy" alt="embedded-deep-learning" src="/assets/images/cap_logo-0eb117c1767b2b6d6a6e002ee1ad9917.png" width="1080" height="522" class="img_ev3q"></a><br>
<em>Codesign and Parallel Processing</em></p><p>이 강의를 통해 하드웨어(ai 플랫폼)에서 최적화 방법
소프트웨어 최적화 방법 네트워크 최적화 방법에 대해 배웁니다.</p><p>Computers on everyware</p><p>Super Computers         --&gt; nation<br>
<!-- -->DB Servers              --&gt; IBM<br>
<!-- -->Workstations            --&gt; Oracle<br>
<!-- -->Personal Computers      --&gt; Microsoft, Apple<br>
<!-- -->Embedded Computers      --&gt; ?  </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="임베디드-컴퓨터">임베디드 컴퓨터<a href="#임베디드-컴퓨터" class="hash-link" aria-label="Direct link to 임베디드 컴퓨터" title="Direct link to 임베디드 컴퓨터">​</a></h2><p>임베디드 컴퓨터는 환경과 상호작용합니다.
임베디드 컴퓨터는 물리적인 시스템으로서, 특정한 애플리케이션에 맞는 시스템을 가지게 됩니다.
우리 주변에 있는 세탁기, TV, 냉장고부터 스마트폰, 드론, 로봇 등 점차 많은 요소에서 사용되어지고 있습니다.</p><p>스마트폰은 일반 목적의 컴퓨터와 임베디드 컴퓨터의 경계선에 있는 시스템입니다.
전화, WIFI 등 특정 기능을 수행하기도 하고, 애플리케이션을 다운받는 등 사용자 프로그래밍이 가능한 시스템이기도 합니다.</p><p>임베디드 컴퓨터는 다음과 같은 특징을 가집니다.</p><ul><li>자원 제약
실시간 제약을 가지고 latency나 throughput의 제약을 받는다.</li></ul><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><b><i>NOTE</i></b><br> latency:<br> throughput:</code></pre><ul><li>이기종 병렬 컴퓨팅 시스템
CPU(효율 코어, 고성능 코어 등)와, 특정 기능을 하기 위한 하드웨어가 있다.</li><li>정확한 디자인이 가장 중요
온라인 디버깅이 거의 불가능하기 때문에 정확한 디자인이 중요하다.</li></ul><p>이런 요구사항이 필요하기도 합니다.</p><ul><li>비용-성능 비율의 최적화</li><li>사용자 친화성</li><li>모양과 무게</li><li>시장에 나오는 때(선점)</li><li>신뢰성, 안정성, 가용성, 보안</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="연산강도">연산강도<a href="#연산강도" class="hash-link" aria-label="Direct link to 연산강도" title="Direct link to 연산강도">​</a></h2><p><em>Arithmetic Intensity</em></p><p>연산강도는 프로그램 실행 중에 부동소수점 연산을 메인메모리에 접근하는 바이트 숫자로 나눈 값입니다.</p><p>Arithmetic intensity is defined as the number of floating-point operations divided by the number of bytes in the main memory accessed for running a program.</p><p>Ref. Cloud Computing (Third Edition), 2023</p><p>연산 강도 값이 클수록, 최적화를 통해 많은 시간을 절약할 수 있습니다.</p><p>컴퓨터 비전 분야에서 많이 사용되는 CNN을 살펴봅시다.
Input feature map의 크기를 (fH, fW, C)
필터의 크기를 (K, K, C) 그리고 개수를 N개라고 하면,
출력으로 나오는 feature map은 (fH, fW, N) 입니다. (패딩 적용 시)</p><p>이때, 필터를 적용하는 연산(MAC, Multiply-accumulate operation)이 얼마나 수행되어야 할지 계산해 봅시다.</p><p>$ fH \time fW \time N \time ( K \time K \time C ) $</p><p>대략적인 크기를 fH, fW=10^2 N=10^3 K^2=10 C=10^2으로 잡았을 때,
output feature map을 얻기 위해 10^10번의 MAC 연산이 수행되어야 합니다.</p><p>한 클락에 MAC이 수행된다고 가정하면, 1GHz(=10^9) 코어가 10초간 계산해야 합니다. 어마어마한 시간입니다.</p><p>이 연산을 수행하는 코드를 한번 볼까요?</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">n </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> n </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> N</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> n</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> fW</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> x</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> y </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> fH</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> y</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            O</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">n</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">y</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> B</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">n</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// add bias</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> K</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">j</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> j </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> K</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> j</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">k </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> k </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> C</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> k</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        O</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">n</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">y</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> I</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">k</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">y</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">j</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> x W</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">k</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">j</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            O</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">n</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">y</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">O</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">n</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">y</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// activation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>문제1 이 코드는 어떤 순서로 메모리에 접근하고 있나요?
문제2 NCHW 순서로 접근하도록 코드를 바꿀 수 있을까요?</p><p>이번엔 메모리를 생각해 봅시다. 이 연산을 수행하기 위해 메인 메모리에 몇번 접근해야 할까요? 계산을 하기 위해 Input feature map과 filter를 가져와야 합니다. 10억번의 MAC을 해야하는 것에 비하면 매우 적은 수입니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="활성-함수">활성 함수<a href="#활성-함수" class="hash-link" aria-label="Direct link to 활성 함수" title="Direct link to 활성 함수">​</a></h2><p><em>Activation Function</em></p><p>sigmoid, tanh, ReLU</p><p>Leaky ReLU, Swish(non linear)</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NOTE non-linear func의 ReLU 교체 knowledge distillation(teacher-student)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Pooling, FC layer</p><p>연산 강도가 낮아서 메모리 병목이 더 큼.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="역전파">역전파<a href="#역전파" class="hash-link" aria-label="Direct link to 역전파" title="Direct link to 역전파">​</a></h2><p><em>Back Propagation</em></p><p>학습을 잘 하지 않지만, embedded training을 할때 의미가 있음
conv할때 180 회전, 메모리 레이아웃...</p><ul><li>nvidia gpu와 가속기(NPU) 차이</li><li>gpu 최적화시 10~100배 성능 차이(cuda book)</li><li>벤더에서 제공하는 최적화 API(tensor rt)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="systolic-array">Systolic Array<a href="#systolic-array" class="hash-link" aria-label="Direct link to Systolic Array" title="Direct link to Systolic Array">​</a></h2><p>SIMD와 차이점</p><ul><li>각 PE가 다른것을 할 수 있습니다.</li><li>일반적인 프로세서(e.g. Intel iWARP)에서 실용적인 구현이 있습니다.</li></ul><p>나타난 이유</p><ul><li>VLSI는 특적 목적의 칩을 저렴하게 했습니다.</li><li>알고리즘을 일정한 패턴으로 연결되어 직접 표현할 수 있습니다.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="simd-구조">SIMD 구조<a href="#simd-구조" class="hash-link" aria-label="Direct link to SIMD 구조" title="Direct link to SIMD 구조">​</a></h2><ul><li>간단하고 작은 프로세서 배열과 각각의 작은 메모리</li><li>명령을 발행하는 제어 프로세서에 부착</li><li>특수하고 일반화된 통신으로, 저렴한 전역 동기화
-&gt; SIMT(Single Inst. Multiple Threads)로 발전</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="vector-processors">Vector Processors<a href="#vector-processors" class="hash-link" aria-label="Direct link to Vector Processors" title="Direct link to Vector Processors">​</a></h2><p>데이터 하자드 없이 깊은 파이프라인
명령어 크기가 줄어듬
메인 메모리 접근을 시작할 때 큰 지연이 완화된다</p><p>chaining
multiple lanes
scatter-gather op</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="mimd-architecture">MIMD Architecture<a href="#mimd-architecture" class="hash-link" aria-label="Direct link to MIMD Architecture" title="Direct link to MIMD Architecture">​</a></h2><p>Shared-address-space(SAS) = Multi processor
Message-passing arch = Multi computer</p><p>Shared Memory Multiprocessor</p><ul><li>Dance-hall(UMA)</li><li>Distributed memory(NUMA)</li></ul><p>Cache coherence, Synchronization of shared data</p><p>Message Passing Architecture</p><ul><li>Direct access to private address space</li><li>Interprocessor communication via explicit messages</li></ul><p>High-level block diagram similar to NUMA</p><ul><li>Easier to build than scalable SAS</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="interconnection-network">Interconnection Network<a href="#interconnection-network" class="hash-link" aria-label="Direct link to Interconnection Network" title="Direct link to Interconnection Network">​</a></h2><p>2-dim Mesh
Torus
Fat tree</p><p>Routing Delay</p><ul><li>Store and forward routing</li><li>Cut through routing</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="deadlock-avoidance">Deadlock Avoidance<a href="#deadlock-avoidance" class="hash-link" aria-label="Direct link to Deadlock Avoidance" title="Direct link to Deadlock Avoidance">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="amdahls-law">Amdahl&#x27;s Law<a href="#amdahls-law" class="hash-link" aria-label="Direct link to Amdahl&#x27;s Law" title="Direct link to Amdahl&#x27;s Law">​</a></h2></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/categories/tags/cs">cs</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/jwher/jwher.github.io/tree/main/categories/ml/embedded-deep-learning.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/categories/category/machine-learning"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Machine Learning</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/categories/ml/nuclio"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">nuclio</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#임베디드-컴퓨터" class="table-of-contents__link toc-highlight">임베디드 컴퓨터</a></li><li><a href="#연산강도" class="table-of-contents__link toc-highlight">연산강도</a></li><li><a href="#활성-함수" class="table-of-contents__link toc-highlight">활성 함수</a></li><li><a href="#역전파" class="table-of-contents__link toc-highlight">역전파</a></li><li><a href="#systolic-array" class="table-of-contents__link toc-highlight">Systolic Array</a></li><li><a href="#simd-구조" class="table-of-contents__link toc-highlight">SIMD 구조</a></li><li><a href="#vector-processors" class="table-of-contents__link toc-highlight">Vector Processors</a></li><li><a href="#mimd-architecture" class="table-of-contents__link toc-highlight">MIMD Architecture</a></li><li><a href="#interconnection-network" class="table-of-contents__link toc-highlight">Interconnection Network</a></li><li><a href="#deadlock-avoidance" class="table-of-contents__link toc-highlight">Deadlock Avoidance</a></li><li><a href="#amdahls-law" class="table-of-contents__link toc-highlight">Amdahl&#39;s Law</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">
        <div class="copyright">
          Copyright © 2023, made by JWHer.<span class="heart-icon"></span>
        </div>
        </div></div></div></footer></div>
<script src="/assets/js/runtime~main.15f08e9c.js"></script>
<script src="/assets/js/main.6a2ff877.js"></script>
</body>
</html>
"use strict";(self.webpackChunkjwher_blog=self.webpackChunkjwher_blog||[]).push([[9512],{3905:function(e,t,n){n.d(t,{Zo:function(){return k},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),u=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},k=function(e){var t=u(e.components);return a.createElement(o.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,k=s(e,["components","mdxType","originalType","parentName"]),d=u(n),m=r,c=d["".concat(o,".").concat(m)]||d[m]||p[m]||l;return n?a.createElement(c,i(i({ref:t},k),{},{components:n})):a.createElement(c,i({ref:t},k))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=d;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var u=2;u<l;u++)i[u]=n[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6405:function(e,t,n){n.r(t),n.d(t,{assets:function(){return k},contentTitle:function(){return o},default:function(){return m},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return p}});var a=n(7462),r=n(3366),l=(n(7294),n(3905)),i=["components"],s={authors:["jwher"],description:"\ub098\uc5d0\uac8c \ud544\uc694\ud55c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc124\uce58\ud558\uae30",slug:"install-kubernetes",tags:["tech","kubernetes","docker","linux"],title:"Install Kubernetes"},o=void 0,u={permalink:"/posts/install-kubernetes",editUrl:"https://github.com/jwher/jwher.github.io/posts/2021-04-13-install-kubernetes/index.md",source:"@site/posts/2021-04-13-install-kubernetes/index.md",title:"Install Kubernetes",description:"\ub098\uc5d0\uac8c \ud544\uc694\ud55c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc124\uce58\ud558\uae30",date:"2021-04-13T00:00:00.000Z",formattedDate:"April 13, 2021",tags:[{label:"tech",permalink:"/posts/tags/tech"},{label:"kubernetes",permalink:"/posts/tags/kubernetes"},{label:"docker",permalink:"/posts/tags/docker"},{label:"linux",permalink:"/posts/tags/linux"}],readingTime:19.77,truncated:!0,authors:[{name:"Jeongwon Her",title:"MLOps Engineer",url:"https://github.com/jwher",imageURL:"https://github.com/jwher.png",key:"jwher"}],frontMatter:{authors:["jwher"],description:"\ub098\uc5d0\uac8c \ud544\uc694\ud55c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc124\uce58\ud558\uae30",slug:"install-kubernetes",tags:["tech","kubernetes","docker","linux"],title:"Install Kubernetes"},prevItem:{title:"Install Docker",permalink:"/posts/install-docker"},nextItem:{title:"Welcome To Kubernetes",permalink:"/posts/welcome-to-kubernetes"}},k={authorsImageUrls:[void 0]},p=[{value:"\ubc30\ud3ec\ubc84\uc804",id:"\ubc30\ud3ec\ubc84\uc804",level:2},{value:"\ub098\ud55c\ud14c \ub9de\ub294\uac8c \uc5c6\ub294\ub370...",id:"\ub098\ud55c\ud14c-\ub9de\ub294\uac8c-\uc5c6\ub294\ub370",level:3},{value:"Kubeadm \uc124\uce58",id:"kubeadm-\uc124\uce58",level:2},{value:"OS",id:"os",level:3},{value:"Hardware spec",id:"hardware-spec",level:3},{value:"Software setting",id:"software-setting",level:3},{value:"Kubeadm \uc124\uce58\ud558\uae30",id:"kubeadm-\uc124\uce58\ud558\uae30",level:3},{value:"Mini Kube \uc124\uce58",id:"mini-kube-\uc124\uce58",level:2},{value:"\uc694\uad6c\uc0ac\ud56d",id:"\uc694\uad6c\uc0ac\ud56d",level:3},{value:"Mini Kube \uc124\uce58\ud558\uae30",id:"mini-kube-\uc124\uce58\ud558\uae30",level:3},{value:"Docker Desktop \uc124\uce58",id:"docker-desktop-\uc124\uce58",level:2},{value:"Docker Desktop \uc124\uce58\ud558\uae30",id:"docker-desktop-\uc124\uce58\ud558\uae30",level:3},{value:"Kind \uc124\uce58",id:"kind-\uc124\uce58",level:2},{value:"Kind \uc124\uce58\ud558\uae30",id:"kind-\uc124\uce58\ud558\uae30",level:3},{value:"Tips",id:"tips",level:2},{value:"Reference",id:"reference",level:3}],d={toc:p};function m(e){var t=e.components,n=(0,r.Z)(e,i);return(0,l.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/kubernetes.png",alt:"Alt",title:"docker"}),(0,l.kt)("br",{parentName:"p"}),"\n",(0,l.kt)("em",{parentName:"p"},"\ub098\uc5d0\uac8c \ud544\uc694\ud55c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc124\uce58\ud558\uae30"),"  "),(0,l.kt)("h1",{id:"\ubaa9\ucc28"},"\ubaa9\ucc28"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#%EB%B0%B0%ED%8F%AC%EB%B2%84%EC%A0%84"},"\ubc30\ud3ec\ubc84\uc804")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#kubeadm-%EC%84%A4%EC%B9%98"},"Kubeadm \uc124\uce58")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#mini-kube-%EC%84%A4%EC%B9%98"},"Mini Kube \uc124\uce58")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#docker-desktop-%EC%84%A4%EC%B9%98"},"Docker Desktop \uc124\uce58")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#kind-%EC%84%A4%EC%B9%98"},"Kind \uc124\uce58"))),(0,l.kt)("h2",{id:"\ubc30\ud3ec\ubc84\uc804"},"\ubc30\ud3ec\ubc84\uc804"),(0,l.kt)("p",null,"\uc774 \uae00\uc740 \ub2e4\uc591\ud55c \ud658\uacbd\uc5d0\uc11c \ub0b4\uac8c \ud544\uc694\ud55c \ubc84\uc804\uc758 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc124\uce58\ubc95\uc744 \uc124\uba85\ud569\ub2c8\ub2e4. \ud83c\udf89\ud83d\ude4c\ud83c\udf89",(0,l.kt)("br",{parentName:"p"}),"\n","\ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0 \ub300\ud574 \uc774\ud574\uac00 \ubd80\uc871\ud558\uc2dc\ub2e4\uba74 ",(0,l.kt)("a",{parentName:"p",href:"https://jwher.github.io/2021-04-12-welcome-to-kubernetes/"},"\uc774 \uae00")," \uc744 \uba3c\uc800 \uc77d\ub294 \uac78 \ucd94\ucc9c\ud569\ub2c8\ub2e4!"),(0,l.kt)("p",null,"kubernetes \uc800\uc0ac\uc591 node \ub4f1\uc5d0 \ub9de\ucdb0 \ub2e4\uc591\ud55c \ubc30\ud3ec\ud310\uc774 \uc788\uc2b5\ub2c8\ub2e4.\n\uac01\uac01 \ubc30\ud3ec\ud310\uc758 \ud2b9\uc9d5\uc744 \uc124\uba85\ud558\uba74 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://kubernetes.io/ko/docs/setup/production-environment/tools/kubeadm/install-kubeadm/"},"Kubeadm"),"\n(",(0,l.kt)("a",{parentName:"li",href:"https://github.com/kubernetes/kubernetes"},"git"),")",(0,l.kt)("br",{parentName:"li"}),"CNCF: Cloud Native Computing Foundation \uc758 \uacf5\uc2dd \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc785\ub2c8\ub2e4.\n\uc5ec\ub7ec \ub9ac\ub205\uc2a4 \ub178\ub4dc\uc5d0\uc11c \ub3d9\uc791\ud558\ub294 \uc77c\ubc18\uc801\uc778 \ucfe0\ubc84\ub124\ud2f0\uc2a4(k8s) \uc785\ub2c8\ub2e4."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://snapcraft.io/microk8s"},"Micro K8s"),"\n(",(0,l.kt)("a",{parentName:"li",href:"https://github.com/ubuntu/microk8s#list-of-available-addons"},"git"),")",(0,l.kt)("br",{parentName:"li"}),(0,l.kt)("em",{parentName:"li"},"\uc0ac\uc6a9\ud574 \ubcf4\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4"),(0,l.kt)("br",{parentName:"li"}),"\ub2e8\uc77c \ub178\ub4dc\uc5d0\uc11c \ub3d9\uc791\ud558\ub294 \uacbd\ub7c9\ud654\ub41c \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc785\ub2c8\ub2e4. \ub9ac\ub205\uc2a4 \ud328\ud0a4\uc9c0 \uad00\ub9ac \ud234 Snap\uc744 \uc0ac\uc6a9\ud574 \uc124\uce58\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://minikube.sigs.k8s.io/docs/start/"},"Mini Kube"),"\n(",(0,l.kt)("a",{parentName:"li",href:"https://github.com/kubernetes/minikube"},"git"),")",(0,l.kt)("br",{parentName:"li"}),"\ub9ac\ub205\uc2a4, \uc708\ub3c4\uc6b0, \ub9e5\uc5d0\uc11c \ub3d9\uc791\ud558\ub294 \ub2e8\uc77c \ub178\ub4dc \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc785\ub2c8\ub2e4.\nVirtual box\ub098 VM ware\ub97c \uc0ac\uc6a9\ud574 \ub9ac\ub205\uc2a4 \uba38\uc2e0\uc73c\ub85c \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uad6c\uc131\ud569\ub2c8\ub2e4."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://www.docker.com/products/docker-desktop"},"Docker Desktop"),(0,l.kt)("br",{parentName:"li"}),"\ub9e5/\uc708\ub3c4\uc6b0\uc5d0\uc11c \ub3d9\uc791\ud558\ub294 \ub3c4\ucee4 \ub370\uc2a4\ud06c\ud0d1\uc5d0 \ud3ec\ud568\ub41c \uae30\ub2a5\uc785\ub2c8\ub2e4.\n\uc2e4\uc81c \ub3d9\uc791\ud558\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ub3c4\ucee4 \ub370\uc2a4\ud06c\ud0d1 \ubc84\uc804\uc5d0 \ub530\ub77c micro k8s, kind \ub4f1 \ub2e4\ub978 \uac83\uc73c\ub85c \uc54c\uace0 \uc788\uc2b5\ub2c8\ub2e4."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://kind.sigs.k8s.io/docs/user/quick-start/"},"Kind"),"\n(",(0,l.kt)("a",{parentName:"li",href:"https://github.com/kubernetes-sigs/kind"},"git"),")",(0,l.kt)("br",{parentName:"li"}),"Kind: Kubernetes in docker \ub85c\uc368 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud074\ub7ec\uc2a4\ud130\ub97c \ub3c4\ucee4\ub85c(...) \ub9cc\ub4e4\uc5c8\uc2b5\ub2c8\ub2e4.\n\ub530\ub77c\uc11c \ub3c4\ucee4\uac00 \ub3d9\uc791\ud558\ub294 \ub9ac\ub205\uc2a4, \uc708\ub3c4\uc6b0, \ub9e5\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://k9scli.io/"},"K9s"),"\n(",(0,l.kt)("a",{parentName:"li",href:"https://github.com/derailed/k9s"},"git"),")",(0,l.kt)("br",{parentName:"li"}),(0,l.kt)("em",{parentName:"li"},"\uc0ac\uc6a9\ud574 \ubcf4\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4"),(0,l.kt)("br",{parentName:"li"}),"CLI\ub97c \uce5c\uc219\ud558\uac8c \uc774\uc6a9\ud560 \uc218 \uc788\uac8c \ud574\uc8fc\ub294 \ub3c4\uad6c\uc785\ub2c8\ub2e4. (\ucfe0\ubc84\ub124\ud2f0\uc2a4\uac00 \uc544\ub2d9\ub2c8\ub2e4!)  "),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://k3s.io/"},"K3s"),"\n(",(0,l.kt)("a",{parentName:"li",href:"https://github.com/k3s-io/k3s"},"git"),")",(0,l.kt)("br",{parentName:"li"}),(0,l.kt)("em",{parentName:"li"},"\uc0ac\uc6a9\ud574 \ubcf4\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4"),(0,l.kt)("br",{parentName:"li"}),"\ub2e4\uc591\ud55c edge \ud658\uacbd(IoT, ARM)\uc5d0\uc11c \uc0ac\uc6a9\ub418\ub294 \uc800\uc0ac\uc591(512MB \ub7a8, 200MB \ub514\uc2a4\ud06c) \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc785\ub2c8\ub2e4.\n\uc5b4\ub5a0\ud55c \ub9ac\ub205\uc2a4 \ubc30\ud3ec\uc5d0\uc11c \ub3d9\uc791\ud558\ub3c4\ub85d \ub9cc\ub4e4\uc5b4\uc84c\uc2b5\ub2c8\ub2e4.")),(0,l.kt)("h3",{id:"\ub098\ud55c\ud14c-\ub9de\ub294\uac8c-\uc5c6\ub294\ub370"},"\ub098\ud55c\ud14c \ub9de\ub294\uac8c \uc5c6\ub294\ub370..."),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"\uadf8\ub0e5 \ud55c\ubc88 \uccb4\ud5d8\ud574 \ubcf4\uace0 \uc2f6\uc5b4\uc694"),(0,l.kt)("br",{parentName:"p"}),"\n","GCP, AWS\uc5d0\uc11c PaaS\ub85c \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4!\n",(0,l.kt)("a",{parentName:"p",href:"https://cloud.google.com/kubernetes-engine"},"GKE")," ",(0,l.kt)("a",{parentName:"p",href:"https://aws.amazon.com/ko/eks/"},"EKS"),(0,l.kt)("br",{parentName:"p"}),"\n","\ud074\ub77c\uc6b0\ub4dc\ub97c \uc801\uadf9 \ud65c\uc6a9\uc911\uc774\uac70\ub098 \ucda9\ubd84\ud55c \uc2a4\ud399\uc758 \ud558\ub4dc\uc6e8\uc5b4\uac00 \uc5c6\ub2e4\uba74 \ucd94\ucc9c\ub4dc\ub9bd\ub2c8\ub2e4!"),(0,l.kt)("br",null),(0,l.kt)("h2",{id:"kubeadm-\uc124\uce58"},"Kubeadm \uc124\uce58"),(0,l.kt)("div",{align:"center"},"![kubeadm](/img/logos/kubeadm.svg)"),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"\ub9ac\ub205\uc2a4 \uc11c\ubc84\uac00 \uc5ec\ub7ec\ub300\uace0 on premise \ucfe0\ubc84\ub124\ud2f0\uc2a4\uac00 \ud544\uc694\ud560 \ub54c"),(0,l.kt)("br",{parentName:"p"}),"\n","\ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uc124\uce58\ud558\uae30 \uc804\uc5d0 \ud658\uacbd\uc744 \ud544\uc694\ud55c \uc810\uac80\ud574 \ubd05\uc2dc\ub2e4."),(0,l.kt)("h3",{id:"os"},"OS"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\ub370\ube44\uc548 \ubc30\ud3ec\ud310 (Ubuntu 20.04 \uae30\uc900 \uc791\uc131)"),(0,l.kt)("li",{parentName:"ul"},"\ub808\ub4dc\ud587 \ubc30\ud3ec\ud310 (CentOS\ub294 \ucd94\ud6c4 \uc791\uc131\ud558\uaca0\uc2b5\ub2c8\ub2e4)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://kubernetes.io/docs/setup/production-environment/windows/intro-windows-in-kubernetes/"},"\uc708\ub3c4\uc6b0 \uc11c\ubc84"),"\n\ub294 \uc0ac\uc6a9\ud574 \ubcf4\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4")),(0,l.kt)("h3",{id:"hardware-spec"},"Hardware spec"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"2 CPU \uc774\uc0c1"),(0,l.kt)("li",{parentName:"ul"},"2 GB \uc774\uc0c1\uc758 \ub7a8"),(0,l.kt)("li",{parentName:"ul"},"\uba38\uc2e0 \uc804\uccb4 \ub124\ud2b8\uc6cc\ud06c \uc5f0\uacb0")),(0,l.kt)("h3",{id:"software-setting"},"Software setting"),(0,l.kt)("p",null,"\u25b6 ",(0,l.kt)("a",{parentName:"p",href:"https://jwher.github.io/2021-04-13-install-docker/"},"\ub3c4\ucee4 \uc124\uce58"),"  "),(0,l.kt)("details",null,(0,l.kt)("summary",null,"\ub3c4\ucee4 \ub370\ubaac \ub4dc\ub77c\uc774\ubc84 \ubcc0\uacbd"),(0,l.kt)("div",{markdown:"1"},(0,l.kt)("p",null,"\ub3c4\ucee4 \ub370\ubaac \ub4dc\ub77c\uc774\ubc84\ub97c systemd\ub85c \ubcc0\uacbd\ud574 \uc90d\ub2c8\ub2e4.  "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},'$ sudo vi /etc/docker/daemon.json\n\n# \uc544\ub798 \ub0b4\uc6a9\uc73c\ub85c \ud30c\uc77c\uc744 \ub9cc\ub4ed\ub2c8\ub2e4\n# exec-opts\uc5d0 \uc8fc\ubaa9\ud574 \uc8fc\uc138\uc694\n{\n  "exec-opts": ["native.cgroupdriver=systemd"],\n  "log-driver": "json-file",\n  "log-opts": {\n    "max-size": "100m"\n  },\n  "storage-driver": "overlay2"\n}\n\n# \ub610\ub294 \ub2e4\uc74c \uba85\ub839\uc5b4\ub85c \ud55c\ubc88\uc5d0 \ud30c\uc77c\uc744 \uc0dd\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4\n$ sudo cat > /etc/docker/daemon.json <<EOF\n{\n  "exec-opts": ["native.cgroupdriver=systemd"],\n  "storage-driver": "overlay2"\n}\nEOF\n\n# systemd\uc5d0 \uacbd\ub85c\ub97c \ub9cc\ub4e4\uc5b4 \uc8fc\uace0 docker service\ub97c \uc7ac\uc2dc\uc791 \ud569\ub2c8\ub2e4\n$ sudo mkdir -p /etc/systemd/system/docker.service.d\n$ sudo systemctl daemon-reload\n$ sudo systemctl restart docker\n')))),(0,l.kt)("details",null,(0,l.kt)("summary",null,"swap \ube44\ud65c\uc131\ud654(\u5fc5)"),(0,l.kt)("div",{markdown:"1"},(0,l.kt)("p",null,"\ucfe0\ubc84\ub124\ud2f0\uc2a4\ub294 \uc2a4\uc651 \uba54\ubaa8\ub9ac\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.\n\ub530\ub77c\uc11c linux \uc2a4\uc651 \uba54\ubaa8\ub9ac\ub97c \ube44\ud65c\uc131\ud654 \ud574\uc8fc\uc5b4\uc57c \ud569\ub2c8\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"$ sudo swapoff -a\n\n# \ub2e4\uc74c \uba85\ub839\uc5b4\ub294 \uc798\ubabb \uc0bd\uc785\ub418\uba74 \uc2dc\uc2a4\ud15c\uc758 \uc815\uc9c0\ub97c \ubd88\ub7ec\uc62c \uc218 \uc788\uc2b5\ub2c8\ub2e4\n$ sudo sed -i '2s/^/#/' /etc/fstab\n\n# \ub530\ub77c\uc11c, /ect/fstab\uc744 \uc5f4\uc5b4 \uc9c1\uc811 \ud655\uc778\ud558\uace0 \uc2a4\uc651\uba54\ubaa8\ub9ac\uc5d0 \ub300\ud55c \uc904\ub9cc \uc8fc\uc11d \ucc98\ub9ac\ud569\uc2dc\ub2e4\n$ sudo vi /etc/fstab\n\n# /etc/fstab: static file system information.\n#\n# Use 'blkid' to print the universally unique identifier for a\n# device; this may be used with UUID= as a more robust way to name devices\n# that works even if disks are added and removed. See fstab(5).\n#\n# <file system> <mount point>   <type>  <options>       <dump>  <pass>\n# / was on /dev/sda2 during installation\nUUID=f33b74a8-d88b-4e05-aa01-86d51a883c53 /               ext4    errors=remount-ro 0       1\n# /boot/efi was on /dev/sda1 during installation\nUUID=9AD5-66E5  /boot/efi       vfat    umask=0077      0       1\n#\uc8fc\uc11d /swapfile                                 none            swap    sw              0       0\n")))),(0,l.kt)("details",null,(0,l.kt)("summary",null,"\ubc29\ud654\ubcbd(\u5fc5) (firewalld)"),(0,l.kt)("div",{markdown:"1"},(0,l.kt)("p",null,"firewall daemon \uc744 \ube44\ud65c\uc131\ud654 \uc2dc\ucf1c\uc90d\uc2dc\ub2e4.  "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"# firewalld\uc758 \uc885\ub8cc \ubc29\ubc95\uc785\ub2c8\ub2e4\n$ sudo systemctl stop firewalld\n")))),(0,l.kt)("details",null,(0,l.kt)("summary",null,"\ud3ec\ud2b8 \uac1c\ubc29 (iptables)"),(0,l.kt)("div",{markdown:"1"},(0,l.kt)("p",null,"kubernetes \uc7ac\uc124\uce58\ub97c \uc9c4\ud589\ud558\ub2e4 \ubcf4\uba74\n\uac04\ud639 iptables\uc5d0 \uc774\uc804 rule\ub4e4\uc774 \ub0a8\uc544\uc788\uc5b4 \ubb38\uc81c\uac00 \uc0dd\uae41\ub2c8\ub2e4.  "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"# kubeadm join\uc774 \uc548\ub420 \uc2dc iptables\ub97c \ud655\uc778\ud574 \ubd05\ub2c8\ub2e4\n\n# iptables \uc870\ud68c\n$ sudo iptables -L\n\n# iptables \ucd08\uae30\ud654(flush) \uc2e4\ud589\ud558\uae30 \uc804 backup\uc744 \uaf2d \ud569\uc2dc\ub2e4\n$ sudo iptables -F\n\n")))),(0,l.kt)("br",null),(0,l.kt)("h3",{id:"kubeadm-\uc124\uce58\ud558\uae30"},"Kubeadm \uc124\uce58\ud558\uae30"),(0,l.kt)("p",null,"1. \ub124\ud2b8\uc6cc\ud06c \ud655\uc778  "),"\ucfe0\ubc84\ub124\ud2f0\uc2a4\ub294 MAC\uacfc product_uuid\ub97c \uc0ac\uc6a9\ud558\uc5ec \ud074\ub7ec\uc2a4\ud130\uc758 \ub178\ub4dc\ub97c \uc2dd\ubcc4\ud569\ub2c8\ub2e4. \ub530\ub77c\uc11c, \ub124\ud2b8\uc6cc\ud06c \uc778\ud130\ud398\uc774\uc2a4\uc758 MAC \uc8fc\uc18c\uac00 \uace0\uc720\ud55c\uc9c0 \ud655\uc778\ud574 \uc8fc\uc5b4\uc57c \ud569\ub2c8\ub2e4.",(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"$ ifconfig -a\n\n# \ub2e4\uc74c \ucd9c\ub825\uc740 virtualbox NAT \ub124\ud2b8\uc6cc\ud06c\ub85c \uba38\uc2e0 \uac04 \ub124\ud2b8\uc6cc\ud06c \uc5b4\ub311\ud130\ub97c \uc124\uc815\ud55c \ub0b4\uc6a9\uc785\ub2c8\ub2e4\n enp0s3: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500\n      inet 10.0.2.9  netmask 255.255.255.0  broadcast 10.0.2.255\n      inet6 fe80::f80d:352b:ef2a:da26  prefixlen 64  scopeid 0x20<link>\n      ether 08:00:27:62:15:3e  txqueuelen 1000  (Ethernet)\n      RX packets 80558  bytes 120842058 (120.8 MB)\n      RX errors 0  dropped 0  overruns 0  frame 0\n      TX packets 6397  bytes 424385 (424.3 KB)\n      TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n# \ud574\ub2f9 \ub0b4\uc6a9\uc744 \ubcf4\uba74 inet 10.0.2.9\uac00 NAT \ub124\ud2b8\uc6cc\ud06c\uc5d0\uc11c ip \uc8fc\uc18c\uc774\uace0\n# ether 08:00:27:62:15:3e\uac00 \ub9e5 \uc8fc\uc18c\uc784\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4\n\n$ sudo cat /sys/class/dmi/id/product_uuid\n\nf570f467-9980-1a47-b9c8-1933b3838dff\n")),(0,l.kt)("br",null),(0,l.kt)("p",null,"\uc0ac\uc6a9\ud560 \ub178\ub4dc\uac04 \ud1b5\uc2e0\uc774 \uc6d0\ud65c\ud55c\uc9c0 \ud655\uc778\ud574 \ubd05\uc2dc\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"# ping, curl ,telnet \ub4f1\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4\n$ ping {ip-address}\n\nPING 10.0.2.9 (10.0.2.9) 56(84) bytes of data.\n64 bytes from 10.0.2.9: icmp_seq=1 ttl=64 time=0.777 ms\n64 bytes from 10.0.2.9: icmp_seq=2 ttl=64 time=1.01 ms\n64 bytes from 10.0.2.9: icmp_seq=3 ttl=64 time=1.01 ms\n... \uc0dd\ub7b5 ...\n")),(0,l.kt)("br",null),(0,l.kt)("p",null,"\ub2e4\uc74c \ud3ec\ud2b8\ub294 \uc0ac\uc6a9\uac00\ub2a5\ud574\uc57c \ud569\ub2c8\ub2e4.  "),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\ub9c8\uc2a4\ud130 \ub178\ub4dc"),"  "),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\ud504\ub85c\ud1a0\ucf5c"),(0,l.kt)("th",{parentName:"tr",align:null},"\ubc29\ud5a5"),(0,l.kt)("th",{parentName:"tr",align:null},"\ud3ec\ud2b8 \ubc94\uc704"),(0,l.kt)("th",{parentName:"tr",align:null},"\ubaa9\uc801"),(0,l.kt)("th",{parentName:"tr",align:null},"\uc0ac\uc6a9\uc790"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"TCP"),(0,l.kt)("td",{parentName:"tr",align:null},"\uc778\ubc14\uc6b4\ub4dc"),(0,l.kt)("td",{parentName:"tr",align:null},"6443*"),(0,l.kt)("td",{parentName:"tr",align:null},"\ucfe0\ubc84\ub124\ud2f0\uc2a4 API \uc11c\ubc84"),(0,l.kt)("td",{parentName:"tr",align:null},"\ubaa8\ub450")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"TCP"),(0,l.kt)("td",{parentName:"tr",align:null},"\uc778\ubc14\uc6b4\ub4dc"),(0,l.kt)("td",{parentName:"tr",align:null},"2379-2380"),(0,l.kt)("td",{parentName:"tr",align:null},"etcd \uc11c\ubc84 \ud074\ub77c\uc774\uc5b8\ud2b8 API"),(0,l.kt)("td",{parentName:"tr",align:null},"kube-apiserver, etcd")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"TCP"),(0,l.kt)("td",{parentName:"tr",align:null},"\uc778\ubc14\uc6b4\ub4dc"),(0,l.kt)("td",{parentName:"tr",align:null},"10250"),(0,l.kt)("td",{parentName:"tr",align:null},"kubelet API"),(0,l.kt)("td",{parentName:"tr",align:null},"\uc790\uccb4, \ucee8\ud2b8\ub864 \ud50c\ub808\uc778")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"TCP"),(0,l.kt)("td",{parentName:"tr",align:null},"\uc778\ubc14\uc6b4\ub4dc"),(0,l.kt)("td",{parentName:"tr",align:null},"10251"),(0,l.kt)("td",{parentName:"tr",align:null},"kube-scheduler"),(0,l.kt)("td",{parentName:"tr",align:null},"\uc790\uccb4")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"TCP"),(0,l.kt)("td",{parentName:"tr",align:null},"\uc778\ubc14\uc6b4\ub4dc"),(0,l.kt)("td",{parentName:"tr",align:null},"10252"),(0,l.kt)("td",{parentName:"tr",align:null},"kube-controller-manager"),(0,l.kt)("td",{parentName:"tr",align:null},"\uc790\uccb4")))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\uc6cc\ucee4 \ub178\ub4dc"),"  "),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\ud504\ub85c\ud1a0\ucf5c"),(0,l.kt)("th",{parentName:"tr",align:null},"\ubc29\ud5a5"),(0,l.kt)("th",{parentName:"tr",align:null},"\ud3ec\ud2b8 \ubc94\uc704"),(0,l.kt)("th",{parentName:"tr",align:null},"\ubaa9\uc801"),(0,l.kt)("th",{parentName:"tr",align:null},"\uc0ac\uc6a9\uc790"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"TCP"),(0,l.kt)("td",{parentName:"tr",align:null},"\uc778\ubc14\uc6b4\ub4dc"),(0,l.kt)("td",{parentName:"tr",align:null},"10250"),(0,l.kt)("td",{parentName:"tr",align:null},"kubelet API"),(0,l.kt)("td",{parentName:"tr",align:null},"\uc790\uccb4, \ucee8\ud2b8\ub864 \ud50c\ub808\uc778")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"TCP"),(0,l.kt)("td",{parentName:"tr",align:null},"\uc778\ubc14\uc6b4\ub4dc"),(0,l.kt)("td",{parentName:"tr",align:null},"30000-32767"),(0,l.kt)("td",{parentName:"tr",align:null},"NodePort \uc11c\ube44\uc2a4\u2020"),(0,l.kt)("td",{parentName:"tr",align:null},"\ubaa8\ub450")))),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"NodePort \ub300\uc5ed\uc774 30000-32767\uc778 \uac83\uc5d0 \uc8fc\ubaa9\ud569\uc2dc\ub2e4")),(0,l.kt)("p",null,"2. kubeadm, kubelet, kubectl \uc124\uce58  "),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"\ud574\ub2f9 \ub0b4\uc6a9\uc740 master, worker \ub178\ub4dc \ub458\ub2e4 \ud574\uc8fc\uc5b4\uc57c \ud569\ub2c8\ub2e4"),"  "),(0,l.kt)("p",null,"\ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uc124\uce58\ud558\uace0 \uc5c5\ub370\uc774\ud2b8 \ud558\uae30 \uc704\ud574 \ud544\uc694\ud55c repository \uc704\uce58\ub97c \uc124\uc815\ud574 \uc8fc\uc5b4\uc57c \ud569\ub2c8\ub2e4.",(0,l.kt)("br",{parentName:"p"}),"\n","repository \uc704\uce58\ub97c \uc124\uc815\ud574 \uc8fc\uae30 \uc704\ud574 \ud544\uc694\ud55c \uae30\ubcf8 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uba3c\uc800 \uc124\uce58\ud574 \uc90d\uc2dc\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"$ sudo apt-get update\n$ sudo apt-get install -y apt-transport-https ca-certificates curl\n")),(0,l.kt)("br",null),(0,l.kt)("p",null,"\uad6c\uae00 \ud074\ub77c\uc6b0\ub4dc\uc758 \uacf5\uac1c \uc0ac\uc774\ub2dd \ud0a4\ub97c \ub2e4\uc6b4\ub85c\ub4dc \ud569\ub2c8\ub2e4.  "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"$ sudo curl -fsSLo /usr/share/keyrings/kubernetes-archive-keyring.gpg https://packages.cloud.google.com/apt/doc/apt-key.gpg\n")),(0,l.kt)("br",null),(0,l.kt)("p",null,"\ucfe0\ubc84\ub124\ud2f0\uc2a4 ",(0,l.kt)("inlineCode",{parentName:"p"},"apt")," \ub808\ud3ec\uc9c0\ud1a0\ub9ac\ub97c \ucd94\uac00\ud569\ub2c8\ub2e4.  "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},'$ echo "deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial master" \\\n| sudo tee /etc/apt/sources.list.d/kubernetes.list\n')),(0,l.kt)("br",null),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"apt")," \ud328\ud0a4\uc9c0 \uc0c9\uc778\uc744 \uc5c5\ub370\uc774\ud2b8\ud558\uace0, kubelet, kubeadm, kubectl\uc744 \uc124\uce58\ud558\uace0 \ud574\ub2f9 \ubc84\uc804\uc744 \uace0\uc815\ud569\ub2c8\ub2e4.  "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"$ sudo apt-get update\n$ sudo apt-get install -y kubelet kubeadm kubectl\n$ sudo apt-mark hold kubelet kubeadm kubectl\n")),(0,l.kt)("br",null),(0,l.kt)("p",null,"3. \ub9c8\uc2a4\ud130 \ub178\ub4dc, \uc6cc\ucee4 \ub178\ub4dc join  "),"a. \ub9c8\uc2a4\ud130 \ub178\ub4dc \uc124\uc815 Container Network Interface\ub85c [flannel][flannel-github]\ub97c \uc0ac\uc6a9\ud560 \uc608\uc815\uc785\ub2c8\ub2e4. (Calico \ud50c\ub7ec\uadf8\uc778\ub3c4 \uc874\uc7ac\ud569\ub2c8\ub2e4) flannel\uc758 default cidr \ub124\ud2b8\uc6cc\ud06c\ub97c \uad6c\uc131\ud560 \uac83\uc774\uae30\uc5d0 10.244.0.0/16\uc744 \uc0ac\uc6a9\ud558\uc5ec kubeadm\uc744 init \uc2dc\ucf1c\uc90d\uc2dc\ub2e4.",(0,l.kt)("p",null,"api \uc11c\ubc84\uc758 \ub178\ucd9c \uc8fc\uc18c\ub294 Master \ub178\ub4dc\uc758 ip \uc8fc\uc18c\ub97c \uc801\uc2b5\ub2c8\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},'$ sudo kubeadm init --pod-network-cidr=10.244.0.0/16 --apiserver-advertise-address=10.0.2.9\n    \n ... \uc0dd\ub7b5 ...\n Your Kubernetes control-plane has initialized successfully!\n     \n  To start using your cluster, you need to run the following as a regular user:\n  \n    mkdir -p $HOME/.kube\n    sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n    sudo chown $(id -u):$(id -g) $HOME/.kube/config\n  \n  Alternatively, if you are the root user, you can run:\n   \n    export KUBECONFIG=/etc/kubernetes/admin.conf\n    \n  You should now deploy a pod network to the cluster.\n  Run "kubectl apply -f [podnetwork].yaml" with one of the options listed at:\n    https://kubernetes.io/docs/concepts/cluster-administration/addons/\n   \n  Then you can join any number of worker nodes by running the following on each as root:\n   \n  kubeadm join 10.0.2.9:6443 --token zxdtkt.mi91c5sbky3ubp08 \\\n      --discovery-token-ca-cert-hash sha256:dc525e7dfce2d699346d6898814936f8276b4b821afa41933f2036ca70f5a04f \n')),(0,l.kt)("br",null),(0,l.kt)("p",null,"kubectl\uc744 \uc0ac\uc6a9\ud558\uae30 \uc704\ud574 \ucf58\uc194 \ucd9c\ub825 \uacb0\uacfc\ub300\ub85c \uc124\uc815\uc744 \ud574\uc90d\uc2dc\ub2e4.  "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"$ mkdir -p $HOME/.kube\n$ sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n$ sudo chown $(id -u):$(id -g) $HOME/.kube/config\n\n# \uc815\uc0c1 \uc124\uce58\uac00 \ub418\uc5c8\ub294\uc9c0 \ubaa8\ub4e0 cluster pod\ub97c \uc870\ud68c\ud574 \ubd05\uc2dc\ub2e4\n$ kubectl get pods -A\n\nNAMESPACE     NAME                               READY   STATUS    RESTARTS   AGE\nkube-system   coredns-558bd4d5db-nkcmg           0/1     Pending   0          6m47s\nkube-system   coredns-558bd4d5db-pnmll           0/1     Pending   0          6m47s\nkube-system   etcd-gpuadmin                      1/1     Running   0          6m54s\nkube-system   kube-apiserver-gpuadmin            1/1     Running   0          7m1s\nkube-system   kube-controller-manager-gpuadmin   1/1     Running   0          7m1s\nkube-system   kube-proxy-wj24j                   1/1     Running   0          6m47s\nkube-system   kube-scheduler-gpuadmin            1/1     Running   0          6m54s\n")),(0,l.kt)("br",null),(0,l.kt)("p",null,"CNI \ub124\ud2b8\uc6cc\ud06c \uc5d0\ub4dc\uc628 Flannel\uc744 \ubc30\ud3ec\ud569\ub2c8\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"$ kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml\n")),(0,l.kt)("br",null),(0,l.kt)("p",null,"Flannel\uc744 \ubc30\ud3ec\ud55c \ud6c4 \ubaa8\ub4e0 pod\ub97c \uc870\ud68c\ud558\uba74 coredns\uac00 Pending\uc5d0\uc11c Running\uc73c\ub85c \ubc14\ub00c\uba70 \ub3d9\uc791\ud558\ub294 \uac83\uc744 \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ud83d\ude00"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"$ kubectl get pod -A\n\nNAMESPACE     NAME                               READY   STATUS    RESTARTS   AGE\nkube-system   coredns-558bd4d5db-nkcmg           1/1     Running   0          46m\nkube-system   coredns-558bd4d5db-pnmll           1/1     Running   0          46m\nkube-system   etcd-gpuadmin                      1/1     Running   0          46m\nkube-system   kube-apiserver-gpuadmin            1/1     Running   0          46m\nkube-system   kube-controller-manager-gpuadmin   1/1     Running   0          46m\nkube-system   kube-flannel-ds-g4vxx              1/1     Running   0          70s\nkube-system   kube-proxy-wj24j                   1/1     Running   0          46m\nkube-system   kube-scheduler-gpuadmin            1/1     Running   0          46m\n")),(0,l.kt)("br",null),(0,l.kt)("p",null,"b. \uc6cc\ucee4 \ub178\ub4dc \uc124\uc815  "),(0,l.kt)("p",null,"\ub9c8\uc2a4\ud130 \ub178\ub4dc\ub97c \uc124\uc815\ud558\uba70 kubeadm \ucd9c\ub825\uc5d0\uc11c \ub098\uc628 \uba85\ub839\uc5b4\uac00 \uc788\uc2b5\ub2c8\ub2e4.  "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"$ kubeadm join 10.0.2.9:6443 --token zxdtkt.mi91c5sbky3ubp08 \\\n      --discovery-token-ca-cert-hash sha256:dc525e7dfce2d699346d6898814936f8276b4b821afa41933f2036ca70f5a04f \n")),(0,l.kt)("p",null,"\ud574\ub2f9 \uba85\ub839\uc5b4\ub97c \uc6cc\ucee4 \ub178\ub4dc\uc5d0\uc11c \uc2e4\ud589\ud558\uba74 join\uc774 \uc644\ub8cc\ub429\ub2c8\ub2e4."),(0,l.kt)("br",null),(0,l.kt)("p",null,"\ub9c8\uc2a4\ud130 \ub178\ub4dc\uc5d0\uc11c \ub178\ub4dc\ub97c \uc870\ud68c\ud574 \ud655\uc778\ud574 \ubd05\uc2dc\ub2e4.  "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"$ kubectl get node\nNAME       STATUS     ROLES                  AGE     VERSION\ncwadmin    Ready      control-plane,master   2m41s   v1.21.0\ngpuadmin   NotReady   <none>                 6s      v1.21.0\n\n# \uc801\ub2f9\ud55c \uc2dc\uac04\uc774 \uc9c0\ub098\uba74 Ready\ub85c \ubc14\ub01d\ub2c8\ub2e4\n\n$ kubectl get node\nNAME       STATUS   ROLES                  AGE     VERSION\ncwadmin    Ready    control-plane,master   4m28s   v1.21.0\ngpuadmin   Ready    <none>                 113s    v1.21.0\n")),(0,l.kt)("br",null),(0,l.kt)("h2",{id:"mini-kube-\uc124\uce58"},"Mini Kube \uc124\uce58"),(0,l.kt)("div",{align:"center"},"![minikube](/img/logos/minikube.svg)"),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"\ud55c\ub300\uc758 \ucef4\ud4e8\ud130\ub97c \uac00\uc9c0\uace0 \uc788\uace0 \uc5ec\ub7ec \uc124\uc815\uc774 \uadc0\ucc2e\uc744 \ub54c"),(0,l.kt)("br",{parentName:"p"}),"\n","\ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uc124\uce58\ud558\uae30 \uc804\uc5d0 \ud658\uacbd\uc744 \ud544\uc694\ud55c \uc810\uac80\ud574 \ubd05\uc2dc\ub2e4."),(0,l.kt)("h3",{id:"\uc694\uad6c\uc0ac\ud56d"},"\uc694\uad6c\uc0ac\ud56d"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"2 CPU \uc774\uc0c1"),(0,l.kt)("li",{parentName:"ul"},"2GB \uc5ec\uc720 \uba54\ubaa8\ub9ac"),(0,l.kt)("li",{parentName:"ul"},"20GB \uc5ec\uc720 \ub514\uc2a4\ud06c"),(0,l.kt)("li",{parentName:"ul"},"VM \ub9e4\ub2c8\uc800 (VirtualBox \uae30\uc900 \uc791\uc131)")),(0,l.kt)("h3",{id:"mini-kube-\uc124\uce58\ud558\uae30"},"Mini Kube \uc124\uce58\ud558\uae30"),(0,l.kt)("p",null,"1. \uc124\uce58\ud558\uae30"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://minikube.sigs.k8s.io/docs/start/"},"\uacf5\uc2dd \ud398\uc774\uc9c0")," \uc5d0\uc11c \uc124\uce58\ud30c\uc77c\uc744 \ubc1b\uc2b5\ub2c8\ub2e4.",(0,l.kt)("br",{parentName:"p"}),"\n","linux\ub294 deb \ub610\ub294 rpm \ud328\ud0a4\uc9c0, windows\ub294 exe \uc778\uc2a4\ud1a8\ub7ec\ub098 Chocolatey\ub85c \ubc1b\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",(0,l.kt)("br",{parentName:"p"}),"\n",(0,l.kt)("a",{parentName:"p",href:"https://jwher.github.io/2021-05-10-install-tar.gz/"},"\ub9ac\ub205\uc2a4 \ud328\ud0a4\uc9c0 \uc124\uce58")),(0,l.kt)("p",null,"2. \ud074\ub7ec\uc2a4\ud130 \uc2dc\uc791\ud558\uae30"),(0,l.kt)("p",null,"\ub2e4\uc74c \uba85\ub839\uc5b4\ub97c \uc785\ub825\ud558\uc5ec \ud074\ub7ec\uc2a4\ud130\ub97c \uc2dc\uc791\ud569\ub2c8\ub2e4. \ucc38 \uc27d\uc8e0?  "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"> minikube start\n")),(0,l.kt)("p",null,"3. \ud074\ub7ec\uc2a4\ud130 \uc0ac\uc6a9\ud558\uae30"),(0,l.kt)("p",null,"\ucfe0\ubc84\ub124\ud2f0\uc2a4 \ucee8\ud2b8\ub864(kubectl)\uc744 \uc0ac\uc6a9\ud574 \ud074\ub7ec\uc2a4\ud130\uc640 \uc0c1\ud638\uc791\uc6a9 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\nkubectl\uc774 \uc5c6\ub2e4\uba74 ",(0,l.kt)("a",{parentName:"p",href:"https://jwher.github.io/2021-05-28-kubernetes-usage/"},"\uc774 \uae00")," \uc744 \uc77d\uc5b4\ubcf4\uc138\uc694. \ud83d\ude0a"),(0,l.kt)("br",null),(0,l.kt)("h2",{id:"docker-desktop-\uc124\uce58"},"Docker Desktop \uc124\uce58"),(0,l.kt)("div",{align:"center"},"![docker](/img/logos/docker.svg)"),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"\ud55c\ub300\uc758 \uc708\ub3c4\uc6b0 \ucef4\ud4e8\ud130\ub97c \uac00\uc9c0\uace0 \uc788\uc744 \ub54c, \ucee4\ub9e8\ub4dc \ub77c\uc778\uc744 \ubcf4\uba74 \uc5b4\uc9c0\ub7ec\uc6b8 \ub54c"),(0,l.kt)("br",{parentName:"p"}),"\n","\uba3c\uc800 ",(0,l.kt)("a",{parentName:"p",href:"https://jwher.github.io/2021-04-13-install-docker/#windows"},"\ub3c4\ucee4 \ub370\uc2a4\ud06c\ud0d1")," \uc774 \uc5c6\ub2e4\uba74 \uc124\uce58\ud569\uc2dc\ub2e4."),(0,l.kt)("h3",{id:"docker-desktop-\uc124\uce58\ud558\uae30"},"Docker Desktop \uc124\uce58\ud558\uae30"),(0,l.kt)("p",null,"1. \ub300\uc26c\ubcf4\ub4dc\ub97c \uc5f4\uace0 \uc124\uc815\uc744 \ub20c\ub7ec\uc90d\ub2c8\ub2e4"),(0,l.kt)("div",{align:"center"},(0,l.kt)("img",{src:"https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/docker-desktop-k8s-setting.png",alt:"docker desktop k8s setting"})),(0,l.kt)("br",null),(0,l.kt)("p",null,"2. Kubernetes \u2013 Enable Kubernetes\ub97c \ub20c\ub7ec\uc90d\ub2c8\ub2e4"),(0,l.kt)("div",{align:"center"},(0,l.kt)("img",{src:"https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/docker-desktop-k8s-enable.png",alt:"docker desktop k8s enable"})),(0,l.kt)("br",null),(0,l.kt)("p",null,"3. Apply & Restart\ub97c \ub20c\ub7ec\uc90d\ub2c8\ub2e4."),(0,l.kt)("div",{align:"center"},(0,l.kt)("img",{src:"https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/docker-desktop-k8s-restart.png",alt:"docker desktop k8s restart"})),(0,l.kt)("p",null,"Kubernetes \uc124\uce58\ub294 \ub9ce\uc740 \ub7c9\uc758 docker container\ub97c \uc0dd\uc131\ud558\uae30 \ub54c\ubb38\uc5d0 \uc0c1\ub2f9\ud55c \uc2dc\uac04\uc744 \uc18c\uc694\ub85c \ud569\ub2c8\ub2e4.",(0,l.kt)("br",{parentName:"p"}),"\n","\uc644\ub8cc\ub418\uba74 \ucee4\ub9e8\ub4dc\ub77c\uc778\uc73c\ub85c \ud655\uc778\ud574 \ubd05\uc2dc\ub2e4."),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"kubectl\uc774 \uc5c6\ub2e4\uba74 ",(0,l.kt)("a",{parentName:"em",href:"https://jwher.github.io/2021-05-28-kubernetes-usage/"},"\uc774 \uae00")," \uc744 \uc77d\uc5b4\ubcf4\uc138\uc694.")," \ud83d\ude0a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"> kubectl version\n")),(0,l.kt)("br",null),(0,l.kt)("h2",{id:"kind-\uc124\uce58"},"Kind \uc124\uce58"),(0,l.kt)("div",{align:"center"},"![kind](/img/logos/kind.svg)"),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"\ud55c\ub300\uc758 \ucef4\ud4e8\ud130\ub97c \uac00\uc9c0\uace0 \uc788\uace0, \uc26c\uc6b4 \uc124\uce58\uc640 \uadf8\ub098\ub9c8 \ube60\ub978(...) \uc131\ub2a5\uc774 \ud544\uc694\ud560 \ub54c")),(0,l.kt)("h3",{id:"kind-\uc124\uce58\ud558\uae30"},"Kind \uc124\uce58\ud558\uae30"),(0,l.kt)("p",null,"1. Install Kind"),(0,l.kt)("p",null,"OS\uc5d0 \ub9de\uac8c \uc124\uce58\ud569\ub2c8\ub2e4"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"# On Linux\n$ curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.10.0/kind-linux-amd64\n$ chmod +x ./kind\n\n# On Mac\n~ curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.10.0/kind-darwin-amd64\n# or\n~ brew install kind\n\n# On Windows\n> curl.exe -Lo kind-windows-amd64.exe https://kind.sigs.k8s.io/dl/v0.10.0/kind-windows-amd64\n# or\n> choco install kind\n")),(0,l.kt)("p",null,"2. \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud074\ub7ec\uc2a4\ud130 \uc0dd\uc131"),(0,l.kt)("p",null,"\ud074\ub7ec\uc2a4\ud130 \uc0dd\uc131 \uc2dc \ucfe0\ube0c\ud50c\ub85c\uc6b0\ub97c \uc0ac\uc6a9\ud560 \uac83\uc774\ubbc0\ub85c port-forwarding\uc744 \ud574\uc8fc\uc5b4\uc57c \ud569\ub2c8\ub2e4.",(0,l.kt)("br",{parentName:"p"}),"\n","\ub2e4\uc74c yaml\uc744 \uc791\uc131\ud569\ub2c8\ub2e4.",(0,l.kt)("br",{parentName:"p"}),"\n","(\uc138\ubd80\uc801\uc778 ingress \uc124\uc815\uc740 ",(0,l.kt)("a",{parentName:"p",href:"https://kind.sigs.k8s.io/docs/user/ingress"},"[\uacf5\uc2dd]Ingress"),"  \ucc38\uace0\ud569\uc2dc\ub2e4)"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'kind: Cluster\napiVersion: kind.x-k8s.io/v1alpha4\nnodes:\n- role: control-plane\n # port forward 80 on the host to 80 on this node\n extraPortMappings:\n - containerPort: 31380\n   hostPort: 31380\n   # optional: set the bind address on the host\n   # 0.0.0.0 is the current default\n   listenAddress: "0.0.0.0"\n   # optional: set the protocol to one of TCP, UDP, SCTP.\n   # TCP is the default\n   protocol: TCP\n')),(0,l.kt)("br",null),"\ud074\ub7ec\uc2a4\ud130\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4.",(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},'> kind create cluster\n# or\n> kind create cluster --config {config}.yaml\n\n  Creating cluster "kind" ...\n\u2022 Ensuring node image (kindest/node:v1.20.2) \ud83d\uddbc  ...\n\u2713 Ensuring node image (kindest/node:v1.20.2) \ud83d\uddbc\n\u2022 Preparing nodes \ud83d\udce6   ...\n\u2713 Preparing nodes \ud83d\udce6\n\u2022 Writing configuration \ud83d\udcdc  ...\n\u2713 Writing configuration \ud83d\udcdc\n\u2022 Starting control-plane \ud83d\udd79\ufe0f  ...\n\u2713 Starting control-plane \ud83d\udd79\ufe0f\n\u2022 Installing CNI \ud83d\udd0c  ...\n\u2713 Installing CNI \ud83d\udd0c\n\u2022 Installing StorageClass \ud83d\udcbe  ...\n\u2713 Installing StorageClass \ud83d\udcbe\nSet kubectl context to "kind-kind"\nYou can now use your cluster with:\n\nkubectl cluster-info --context kind-kind\n\nHave a question, bug, or feature request? Let us know! https://kind.sigs.k8s.io/#community \ud83d\ude42\n')),(0,l.kt)("p",null,"3. Access Cluster"),(0,l.kt)("p",null,"\ucfe0\ubc84\ub124\ud2f0\uc2a4 \ub178\ub4dc \uc258\uc5d0 \uc811\uc18d\ud569\ub2c8\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},'# \ub514\ud3f4\ud2b8 \uc258\uc774 bash\uac00 \uc544\ub2c8\uba74\n# /bin/bash\n\n$ kubectl --version\n \nClient Version: version.Info{Major:"1", Minor:"20", GitVersion:"v1.20.2", GitCommit:"faecb196815e248d3ecfb03c680a4507229c2a56", GitTreeState:"clean", BuildDate:"2021-01-21T01:10:43Z", GoVersion:"go1.15.5", Compiler:"gc", Platform:"linux/amd64"}\nThe connection to the server localhost:8080 was refused - did you specify the right host or port?\n\n# conf \ud30c\uc77c\uc744 \ubcf5\uc0ac\ud574 \uc8fc\uba74 kubectl\uc744 \uc774\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4\n$ mkdir -p $HOME/.kube\n$ cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n$ chown $(id -u):$(id -g) $HOME/.kube/config\n\n$ kubectl --version\n\nClient Version: version.Info{Major:"1", Minor:"20", GitVersion:"v1.20.2", GitCommit:"faecb196815e248d3ecfb03c680a4507229c2a56", GitTreeState:"clean", BuildDate:"2021-01-21T01:10:43Z", GoVersion:"go1.15.5", Compiler:"gc", Platform:"linux/amd64"}\nServer Version: version.Info{Major:"1", Minor:"20", GitVersion:"v1.20.2", GitCommit:"faecb196815e248d3ecfb03c680a4507229c2a56", GitTreeState:"clean", BuildDate:"2021-01-21T01:11:42Z", GoVersion:"go1.15.5", Compiler:"gc", Platform:"linux/amd64"}\n')),(0,l.kt)("br",null),"\ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud074\ub7ec\uc2a4\ud130\ub97c \ud655\uc778\ud574 \ubd05\uc2dc\ub2e4.\ud83c\udf89",(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"$ kubectl get node\n\nNAME                 STATUS   ROLES                  AGE   VERSION\nkind-control-plane   Ready    control-plane,master   23m   v1.20.2\n\n$ kubectl get pod -A\n\nNAMESPACE            NAME                                         READY   STATUS    RESTARTS   AGE\nkube-system          coredns-74ff55c5b-jwwg7                      1/1     Running   0          23m\nkube-system          coredns-74ff55c5b-v4l25                      1/1     Running   0          23m\nkube-system          etcd-kind-control-plane                      1/1     Running   0          23m\nkube-system          kindnet-fqkvr                                1/1     Running   0          23m\nkube-system          kube-apiserver-kind-control-plane            1/1     Running   0          23m\nkube-system          kube-controller-manager-kind-control-plane   1/1     Running   0          23m\nkube-system          kube-proxy-hq6qz                             1/1     Running   0          23m\nkube-system          kube-scheduler-kind-control-plane            1/1     Running   0          23m\nlocal-path-storage   local-path-provisioner-78776bfc44-pv9gw      1/1     Running   0          23m\n")),(0,l.kt)("br",null),(0,l.kt)("h2",{id:"tips"},"Tips"),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"\ubd81\ub9c8\ud06c \ud558\uace0 \ubcf4\uc138\uc694!")),(0,l.kt)("div",{align:"center"},(0,l.kt)("img",{src:"https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/cute.jpg",alt:"\uadc0\uc5ec\uc6cc"})),(0,l.kt)("p",null,"\uc790, \uc774\uc81c \ub2f9\uc2e0\ub3c4 \uc791\uace0 \uadc0\uc5ec\uc6b4 kubernetes\ub97c \uac00\uc9c0\uace0 \uc788\uc2b5\ub2c8\ub2e4!",(0,l.kt)("br",{parentName:"p"}),"\n","\uc774\uc81c \uc798 \ub3cc\ubd10\uc918\uc57c\uaca0\ub124\uc694"),(0,l.kt)("br",null),(0,l.kt)("p",null,"a. worker \ub178\ub4dc\uc5d0\uc11c kubectl \uc0ac\uc6a9",(0,l.kt)("br",{parentName:"p"}),"\n","\ubcf4\uc548 \ubb38\uc81c\ub85c \uad8c\uc7a5\ud558\uc9c4 \uc54a\uc73c\ub098 admin.config\ub97c \ubcf5\uc0ac\ud574 worker\uc5d0\uc11c kubectl\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.  "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"# \uc55e\uc11c kubeadm init \ub54c \uc0ac\uc6a9\ud55c \uba85\ub839\uc5b4 \uc785\ub2c8\ub2e4\n# worker \ub178\ub4dc\uc5d0\uc11c\n$ mkdir -p $HOME/.kube\n\n# master \ub178\ub4dc\uc5d0 \ub2e4\uc74c \uc704\uce58 \ud30c\uc77c\uc744 worker \ub178\ub4dc\ub85c \ubcf5\uc0ac\ud569\ub2c8\ub2e4\n# scp\ub97c \uc0ac\uc6a9\ud55c\ub2e4\uba74 master \ub178\ub4dc\uc5d0\uc11c\n$ scp /etc/kubernetes/admin.conf {user}@{ip}:{HOME}/.kube/config\n\n# \uad8c\ud55c \uc124\uc815\uc744 \ud574\uc90d\ub2c8\ub2e4\n# worker \ub178\ub4dc\uc5d0\uc11c\n$ sudo chown $(id -u):$(id -g) $HOME/.kube/config\n")),(0,l.kt)("p",null,"(\uc778\uc99d\uc11c \ubc1c\uae09\uc73c\ub85c \uc678\ubd80\uc5d0\uc11c API \uc11c\ubc84 \uc811\uc18d\uc740 \ub2e4\uc74c\uc5d0 \uc791\uc131)"),(0,l.kt)("br",null),(0,l.kt)("p",null,"b. \ud1a0\ud070 \uc7ac\ubc1c\uae09",(0,l.kt)("br",{parentName:"p"}),"\n","kubeadm\uc5d0\uc11c \uc0dd\uc131\ub41c \ud1a0\ud070\uc740 \ub9cc\ub8cc\uae30\uac04\uc774 \ud558\ub8e8\uc785\ub2c8\ub2e4.",(0,l.kt)("br",{parentName:"p"}),"\n","\ub530\ub77c\uc11c \uc0c8\ub86d\uac8c \ub178\ub4dc\ub97c \ucd94\uac00\ud560 \uc0c1\ud669\uc774 \uc628\ub2e4\uba74 \ud1a0\ud070\uc744 \uc7ac\ubc1c\uae09 \ubc1b\uc544\uc57c \ud569\ub2c8\ub2e4.  "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"# \ud1a0\ud070\uc744 \uc870\ud68c\ud569\ub2c8\ub2e4\n$ kubeadm token list\n\nTOKEN     TTL       EXPIRES   USAGES    DESCRIPTION      EXTRA GROUPS\n\n# \uc544\ubb34 \uac83\ub3c4 \uc870\ud68c\ub418\uc9c0 \uc54a\uc73c\uba74 \uc0c8\ub85c \uc0dd\uc131\ud569\ub2c8\ub2e4\n$ kubeadm token create\n\n# ca cert hash\ub97c \uc5bb\uae30 \uc704\ud574 \ub2e4\uc74c \uba85\ub839\uc5b4\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4\n$ openssl x509 -pubkey -in /etc/kubernetes/pki/ca.crt | openssl rsa -pubin -outform der 2>/dev/null | openssl dgst -sha256 -hex | sed 's/^.* //'\n\n# \uc774\uc81c TOKEN\uacfc hash \uac12\uc744 \uc5bb\uc5c8\uc73c\ub2c8 \uc0c8\ub86d\uac8c \ub178\ub4dc\ub97c join\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4\n# \uc0c8 worker \ub178\ub4dc\uc5d0\uc11c\n$ kubeadm join {k8s API server ip}:{PORT 6443} --token {TOKEN} --discovery-token-ca-cert-hash sha256:{HASH}\n")),(0,l.kt)("br",null),(0,l.kt)("h3",{id:"reference"},"Reference"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://www.reddit.com/r/kubernetes/comments/be0415/k3s_minikube_or_microk8s/"},"[\ub808\ub527]K3s, minikube or microk8s?"),(0,l.kt)("br",{parentName:"p"}),"\n",(0,l.kt)("a",{parentName:"p",href:"https://kubernetes.io/ko/docs/setup/production-environment/tools/kubeadm/install-kubeadm/"},"[\uacf5\uc2dd]kubeadm \uc124\uce58\ud558\uae30"),(0,l.kt)("br",{parentName:"p"}),"\n",(0,l.kt)("a",{parentName:"p",href:"https://medium.com/finda-tech/overview-8d169b2a54ff"},"\ucfe0\ubc84\ub124\ud2f0\uc2a4(kubernetes) \uc124\uce58 \ubc0f \ud658\uacbd \uad6c\uc131\ud558\uae30"),(0,l.kt)("br",{parentName:"p"}),"\n",(0,l.kt)("a",{parentName:"p",href:"https://sarc.io/index.php/cloud/1383-join-token"},"\ucfe0\ubc84\ub124\ud2f0\uc2a4 \ub178\ub4dc \uc870\uc778(Join)\uc2dc Token \uac12 \ud655\uc778"),"    "))}m.isMDXComponent=!0}}]);
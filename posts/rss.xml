<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>JWHer Tech Blog Blog</title>
        <link>https://jwher.github.io/posts</link>
        <description>JWHer Tech Blog Blog</description>
        <lastBuildDate>Fri, 29 Sep 2023 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>kr</language>
        <item>
            <title><![CDATA[RISC 컴퓨터를 위한 사례]]></title>
            <link>https://jwher.github.io/posts/the-case-for-the-reduced-instruction-set-computer</link>
            <guid>https://jwher.github.io/posts/the-case-for-the-reduced-instruction-set-computer</guid>
            <pubDate>Fri, 29 Sep 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[The Case for the Reduced Instruction Set Computer]]></description>
            <content:encoded><![CDATA[<p><a href="/posts/the-case-for-the-reduced-instruction-set-computer"><img loading="lazy" alt="risc" src="/assets/images/risc-7db53d850ca1445208bee391ff8fd044.jpeg" width="700" height="487" class="img_ev3q"></a><br>
<em>이 글은 Patterson과 Ditzel의 <a href="https://inst.eecs.berkeley.edu/~n252/paper/RISC-patterson.pdf" target="_blank" rel="noopener noreferrer">The case for the Reduced Instruction Set Computer</a>를 읽고 작성했습니다.</em><br>
<em>최대한 번역된 단어를 통일하였으나 원문을 보는것을 권장합니다.</em>  </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="개요">개요<a href="#개요" class="hash-link" aria-label="Direct link to 개요" title="Direct link to 개요">​</a></h2><p><em>Introduction</em>  </p><p>컴퓨터 아키텍트의 최우선 목표 중 하나는 그들의 계승자보다 <strong><em>비용-효율적(cost-effective)</em></strong>인 컴퓨터를 디자인 하는 것입니다.
<em>비용 효율적</em>은  </p><ol><li>기기를 제조하는데 필요한 <strong>하드웨어의 가격</strong></li><li>아키텍처와 관련해 발생하는 하드웨어와 후속 프로그램의 <strong>디버깅 비용</strong>
을 포함합니다.</li></ol><p>컴퓨터 제품군의 역사를 살펴보면, 가장 흔한 아키텍처 변화는 점점 더 <strong>복잡한 기기</strong>를 만드는 방향임을 찾을 수 있습니다.
추측하건데 이 추가적인 복잡성은 새로운 모델의 <em>비용-효율적</em>임을 고려한 긍정적인 거래입니다.</p><p>이 글에서는 이 방향이 언제나 <em>비용-효율적</em>이지 않고, 좋은것보다 <strong>해를 끼치는</strong> 쪽에 가까울 수 있음을 제안합니다.
우리는 <strong>Reduced Instruction Set Computer(RISC)</strong>가 <strong>Complex Instruction Set Computer(CISC)</strong>보다 더 <em>비용-효율적</em>일 수 있음을 검증합니다.
이 글은 다음 세대의 VLSI 컴퓨터가 <strong>CISC보다 RISC로 구현되는게 더 효과적</strong>일 수 있음을 논증합니다.</p><p>복잡성의 증가 예시로, IBM <strong>System/3</strong>에서 <strong>System/38</strong> <a href="#utley78">[Utley78]</a>과 DEC <strong>PDP-11</strong> 에서 <strong>VAX11</strong>로 변화를 고려했습니다.
복잡성은 컨트롤 스토어의 크기로 양을 의미합니다; DEC은 <strong>PDP 11/40</strong>의 256x56에서 <strong>VAX 11/780</strong>의 5120x96으로 커졌습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="복잡성-증가의-이유">복잡성 증가의 이유<a href="#복잡성-증가의-이유" class="hash-link" aria-label="Direct link to 복잡성 증가의 이유" title="Direct link to 복잡성 증가의 이유">​</a></h2><p><em>Reasons for Increased Complexity</em>  </p><p>왜 컴퓨터는 점점 복잡해질까요? 몇가지 이유를 생각해 볼 수 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-메모리의-속도-vs-cpu의-속도">1. 메모리의 속도 vs CPU의 속도<a href="#1-메모리의-속도-vs-cpu의-속도" class="hash-link" aria-label="Direct link to 1. 메모리의 속도 vs CPU의 속도" title="Direct link to 1. 메모리의 속도 vs CPU의 속도">​</a></h3><p><em>Speed of Memory vs. Speed of CPU</em>  </p><p>John Cocke에 따르면 복잡성은 <strong>701</strong>에서 <strong>709</strong>로 전환할 때 시작되었습니다. <a href="#cocke80">[Cocke80]</a>
<strong>701 CPU</strong>는 핵심 메인 메모리보다 10배 빨랐습니다;
이는 <em>서브루틴으로 구현된 어떤 기본요소</em>도 <em>명령어 기본 요소</em>보다 많이 느리게 만들었습니다.
따라서 부동소수점 서브루틴은 <strong>709</strong> 아키텍처에서 극적인 이득인 부분이 되었습니다.
<strong>709</strong>를 더 복잡하게 만든 결과 <strong>701</strong>보다 비용-효율적으로 발전했습니다.</p><p>그때부터 많은 "고수준의" 명령어가 성능을 향상시키기 위한 목적으로 기기에 추가되었습니다.
이 방향은 <strong>속도의 불균형</strong>에서 비롯되었음을 기억하세요;
아키텍트들이 이 불균형이 그들의 디자인을 막고 있는지 스스로 질문했는지는 불분명합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-마이크로코드와-lsi-기술">2. 마이크로코드와 LSI 기술<a href="#2-마이크로코드와-lsi-기술" class="hash-link" aria-label="Direct link to 2. 마이크로코드와 LSI 기술" title="Direct link to 2. 마이크로코드와 LSI 기술">​</a></h3><p><em>Microcode and LSI Technology</em></p><p>마이크로프로그래밍 제어는 하드웨어 제어 <a href="#husson70">[Husson70]</a>보다 더 비용-효율적으로 복잡한 아키텍처를 구현할 수 있게 해줍니다.
60년대 후반과 70년대 초반에 만들어진 집적 회로 메모리의 발전으로 인해 마이크로프로그래밍 제어가 거의 모든 경우에 더 비용-효율적인 접근 방식이 되었습니다.</p><p>일단 마이크로프로그램 제어를 사용하기로 결정되면, <strong>명령어 세트를 확장하는 데 드는 비용은 매우 적습니다</strong>;
컨트롤 스토어의 몇 단어만 더하면 됩니다.</p><p>제어 메모리의 크기는 종종 2의 제곱이기 때문에,
때로는 제어 메모리를 완전히 채우기 위해 마이크로 프로그램을 확장하여 추가 하드웨어 비용 없이 명령어 세트를 더 복잡하게 만들 수 있습니다.</p><p>따라서 구현 기술의 발전은 본질적으로 전통적인 <strong>서브루틴을 아키텍처로 이동</strong>시킨 아키텍처의 비용-효율적인 구현으로 이어졌습니다.
그러한 명령의 예로는 문자열 편집, 정수에서 부동소수점으로 변환, 다항식 평가와 같은 수학적 연산이 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-코드-밀도">3. 코드 밀도<a href="#3-코드-밀도" class="hash-link" aria-label="Direct link to 3. 코드 밀도" title="Direct link to 3. 코드 밀도">​</a></h3><p><em>Code Density</em></p><p>초기 컴퓨터의 경우, 메모리는 매우 비쌌습니다.
따라서 매우 <strong>컴팩트한 프로그램</strong>을 갖는 것은 비용-효율적이었습니다.</p><p>복잡한 명령어 세트는 종종 "제안된" 코드 압축에서 예고됩니다.
그러나 명령어 세트의 복잡성을 증가시켜 코드 밀도를 얻으려는 시도는 종종 <strong>양날의 검</strong>입니다,
더 많은 명령과 주소 지정 모드는 이를 나타내기 위해 <strong>더 많은 비트가 필요</strong>하기 때문입니다.</p><p>코드 압축이 원래 명령어 세트를 정리하는 것만으로도 쉽게 달성될 수 있음을 시사합니다.
코드 압축이 중요하지만, 10% 더 많은 메모리 비용은 종종 아키텍처 "혁신"에 의해 CPU에서 10%를 짜내는 비용보다 <strong>훨씬 저렴</strong>합니다.
대규모 CPU의 비용은 추가 회로 패키지에 필요한 반면,
단일 칩 CPU의 비용은 더 큰 (따라서 느린) 제어 Programmable Logic Array(PLA)로 인해 성능이 느려질 가능성이 더 큽니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-마케팅-전략">4. 마케팅 전략<a href="#4-마케팅-전략" class="hash-link" aria-label="Direct link to 4. 마케팅 전략" title="Direct link to 4. 마케팅 전략">​</a></h3><p><em>Marketing Strategy</em>  </p><p>불행하게도, 컴퓨터 회사의 주요 목표는 가장 비용-효율적인 컴퓨터를 설계하는 것이 아닙니다;
컴퓨터 회사의 주요 목표는 컴퓨터를 판매함으로써 <strong>가장 많은 돈을 버는 것</strong>입이다.</p><p>컴퓨터를 판매하기 위해 제조업체는 고객에게 그들의 디자인이 경쟁사보다 우수하다는 것을 확신시켜야 합니다.
복잡한 명령 세트는 확실히 더 나은 컴퓨터의 주요 "마케팅" 증거입니다.</p><p>그들의 직업을 유지하기 위해, 아키텍트는 내부 경영진에게 새롭고 더 나은 디자인을 계속 판매해야 합니다.
명령어의 수와 "힘"은 복잡한 명령어 세트의 실제 사용이나 <strong>비용-효율성에 관계없이</strong> 아키텍처를 홍보하는 데 종종 사용됩니다.</p><p>어떤 의미에서 컴퓨터 구매자가 복잡성과 비용 효율성의 문제에 의문을 제기하지 않는 한 제조업체와 디자이너는 이에 대해 비난받을 수 없습니다.
실리콘 하우스의 경우, 고급 마이크로프로세서는 종종 드로우 카드로 사용되는데,
실제 이익은 고객이 상대적으로 저렴한 CPU와 함께 많은 양의 메모리를 구매하도록 유인하는 것에서 비롯되기 때문입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-상위-호환성">5. 상위 호환성<a href="#5-상위-호환성" class="hash-link" aria-label="Direct link to 5. 상위 호환성" title="Direct link to 5. 상위 호환성">​</a></h3><p><em>Upward Compatibility</em></p><p>마케팅 전략과 일치하는 것은 <strong>상위 호환성에 대한 인식된 필요성</strong>입니다.</p><p>상위 호환성은 디자인을 개선하는 주된 방법은 새롭고 일반적으로 더 복잡한 기능을 추가하는 것임을 의미합니다.
명령이나 주소 지정 모드가 아키텍처에서 제거되는 경우는 거의 없으며,
이로 인해 일련의 컴퓨터에 대한 명령어의 수와 <strong>복잡성이 점진적으로 증가</strong>합니다.</p><p>새로운 아키텍처는 성공적인 경쟁자의 기기에서 발견되는 모든 명령어를 포함하는 경향이 있습니다.
아마도 아키텍트와 고객이 "좋은" 명령어 세트를 정의하는 것에 대한 실질적인 이해가 없기 때문일 것입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-고급-언어-지원">6. 고급 언어 지원<a href="#6-고급-언어-지원" class="hash-link" aria-label="Direct link to 6. 고급 언어 지원" title="Direct link to 6. 고급 언어 지원">​</a></h3><p><em>Support for High Level Languages</em></p><p>고급 언어의 사용이 점점 더 인기를 끌면서,
제조업체들은 이를 지원하기 위해 <strong>더 강력한 명령어를 지원</strong>하길 열망했습니다.
불행히도 더 복잡한 명령어 세트가 실제로 그러한 지원을 제공했다는 것을 시사하는 증거는 거의 없습니다.</p><p>반대로, 우리는 많은 경우에 복잡한 명령어 세트가 유용한 것보다 더 해롭다고 주장합니다.
고급 언어를 지원하려는 노력은 칭찬할 만하지만, 우리는 종종 잘못된 문제에 초점을 맞추고 있다고 느낍니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="7-멀티프로그래밍-사용">7. 멀티프로그래밍 사용<a href="#7-멀티프로그래밍-사용" class="hash-link" aria-label="Direct link to 7. 멀티프로그래밍 사용" title="Direct link to 7. 멀티프로그래밍 사용">​</a></h3><p><em>Use of Multiprogramming</em></p><p>시분할의 증가는 컴퓨터가 실행 프로세스를 중단하고 나중에 다시 시작할 수 있는 능력으로 <strong>인터럽트에 대응</strong>할 수 있도록 요구했습니다.</p><p>메모리 관리와 페이징은 또한 완료되기 전에 명령을 중지하고 나중에 다시 시작할 수 있어야 합니다.
이들 중 어느 것도 명령어 세트 자체의 설계에 큰 영향을 미치지 않았지만, 구현에 직접적인 영향을 미쳤습니다.</p><p>복잡한 명령어와 주소 지정 모드는 중단 시 <strong>저장해야 하는 상태를 증가</strong>시킵니다.
상태를 저장하는 것은 종종 섀도우 레지스터의 사용과 마이크로코드의 복잡성의 큰 증가를 포함합니다.
이 복잡성은 복잡한 명령어나 부작용(side effects)이 있는 주소 모드 없는 기기에서 사라집니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cisc는-어떻게-사용되어-왔는가">CISC는 어떻게 사용되어 왔는가?<a href="#cisc는-어떻게-사용되어-왔는가" class="hash-link" aria-label="Direct link to CISC는 어떻게 사용되어 왔는가?" title="Direct link to CISC는 어떻게 사용되어 왔는가?">​</a></h2><p><em>How Have CISC's Been Used?</em></p><p>소프트웨어 비용 상승의 흥미로운 결과는 고급 언어에 대한 의존도가 증가하고 있다는 것입니다.
한 가지 결과는 컴파일러 작성자가 기기가 어떤 명령을 실행할지 결정하는 어셈블리 언어 프로그램을 대체하고 있다는 것입니다.</p><p>컴파일러는 종종 <strong>복잡한 명령어를 활용할 수 없으며</strong>, 어셈블리 언어 프로그래머가 기뻐하는 교활한 트릭을 사용하지도 않습니다.
컴파일러와 어셈블리 언어 프로그래머는 또한 주어진 시간-공간 절충안에서 <strong>유용하지 않은 명령어 세트</strong>의 일부를 정당하게 무시합니다
그 결과는 종종 아키텍처의 상당히 작은 부분만 사용되고 있다는 것입니다.
예를 들어, 특정 IBM <strong>360</strong> 컴파일러의 측정에 따르면 <strong>10개의 명령이 실행된 모든 명령의 80%</strong>를 차지하며,
16개는 90%, 21개는 95%, 30개는 99%를 차지합니다 <a href="#alexander75">[Alexander75]</a>.</p><p>다양한 컴파일러와 어셈블리 언어 프로그램에 대한 또 다른 연구는 "<strong>CDC-3600</strong>의 명령어 세트가 현재 사용 가능한 명령어의 1/2 또는 1⁄4로 줄어들면 작은 유연성만 잃을 것"이라고 결론지었습니다 <a href="#foster71">[Foster71]</a>.
Shustek은 IBM <strong>370</strong>에 대해 "여러 번 관찰된 바와 같이, 프로그램 실행의 대부분을 차지하는 opcode는 매우 적습니다. 예를 들어, 코볼 프로그램은 사용 가능한 183개의 명령 중 84개를 실행하지만, 48개가 실행된 모든 명령의 99.08%를 나타내고, 26개는 90.28 %를 나타냅니다."고 지적합니다 <a href="#shustek78">[Shustek78]</a>.
주소 지정 모드를 사용할 때에도 비슷한 통계가 발견됩니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cisc-구현의-결과">CISC 구현의 결과<a href="#cisc-구현의-결과" class="hash-link" aria-label="Direct link to CISC 구현의 결과" title="Direct link to CISC 구현의 결과">​</a></h2><p><em>Consequences of CISC Implementations</em>  </p><p>기술의 급격한 변화와 CISC 구현의 어려움은 몇 가지 흥미로운 효과를 가져왔습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-빨라진-메모리">1. 빨라진 메모리<a href="#1-빨라진-메모리" class="hash-link" aria-label="Direct link to 1. 빨라진 메모리" title="Direct link to 1. 빨라진 메모리">​</a></h3><p><em>Faster Memory</em></p><p>반도체 메모리의 발전은 CPU와 메인 메모리 사이의 상대적인 속도 차이에 대한 가정에 몇 가지 변화를 가져왔습니다.
<strong>반도체 메모리는 빠르고 상대적으로 저렴</strong>합니다.
최근 많은 시스템에서 캐시 메모리를 사용하면서 CPU와 메모리 속도의 차이가 더욱 줄어들었습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-불합리한-구현">2. 불합리한 구현<a href="#2-불합리한-구현" class="hash-link" aria-label="Direct link to 2. 불합리한 구현" title="Direct link to 2. 불합리한 구현">​</a></h3><p><em>Irrational Implementations</em></p><p>아마도 복잡한 아키텍처 구현의 가장 특이한 면은 "합리적인" 구현의 어려움입니다.
이것으로 우리는 <strong>특별한 명령어가 항상 일련의 간단한 명령어들보다 빠른 것은 아니</strong>라는 것을 의미합니다.</p><p>한 가지 예는 IBM <strong>370</strong> <a href="#peutoshustek77">[Peuto,Shustek77]</a>에서 Peuto와 Shustek에 의해 발견되었습니다;
그들은 일련의 로드 명령이 4개 미만의 레지스터에 대한 로드 다중 명령보다 빠르다는 것을 발견했습니다.
이 사례는 일반적인 프로그램에서 여러 명령의 40%를 다룹니다.</p><p>다른 하나는 <strong>VAX-11/780</strong>에서 나옵니다.
INDEX 명령은 인덱스가 배열 경계에 맞는지 확인하는 동시에 배열 요소의 주소를 계산하는 데 사용됩니다.
이것은 분명히 고급 언어의 오류를 정확하게 감지하는 중요한 기능입니다.
우리는 VAX-11/780에서 하나의 "고급" 명령어를 몇몇의 작은 명령어로(COMPARE, JUMMP, LESS, UNSIGNED, ADD, MULTIPLY)로 교체했을 때 같은 기능을 45% 빠른것을 발견했습니다.</p><p>게다가, 컴파일러가 하한이 0인 경우를 이용했다면, 간단한 일련의 명령어가 60% 더 빨랐습니다.
분명히 더 작은 코드가 항상 더 빠른 코드를 암시하는 것은 아니며, "고급" 명령어도 더 빠른 코드를 암시하지도 않습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-연장된-디자인-시간">3. 연장된 디자인 시간<a href="#3-연장된-디자인-시간" class="hash-link" aria-label="Direct link to 3. 연장된 디자인 시간" title="Direct link to 3. 연장된 디자인 시간">​</a></h3><p><em>Lengthend Design Time</em></p><p>때때로 무시되는 비용 중 하나는 새로운 아키텍처를 개발하는 시간입니다.
CISC의 복제 비용이 낮을 수 있지만, 설계 시간은 크게 확장되었습니다.</p><p>DEC는 <strong>PDP-1</strong>을 설계하고 납품을 시작하는 데 6개월 밖에 걸리지 않았지만,
이제 <strong>VAX</strong>와 같은 기기에 대해 동일한 주기를 거치는 데 최소 3년이 걸립니다. -1)</p><blockquote><p>1) 어떤것은 다른 설명을 제공합니다.
이제 모든 것이 더 오래 걸리는데(소프트웨어, 우편, 원자력 발전소), 왜 컴퓨터는 안 되나요?
또한 젊고 배고픈 회사는 아마도 기존 회사보다 시간이 덜 걸릴 것이라고 언급합니다.
이러한 관찰이 DEC의 경험을 부분적으로 설명할 수 있지만, 우리는 상황에 관계없이 아키텍처의 복잡성이 설계 주기에 영향을 미친다고 믿습니다.</p></blockquote><p>이 <strong>긴 설계 시간은 결과 구현의 품질에 큰 영향</strong>을 미칠 수 있습니다.
기기는 3년 전 기술로 발표되거나 설계자는 좋은 구현 기술을 예측하고 기기를 구축하는 동안 그 기술을 개척하려고 시도해야 합니다.
설계 시간을 줄이는 것이 결과 기기에 매우 긍정적인 이점임이 분명합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-디자인-에러의-증가">4. 디자인 에러의 증가<a href="#4-디자인-에러의-증가" class="hash-link" aria-label="Direct link to 4. 디자인 에러의 증가" title="Direct link to 4. 디자인 에러의 증가">​</a></h3><p><em>Increased Design Errors</em></p><p>복잡한 명령어 세트의 주요 문제 중 하나는 설계를 <strong>디버깅</strong>하는 것입니다;
이것은 일반적으로 마이크로 프로그램 제어에서 오류 제거를 의미합니다.</p><p>문서화하기는 어렵지만 거의 모든 IBM <strong>360</strong> 제품군에서 이러한 수정이 주요 문제였을 가능성이 높은데, 읽기 전용 컨트롤 스토어를 사용했기 때문입니다.
<strong>370</strong> 라인은 하드웨어 비용 감소로 인해 변경 가능한 컨트롤 스토어를 독점적으로 사용하지만, <strong>360</strong>의 오류에 대한 나쁜 경험으로 인해 더 가능성이 높습니다.</p><p>컨트롤 스토어는 플로피 디스크에서 로드되어 마이크로코드를 운영 체제와 유사하게 유지할 수 있습니다;
버그가 복구되고 업데이트된 버전의 마이크로코드가 있는 새로운 플로피가 필드에 출시되었습니다.</p><p><strong>VAX 11/780</strong> 설계팀은 마이크로코드 오류의 가능성을 깨달았습니다.
그들의 해결책은 Field Programmable Logic Array와 1024단어의 Writable Control Store(WCS)를 사용하여 마이크로코드 오류를 패치하는 것이었습니다.
다행히 DEC는 그들의 경험에 대해 더 개방적이어서 우리는 50개 이상의 패치가 만들어졌다는 것을 알고 있습니다.
마지막 오류가 발견되었다고 믿는 사람은 거의 없습니다. -2)</p><blockquote><p>2) 각 패치는 여러 마이크로 명령어를 WCS에 넣어야 한다는 것을 의미하므로,
50개의 패치에는 252개의 마이크로 명령어가 필요합니다.
복잡한 VAX 명령어에는 오류가 있을 수 있기 때문에,
일부는 WCS에서만 구현되어 패치와 기존 명령어는 1024단어의 상당 부분을 사용합니다.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="risc와-vlsi">RISC와 VLSI<a href="#risc와-vlsi" class="hash-link" aria-label="Direct link to RISC와 VLSI" title="Direct link to RISC와 VLSI">​</a></h2><p><em>RISC and VLSI</em></p><p>단일 칩 VLSI 컴퓨터의 설계는 CISC의 문제를 멀티 칩 SSI(Small Scale Integration) 구현보다 훨씬 더 치명적으로 만듭니다.
몇 가지 요인은 합리적인 설계 대안으로 RISC 컴퓨터를 나타냅니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-구현-타당성">1. 구현 타당성<a href="#1-구현-타당성" class="hash-link" aria-label="Direct link to 1. 구현 타당성" title="Direct link to 1. 구현 타당성">​</a></h3><p><em>Implementation Feasibility</em></p><p>많은 것이 전체 CPU 디자인을 단일 칩에 맞출 수 있는 것에 달려 있습니다. 복잡한 아키텍처는 덜 복잡한 아키텍처보다 주어진 기술에서 실현될 가능성이 적습니다. 좋은 예는 DEC의 <strong>VAX</strong> 컴퓨터 시리즈입니다. 하이엔드 모델은 인상적으로 보일 수 있지만, 아키텍처의 복잡성은 현재 설계 규칙으로 단일 칩에 대한 구현을 완전히 불가능하지는 않더라도 매우 어렵게 만듭니다. VLSI 기술의 개선은 결국 단일 칩 버전을 실현 가능하게 만들 것이지만, 덜 복잡하지만 똑같은 기능을 하는 32비트 아키텍처가 실현된 후에만 가능합니다. 따라서 RISC 컴퓨터는 <strong>더 일찍 실현</strong>될 수 있는 이점이 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-디자인-시간">2. 디자인 시간<a href="#2-디자인-시간" class="hash-link" aria-label="Direct link to 2. 디자인 시간" title="Direct link to 2. 디자인 시간">​</a></h3><p><em>Design Time</em></p><p>설계 어려움은 VLSI 컴퓨터의 성공에 중요한 요소입니다. VLSI 기술이 약 2년마다 칩 밀도를 두 배로 늘린다면, 설계하고 디버깅하는 데 <strong>2년 밖에 걸리지 않는 설계는 잠재적으로 훨씬 우수</strong>한 기술을 사용할 수 있으므로 설계하고 디버깅하는 데 4년이 걸리는 설계보다 더 효과적일 수 있습니다. 새로운 마스크(<em>전자회로가 그려진 유리판</em>)의 처리 시간은 일반적으로 몇 달 단위로 측정되기 때문에, 각 오류 배치는 제품 배송을 다른 분기로 지연시킵니다; 일반적인 예가 <strong>Z8000</strong>과 <strong>MC68000</strong>의 1-2년 지연입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-속도">3. 속도<a href="#3-속도" class="hash-link" aria-label="Direct link to 3. 속도" title="Direct link to 3. 속도">​</a></h3><p><em>Speed</em></p><p>비용 효율성에 대한 궁극적인 테스트는 구현이 주어진 알고리즘을 실행하는 속도입니다. 디버깅 시간 단축을 통한 칩 영역의 더 나은 사용과 최신 기술의 가용성은 칩의 속도에 기여합니다. RISC는 더 단순한 디자인만으로 잠재적으로 속도를 얻을 수 있습니다. 단일 주소 모드나 명령은 덜 복잡한 제어 구조로 이어질 수 있습니다. 이것은 차례로 더 작은 제어 PLA, 더 작은 마이크로코드 메모리, 기기의 중요한 (<em>회로</em>)경로에서 더 적은 게이트로 이어질 수 있습니다; 이 모든 것은 <strong>작은 사이클 시간</strong>으로 이어질 수 있습니다. 명령이나 주소 모드가 기기의 마이너 사이클의 속도를 10% 높이는 것을 제외하고, 비용 효율적이려면 기기의 속도를 10% 이상 높여야합니다. 지금까지, 우리는 복잡한 명령어 세트가 이러한 방식으로 비용 효율적이라는 확실한 증거를 거의 보지 못했습니다. -3)</p><blockquote><p>3) 사실, 그 모순에 대한 증거가 있습니다. TIASC의 수석 아키텍트인 HarveyCragon은 이 기기가 루프 내부에서 색인 참조의 성능을 개선하기 위해 복잡한 메커니즘을 구현했다고 말합니다. 비록 그들이 이 연산을 더 빨리 만드는 데 성공했지만, 그들은 다른 상황에서 ASC를 더 느리게 만들었습다. 이 영향은 Cray <a href="#cragon80">[Cragon80]</a>가 설계한 더 단순한 컴퓨터보다 ASC를 느리게 만들었습니다.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-칩-영역의-더-나은-사용">4. 칩 영역의 더 나은 사용<a href="#4-칩-영역의-더-나은-사용" class="hash-link" aria-label="Direct link to 4. 칩 영역의 더 나은 사용" title="Direct link to 4. 칩 영역의 더 나은 사용">​</a></h3><p><em>Better Use of Chip Area</em></p><p>만약 공간이 있다면, CISC를 구현하지 않을 이유는 무엇일까요? 주어진 칩 영역에는 실현될 수 있는 것에 대한 많은 절충안이 있습니다. 우리는 CISC 아키텍처가 아닌 RISC 아키텍처를 설계함으로써 얻은 공간이 CISC보다 RISC를 훨씬 더 매력적으로 만드는 데 사용될 수 있다고 생각합니다. 예를 들어, 우리는 실리콘 영역이 온칩 캐시<a href="#pattersonsrquin80">[Patterson,Srquin80]</a>, 더 크고 빠른 트랜지스터 또는 파이프라이닝에 사용된다면 전체 시스템 성능이 더 향상될 수 있다고 생각합니다. VLSI 기술이 향상됨에 따라, RISC 아키텍처는 항상 유사한 CISC보다 한 발 앞서 있을 수 있습니다. CISC가 단일 칩에서 실현 가능해질 때, RISC는 파이프라이닝 기술을 사용할 수 있는 실리콘 영역을 갖게 될 것입니다; CISC가 파이프라이닝을 할 때 RISC는 온칩 캐시 등을 갖게 될 것입다. <strong>CISC는 또한 본질적인 복잡성이 종종 고급 기술을 구현하기 어렵게 만든다</strong>는 사실에 시달리고 있습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="고급-언어-컴퓨터-시스템-지원">고급 언어 컴퓨터 시스템 지원<a href="#고급-언어-컴퓨터-시스템-지원" class="hash-link" aria-label="Direct link to 고급 언어 컴퓨터 시스템 지원" title="Direct link to 고급 언어 컴퓨터 시스템 지원">​</a></h2><p><em>Supporting a High-Level Language Computer System</em></p><p>어떤 사람들은 아키텍처를 단순화하는 것이 고급 언어를 지원하는것의 후퇴라고 주장할 것입니다. 최근 논문 <a href="#ditzelpatterson80">[Ditzel,Patterson80]</a>은 "고급" 아키텍처가 반드시 고급 언어 컴퓨터 시스템을 달성하는 데 가장 중요한 측면은 아니라고 지적합니다. 고급 언어 컴퓨터 시스템은 다음과 같은 특성을 가진 것으로 정의되었습다:</p><ol><li>모든 프로그래밍, 디버깅, 다른 사용자/시스템 상호작용에 고급 언어 지원</li><li>고급 언어 소스 프로그램에서 구문 에러와 실행 시간 에러를 발견하고 제보</li><li>사용자 프로그래밍 언어와 내부 언어 사이에서 어떠한 드러나는 변환 없음</li></ol><p>따라서 유일한 중요한 특징은 하드웨어와 소프트웨어의 조합이 <strong>프로그래머가 항상 컴퓨터와 고급 언어로 상호 작용한다는 것을 보장</strong>한다는 것입니다. 프로그래머가 프로그램의 작성이나 디버깅에서 더 낮은 수준을 알 필요가 없습니다. 이 요구 사항이 충족되는 한, 목표는 달성됩니다. 따라서 HLLCS(High-Level Language Computer System)에서 언어의 토큰이 CISC와 1대1 매칭이 되도록 구현되는지,
매우 빠르지만 간단한 기기에서 제공되는 함수를 사용하는지 간에 어떠한 차이도 없습니다.</p><p>컴파일러로 부터 얻은 경험은 <strong>명령어 세트가 간단하고 균일할 때 컴파일러 작성자의 부담이 완화</strong>된다는 것을 시사합니다. 고급 기능을 지원하는 것으로 추정되는 복잡한 명령은 종종 컴파일러에서 생성하는 것이 불가능합니다.-4) 복잡한 명령은 명령의 수준이 증가함에 따라 "잘못된" 기능을 구현하는 경향이 있습니다. 이것은 기능이 너무 전문화되어 다른 작업에 쓸모 없게 되기 때문입니다.-5) 복잡한 명령은 일반적으로 소수의 낮은 수준의 명령으로 대체될 수 있으며, 종종 성능 손실이 없습니다. -6) 복잡한 명령어를 위한 코드를 생성할 때 버그가 발생할 가능성이 더 높기 때문에 CISC용 컴파일러를 만드는 시간은 더 증가합니다. -7)</p><blockquote><p>4) 찬성과 반대의 증거는 <strong>DEC</strong>에서 나옵니다. 복잡한 MARK 명령은 서브루틴 호출의 성능을 향상시키기 위해 <strong>PDP-11</strong>에 추가되었습니다. 이 명령은 프로그래머들이 원하는 것을 정확히 하지 않았기 때문에 거의 사용되지 않았기 때문입니다. 파괴적인 증거는 <strong>VAX</strong>에서 나옵니다; VMS FORTRAN 컴파일러가 분명히 잠재적인 <strong>VAX</strong> 명령어에서 매우 큰 부분을 생산한다는 소문이 있습니다 (.8?).</p></blockquote><blockquote><p>5) FORTRAN과 BLISS가 <strong>VAX</strong>에서 이러한 유형의 명령의 여러 발생에 대한 모델로 사용되었다면 우리는 놀라지 않을 것입니다. 브랜치가 lower bit 설정되었을 때와 브랜치가 lower bit가 초기화 되었을 명령을 고려해보세요, BLISS에 대한 조건부 분기를 정확하게 구현하지만, 다른 많은 언어에서 찾을 수 있는 0이고 0이 아닌 더 일반적인 분기에는 필요없습니다. 이 일반적인 발생은 두 가지 명령어가 필요합니다. FORTRAN에 어필하는 유사한 명령과 주소 지정 모드가 존재합니다.</p></blockquote><blockquote><p>6) Peuto와 Shustek은 IBM과 Amdahl 컴퓨터의 복잡한 소수점 및 문자 명령어가 일반적으로 하이엔드 모델에서 상대적으로 낮은 성능을 초래한다는 것을 관찰했습니다. 그들은 더 간단한 명령어가 성능 향상으로 이어질 수 있다고 제안합니다 <a href="#peutoshustek77">[Peuto,Shustek77]</a>. 그들은 또한 한 쌍의 명령어의 동적인 발생을 측정했습니다; 자주 등장하는 결과는 CISC 철학을 뒷받침할 것입니다. 그들의 결론은 다음과 같습니다: "자주 등장하는 연산 짝에 실험은 추가적인 명령어를 만들어 대체하길 제안할 정도로 자주 발생하지 못해 실패했습니다."</p></blockquote><blockquote><p>7) C 컴파일러를 VAX로 이식할 때, 버그의 절반 이상과 복잡성의 약 3분의 1은 복잡한 INDEXED MODE로 인해 발생했습니다.</p></blockquote><p>컴파일러가 사용하기 쉽도록 설계된 <strong>더 복잡한 명령어가 종종 목표를 달성하지 못한다</strong>는 상당한 증거가 있습니다. 이에는 몇 가지 이유가 있습니다. 첫째, 많은 명령어로 인해 주어진 기본 연산을 수행하는 여러 방법이 존재하는데, 이는 컴파일러와 컴파일러 작성자 모두에게 혼란을 줄 수 있습니다. 둘째, 많은 컴파일러 작가들은 합리적인 구현을 다루고 있다고 가정하는데 사실은 아닙니다. 종종 "적절한" 명령어가 잘못된 선택으로 판명됩니다. 예를 들어, 스택의 레지스터를 푸시하는 <strong>PUSHL R0</strong>은 <strong>VAX 11/780</strong>의 이동 명령 <strong>MOVL R0,-(SP)</strong>로 푸시하는 것보다 느립니다. 거의 대부분의 복잡한 기기에 대해 비슷한 문제가 발생합니다. 몇개는 명령어가 "거기에 있기 때문에" 사용하지 않도록 특별한 주의가 필요합니다. 이러한 문제는 상대적인 명령어 타이밍의 변화로 인해 최적의 코드 생성을 위해서 새로운 코드 생성기가 필요한 경우가 있어 프로그램 이식성이나 우수한 컴파일러 작성자의 명성을 해치지 않고는 동일한 아키텍처의 다른 모델에 의해 "수정"되기 어렵습니다.</p><p>고급 언어를 지원하려는 욕망은 HLLCS의 성과와 컴파일러의 복잡성 감소를 모두 포함합니다. 우리는 RISC가 CISC보다 실질적으로 더 나쁜 경우를 거의 볼 수 없으며, 적절하게 설계된 <strong>RISC가 고급 언어를 지원하기 위한 합리적인 아키텍처</strong>로 보인다는 결론을 내립니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="risc-아키텍처에서-작업">RISC 아키텍처에서 작업<a href="#risc-아키텍처에서-작업" class="hash-link" aria-label="Direct link to RISC 아키텍처에서 작업" title="Direct link to RISC 아키텍처에서 작업">​</a></h2><p><em>Work on RISC Architecture</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="버클리">버클리<a href="#버클리" class="hash-link" aria-label="Direct link to 버클리" title="Direct link to 버클리">​</a></h3><p><em>At Berkely</em></p><p>RISC 아키텍처에 대한 연구는 D.A. Patterson과 C.H. Sequin의 감독하에 몇 달 동안 진행되었습니다. 적절한 명령어 세트를 현명하게 선택하고 해당 아키텍처를 설계하는것은, 매우 간단한 명령어 세트로 빠른 성능을 발휘할 수 있어야 한다고 생각했습니다. 이는 전반적인 프로그램 실행 속도에서 상당한 이익으로 이어질 수 있습니다. 이는 간소화된 명령 세트 컴퓨터(RISC)의 개념입니다. <strong>RISC의 구현은 거의 확실히 CISC의 구현보다 더 적은 비용</strong>이 들 것으로 예상됩니다. 간단한 아키텍처가 <strong>VAX</strong>나 IBM <strong>System/38</strong>과 같은 CISC만큼 고급 언어 프로그래머에게 효과적임을 입증할 수 있다면, 우리는 효과적인 디자인을 만들었다고 주장할 수 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="벨-연구소">벨 연구소<a href="#벨-연구소" class="hash-link" aria-label="Direct link to 벨 연구소" title="Direct link to 벨 연구소">​</a></h3><p><em>At Bell Labs</em></p><p>C 프로그래밍 언어의 측면을 기반으로 한 컴퓨터 설계 프로젝트는 몇 년 동안 벨 연구소 컴퓨터 과학 연구 센터 소수 연구원들에 의해 조사되었습니다. 프로토타입 16비트 장치는 A.G. Fraser가 설계하고 제작했습니다. 32비트 아키텍처는 S.R. Bourne, D.R. Ditzel 그리고 S.C. Johnson에 의해 조사되었습니다. Johnson은 기기를 제안하고 컴파일러를 작성하며 결과를 측정하는 반복적인 기술을 사용하여 더 나은 기기를 제안했습니다. 초기 목표는 특별히 간단한 디자인을 개발하는 것이 아니었지만, 결과적으로 <strong>PDP-11</strong>과 <strong>VAX</strong><a href="#johnson79">[Johnson79]</a>와 같이 코드가 컴팩트한 RISC와 같은 32비트 아키텍처가 나왔습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ibm">IBM<a href="#ibm" class="hash-link" aria-label="Direct link to IBM" title="Direct link to IBM">​</a></h3><p><em>At IBM</em></p><p>의심의 여지 없이 RISC의 가장 우수한 예는 뉴욕 요크타운 하이츠에 위치한 IBM 리서치에서 개발한 <strong>801 미니컴퓨터</strong>입니다. <a href="#electronics76">[Electronics76]</a> <a href="#datamation79">[Datamation79]</a>. 이 프로젝트는 몇 년 전부터 매우 진보된 컴파일러 기술과 함께 RISC 아키텍처의 사용을 탐구하는 대규모 디자인 팀이 참여했습니다. 많은 세부 정보가 부족하지만 초기 결과는 상당히 인상적으로 보입니다. 그들은 IBM <strong>S/370 모델 168</strong>에서 PL/I의 하위 집합을 실행하는 약 5배의 성능을 보여주는 프로그램을 벤치마킹했습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="결론">결론<a href="#결론" class="hash-link" aria-label="Direct link to 결론" title="Direct link to 결론">​</a></h2><p>특정 "독특한" 명령어가 프로그램의 속도를 크게 향상시킬 수 있는 많은 사례가 있습니다. 그러나 이러한 혜택이 시스템 전체에 적용되는 경우는 거의 없습니다. 다양한 컴퓨팅 환경에서 <strong>명령어 세트의 신중한 정리</strong>가 비용 효율적인 구현으로 이어지는 경험을 토대로 느낍니다. 컴퓨터 설계자들은 새로운 명령어 세트를 설계할 때 다음과 같은 질문을 해야 합니다. 이 연산이 드물게 발생하는 경우, 예를 들어, 관리자 호출 명령어와 같이 필요하고 합성할 수 없다는 이유로 정당화될 수 있을까요? 명령이 드물게 발생하고 합성할 수 있다면, 시간이 많이 걸리는 작업인 부동 소수점 연산과 같은 작업으로 정당화될 수 있을까요? 명령이 기본 명령에서 합성될 수 있다면, 명령이 제외되었을 때 프로그램 크기와 속도에 미치는 전반적인 영향은 무엇일까요? 예를 들어, 사용하지 않는 제어 저장소를 사용하거나 ALU에서 이미 수행한 작업을 사용하여 명령어를 무료로 얻을 수 있을까요? "무료"로 얻을 수 있다면, 디버깅, 문서화 및 향후 구현의 비용은 얼마일까요? 컴파일러가 이러한 명령을 쉽게 생성할 수 있을까요?</p><p>우리는 고급 언어 컴퓨터 시스템의 정의를 충족하면서 "복잡성"(아마도 설계 시간과 게이트에서 측정)을 최소화하고 "성능"(아마도 게이트 지연으로 표현된 평균 실행 시간을 기술 독립적인 시간 단위로 사용)을 극대화하는 것이 가치가 있다고 가정했습니다. 특히, 우리는 VLSI 컴퓨터가 RISC로부터 많은 혜택을 받을 것으로 기대합니다. 너무 자주 VLSI에서 급격한 발전은 아키텍처의 복잡성을 증가시키는 것을 만병통치약처럼 사용되어 이루어졌습니다. 우리는 각 트랜지스터가 적어도 향후 10년 동안 중요하다는 것을 알 수 있습니다. 아키텍처 복잡성에 대한 추세는 개선된 컴퓨터를 향한 하나의 경로일 수 있지만, 이 논문은 <strong>줄어든 명령어 세트 컴퓨터(Reduced Instruction Set Computer)</strong>라는 또 다른 접근 방식을 제안합니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="alexander75">[Alexander75]<!-- --> W.C. Alexander and D.B. Wortman, "Static and Dynamic characteristics of XPL Programs,"<a href="#alexander75" class="hash-link" aria-label="Direct link to alexander75" title="Direct link to alexander75">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cocke80">[Cocke80]<!-- --> J. Cocke "private communication"<a href="#cocke80" class="hash-link" aria-label="Direct link to cocke80" title="Direct link to cocke80">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cragon80">[Cragon80]<!-- --> H.A. Cragon, in his talk presenting the paper "The Case Against High-Level Language Computers,"<a href="#cragon80" class="hash-link" aria-label="Direct link to cragon80" title="Direct link to cragon80">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="datamation79">[Datamation79]<!-- --> Datamation, "IBM Mini a Radical Depalrture,"<a href="#datamation79" class="hash-link" aria-label="Direct link to datamation79" title="Direct link to datamation79">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ditzelpatterson80">[Ditzel,Patterson80]<!-- --> Ditzel and Patterson, "Retrospective on High-Level Language Computer Architecture,"<a href="#ditzelpatterson80" class="hash-link" aria-label="Direct link to ditzelpatterson80" title="Direct link to ditzelpatterson80">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="electronics76">[Electronics76]<!-- --> Electronics Magazine, "Altering Computer Architecture is Way to Raise Throughput, Suggests IBM Researchers,"<a href="#electronics76" class="hash-link" aria-label="Direct link to electronics76" title="Direct link to electronics76">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="foster71">[Foster71]<!-- --> C.C. Foster, R.H. Gonter and E.M. Riseman, "Measures of Op-Code Utili- zation,"<a href="#foster71" class="hash-link" aria-label="Direct link to foster71" title="Direct link to foster71">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="husson70">[Husson70]<!-- --> S.S. Husson, "Microprogramming: Principles and Practices, Prentice-Hall,"<a href="#husson70" class="hash-link" aria-label="Direct link to husson70" title="Direct link to husson70">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="johnson79">[Johnson79]<!-- --> S.C. Johnson, "A 32-bit Processor Design,"<a href="#johnson79" class="hash-link" aria-label="Direct link to johnson79" title="Direct link to johnson79">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pattersonsrquin80">[Patterson,Srquin80]<!-- --> D.A. Patterson and C.H. Srquin, "Design Considerations for Single-Chip Computers of the Future,"<a href="#pattersonsrquin80" class="hash-link" aria-label="Direct link to pattersonsrquin80" title="Direct link to pattersonsrquin80">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="peutoshustek77">[Peuto,Shustek77]<!-- --> B.L. Peuto and L.J. Shustek, "An Instruction Timing Model of CPU Perfor- mance,"<a href="#peutoshustek77" class="hash-link" aria-label="Direct link to peutoshustek77" title="Direct link to peutoshustek77">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="shustek78">[Shustek78]<!-- --> L.J. Shustek, "Analysis and Performance of Computer Instruction Sets,"<a href="#shustek78" class="hash-link" aria-label="Direct link to shustek78" title="Direct link to shustek78">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="utley78">[Utley78]<!-- --> B.G. Utley et al, "IBM System/38 Technical Developments,"<a href="#utley78" class="hash-link" aria-label="Direct link to utley78" title="Direct link to utley78">​</a></h3>]]></content:encoded>
            <category>cs</category>
            <category>paper</category>
        </item>
        <item>
            <title><![CDATA[LLaMa 공개된 효율적인 언어 모델]]></title>
            <link>https://jwher.github.io/posts/llama-open-and-efficient-foundation-language-models</link>
            <guid>https://jwher.github.io/posts/llama-open-and-efficient-foundation-language-models</guid>
            <pubDate>Tue, 30 May 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[LLaMA: Open and Efficient Foundation Language Models]]></description>
            <content:encoded><![CDATA[<p><a href="/posts/llama-open-and-efficient-foundation-language-models"><img loading="lazy" alt="llama" src="/assets/images/llama-fd6ebe179d7441254555c0a0614b3551.jpeg" width="1200" height="1198" class="img_ev3q"></a><br>
<em>최대한 번역된 단어를 통일하였으나 원문을 보는것을 권장합니다.</em>  </p><h1>1. 소개</h1><p>LLMs(Large Languages Models)는 많은 텍스트 말뭉치를 통해 학습함으로써 텍스트 명령 또는 few examples에서 새로운 능력을 보여주었습니다. (<a href="https://arxiv.org/pdf/2005.14165.pdf" target="_blank" rel="noopener noreferrer">Brown et al.</a>)</p><p>few-shot 요소들은 모델을 충분한 크기로 키우는데서 처음 나타났고(Kaplan et al., 2020), 모델을 더 키우는 연구선상을 만듭니다. (<a href="https://arxiv.org/pdf/2204.02311.pdf" target="_blank" rel="noopener noreferrer">Chowdhery et al.</a>, 2022; Rae et al., 2021)</p><p>이 노력은 더 많은 파라미터가 더 나은 성능을 이끌거라는 가정하에 있습니다. 그러나 <a href="https://arxiv.org/pdf/2203.15556.pdf" target="_blank" rel="noopener noreferrer">Hoffman et al.</a> 의 최근 연구는 주어진 컴퓨팅 예산에 큰 모델이 최고의 성능에 도달하지 못했고, 더 많은 데이터로 학습한 작은 모델이란 것을 보여줍니다.</p><p>Hoffmann et al.의 스케일링 법칙의 목적은 특정 학습을 위한 컴퓨팅 예산을 위해 데이터셋과 모델 크기를 가장 잘 확장하는 방법을 결정하는 것입니다.</p><p>그러나 이 목적은 언어 모델을 스케일링 할 때 치명적으로 작용하는, 추론 예산을 고려하지 않습니다.</p><p>성능 타깃 레벨이 주어진다는 맥락에서, 선호되는 모델은 학습에 빠른 것이 아니라 추론에 빠른 것이고, 비록 특정한 성능에 도달하기 위해 large model을 학습하는게 더 저렴할 수 있으나, 작은 것이 궁극적으로는 추론할 때 저렴할 것입니다.</p><p>예를 들어, Hoffmann et al.이 10B 모델을 200B 토큰으로 학습시킬 것을 추천했으나, 우리는 7B 모델이 1T 토큰 이후에도 지속적으로 성능이 증가하는 것을 확인할 수 있었습니다.</p><p>이 작업이 집중하는 것은 일반적으로 사용된 토큰보다 더 많은 토큰으로 학습시키면서 다양한 추론 예산에서 최적의(best possible) 성능을 달성하는 언어 모델 시리즈 학습입니다.</p><p>결과로 나온 모델은, LLaMA로 불리며, 7B~65B 파라미터를 가지고 현존하는 LLM들과 경쟁적인 성능을 냅니다.</p><p>예를 들어 LLaMa-13B는, GPT-3보다 10배 작지만 대부분 벤치마크를 상회합니다.</p><p>이 모델이 단일 GPU에서 실행할 수 있기 때문에, LLMs에 접근과 연구의 민주화(democratize)에 도움이 될 것으로 믿습니다.</p><p>확장의 최고점인 65B 파라미터 모델은 Chinchilla 또는 PaLM-540B와 같은 최고 LLMs와 경쟁적입니다.</p><p>Chinchilla, PaLM, GPT-3과 달리, 공개적으로 사용된 데이터만 사용했고, 오픈 소스와 호환되는 반면, 대부분의 모델이 공개적으로 사용 가능하지 않거나 문서화되지 않은 데이터에 의존하고 있습니다.</p><p>여기엔 몇 예외가 있습니다, OPT(Zhang et al.), GPT-NeoX(Black et al.), BLOOM(Scaoet et all.) and GLM(Zeng et al.), 그러나 어떤 것도 PaLM-62B 또는 Chinchilla와 비교할 수 없습니다.</p><p>이 논문에 나머지는, transformer(Vaswani et al) 아키텍처에 수행한 변경과, 학습 메소드를 소개합니다. 다음에는 모델의 성능과 다른 LLMs를 표준 벤치마크를 사용해 비교합니다. 최종적으로, 믿을만한 AI 커뮤니티에서 나온 가장 최신의 벤치마크 일부를 사용해서 편견과 독성이 모델에 인코딩 되었는지 노출합니다.</p><h1>2. 접근법</h1><p>학습 접근법은 이전 작업 (Brown et al., 2020; Chowdhery et al., 2022), 과 Chinchilla scaling laws (Hoffmann et al., 2022) 에서 영감을 받았습니다. 큰 transformers를 큰 텍스트 데이터로 표준 optimizer를 사용해 학습했습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="21-pre-training-data">2.1 Pre-training Data<a href="#21-pre-training-data" class="hash-link" aria-label="Direct link to 2.1 Pre-training Data" title="Direct link to 2.1 Pre-training Data">​</a></h2><p>학습에 사용된 데이터셋은 Table 1에 보고한 것과 같이 여러 소스의 혼합이고, 다양한 도메인을 다룹니다.</p><blockquote><p>Table 1: Pre-training data. 사전 학습에 사용된 데이터 혼합으로, 각 하위집합에 샘플링 비율, 하위 집합을 1.4T 토큰을 학습할 때 수행된 epochs 수, 디스크 크기를 나열합니다. 1T 토큰으로 사전 학습한 것도 동일한 샘플링 비율을 가집니다.</p><p><img loading="lazy" src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/cc03535f-860b-492e-918b-f972a1bfd2da/Untitled.png" alt="Untitled" class="img_ev3q"></p></blockquote><p>대부분 분야에서,  대중에 공개된 데이터와, 오픈 소스 작업 호환성을 위한 데이터만 사용한 제한과 함께, 다른 LLM을 학습시키는데 사용한 데이터 소스를 재활용했습니다.</p><p>이것은 이어지는 데이터 혼합과 학습 셋에서 나타나는 퍼센테이지를 도출합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="english-commoncrawl-67">English CommonCrawl <!-- -->[67%]<a href="#english-commoncrawl-67" class="hash-link" aria-label="Direct link to english-commoncrawl-67" title="Direct link to english-commoncrawl-67">​</a></h3><p>5개의 CCNet pipeline (Wenzek et al., 2020)으로 2017~2020년 사이의 CommonCrawl 덤프를 전처리했습니다. 이 작업은 행 수준에서 데이터 중복을 제거하고, fastText 선형 분류기로 비영어 페이지와 저품질의 콘텐츠를 n-gram 언어 모델을 사용해 제거하는 언어 인식을 수행합니다. 추가적으로, Wikipedia에 참조된 페이지 vs 임의로 샘플된 페이지와 참조로 분류되지 않은 버려진 페이지를 분류하기 위해 선형 모델을 학습시켰습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="c4-15">C4 <!-- -->[15%]<a href="#c4-15" class="hash-link" aria-label="Direct link to c4-15" title="Direct link to c4-15">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="github-45">Github <!-- -->[4.5%]<a href="#github-45" class="hash-link" aria-label="Direct link to github-45" title="Direct link to github-45">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="wikipedia-45">Wikipedia <!-- -->[4.5%]<a href="#wikipedia-45" class="hash-link" aria-label="Direct link to wikipedia-45" title="Direct link to wikipedia-45">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gutenberg-and-books3-45">Gutenberg and Books3 <!-- -->[4.5%]<a href="#gutenberg-and-books3-45" class="hash-link" aria-label="Direct link to gutenberg-and-books3-45" title="Direct link to gutenberg-and-books3-45">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="arxiv-25">ArXiv <!-- -->[2.5%]<a href="#arxiv-25" class="hash-link" aria-label="Direct link to arxiv-25" title="Direct link to arxiv-25">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="stack-exchange-2">Stack Exchange <!-- -->[2%]<a href="#stack-exchange-2" class="hash-link" aria-label="Direct link to stack-exchange-2" title="Direct link to stack-exchange-2">​</a></h3><p>종합해서, 전체 학습 데이터셋은 토큰화 이후 대략 1.4T 토큰을 가집니다. Wikipedia와 Books 도메인에서 대략 2 epochs를 수행한 것을 제외하고, 대부분의 학습 데이터에서, 각 토큰은 학습할때 한번만 사용됩니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="22-architecture">2.2 Architecture<a href="#22-architecture" class="hash-link" aria-label="Direct link to 2.2 Architecture" title="Direct link to 2.2 Architecture">​</a></h2><p>최근 LLM 작업을 따라 네트워크는 transformer architecture를 따릅니다. 후속에 제안되고 PaLM과 같은 다른 모델에서 사용된 다양한 개선사항을 활용합니다. 여기에서 원래 아키텍처와 주된 다른점을 다루고, 어디에서 변경에 대한 영감을 찾았는지 <!-- -->[괄호에]<!-- --> 표시합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pre-normalization-gpt3">Pre-normalization <!-- -->[GPT3]<a href="#pre-normalization-gpt3" class="hash-link" aria-label="Direct link to pre-normalization-gpt3" title="Direct link to pre-normalization-gpt3">​</a></h3><p>학습 안정성을 개선하기 위해 출력을 normalize 하는 대신, 각 transformer의 sub-layer의 입력을 normalize 했습니다. Zhang and Sennrich가 도입한 RMSNorm을 normalizing 함수로 사용했습니다.</p><ul><li>transformer input/output 설명</li><li>RMSNorm 설명</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="swiglu-activation-function-palm">SwiGLU activation function <!-- -->[PaLM]<a href="#swiglu-activation-function-palm" class="hash-link" aria-label="Direct link to swiglu-activation-function-palm" title="Direct link to swiglu-activation-function-palm">​</a></h3><p>ReLU의 비선형성을 Shazeer가 성능 향상을 위해 도입한 SwiGLU activation function으로 바꾸었습니다. 2/3 4d 차원을 PaLM의 4d 대신 사용했습니다.</p><ul><li>ReLU 설명</li><li>SwiGLU 설명</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rotary-embeddings-gptneo">Rotary Embeddings <!-- -->[GPTNeo]<a href="#rotary-embeddings-gptneo" class="hash-link" aria-label="Direct link to rotary-embeddings-gptneo" title="Direct link to rotary-embeddings-gptneo">​</a></h3><p>absolute positional embedding을 제거하고 각 네트워크의 레이어에서 Su et al이 도입한 rotary positional embeddings(RoPE)를 사용했습니다.</p><ul><li>Absolute Positional Embedding 설명</li><li>RoPE 설명</li></ul><p><img loading="lazy" src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d6554f37-cf9f-4a1c-bef9-0a90ebac959b/Untitled.png" alt="Untitled" class="img_ev3q"></p><p>변경한 모델에 대한 자세한 하이퍼파라미터는 표2에 주어집니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="23-optimizer">2.3 Optimizer<a href="#23-optimizer" class="hash-link" aria-label="Direct link to 2.3 Optimizer" title="Direct link to 2.3 Optimizer">​</a></h2><p>β1 = 0.9, β2 = 0.95의 하이퍼파라미터로, AdamW optimizer (Loshchilov and Hutter, 2017)를 사용해 모델을 학습했습니다. 마지막 learning rate가 10%의 최고 learning rate를 가지게 되는 코사인 learning rate schedule을 사용했습니다. Weight decay를 0.1, Gradient clipping 1.0을 사용했습니다. 2000 예열 단계를 거치고, 모델 크기에 따라 learning rate와 배치 크기를 조절합니다.</p><blockquote><p>Table 2: 모델 크기, 구조, 하이퍼 파라미터의 최적화</p><p><img loading="lazy" src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/8994f833-e6f5-4163-864c-43b8922fef95/Untitled.png" alt="Untitled" class="img_ev3q"></p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="24-efficient-implementation">2.4 Efficient implementation<a href="#24-efficient-implementation" class="hash-link" aria-label="Direct link to 2.4 Efficient implementation" title="Direct link to 2.4 Efficient implementation">​</a></h2><p>모델의 학습 속도를 개선하기 위해 몇 최적화를 만들었습니다.</p><p>첫째,  실행시간 메모리 사용량을 줄이도록 효율적인 causal multi-head attention의 효율적인 구현을 사용했습니다. Xformers 라이브러리2에서 사용할 수 있는 이 구현은 Rabe and Staats에서 영감을 얻었으며 Dao et al.의 backward를 사용합니다. (2022). 이것은 attention 가중치를 저장하지 않고 언어 모델링 작업의 인과적 특성으로 인해 가려진 키/쿼리 점수를 넣지 않음으로 달성합니다.</p><p>학습 효율을 더 향상시키기 위해, 체크포인팅을 하는 backward pass동안 재계산되는 activations의 양을 줄였습니다. 더 정확하게, 선형 계층의 출력같은 계산비용이 비싼 activations를 절약했습니다. 이것은 PyTorch autograd에 의존하는 대신 transformer 레이어의 backward function을 수동으로 구현함으로써 달성합니다. 이 최적화에서 최대한의 장점을 얻으려면, Korthikani가 기술한 모델과 시퀀스 병렬에 사용되는 메모리를 줄여야 했습니다. 게다가, 우리는 또한 가능한 한 (all_reduce 작업으로 인해) 네트워크를 통한 GPU 간의 activation 계산과 통신을 오버랩합니다.</p><p>65B-파라미터 모델을 훈련할 때, 우리의 코드는 80GB의 RAM이 있는 2048 A100 GPU에서 약 380개의 토큰/초/GPU를 처리합니다. 이것은 1.4T 토큰이 포함된 데이터 세트에 대한 훈련이 약 21일이 걸린다는 것을 의미합니다.</p><h1>3. 주요 성과</h1><p>이전 작업 (Brown et al., 2020)을 이어서 zero-shot과 few-shot작업을 고려해 20개의 벤치마크 결과를 보고합니다.</p><ul><li>Zero-shot: task와 test example에 대한 텍스트 설명을 제공합니다. 모델은 open-ended generation 또는 제안된 답변의 순위를 매겨 제공합니다.</li><li>Few-shot: 1~64 사이의 몇개의 task 예제와 테스트 예제를 제공합니다. 모델은이 텍스트를 입력으로 받고 답변을 생성하고나 다른 옵션의 순위를 매깁니다.</li></ul><p>대중이 사용가능하지 않은 언어 모델 GPT-3, Gopher, Chinchilla 그리고 PaLM과, open-sourced OPT 모델 GPT-J, GPT-Neo와 같은 다른 재단의 모델과 LLaMA를 비교합니다. 섹션4에서 OPT-IML과 Flan-PaLM과 같은 명령어 튜닝된 모델과 간단한 비교를 합니다.</p><p>free-form 생성 작업과 객관식(multiple choice) 작업에 대해 LLaMA를 평가합니다. 객관식 작업에서, 목표는 제공된 맥락에 따라 주어진 일련의 작업 중에서 가장 적절한 완성을 선택하는 것입니다. 제공된 맥락을 감안할 때 가장 높은 가능성의 완성을 선택합니다. Gao et al.을 따르고 Brown et al.을 따르는 특정 데이터 세트(OpenBookQA, BoolQ)를 제외하고 완성에 필요한 문자 수에 의해 normalized된 가능성을 사용하고, ㅁ문맥으로 "Answer:" 주어진 완성에 가능성이 높은 normalized된 가능성에 따라 완성을 선택합니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="31-common-sense-reasoning">3.1 Common Sense Reasoning<a href="#31-common-sense-reasoning" class="hash-link" aria-label="Direct link to 3.1 Common Sense Reasoning" title="Direct link to 3.1 Common Sense Reasoning">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="32-closed-book-question-answering">3.2 Closed-book Question Answering<a href="#32-closed-book-question-answering" class="hash-link" aria-label="Direct link to 3.2 Closed-book Question Answering" title="Direct link to 3.2 Closed-book Question Answering">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="33-reading-comprehension">3.3 Reading Comprehension<a href="#33-reading-comprehension" class="hash-link" aria-label="Direct link to 3.3 Reading Comprehension" title="Direct link to 3.3 Reading Comprehension">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="34-mathematical-reasoning">3.4 Mathematical reasoning<a href="#34-mathematical-reasoning" class="hash-link" aria-label="Direct link to 3.4 Mathematical reasoning" title="Direct link to 3.4 Mathematical reasoning">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="35-code-generation">3.5 Code generation<a href="#35-code-generation" class="hash-link" aria-label="Direct link to 3.5 Code generation" title="Direct link to 3.5 Code generation">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="36-massive-multitask-language-understanding">3.6 Massive Multitask Language Understanding<a href="#36-massive-multitask-language-understanding" class="hash-link" aria-label="Direct link to 3.6 Massive Multitask Language Understanding" title="Direct link to 3.6 Massive Multitask Language Understanding">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="37-evolution-of-performance-during-training">3.7 Evolution of performance during training<a href="#37-evolution-of-performance-during-training" class="hash-link" aria-label="Direct link to 3.7 Evolution of performance during training" title="Direct link to 3.7 Evolution of performance during training">​</a></h2><h1>4. 명령어 파인튜닝</h1><h1>5. 편견, 독성과 잘못된 정보</h1><h1>6. 탄소발자국</h1><h1>7. 관련 연구</h1><h1>8. 결론</h1><p>이 논문에서, 자유롭게 공개된 언어 모델의 나열과, state-of-the-art 재단 모델의 경쟁을 보여줍니다. 가장 주목할것은, LLaMA-13B는 GPT-3보다 10x 작으며 능가하는 성능을 보였다는 것과, LLaMA-65B는 Chinchilla-70B와 PaLM-540B과 경쟁합니다.</p><p>이전 연구와는 다르게, 독점적인 데이터셋에 의존하지 않고, 대중에 공개된 데이터만 사용해 sota 성능을 달성하는게 가능하단 것을 보여줍니다. 이 모델을 연구 커뮤니티에 공개하는게 LLM 개발을 가속화하고, 강건함을 증가시키고 알려진 독성과 편견을 완화시키는데 기여하길 바랍니다. 추가적으로, Chung et al. (2022)의 지침에 따라 이 모델을 미세 조정하면 유망한 결과를 얻을 수 있다는것을 보았고, 후속 연구에서 더 자세히 조사할 예정입니다. 최종적으로, 스케일링에서 지속적인 향상을 볼 수 있는 한, 큰 말뭉치로 학습한 더 큰 모델을 향후에 공개할 예정입니다.</p>]]></content:encoded>
            <category>ml</category>
            <category>paper</category>
        </item>
        <item>
            <title><![CDATA[유클리드 호제법]]></title>
            <link>https://jwher.github.io/posts/euclidean-algorithm</link>
            <guid>https://jwher.github.io/posts/euclidean-algorithm</guid>
            <pubDate>Wed, 24 May 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[최대공약수와 최소공배수를 구하는 방법]]></description>
            <content:encoded><![CDATA[<p><a href="/posts/euclidean-algorithm"><img loading="lazy" alt="euclid" src="/assets/images/euclid-49a481d24837a75a89362f3ed2c22e33.jpeg" width="1345" height="2048" class="img_ev3q"></a><br>
<em>최대공약수와 최소공배수를 구하는 방법</em>  </p><p>유클리드 호제법은 2개의 자연수의 최대공약수를 구하는 알고리즘 중 하나입니다.
호제법互除法이라는 한자어에서 볼 수 있듯, 몫과 나머지를 서로(互) 나누어(除) 최대공약수를 구하는 알고리즘 입니다.</p><br><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="정리">정리<a href="#정리" class="hash-link" aria-label="Direct link to 정리" title="Direct link to 정리">​</a></h3><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo>∈</mo><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">a,b\in {\mathbb {Z}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6889em"></span><span class="mord"><span class="mord mathbb">Z</span></span></span></span></span></span>이고,
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">a</span></span></span></span></span>를 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal">b</span></span></span></span></span>로 나눈 나머지가 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.02778em">r</span></span></span></span></span>이라고 하자.
(여기서 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>≥</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">a\geq b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal">b</span></span></span></span></span>이고, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.02778em">r</span></span></span></span></span>은 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>≤</mo><mi>r</mi><mo>&lt;</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">0\leq r \lt b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em"></span><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal">b</span></span></span></span></span>인 정수.)</p><p>※ 피제수<em>a</em>와 제수<em>b</em>는 정수<em>Z</em>이고
피제수<em>a</em>는 제수<em>b</em>보다 크거나 같고, 나머지<em>r</em>는 0보다 크거나 같고 제수<em>b</em>보다 작다.</p><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">a</span></span></span></span></span>와 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal">b</span></span></span></span></span>의 최대공약수를 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo fence="true">)</mo></mrow><annotation encoding="application/x-tex">\left(a,b\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">b</span><span class="mclose delimcenter" style="top:0em">)</span></span></span></span></span></span> 라고 하면, 다음이 성립한다.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mo fence="true">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo fence="true">)</mo></mrow><mo>=</mo><mrow><mo fence="true">(</mo><mi>b</mi><mo separator="true">,</mo><mi>r</mi><mo fence="true">)</mo></mrow><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">\left(a,b\right)=\left(b,r\right).</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">b</span><span class="mclose delimcenter" style="top:0em">)</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em">(</span><span class="mord mathnormal">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="mclose delimcenter" style="top:0em">)</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">.</span></span></span></span></span></div><p>※ 피제수<em>a</em> 제수<em>b</em>의 최대공약수는 제수<em>b</em>와 나머지<em>r</em>의 최대공약수와 같다.</p><br><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="증명">증명<a href="#증명" class="hash-link" aria-label="Direct link to 증명" title="Direct link to 증명">​</a></h3><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo>∈</mo><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">a,b\in {\mathbb {Z}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6889em"></span><span class="mord"><span class="mord mathbb">Z</span></span></span></span></span></span>이고, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>≥</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">a\geq b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal">b</span></span></span></span></span>라고 하자.</p><p>그러면, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>=</mo><mi>b</mi><mi>q</mi><mo>+</mo><mi>r</mi><mi>a</mi><mo>=</mo><mi>b</mi><mi>q</mi><mo>+</mo><mi>r</mi></mrow><annotation encoding="application/x-tex">a=bq+ra=bq+r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal">b</span><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal">b</span><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.02778em">r</span></span></span></span></span>을 만족하는 유일한 정수 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo separator="true">,</mo><mi>r</mi></mrow><annotation encoding="application/x-tex">q,r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.02778em">r</span></span></span></span></span>이 존재한다.
이때, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>≤</mo><mi>r</mi><mo>&lt;</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">0\leq r \lt b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em"></span><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal">b</span></span></span></span></span>이다.</p><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo fence="true">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo fence="true">)</mo></mrow><mo>=</mo><mi>d</mi><mo separator="true">,</mo><mi>a</mi><mo>=</mo><mi>d</mi><mi>α</mi><mo separator="true">,</mo><mi>b</mi><mo>=</mo><mi>d</mi><mi>β</mi></mrow><annotation encoding="application/x-tex">\left(a,b\right)=d,a=d\alpha ,b=d\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">b</span><span class="mclose delimcenter" style="top:0em">)</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal">d</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.0037em">α</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.05278em">β</span></span></span></span></span>라고 하자.
즉, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.0037em">α</span></span></span></span></span>와 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.05278em">β</span></span></span></span></span>는 서로소이다.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>a</mi><mo>=</mo><mi>b</mi><mi>q</mi><mo>+</mo><mi>r</mi><mi mathvariant="normal">.</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>⇒</mo><mi>d</mi><mi>α</mi><mo>=</mo><mi>d</mi><mi>β</mi><mi>q</mi><mo>+</mo><mi>r</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>⇒</mo><mi>d</mi><mi mathvariant="normal">∣</mi><mi>r</mi><mi mathvariant="normal">.</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned} &amp;a=bq+r. \newline &amp;\Rightarrow d\alpha =d\beta q+r \newline &amp;\Rightarrow d|r. \end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.5em;vertical-align:-2em"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5em"><span style="top:-4.5em"><span class="pstrut" style="height:2.84em"></span><span class="mord"></span></span><span style="top:-3em"><span class="pstrut" style="height:2.84em"></span><span class="mord"></span></span><span style="top:-1.5em"><span class="pstrut" style="height:2.84em"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2em"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5em"><span style="top:-4.66em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord mathnormal">b</span><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="mord">.</span></span></span><span style="top:-3.16em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.0037em">α</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.03588em">βq</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord mathnormal" style="margin-right:0.02778em">r</span></span></span><span style="top:-1.66em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord mathnormal">d</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="mord">.</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2em"><span></span></span></span></span></span></span></span></span></span></span></span></div><p>(즉, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.02778em">r</span></span></span></span></span>은 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal">d</span></span></span></span></span>의 배수)</p><p>이제, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>=</mo><mi>d</mi><mi>ρ</mi></mrow><annotation encoding="application/x-tex">r=d\rho</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">ρ</span></span></span></span></span>.라고 하자.
여기서 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.05278em">β</span></span></span></span></span>와 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ρ</mi></mrow><annotation encoding="application/x-tex">\rho</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal">ρ</span></span></span></span></span>가 서로소라면, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mo stretchy="false">(</mo><mo>=</mo><mi>d</mi><mi>β</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">b(= d\beta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">b</span><span class="mopen">(</span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.05278em">β</span><span class="mclose">)</span></span></span></span></span>와 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo stretchy="false">(</mo><mo>=</mo><mi>d</mi><mi>ρ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">r(=d\rho)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="mopen">(</span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">ρ</span><span class="mclose">)</span></span></span></span></span>의 최대 공약수도 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal">d</span></span></span></span></span>가 된다.</p><p>만약 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo fence="true">(</mo><mi>β</mi><mo separator="true">,</mo><mi>ρ</mi><mo fence="true">)</mo></mrow><mo>=</mo><msup><mi>d</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>&gt;</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\left(\beta ,\rho \right)=d'&gt;1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em">(</span><span class="mord mathnormal" style="margin-right:0.05278em">β</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">ρ</span><span class="mclose delimcenter" style="top:0em">)</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.791em;vertical-align:-0.0391em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span></span> (서로소가 아닌 수, 즉 다른 공약수를 가지는 수)라면,
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>β</mi><mo>=</mo><msup><mi>d</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><msup><mi>β</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo separator="true">,</mo><mi>ρ</mi><mo>=</mo><msup><mi>d</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><msup><mi>ρ</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow><annotation encoding="application/x-tex">\beta =d'\beta ',\rho =d'\rho'</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.05278em">β</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.9463em;vertical-align:-0.1944em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em">β</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">ρ</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.9463em;vertical-align:-0.1944em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">ρ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span>으로 두었을 때,</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>a</mi><mo>=</mo><mi>b</mi><mi>q</mi><mo>+</mo><mi>r</mi><mi mathvariant="normal">.</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>⇒</mo><mi>d</mi><mi>α</mi><mo>=</mo><mi>d</mi><mi>β</mi><mi>q</mi><mo>+</mo><mi>d</mi><mi>ρ</mi><mo>=</mo><mi>d</mi><msup><mi>d</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><msup><mi>β</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mi>q</mi><mo>+</mo><mi>d</mi><msup><mi>d</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><msup><mi>ρ</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>=</mo><mi>d</mi><msup><mi>d</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mrow><mo fence="true">(</mo><msup><mi>β</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mi>q</mi><mo>+</mo><msup><mi>ρ</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo fence="true">)</mo></mrow><mi mathvariant="normal">.</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>⇒</mo><mi>α</mi><mo>=</mo><msup><mi>d</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mrow><mo fence="true">(</mo><msup><mi>β</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mi>q</mi><mo>+</mo><msup><mi>ρ</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo fence="true">)</mo></mrow><mi mathvariant="normal">.</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned} &amp;a=bq+r. \newline &amp;\Rightarrow d\alpha =d\beta q+d\rho =dd'\beta 'q+dd'\rho '=dd'\left(\beta 'q+\rho '\right). \newline &amp;\Rightarrow \alpha =d'\left(\beta 'q+\rho '\right). \end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.5em;vertical-align:-2em"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5em"><span style="top:-4.5em"><span class="pstrut" style="height:2.84em"></span><span class="mord"></span></span><span style="top:-3em"><span class="pstrut" style="height:2.84em"></span><span class="mord"></span></span><span style="top:-1.5em"><span class="pstrut" style="height:2.84em"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2em"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5em"><span style="top:-4.66em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord mathnormal">b</span><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="mord">.</span></span></span><span style="top:-3.16em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.0037em">α</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.03588em">βq</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">ρ</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord mathnormal">d</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em">β</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord mathnormal">d</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">ρ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord mathnormal">d</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em">β</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord mathnormal">ρ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em">)</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">.</span></span></span><span style="top:-1.66em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord mathnormal" style="margin-right:0.0037em">α</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em">β</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord mathnormal">ρ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em">)</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">.</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2em"><span></span></span></span></span></span></span></span></span></span></span></span></div><p>이 되므로, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>d</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mi mathvariant="normal">∣</mi><mi>α</mi></mrow><annotation encoding="application/x-tex">d'|\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0019em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.0037em">α</span></span></span></span></span> 이다. (즉, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.0037em">α</span></span></span></span></span>는 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>d</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow><annotation encoding="application/x-tex">d'</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7519em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span>의 배수)</p><p>즉, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>d</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mi mathvariant="normal">∣</mi><mi>α</mi><mo separator="true">,</mo><msup><mi>d</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mi mathvariant="normal">∣</mi><mi>β</mi></mrow><annotation encoding="application/x-tex">d'|\alpha ,d'|\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0019em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.0037em">α</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.05278em">β</span></span></span></span></span>가 되어 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.0037em">α</span></span></span></span></span> 와 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.05278em">β</span></span></span></span></span>는 서로소라는 것에 모순이다.
이는 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo fence="true">(</mo><mi>β</mi><mo separator="true">,</mo><mi>ρ</mi><mo fence="true">)</mo></mrow><mo>=</mo><msup><mi>d</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>&gt;</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\left(\beta ,\rho \right)=d'&gt;1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em">(</span><span class="mord mathnormal" style="margin-right:0.05278em">β</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">ρ</span><span class="mclose delimcenter" style="top:0em">)</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.791em;vertical-align:-0.0391em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span></span> 라는 가정에서 나타나는 모순이므로 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo fence="true">(</mo><mi>β</mi><mo separator="true">,</mo><mi>ρ</mi><mo fence="true">)</mo></mrow><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\left(\beta ,\rho \right)=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em">(</span><span class="mord mathnormal" style="margin-right:0.05278em">β</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">ρ</span><span class="mclose delimcenter" style="top:0em">)</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span></span> (즉, β와 p는 서로소)이다.</p><p>따라서 곧 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo fence="true">(</mo><mi>b</mi><mo separator="true">,</mo><mi>r</mi><mo fence="true">)</mo></mrow><mo>=</mo><mi>d</mi></mrow><annotation encoding="application/x-tex">\left(b,r\right)=d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em">(</span><span class="mord mathnormal">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="mclose delimcenter" style="top:0em">)</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal">d</span></span></span></span></span>라는 것이다.</p><br><p>※ <em>a</em>와 <em>b</em>의 최대공약수 <em>d</em>가 있다고 할때 dα = dβ + r이고, (α,β)=1 서로소이다.
따라서 <em>r</em>도 <em>d</em>의 배수여야 한다. <em>r=dρ</em></p><p>이때 (β,ρ)&gt;1 즉 다른 나누어지는 수 <em>d'</em>가 있다면 α,β가 서로소라는 가정에 모순이기에 (β,ρ)=1 서로소이다.
따라서 (dβ,dρ)=(b,r)=d=(a,b)이다.</p><br><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="구현">구현<a href="#구현" class="hash-link" aria-label="Direct link to 구현" title="Direct link to 구현">​</a></h3><p>그렇다면 프로그래밍 언어로 어떻게 구현할 수 있을까요?
먼저 큰 숫자의 최대공약수를 구하는 예제를 봅시다.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        a ＝ b × q   ＋ r</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    78696 ＝ 19332×4 ＋ 1368</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    19332 ＝ 1368×14 ＋ 180</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     1368 ＝ 180×7 ＋ 108</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      180 ＝ 108×1 ＋ 72</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      108 ＝ 72×1 ＋ 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       72 ＝ 36×2 ＋ 0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>규칙을 찾으셨나요?</p><p><em>a</em>와 <em>b</em>의 최대공약수는 상대적으로 작은 <em>b</em>와 <em>r</em>의 최대공약수와 같기 때문에
<em>b</em>와 <em>r</em>의 최대공약수를 찾을 때까지(나머지<em>r</em>이 0이 될때까지) 반복합니다.</p><p>나머지가 0으로 떨어질때까지 <code>gcd</code>를 재귀적으로 호출하는 방법으로 구현해봅시다!</p><div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// c/c++</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int gcd(int a, int b) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return b ? gcd(b, a%b) : a;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>유클리드 호제법을 bitwise shift를 사용해 더 빨리 계산하는 binary GCD 알고리즘도 있습니다!</p><br><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><p><a href="https://ko.wikipedia.org/wiki/%EC%9C%A0%ED%81%B4%EB%A6%AC%EB%93%9C_%ED%98%B8%EC%A0%9C%EB%B2%95" target="_blank" rel="noopener noreferrer">[wiki] 유클리드 호제법</a></p>]]></content:encoded>
            <category>math</category>
            <category>tech</category>
        </item>
        <item>
            <title><![CDATA[ChatGPT: 부와 신앙의 이중성에 대해]]></title>
            <link>https://jwher.github.io/posts/chatgpt-duality-of-wealth-and-faith</link>
            <guid>https://jwher.github.io/posts/chatgpt-duality-of-wealth-and-faith</guid>
            <pubDate>Sun, 21 May 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Zior Park 크리스쳔 가사에 대한 고찰]]></description>
            <content:encoded><![CDATA[<p><a href="/posts/chatgpt-duality-of-wealth-and-faith"><img loading="lazy" alt="programmers" src="/assets/images/chatgpt-b9678dc6f6f6630b13a460263ef94289.png" width="512" height="512" class="img_ev3q"></a><br>
<em>이 글은 ChatGPT(GPT4)와 Zior Park 크리스쳔 가사를 두고 이야기한 내용을 정리해 작성했습니다.</em>  </p><p>23.05.21 첫 작성</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="서문">서문<a href="#서문" class="hash-link" aria-label="Direct link to 서문" title="Direct link to 서문">​</a></h2><p>요즘 ChatGPT는 뜨거운 감자입니다. 2022년 11월 30일 첫 출시되었으니, 이 글을 쓰는 시점으로 6개월 정도 되었습니다.</p><p>ChatGPT의 GPT는 Generative Pre-trained <a href="/posts/attention-is-all-you-need">Transformer</a>의 약자입니다. 고성능의 Large Language Model은 이전부터 연구되어 왔으나, ChatGPT가 유명해진데는 대중이 사용할 수 있게(Chat) 공개된 첫 LLM이였기 때문일 것입니다.</p><p>ChatGPT가 공개된 이후 대중들은 뛰어난 성능에 감탄했습니다. 이전까지는 정보를 찾기 위해 인터넷 검색에 의존해야 했고, 이는 검색엔진에 맞는 쿼리를 잘 작성하는 능력이 필요했습니다. 또한, 이렇게 검색해 얻은 결과도 전부 필요한 내용이 아니기 때문에 추려내는 노력과 시간이 소비되었습니다.</p><p>ChatGPT가 부순 기존 인터넷 검색의 틀은, 기존 검색엔진을 기반으로 한 인터넷 기업들을 떨게 만들었습니다. ChatGPT는 검색에 필요한 노력이 필요없게 만들었습니다. 인터넷 기업들은 사용자들을 붙잡기 위해 LLM에 대한 더 큰 투자와 경쟁을 하기 시작했고, 이는 인공지능 발전을 가속시킬 것으로 보입니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="chatgpt와-대화">ChatGPT와 대화<a href="#chatgpt와-대화" class="hash-link" aria-label="Direct link to ChatGPT와 대화" title="Direct link to ChatGPT와 대화">​</a></h2><p>인공지능 시대가 된다면 어떤 일들이 일어날까요? "생각"이라는 인간이 유일하게 할 수 있는 것을 대신함으로써 편리함을 제공할 지 모릅니다. 하지만 신앙을 가진 사람으로써 든 생각은 세상의 혼돈이였습니다.</p><p>현대 사회와 문화는 다원주의가 깊이 파고들었고, 하나님이 인간에 부여한 권리와 규범을 의심하게 만들었습니다.
마침 이런 현대의 신앙에 대한 재미있는 노래를 듣고 있었습니다.</p><iframe width="560" height="315" src="https://www.youtube.com/embed/IZFPv2fixxc" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>가사 Lyrics</summary><div><div class="collapsibleContent_i85q"><p>돈은 날 더 기분 좋게 만들어<br>
<!-- -->Money makes me feel better </p><p>넌 이게 지옥행 티켓이라고 했지<br>
<!-- -->You told me it was a ticket to hell </p><p>오케이, 근데 어째서?<br>
<!-- -->Okay, how come? </p><p>이런 내가 악마 같아?<br>
<!-- -->Do you think that I'm a devil? </p><p>섹스는 날 더 기분 좋게 만들어<br>
<!-- -->Sex makes me feel better </p><p>너가 뭔데 날 판단해?<br>
<!-- -->How could you judge me? </p><p>네가 그럴 자격이 없다는 걸 알아<br>
<!-- -->I know you don't deserve to </p><p>지금 넌 바리세인 마냥 굴잖아<br>
<!-- -->Now you act like a pharisee</p><p>내가 가난했을 땐<br>
<!-- -->When I was poor </p><p>엄마에게 난 골칫거리였지<br>
<!-- -->My mom was stressed out </p><p>근데 지금 봐 봐, 돈은 날 좋은 아들로 만들었어<br>
<!-- -->Now look, money made me a good boy to my mom</p><p>내가 가난했을 땐<br>
<!-- -->When I was poor </p><p>난 마치 배고픈 여우 같았어<br>
<!-- -->I was like a hungry fox </p><p>근데 지금 봐 봐, 난 내 친구들을 지하에서 구출했다니깐<br>
<!-- -->Now look, I saved a lotta buddies from the basement </p><p>방금 막 디올*을 샀어 (=크리스티앙 디올 Christian Dior)<br>
<!-- -->I just bought a christian</p><p>봐, 빛이 나<br>
<!-- -->It's blinging on my body</p><p>셀럽들과 함께 잔도 부딪치고 말이야<br>
<!-- -->I'm toasting with celebrities at the same bar</p><p>야, 나랑 자고 싶어?<br>
<!-- -->Hey, pretty do you wanna fuck with me? </p><p>안 될 거 없지<br>
<!-- -->That's no problem </p><p>근데 곧 일요일 아침이야<br>
<!-- -->But Sunday morning is coming </p><p>이제 교회에 가야돼<br>
<!-- -->I gotta go to church</p><p>난 여전히 존나 크리스천이야<br>
<!-- -->I'm still fucking christian </p><p>지금은 디올을 입고 있지만 말야<br>
<!-- -->Though I'm wearing new "christian" </p><p>내 알고리즘을 봐 봐<br>
<!-- -->You should check my algorithm </p><p>옛날의 나와 그리 다르지 않지<br>
<!-- -->It's not much different from the old me </p><p>난 여전히 존나 크리스천이야<br>
<!-- -->I'm still fucking christian </p><p>지금은 디올을 입고 있지만 말야<br>
<!-- -->Though I'm wearing new "christian" </p><p>내 알고리즘을 봐봐<br>
<!-- -->You should check my algorithm </p><p>옛날의 나와 그리 다르지 않지<br>
<!-- -->It's not much different from the old me </p><p>난 여전히 존나 크리스천이야<br>
<!-- -->I'm still fucking christian</p><p>난 여전히 존나 크리스천이야<br>
<!-- -->I'm still fucking christian</p><p>난 여전히 존나<br>
<!-- -->I'm still fucking </p><hr><p>악취가 내 방에 가득해<br>
<!-- -->Stinky smell's stuck in my room</p><p>방금 샤워를 했는데도 말야<br>
<!-- -->Even after I took a shower</p><p>이 냄새를 어떻게 없애지?<br>
<!-- -->How can I erase it</p><p>냄새의 출처는 어딘데?<br>
<!-- -->Where's the origin?</p><p>야 거기, 이거 네 얘기야<br>
<!-- -->Hey Mr. I'm talking about you</p><p>뭐가 웃겨?<br>
<!-- -->What's funny? seriously?</p><p>너도 이 냄새가 느껴지지<br>
<!-- -->You feel this disgusting smell</p><p>그건 네 입에서 나는 거야<br>
<!-- -->I think it's from your stinky breath</p><p>길거리 사람들아, 너희가 똑똑한 줄 알지?<br>
<!-- -->Street people, you think you're smart</p><p>너네들은 신 따윈 안 믿는다 하지<br>
<!-- -->You think you got no god</p><p>넌 스스로를 신이라고 생각하잖아<br>
<!-- -->But I know you worship yourself</p><p>얼마나 멍청한 신이야!<br>
<!-- -->What a stupid god!</p><p>어떻게 신이 거짓말쟁이야?<br>
<!-- -->Is your god a liar?</p><p>너의 신은 터무늬없어<br>
<!-- -->Your god is so outrageous</p><p>차라리 뒤지는게 나아<br>
<!-- -->You would better die</p><hr><p>오 주님, 제 사람들을 용서해주세요<br>
<!-- -->Oh, lord, forgive my people</p><p>전 제가 뭘 해왔는지도 모르겠어요<br>
<!-- -->I didn't know what I've done</p><p>오 주님, 제 손가락을 봐요<br>
<!-- -->Oh, lord, look at my finger</p><p>때가 껴있는 걸요<br>
<!-- -->Dirt is stuck in my nails</p><p>오 주님, 제 혀를 씻어주세요<br>
<!-- -->Oh, lord, please clean my tongue</p><p>토와 가래로 뒤덮혀있어요<br>
<!-- -->It's covered by pukes and phlegms</p><p>오 엄마, 전 이제야 이해가 가요<br>
<!-- -->Oh mom, now I get it why you told me</p><p>왜 엄마가 제가 어렸을 때로 돌아가고 싶다는지<br>
<!-- -->That you wanna go back When I was a child</p><p>난 여전히 존나 크리스천이야<br>
<!-- -->I'm still fucking christian</p></div></div></details><br><br><br><p>이 가사를 보고 어떤 생각이 드셨나요?
어떤 분은 현대 기독교인에 대한 모순을, 어떤 분은 졸부가 자기를 '크리스쳔'으로 포장했다는 생각을 하셨을 수도 있을 것 같습니다.
ChatGPT는 어떻게 생각했을까요? 아래에 ChatGPT와 대화를 다루고 있습니다.</p><p>(대담은 전부 영어로 이루여졌고, 번역하여 실었습니다.)</p><br><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="q1-이-가사를-읽고-내가-어떤-사람인지-묘사해봐">Q1. 이 가사를 읽고 "내"가 어떤 사람인지 묘사해봐<a href="#q1-이-가사를-읽고-내가-어떤-사람인지-묘사해봐" class="hash-link" aria-label="Direct link to Q1. 이 가사를 읽고 &quot;내&quot;가 어떤 사람인지 묘사해봐" title="Direct link to Q1. 이 가사를 읽고 &quot;내&quot;가 어떤 사람인지 묘사해봐">​</a></h3><p>그런 생각을 하게 된 문장과 단어를 함께 묘사해줘</p><p>(가사 생략)</p><br><blockquote><p>A1. 이 가사의 "나"는 특히 부와 사회적 지위 측면에서 상당한 변화를 겪은 인물로 보입니다. (나의) 페르소나는 "내가 가난했을 땐, 엄마에게 난 골칫거리였지", "내가 가난했을 땐, 난 마치 배고픈 여우 같았지"와 같이 빈곤이나 고난의 장소에서 비롯된 것 같습니다. "내가 가난했을 땐"이라는 반복되는 사용은 과거의 고난을 강조하여 (나의) 페르소나의 현재 상황과 대조를 이룹니다.</p></blockquote><blockquote><p>"근데 지금 봐 봐, 돈은 날 좋은 아들로 만들었어", "셀럽들과 함께 잔도 부딪치고 말이야" 가사에서 나타낸 듯, 페르소나가 부와 명성을 얻기 위한 고난으로부터 성장해왔음을 보입니다. 이 변화는 페르소나의 상호 작용과 나의 어머니와 친구들을 포함한 다른 사람들과의 관계에 눈에 띄는 영향을 미칩니다("근데 지금 봐 봐, 난 내 친구들을 지하에서 구출했다니깐").</p></blockquote><blockquote><p>또한 (나의) 페르소나의 새로 발견된 부는 "방금 막 디올을 샀어, 봐, 빛이 나"에서 알 수 있듯이 그를 물질주의로 이끄는 것 같습니다. 여기서 'Christian'이라는 단어는 하이엔드 패션 브랜드인 Christian Dior를 가리키는 것으로, 신분의 상징에 초점을 맞추는 것을 암시합니다.</p></blockquote><blockquote><p>더욱이 새로운 생활 방식 내에서 개인의 정체성과 종교적 성실성을 유지하는 데 어려움을 겪고 있습니다. (나의) 페르소나는 "이런 내가 악마 같아?" 그리고 "난 여전히 존나 크리스천이야"라는 대사에서 강조된 사회적 판단과 죄책감과 씨름하는 것 같습니다. (나의) 페르소나는 오해를 받거나 부당하게 판단된다고 느끼고 자신의 행동에 대해 방어적입니다.</p></blockquote><blockquote><p>"내 알고리즘을 봐 봐 옛날의 나와 그리 다르지 않지"라는 가사는 이 모든 변화에도 불구하고 여전히 자신은 본질적으로 같은 사람이라는 페르소나의 주장을 의미합니다.</p></blockquote><blockquote><p>전반적으로 가사는 자신의 정체성의 핵심 측면을 유지하면서 부와 명성으로 변화된 삶의 도전과 모순을 탐색하는 복잡한 개인의 그림을 그립니다. 이 캐릭터는 사회적 판단, 물질주의, 개인적 관계를 다루고 있으며 그들의 종교적 신념과 새로운 라이프스타일을 조화시키고 있습니다.</p></blockquote><br><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="q2-가사의-나는-크리스천이라-할-수-있을까">Q2. 가사의 "나"는 크리스천이라 할 수 있을까?<a href="#q2-가사의-나는-크리스천이라-할-수-있을까" class="hash-link" aria-label="Direct link to Q2. 가사의 &quot;나&quot;는 크리스천이라 할 수 있을까?" title="Direct link to Q2. 가사의 &quot;나&quot;는 크리스천이라 할 수 있을까?">​</a></h3><p>그런 생각을 하게 된 문장과 단어를 함께 설명해줘</p><br><blockquote><p>A2. 가사에 따르면, 캐릭터는 "난 여전히 존나 크리스천이야"와 "근데 곧 일요일 아침이야, 이제 교회에 가야해"라는 대사에서 자신을 기독교인이라고 말합니다. 이것은 캐릭터가 기독교인으로 정의하고 여전히 교회 참석과 같은 기독교 관행에 참여하고 있음을 시사합니다.</p></blockquote><blockquote><p>그러나 그의 기독교(믿음)는 또한 겉으로 보기에는 부를 자랑하는 것, 캐주얼 섹스("야, 나랑 자고 싶어?"), 잠재적으로 과도한 음주("셀럽들과 함께 잔도 부딪치고 말이야")와 같은 전통적인 기독교 가치와 일치하지 않을 수 있는 행동과 병치하고 있습니다. 이는 캐릭터가 자신의 행동과 믿음을 조화시키려고 애쓰고 있음을 나타내거나, 자신의 믿음을 비전통적인 방식으로 해석함을 의미할 수 있습니다.</p></blockquote><blockquote><p>캐릭터가 가사에서 'Christian'이라는 단어를 두 가지 다른 방식으로 사용하는 것도 주목할 만합니다. 첫 번째는 그의 신앙을 언급하는 것이고, 두 번째는 물질적 소유물을 언급하는 것입니다(아마도 명품 브랜드인 Christian Dior). 'Christian'의 이중 사용은 캐릭터의 영적 정체성과 물질주의적 추구 사이의 긴장을 암시할 수 있습니다.</p></blockquote><blockquote><p>그렇다면 가사의 '나'는 기독교인이라고 할 수 있을까요? 캐릭터의 자기 정의와 교회 출석으로 볼 때 그가 자신을 기독교인이라고 생각한다고 말하는 것이 타당해 보입니다. 그러나 그의 행동은 일부 사람들이 생각하는 기독교인의 행동과 일치하지 않을 수 있으며, 이는 그의 신앙과 복잡한 관계가 있음을 나타냅니다. 도덕적, 사회적 도전에 직면한 이러한 이분법과 정체성 탐구는 노래 가사를 포함한 많은 예술 작품의 공통 주제입니다.</p></blockquote><br><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="q3-나는-가사의-내가-부자가-된-후-기독교인을-산-것을-풍자한-것-같아">Q3. 나는 가사의 '내'가 부자가 된 후 '기독교인'을 산 것을 풍자한 것 같아.<a href="#q3-나는-가사의-내가-부자가-된-후-기독교인을-산-것을-풍자한-것-같아" class="hash-link" aria-label="Direct link to Q3. 나는 가사의 '내'가 부자가 된 후 '기독교인'을 산 것을 풍자한 것 같아." title="Direct link to Q3. 나는 가사의 '내'가 부자가 된 후 '기독교인'을 산 것을 풍자한 것 같아.">​</a></h3><p>캐주얼 섹스("야, 나랑 자고 싶어?"), 과도한 음주("셀럽들과 함께 잔도 부딪치고 말이야") 그리고 가사의 "옛날의 나와 그리 다르지 않지"가 이 내용을 뒷받힘 해.</p><br><blockquote><p>A3. 당신의 해석에 따르면 캐릭터는 자신의 행동과 아마도 부, 지위, 종교에 대한 더 넓은 사회적 태도의 모순을 풍자라는 도구로 비판하거나 폭로하는 것 같습니다.</p></blockquote><blockquote><p>"난 방금 크리스천을 샀어 봐, 빛이 나"라는 가사는 실제로 모든 기독교 가치를 고수하지는 않지만 기독교 생활 방식을 사거나 기독교의 상징(예: 보석류)을 사는 것에 대한 풍자적인 발언으로 받아들여질 수 있습니다.</p></blockquote><blockquote><p>캐주얼 섹스와 음주에 대한 대사는 전통적인 기독교 가치에 반하는 행동을 솔직하게 인정하는 것으로 볼 수 있으며 풍자를 더욱 뒷받침합니다.</p></blockquote><blockquote><p>“옛날의 나와 그리 다르지 않지”는 말은 새로 얻은 부와 명예, 심지어는 겉으로 드러나는 믿음(그가 산 ‘기독교인’)에도 불구하고 근본적으로 변하지 않았음을 시사합니다. 이 대사는 그의 현재 상황에 대한 아이러니와 모순을 강조하는 역할을 할 수 있으며 가사 전체에 걸쳐 풍자적인 어조를 강화합니다.</p></blockquote><blockquote><p>이 해석에서 가사의 "나" 캐릭터는 그의 말과 행동 사이의 부조화를 사용하여 사회적 가치와 기대의 위선이나 모순을 강조하고 청취자가 자신의 가정이나 판단에 의문을 갖도록 유도할 수 있습니다.</p></blockquote><br><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="q4-그래서-이-생각에-동의해">Q4. 그래서 이 생각에 동의해?<a href="#q4-그래서-이-생각에-동의해" class="hash-link" aria-label="Direct link to Q4. 그래서 이 생각에 동의해?" title="Direct link to Q4. 그래서 이 생각에 동의해?">​</a></h3><p>대중이 어떻게 받아들일지 설명해줘.
대답하기 어렵다면, 너는 인터넷 정보(일반적인 생각)로 학습되었기 때문에 네가 어떻게 받아들였는지 설명할 수도 있어.</p><br><blockquote><p>A4. AI로서 나는 개인적인 신념이나 감정이 없기 때문에 '동의' 또는 '동의'하지 않습니다. 그러나 내 훈련 데이터를 기반으로 귀하의 관점을 분석하고 해석할 수 있습니다.</p></blockquote><blockquote><p>캐릭터에 대한 당신의 생각이 풍자적이거나 아이러니하다고 해석하는 것은 그럴듯합니다. 특히 전형적인 기독교 규범과 모순되는 캐릭터의 행동과 종교적 정체성과 물질적 부의 의도적인 병치를 고려할 때 그럴듯합니다. 이러한 모순은 캐릭터 자신의 행동이나 그를 둘러싼 사회적 기대에 대한 인식과 잠재적인 비판을 암시합니다.</p></blockquote><blockquote><p>일반 대중이 그것을 어떻게 받아들일지는 듣는 사람의 관점, 문화적 배경, 개인적 신념, 가사에 제시된 이분법에 대한 친숙도에 크게 좌우됩니다.</p></blockquote><blockquote><ul><li>어떤 사람들은 그것을 사회 내의 위선이나 모순에 대한 비판, 특히 부, 명성, 종교의 개념에 대한 비판으로 볼 수 있습니다.</li></ul></blockquote><blockquote><ul><li>다른 사람들은 캐릭터가 자신의 과거와 현재 자신, 행동, 선언된 믿음 사이의 긴장을 반영하는 개인적인 정체성 탐구로 해석할 수 있습니다.</li></ul></blockquote><blockquote><ul><li>일부는 새로운 부와 명성이 가져온 변화에 맞서 싸우는 캐릭터를 보여주는 투쟁과 변화에 대한 이야기로 볼 수 있습니다.</li></ul></blockquote><blockquote><ul><li>풍자나 아이러니를 인지하지 못한 채 등장인물의 삶에 대한 직설적인 이야기로 가사를 그대로 받아들이는 사람들도 있을 것이입니다.</li></ul></blockquote><blockquote><p>음악의 유사한 주제에 대한 인터넷 토론은 청취자 간의 다양한 관점을 반영하여 광범위한 해석을 제안합니다. 종종 대화는 노래 속 인물이 '올바른'지 '그른지'에 관한 것이 아니라 노래가 다루는 더 넓은 주제와 사회적 문제에 관한 것이기도 합니다. 따라서 이 경우 토론은 물질주의, 정체성, 종교, 사회적 판단 및 개인적 변화의 복잡성을 중심으로 진행될 수 있습니다.</p></blockquote><blockquote><p>요컨대 음악은 다른 형태의 예술과 마찬가지로 음악을 이해하는 하나의 '올바른' 방법을 규정하기보다는 종종 대화와 해석의 여지를 열어줍니다. 해석의 풍부함은 음악을 표현과 의사소통을 위한 강력한 매체로 만드는 요소의 일부입니다.</p></blockquote><br><p>(이미 가사의 내가 어떤 사람인지 잘 나와있습니다. 후렴에 죄<em>smell</em>와 무지<em>worship yourself</em>에 대한 정죄, 그리고 <em>still</em> 이라는 표현이 모순적일지라도 가사의 내가 확실한 기독교인이라는 뉘앙스를 주고 있습니다. <em>It's not much different from the old me</em> 또한, 이전부터 기독교인으로 정체성을 가지고 있었고, 마지막에는 하나님께 회개 기도를 드립니다. 가사는 부의 과시, 성적 방종, 과도한 음주 등 전통적인 기독교 가치를 짓밟는 내용을 병치하며 내용을 강조하고 있습니다. 저는 전통적인 가치를 짓밟는 가사의 나를 기독교인이 아니라고 부정하고 싶었던것 같습니다.)</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>대담원문</summary><div><div class="collapsibleContent_i85q"><hr><p>(Q1) Read this lyrics and try to describe who "I" am. Describe the sentences and words that come to mind.</p><p>Money makes me feel better You told me it was a ticket to hell  ok how come? Do you think that I'm a devil? Sex makes me feel better  how could you judge me? I know you don't deserve to Now You act like a Pharisee When I was poor my mom was stressed out Now look  money made me a good boy to my mom When I was poor I was like a hungry fox Now look I saved a lotta buddies  from the basement I just bought a Christian  it's blinging on my body I'm toasting with celebrities at the same bar Hey pretty do you wanna fuck with me?  That's no problem But Sunday morning is coming  I gotta go to church I'm still fucking christian Though I'm wearing new 'Christian' You should check my algorithm It's not much different from the old me.</p><hr><p>(A1) The "I" in these lyrics appears to be a character who has undergone significant transformation, especially in terms of wealth and societal status. The persona likely comes from a place of poverty or hardship, as indicated by lines like "When I was poor my mom was stressed out" and "When I was poor I was like a hungry fox". The repeated use of "When I was poor" emphasizes the past hardship, setting a contrast with the persona's present circumstances.</p><p>The lyrics suggest that the persona has risen from this hardship to attain wealth and a certain level of fame, as indicated by lines like "Now look money made me a good boy to my mom" and "I'm toasting with celebrities at the same bar." This transformation has a notable effect on the persona's interactions and relationships with others, including his mother and friends ("I saved a lot of buddies from the basement").</p><p>The persona's newfound wealth also seems to lead him towards materialism, as shown by "I just bought a Christian it's blinging on my body". The word 'Christian' here is likely a reference to Christian Dior, a high-end fashion brand, suggesting a focus on status symbols.</p><p>Furthermore, there's a struggle with maintaining personal identity and religious integrity within the new lifestyle. The persona seems to be wrestling with societal judgement and guilt, highlighted in the lines "Do you think that I'm a devil?" and "I'm still fucking Christian". The persona feels misunderstood or unfairly judged and is defensive about his actions.</p><p>The lyric "You should check my algorithm It's not much different from the old me" signifies the persona's assertion that despite all these changes, he remains essentially the same person as before.</p><p>Overall, the lyrics paint a picture of a complex individual who is navigating the challenges and contradictions of a life transformed by wealth and fame while maintaining the core aspects of his identity. This character is dealing with societal judgement, materialism, personal relationships, and reconciling their religious beliefs with their new lifestyle.</p><hr><p>(Q2) Can "I" in the lyrics be called a Christian?
Explain with the sentences and words that come to mind.</p><hr><p>(A2) Based on the lyrics, the character refers to himself as Christian in the lines "I'm still fucking Christian" and "But Sunday morning is coming, I gotta go to church." This suggests that the character identifies as a Christian and still participates in Christian practices such as attending church.</p><p>However, his Christianity is also seemingly juxtaposed with behaviors that might not align with traditional Christian values, such as boasting about wealth, casual sex ("Hey pretty do you wanna fuck with me?"), and potentially, excessive drinking ("I'm toasting with celebrities at the same bar"). This could indicate that the character struggles to reconcile his behavior with his faith, or it could mean that he interprets his faith in a non-traditional way.</p><p>It's also notable that the character uses the word 'Christian' in two different ways in the lyrics. First, to refer to his faith, and second, as a reference to a material possession (likely Christian Dior, the luxury brand). This double use of 'Christian' might suggest a tension between the character's spiritual identity and his materialistic pursuits.</p><p>So, can "I" in the lyrics be called a Christian? From the character's self-identification and church attendance, it seems fair to say that he considers himself a Christian. However, his actions may not align with what some people consider Christian behavior, indicating a complex relationship with his faith. This kind of dichotomy and exploration of identity in the face of moral and societal challenges is a common theme in many works of art, including song lyrics.</p><hr><p>(Q3) I think the "I" in the lyrics is sarcastic for buying a "Christian" after becoming rich.
Casual sex("Hey pretty do you wanna fuck with me?"), excessive drinking("I'm toasting with celebrities at the same bar") and the lyrics that "It's not much different from the old me" are backing it up.</p><hr><p>(A3) Based on your interpretation, the character seems to use sarcasm as a tool to critique or expose the contradictions in his own behavior and perhaps even the broader societal attitudes towards wealth, status, and religion.</p><p>The lyric "I just bought a Christian it's blinging on my body" might indeed be taken as a sarcastic remark about buying into a Christian lifestyle or buying a symbol of Christianity (like jewelry, for example), while not necessarily adhering to all Christian values in his actions.</p><p>The lines about casual sex and drinking can be seen as candid acknowledgments of behavior that contradicts traditional Christian values, further backing up the sarcasm.</p><p>The statement "It's not much different from the old me" suggests that despite the newfound wealth, fame, and even the superficial display of faith (the "Christian" he bought), he hasn't fundamentally changed. This line may serve to emphasize the irony and contradiction in his current situation, reinforcing the sarcastic tone throughout the lyrics.</p><p>In this interpretation, the "I" character in the lyrics could be using the dissonance between his words and actions to highlight hypocrisy or contradictions in societal values and expectations, and perhaps to invite listeners to question their own assumptions or judgments.</p><hr><p>(Q4) So do you agree with this opinion?
Please explain how the general public will receive it.
If it is difficult to answer, you can explain how you took it because you learned from Internet information (general thoughts).</p><hr><p>(A4) As an AI, I don't have personal beliefs or emotions, so I don't 'agree' or 'disagree'. However, I can analyze and interpret your viewpoint based on my training data.</p><p>Your interpretation of the character as being sarcastic or ironic is plausible, especially when considering the character's behaviors that contradict typical Christian norms, as well as the intentional juxtaposition of material wealth with religious identity. These contradictions suggest an awareness and potential criticism of the character's own behaviors or the societal expectations surrounding him.</p><p>As for how the general public might receive it, that largely depends on the listener's perspective, cultural background, personal beliefs, and their familiarity with the kind of dichotomies presented in the lyrics.</p><ul><li>Some listeners may see it as a critique of hypocrisy or contradiction within society, particularly around the concepts of wealth, fame, and religion.</li><li>Others might interpret it as a personal exploration of identity, with the character reflecting on the tension between his past and current self, his actions, and his proclaimed faith.</li><li>Some could view it as a narrative about struggle and transformation, showcasing a character grappling with the changes brought about by newfound wealth and fame.</li><li>There might also be listeners who take the lyrics at face value, seeing it as a straightforward narration of a character's life without perceiving the sarcasm or irony.</li></ul><p>Internet discussions around similar themes in music suggest a wide range of interpretations, reflecting the diversity of perspectives among listeners. Often, the conversation isn't just about whether the character in the song is 'right' or 'wrong' but also about the broader themes and social issues touched upon by the song. So, in this case, discussions might revolve around materialism, identity, religion, societal judgement, and the complexities of personal change.</p><p>In sum, music, like other forms of art, often opens up spaces for dialogue and interpretation rather than prescribing a single 'correct' way to understand it. The richness of interpretation is part of what makes music a powerful medium for expression and communication.</p></div></div></details><br><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="결론">결론<a href="#결론" class="hash-link" aria-label="Direct link to 결론" title="Direct link to 결론">​</a></h2><p>어떤가요? 조금 놀랍지 않은가요? 자연어처리 기술적으로, 질문하는 '나'와 가사속의 '나' 그리고 GPT 본인의 '나'를 문맥에 맞게 정확하게 구분하고 있습니다.
또한 가사를 해석하고 어떤 뜻을 담고 있는지, 어떤 문장에서 유추할 수 있는지 정확한 문맥 파악 능력을 갖고 있습니다.</p><p>물론 ChatGPT가 완벽한 것은 아닙니다. 대표적으로 hallucination(환각) 현상 문제가 있습니다. 학습하지 않은(모르는) 정보에 대해 물어보아도 마치 알고 있는 듯 대답합니다. (쉬운 말로, 자주 거짓말을 합니다) 이는 ChatGPT가 생성형(generative) 모델이기 때문입니다. 생성형 모델은 글자 입력을 받고, 그 다음에 올 확률이 가장 높은 글자를 생성하는 방법으로 동작합니다. 따라서 모르는 정보를 물어보아도 가장 가능성이 높은 단어와 문장을 만들어내며 그럴싸한 답변을 만듭니다.</p><p>이외에도 윤리적 문제를 들며 현재 규제의 필요성을 논하고 있습니다. 인공지능에 대해 여러가지를 생각해 볼 때입니다.</p><p>여러분의 생각은 어떤가요?</p><br><br><br>]]></content:encoded>
            <category>tech</category>
            <category>theology</category>
        </item>
        <item>
            <title><![CDATA[코딩 기초 트레이닝2]]></title>
            <link>https://jwher.github.io/posts/cpp-coding-basic2</link>
            <guid>https://jwher.github.io/posts/cpp-coding-basic2</guid>
            <pubDate>Thu, 18 May 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[C/C++ 재활 훈련]]></description>
            <content:encoded><![CDATA[<p><a href="/posts/cpp-coding-basic2"><img loading="lazy" alt="programmers" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAAEYCAYAAACHjumMAAAjvElEQVR4nOzdCXwU5f0/8O/em90km2NzkwsCCSGBgFwiKIegeFFr1WIRq+AB4q1g7cHf+lOrrXfRH1qVilhQqdh6VawKIghy3yQkIZBAEnIfm733/5pB+HEkYbOZmWdm9vN+vfIix+7MF8h+9nlmnkNPEjJbbYlmi22CwWQp0ukNOWaLLZtIk0QaiiUiCxFppKwHQMWcFAi0EFGt29l+2OPuKPG4HLuc7c3fOh3NpVIVIeoLWqszGGwJ6Vfp9cZpVltCHhGNEvN8ABCEQKDM6Wj50dXR+l1zXeU7fp+nVaxTiRIwlqj4sVZbwuURkbG/1Or0/cQ4BwAIIBCob2+p+6ijreEDR0v9N36/zyPk4QUNGIvNnhGfnPOGTm+YIuRxAUB8Pq97f3PdkVtb6o/+INQxBQkYS7R9YHRc6uNmq20qEUUKcUwAYMLndTvXNtdXvtDeXPup3+fz9+Zgul49WW80xSZlPRyX3Hel3mguICJjb44HAMxptTp9tiUqbrreYI73eVzFPq+7MdSDhdyCsUTH58Wn5CzX6Y1DQj0GAMhdoLbhWNltLQ1HPw3l2SEFjD1twLzImKRXQnkuACiP29n2VvWh3ff4fR5HT57Xo4DR6gyGxIz8/zVbom/rcYUAoGhej+v7usr9NzodLVXBPifoazBancGSmJ73ntlquynkCgFAsbQ6fYbZGjOho73pC7/P0xzMc4JqwXDhktpv6Bq9wTS811UCgNK1V5VsGexxO8rO90DteR/AdYvS895FuADAT6xJmYNWmizRfc/3wPMGDH/NxRpzrWClAYDi6Y3mooQ+ucu0OkNUd4/rNmDsaQPm4YIuAHRGbzCPTs4c9FZ3j+nyIq/ZYsuNS+n3mSiVAYAq6AymfK1OV97R1rSjs5932oLR6Y2WhPS890WvDgAULzou7SVjRFRBZz/rNGBsCelzdXrjYNErAwDl02hi7Kn9f6vV6kxn/+icLpIl2p4bl9x3FRZ/AoBg6fTGAo1WW9XR1rj59O+f04KJjkt5Mpi7SwAAp4uMSbxbqzec0TA5I0gstoRMszVmsuSVAYDiaXWGgviUnDPuOp8RMDH29EVcI0byygBAFaxR8S8YzdaEk1+fChhLVPxYo9l6JbPKAED5NJooS1T8ZSe/PBUwVlsCukYA0GtRsSl3nfycDxitzmCMiIzFLGkA6DWdwTjGEhVfSCcDxhqTMFWr0+ewLgwAVEFjtSXcTycDxhwRfR3rigBAPcwWWz6dasHYEvqzLggA1ENnMI40W2yJ2p9uKY1mXRAAqIrWbLWN11qi4ieyrgQA1MdssU3QGkwWTGoEAMEZzJYirU5vyGNdCACoj05nyNGaLbYs1oUAgAppNHYtkSaJdR0AoE5a0pCNdREAoE5aIrKyLgIA1EmPlevCV1KinVKTkyg2NpoMej15PF5qammhQxWV1NAY1MZ9AN3SZA0aF2BdBEjLbDbR0MJ8stm63tKmobGJ9h44SG1tPdrrHOAMWBozzNjjY2n0iKJuw4UTFxtDw4sKKT4uVrLaQH0QMGEkOclOw4cWktl0zuLvneJaOiOGFVKiPV702kCdEDBhIsYWRfl5oc1pLRg0gL9eA9BTCJgwYDIZ+ZaL0WAI6fnc8wYO6Mu3aAB6AgETBgb0yya9Xt+rY5jNZioqHChYTRAeEDAqNyAni9JShRmsHWOLpvS0FEGOBeEBAaNiERFmwQNhQE42WS0Rgh4T1AsBo2I52ZlkCPG6S1cMBj1lpKcKekxQLwSMSmk0GsG6RmfLTE+j+NgYUY4N6oKAUamMPuK2MrIy00Q9PqgDAkaFtBoNZYrcjYmPi6VIq0XUc4DyIWBUyB4fSxaRL8RqtVoaPChX1HOA8iFgVCgjXZruS3R0FMXH4VoMdA0BozJWq4VvwUglLQULIkLXEDAqk5Qg7cTEpMQE0btjoFwIGJWRusui02kpJztD0nOCciBgVCbUCY29ER8f2+u5TqBOCJge0Gg0/IXN5KQEfl6OXq9jXdIZdDodWa3SL7FsMhqpT2qy5OcF+cPbznlwodI/J5uGDs7nh8ifvliT3++npuYWqq45Tkcqj1F5RSUdr6tnVmuMLYq0WjZLLGdmpNKhw5VMzg3yhYDphj0+jq6/dir/Z2e0Wi2/tCT3cXIxJy50yiuO0J69JbRnfzF5vT7J6o2O6n4ZTDFFmM0UHWWlltZ2ZjWA/OhiEjP/H+si5MhoMNCvZ/yCD4+e4Fo83HNyB/SlUcOHUGKCnTo6nNTc0iparSfZ42N7XK+Q9Ho91dTWMTs/yA9aMF0YM3oYf52lN4xGIxXkD+A/uFbN+o1bqbLqGLndHsHqPJ1Ox/aaUGKinSLMJupwupjWAfKBgOnCyAuKBD1edmY6/9HU3EJfffM97TtwUNDjc+Ji2G7SqdNqKSnBToeOVDGtA+QDAdMJriVgMhlFOTbXKrpu2uVUdayG9uwrpi3bdpPP1/vrNFGRVoqOjhSkxt7Izk6nozW1orXSQFlwm7oTcbHitgQ0Gg1/W/eySRfTXbNuovy8nF4fM71PCn9c1kxGI6YPwCkImE5ERUrXEoiLjaHrpk2l6ddfE/IoXO4FLfb6Lz2RKPF0BZAvdJE6YTBI/8+S0zeTcvreTMfrGmj1199RWflhCmZPX7PJRHkD+klQYfBiY2yUYI/j/y4Q3tCC6YTHw+76AffCvOmGaTRj+rX80pTnkzegL5NAPJ/83BxZdNmALQRMJxwdTtYlUFZGHz5orpgynm8RdIYLFrnuuBgRYWZ+VwvYQ8B0oqm5hXUJPL1eRxcMLaS5t8+gMaMvOKdFkJ3RR9athOTkBNYlAGMImE44ZTZQTKvV0qRLxtCc2b+iMaOGkdFo4LdxTZf59iEpSYnYQynMYapAFy4cNYz5yNizWSIiqG9WBmVlpJHZaOTn/8gZF4zcBy72hi+0YLpw7Fgt6xK61CcthW6efi1NuPhC/lqHnCUlxMsuqEE6aMF0gXvh9pPpSm3RkVZ+7V2LJYLfyjUxIZ5a29r5SZVyw4UL14qpb2hkXQowgBZMF0rLK1iX0KWzWy0J9ji6ZOxIGj1iqCz3KsJiVOELAdOF43UNVFcvv3ddjUbDX+Q9G9dSSO+TQpdOGEsDc3P4Fo5cGAx6stnYrVUD7CBgulFTe5x1CeewWizdXtPgXswF+QNo6uRLKCU5UdLautM3K511CcAAAqYb23fuZV3COaKjgltzl2vpjL1wOH97O10G85QS4uPJFo1WTLhBwHSj7NARqpdRN8mg13faPepOXFwMjR5RRBeNvqDXC2j1hlar4RdLh/CCgDmP7bvk04rpze3e1JQkunTCRTR8aKFoa92cT2Z6quxvq4OwEDDnUVp+mHUJp0REmHr1fK7blJ2VTtdccSldUFQgedBotVoa0C9L0nMCWwiY86ipraOKw/JYAvL0LVN6q292Bk2ZNI4K83Mlnc/Eddm0Mp4/BcLCQLsgNDQ2UdHgfKY1nNgixSZoGOj1erLb4/hlIVwuNzk6OvhtV8SkPzXwrknU84A8oAUThCNVx6it3cG0BrPZJFpLw2q10KgRRTRl4jhJ9rbmumm97e6BMshvpSKZcrvdRAwHr0WYxX9BWiwR/PymyqpqfkHy1jbxNlFLtMdTxZGjoh2/NyIjrZSbk01ZmX34z7UaLbW2tVFZ+RHau7+EnC55zbaXMwRMEHQ6HUUy2PP5dFy3QgpcKym9TwqlpSbT/pJSKi4pF2WFv4z0NH67XX8gmIVBxRcXe+J2/nU/m8rf0jcZO78A7nK76es1G+jT/3xDGzZu5bvP0DVN1qBx8vgflrHszHSa8cufMa0hOdHOd5Ok5nZ7aNeeA1R2SPi7acUHy/mxRiwlJdr5Bb2um3Y5P0q6J1paWun9jz6jV994lxqbmkWrUckQMEHgug1jLxzOtIbM9FSmq9d5vV4qKa2g3XsPCHZMrtu5dv2Pku7ffdLoEUPpkftup2FFBYIc75XFf6fX3lhGHU75zWhnCXeRglBUmM907VuDXs98UzWui5Zgj+O3SOG6TC2tbb0+Jtf1DAQC1NAo3bu/wWCgl/+8kBY8cCc/+FAoo4YX8W9CpeWH6eixGsGOq3QImCAUDc6X5O5KV0xGg2yWYeC6aX3SUvhb5ty7dW/XoImKjKRDh6XpJo0bM4Jee/EJunDkMFFag8lJCTRp/Bg6VlPLj50SYsdOpUPABKEgP5dpwESYTfxymXISFWnl77LE2KKptrY+5BeTTqellpY2and0CF7j6X4/fx798XcPkj0+VtTzRESYaerk8fz/Gdf9C3cImCCcXDWOFS5cWFzgDUZUVCRlZfXhu3DH6xpCGqgXGWnlb42LITsrnV57/gm6auqlJOUlrGFFBTR0cD5t2rxD1Nv9coeBdkFg/QvCvcvLmclo5PdxumzSOL5Vo+vhLXWuNZQswjWu4cMK6e+L/0KjRw6VNFxOumTsKPpg6SL+ln+4kvdvrkywHtbe0xcsK1z3YMSwwTR54lhK7eFiV/37ZQk61ue6aZfTO68/R+lpKYIdMxSpKUn08fLX+YvA4QhdpCD4fD5+mQNWoqKs/LwhpTCZjJSRnsovmh4gosYg7hIZDAYyGgy93uKEC6nfPDSH/zDI5N/MEmGmX/xsKl1y0Uj6cduusBozg3EwQdBoNDT//jvI2MXoTrFxrYGeLjQlJ1wXc+fufXT0PFvBuNxuWv/DFnK5Qxs5bDaZ6OW/LKTJE8aGWKk0vvnuB1qzbiP/d5XDNsVi4YIUAROk22ZeT2kpbPrSaSmJ/Du80h09VkMlpYeo9nh9l4+pq2+gbTv3ks/Xs4vFMbZoeuaPC/glKEB6bW3tdKCknA+V9Ru30IZN22h/cSnmIgXLHeK7qhA0GmVcgzmf1JQk/qOpuYU2bt7BD7U/mz0+juxxsVTTTQidLS42hlYtX8z8eku48Xg89MOP22npPz6ites38Ut+nA0BE6TKqmp+ThILalufiWttTLpkDN9a6Wzka15uDrW2O8gRxNiYrIw+9MwTCxAuEigrP0wbNm2l73/Ywm/pw7VGuTeL7iBgglR26Ag/EpQFlnOQxKLX6/iRr9xHecUR/t+34ae7dRFmE7/S3uatO8nXzbiatNRkWvzyk/w4JRDesepafmeNo9W19O7yVXTocGWPj4GACVJl1VF+xTcWI2oDMlnSQCxcy5D7OF5XT/sOlPLXaGJjomlw4UDatmNPp88xm020/O2X+GkLIIyODif9uHXniVbKhi20r/hgryeiImCC5PcHaN36zbiIKKIEezz/4fP5qPJoNZUfquTnYe3ac+CMqQS5/fvSsjdfZDp9Q+m4f+ODZRX0/Q+bacPGbbRx83ZRBpQiYHqguobNTo9qb8GcTafT8esEcx8F+QPo0vEX0e59xXzgDOifTQ/fezvCJQRcl+fdFavoUEUl7dlXQhVHxF/MHgHTA4crj/K34WJjbJKeN9wC5nT2+Fh+LZzhwwbz88ESE+2KGdnMUle3jaWGgOkB7oW+fec+mnDxaEnPy3XPwolGo+HnJ8XFxvD7a2OztuAEc9tYagiYHtqxe6/kAaOmFgwXHiajkUxmIz/y1mQy8YuNm01G/md6nY4s/Ab/aKWcTyi3jaWGgOmh1tZ2foX5qEjpVpgTe6+i3tBoiAx6Az//iAsLrfb/bqnr9Xo+TMw/rWcTEWFiNt1CDYS4bSw1BEwItmzbTePHSdeK6W4siBD4loNez7ce9AY9P0lQr9ed+N6pP7nv6/gpCyc+/+l7BvwKiUWM28ZSw29HCLj/8GFFBRQdJU0r5uzV4k698HU6/gWu050VCLr/C4VT3+e/d+JzqbZAgeBJddtYagiYEHDvIvv2l9CoEUNDer7RYOC7DRERZv46BL8kpuXEqnVGo+GMkbsa0vArvnGP5cLEqIJJj3BCdc1xWrr8I0lvG0sNAdMD3Dt/VKSVX13f7w+cWIXtpzDgfnbyeoPZZOS7Emazkb/mYDr5YT7xJ1oQ4amt3cFv+7J951764qu1tGPXPtYliQ4BcxadVsvPcRk0sD+//GNGehplZaTxt0tTk5NwzQF6zO/30wcffUYvLHqLamrrWJcjqbB8tcTG2Cg/L4eGDhnEL9XItUi4bkligp3f98dkwp0O6D2Px0PLV35CS5at5G8ph6OwCJiiwoH8pLiBuTl06YSLMPsWRLd3fwk998rf+H2sw5lqAya3f1+6euokuvaay3q8ADVAb3zx1Vp69A/PUHMnC2qFG1UFDNdCmXv7DJo84SJ+0BeAlHw+H/1m4bP0warPWZciG6oImLTUZPrd/Hn8Ys8YYg6sPPzbp2jVJ6tZlyErig+YQQP709I3npd8hjPA6V5c9BbCpROKDpj+/bJo5buvojsETNXW1dNLry1hXYYsKbY/odFoaOFv7kO4AFM+n4/ueQh7F3ZFsQHTNzuDLhp9AesyIMxx3aJNW3awLkO2FBswMbZo1iVAmGtvd/Cjc6Frig2Y3XsPyG5xHQgvz7/yJlUdrWZdhqwpNmBcLjcten0p6zIgjK3buIV1CbKn2IDhfLjqcyo+WM66DAhD3677gYpLyliXIXuKDhiuizRj9oOsy4Aw9PRfXmNdgiIoOmA4x+vqadbdj1J9QyPrUiBM7N57AC3nICk+YDhfr1lPDzz6P1RaVsG6FAgDew8cZF2CYqgiYDjfrf+Rbpp1P63bsJl1KaBy//7sv6xLUAzVBAyn9ng93Xz7g3TDzHn8fsYAQjtQUoY3sR5QVcCc9OPWnXzQhMOapyCt997/mHUJiqLKgOE0t7Ty24sACOlACS7u9oRqA4b4LVdZVwBqUl1znN+vCIKn6oDZu7+EdQmgIp+vXsO6BMVRdcDgYhwI6cv/fse6BMVRdcA0Nbfwu+YBCAHLMvScqgOGc/+jT5yztzNAT23ftZffQA16RvUBs2PXPlqx8hPWZYDCffafb1mXoEiqDxjOU395jbZs28W6DFAoj8dD/8H1l5CERcC0Oxy0YOGz5EVXCUKwfuNWOnykinUZihQWAcMpLaugq6+fzY9lAOiJnXv2sy5BscImYDj7i0vpD0++wM9ZAgiGy+WiZSswPSBUYRUwnNVfr6OZdzxEtcfrWJcCCvD1mg1UU4vflVCFXcDQTzNix025kTZv3cm6FJC55bgD2SthGTAct8dDN9/+EC1+6x/k92PSEpzL6XTR7r3FrMtQNF1MYmbYbkvn9fn46QQHSw9RXv++FBcbw7okkJE333mfVn+zjnUZiqbJGjQOb98/bUX78rN/oKumTmJdCshAS0srjZxwLb89DoQubLtIZwsEAnTv/D/SrXPm07Yde1iXA4z9uHUXwkUACJjTcCHz7Xc/0C9uvpuWLFuJnSPD2AerPmNdgiqgi9SNjD6pdO+cX9N10y5nXQpIaPvOvfTzX83h33CgdxAwQdDr9TT7lhto1swbyB4fx7ocENnNsx+kdT9gLSEhIGB6wBYdRVMnX0K/eWgORUdHsS4HRLBp8w668df3sC5DNcL6NnVPuVxu2r2vmFas/JQ6OpxkNpsoOSmBdVkgoEd+9zRVVlWzLkM10ILppbwBfWnho/fR6JFDWZcCvdTS0kpDxlzJugxVQcAIJLd/XyoqHEh3zrqJsjPTWZcDIeBaLx+u+px1GaqCgBHBZZPG0TVXTqZxY0ZQVKSVdTkQhH0HDtJV18/GspgCQ8CIyGAw0BWXjaerL59EF180kgwGPeuSoBOBQIDuvPe3mBYgAgSMhAYN7E9XXT6RLh1/EeX0y2JdDvzkxUVv0UuvLWFdhiohYBjQarU0pDCPcvpm0RVTxvNdKZ1Ox7qssOTo6KBJV83ASociQcDIQHxcDF099VIaM2oYJSTEU8HA/vzgPhCXy+Wih3/7NH3yxdesS1EtBIwMRVotdPXUSXTNlZfSiGGD0boRyddrN9CsuQtYl6FqCBiZi42x0YD+2ZSelkIjLxhCI4cP4edIaTQa1qUpWn1DIz+pFTt/igsBo0DZmek0afwYGlI4kPqkJlPBoFzSo5XTI3Me+B19sXot6zJUDwGjAjG2aCoclMsP9Js8cRz/OXTtky++pnsexgwZKSBgVIhr4axavpiioyJZlyI7dfWNNHL8z7AUg0Sw4JQKlVccoQ8/wpD3s3l9Ppr30EKEi4QQMCrldLlYlyArXKi89OrbtHHzdtalhBUEjEqNvXA46xJkZeXHn9NfF7/Duoywg4BRoYkXX0iDC/JYlyEbJaWH6E/PL2ZdRlhCwKhMjC2aHnvkbtZlyMbxunp+Ccz6hkbWpYQlBIzKPDDvNuqXncG6DFnwer00//fPUA32IWcGE15UpCB/AN143VWsy5CFjg4nXTdjLr/OC7CDFoxKxMXG0OsvP0Umo5F1KbJw65z5CBcZQAtGJaZOuYRSkhNZl8Ec1y1a9PpS3I6WCbRgVCA2Jprm33cH6zJk4fW3l9OLr77Nugz4CVowKvC7+fOwTxMRPfHsK/T20g9ZlwGnQcAoXNHgfPr5NeG9tW27w0HP//VNeuudD1iXAmdBwCjck394iHUJTHm9Xnr86Zfpg4+wWb0cIWAUbMLFF1J+Xn/WZTBTUlpOt85ZQFVHsROjXCFgFCrCbKaFv7mXdRnM7Np7gG6542FqbGpmXQp0A3eRFOqGn19BmelprMuQHNclWvXJapox6wGEiwKgBaNASYl2mv/AnazLYOLRhc/Syo+/YF0GBAkBo0APzptFlogI1mVIauv23fT4n16mnbv3sy4FegABozAJ9jiaMG406zIkw3WJli5fRc++sBiLaCkQAkZBNBoNPffUb/nN2cJBY1Mz3TZ3AW3fuZd1KRAiBIyCTJ44lt9mVu24YHnulb/RshUfsy4FegkBoyDz7pzJugRReTweWrJsJb35zvtUU4s1XNQAAaMQM2/6ORXmq3O/I6/XSxs2baM3liyn79b/yLocEBACRgH0ej3dNuMXrMsQRUtLK02/7X7au7+EdSkgAgSMAsyZ/SvKzOjDugxBcYHy1tIPaM26TVRX38C6HBAJAkbmtFotzZ55A+syBFN8sJz++a8v6J33PqIOp5N1OSAyBIzMTZk0ThVrvezZV0yv/W0ZffHVWvL5fKzLAYkgYGQsKipS0csxtLU76ONPvqQ3lqygiiNVrMsBBhAwMjbtykv5xbyV5lh1Lb382hL65rsfcLs5zCFgZMoeH0f3z72VdRlBCwQCtH7jVvrk8//Svz//L7U7OliXBDKAgJGpObN+RfFxsazLCMrmbbvo9088T/uLS1mXAjKDgJEhvV5PUyaNZV1Gt7hu0JJlH9K6DVswhgW6hICRodt/fSP1SUthXUanduzaR59++Q0tW/4xOTrQDYLuIWBkJi01mR64exbrMs5RfLCcFr/1Hv3zX/9hXQooCAJGZq6eOpEMBnn8t7S0ttGKlZ/wm5lhtC2EQh6/ycCLi42hO26dzroMfp+hFxe9TZ+vXoMV+6FXEDAycs9dMyk2xsbs/PUNjbT2+0301F9epbr6RmZ1gHogYGTCZDTSNVdMZnb+D1d9Rn985q/U2trGrAZQHwSMTNxx23SKi5W29eL3+/ktQN57/2PaumMPP1gOQEgIGJmYOf1aSc+3c/d+fj/nNes2SnpeCC8IGBkoHJTLTw2Qgsfjob+/90/+OgtaLCA2BIwMLHxUmi1gl61YRU8//7/U3u6Q5HwACBjGRg0voguGFop6jrLyw7TwqRdp3YbNop4H4GwIGMamXSnenSOPx0v/+mw1Pfvi61R7vF608wB0BQHDUE6/LJp+/dWiHX/W3QuwSj8wpWVdQDi7/ZYbRTluSekhuv7muxEuwBxaMIzodFoaPkz4ay9fffM9PfjYkxgwB7KAgGFk2pWTqW9WhmDH83q99Le/r6AXFr1NbrdbsOMC9AYChoH4uBh6auHDgh2vpraO5j38/2jz1p2CHRNACAgYBoYVFZDJZBLkWLv3FdOd9z5GR4/VCnI8ACEhYBgQ6tb0gZIyunn2g9TU3CLI8QCEhoCRWN+sdLrysgm9Ps7OPfvpxpn3kNPlEqQuADHgNrXEZt/yy14f490Vq+jWu+YjXED20IKRkMlopHFjhof8fL/fz6+J+9SfX8W+zqAICBgJTZ0yvle7Bby19AN68s+LBK0JQEwIGAndffuMkJ7ncrno1rkLaMPGrYLXBCAmBIxEIsxmfu5RKGbe8TBt2rJD8JoAxIaAkciVU3t+56ipuYVeevVthAsoFgJGIjdce2WPHu/3++nxp1/i18wFUCoEjAQGF+TRsCGDgn48Fy73PvI4ffqfb0StC0BsCBgJFObnkk6nC+qxXLeIa7kgXEANMNBOZBqNhmbdckPQj39x0dvoFoFqoAUjsikTx1J2Zvp5H+dyueiWOx+hjZu3S1IXgBTQghHZVVMnBfW4W+cuQLiA6qAFI7LszD7d/tzv99OSdz/EIDpQJbRgRJSdlU6DBg7o9jEf/ftLeuLZv0pWE4CU0IIR0Z23Te/25//48N/0xJ9ekaweAKmhBSOSyEgrTbui64WlDpSU0nMv/w2zokHV0IIRycDcfmQ2d74sZmn5Ybp2+hyEC6geWjAiGV7U+ZYkZeWH6abb7kO4QFhAwIhk0oSLzvleW1s7/fquR7CNK4QNBIwIkhLtNKRg4Dnff+ixp+hI1TEmNQGwgIARwfU/u4L0+jPnHn386Wr68uvvmNUEwAICRgQD83LO+Hrztl30+/95gVk9AKwgYASm1WppSEHeqa+PHquhBx/9H+wVDWEJASOw/v2yKC01+dTXjz3+Z1x3gbCFgBHY5Ilj+T+9Xi/dce9jtGbdJtYlATCDgBHYqOFF/J8frvqcVn+9jnU5AEwhYARWOCiXdu05QM+8sJh1KQDMIWAEZjQa6IFHn8CG9AAIGGFZrRaaNXcBP9cIAIg0WYPGBVgXAQDqhBYMAIgGAQMAouECxsW6CABQJy0FAk2siwAAdeJaMDWsiwAAddK6ne1HWBcBACoUCLRpPe6Og6zrAAD18Xk9pVqPy7GLdSEAoD5ctmid7c3fsi4EANSHyxat2+0oIwqUsS4GANTF6Wheq/V7PYGO9ubNrIsBAPXwed0H3K72g/xIXr/Ps5Z1QQCgHs725u1+nzfAB0xT7eGlRAFs1gMAguhob15CJ+cieVyOlvbmupWsiwIA5fN53AfbGo99QadPduxobfgn06oAQBU62hpePfn5qYBxtNb/l4gw6A4AQhcgX0v90X+d/PJUwPj9Pm99ddkt3KfMigMARXM6mp9zu9pLT359xnowrfVV673ujjVMKgMARfP7PJX1Rw/+8fTvnbPgVHNd1fOSVgUAqtDR1rjC43a0n/493dkP8rqdB/VGs91oto6UtDoAUCyfx73leOX+2X6/z3n6989pwfj9Xn9zfdWfsU4MAAQlQL6musMPeT2ucxav63RNXndHa0VTbcVsSYoDAEVztNQ939pwrNNrt+d0kU5yOpqLLdHxGTq9caio1QGAYvm9nt1Hy7f/vKufd7urQPWh3fd4Pa7vRakMAJQtEDhSe3jfNd09pNuA8fs8juOVB270up1bBS8OABTL7/NW1x8rnevsaC7v7nGaYA5mMFky03Iu2ENEVsEqBADFqj28b6Kjte6b8z0uqI3XPC5HRdXBLYO97o7tglQHAIrk93mqa4/smxRMuFB3F3k7OXCj29n+ldkaM1Kr0/fpVZUAoDyBQEVDdfld7c21Xwb7lKADhuP1uBrbmmvfj7DG9NcZjPkhFQkAiuP3enZXV+y53NFat6knz+tRwBAfYn53a2P1B0RUZrbaJhBpzD09BgAoRIB8zvam56tKt17r8547kO58ehwwJzkdzTs72ho/N0VE23R6Q2GoxwEAefJ5PVuaqit+WV9z8M1QjxFywJwowF3T3lz7qUarP6zTGzK1On1Sb44HAOz5fd5jjtb6149X7pvd4Wgs7s2xgrpNHQyt3qCJT8q51WqzP0caihHquAAgGb+zveXF+qMlfzh7VnSoBAuYk/QGU3ykLenyqLjUO3R6w1jSBHcrHADY8HndxR0tja+3Ndf8y+loLhHy2IIHzOks0fbB1mj7fWarLV+nN44W81wAEDyf173f2d68w+N0vNNUd/gzsc4jasCczmyxJRrN1kssUfETDWbLYJ3OkEcaTZxU5wcIW4FAq8/nKfO4HLuc7c3fujsc65yOpmK/3xsQ+9T/PwAA///cU7DNiS/X/wAAAABJRU5ErkJggg==" width="280" height="280" class="img_ev3q"></a><br>
<em>프로그래머스 코딩 기초 트레이닝 해설 - C/C++</em>  </p><p>이 글은 파이썬과 같은 하나의 언어에 익숙하다는 전제하에 작성합니다.  </p><p>필자는 파이썬을 너무 많이 쓰다 보니, C stdlib 함수를 전부 잊어버렸습니다.
설명을 곁들여 차근차근 배워봅시다!</p><br><br><br><br><br><br><h1>Day2</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-덧셈식-출력하기">1. 덧셈식 출력하기<a href="#1-덧셈식-출력하기" class="hash-link" aria-label="Direct link to 1. 덧셈식 출력하기" title="Direct link to 1. 덧셈식 출력하기">​</a></h2><p>두 정수 a, b가 주어질 때 다음과 같은 형태의 계산식을 출력하는 코드를 작성해 보세요.</p><p>입력1</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">4 5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>출력1</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">4 + 5 = 9</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;stdio.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int main(void) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int a;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int b;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scanf("%d %d", &amp;a, &amp;b);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    printf("%d + %d = %d", a, b, a + b);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-문자열-붙여서-출력하기">2. 문자열 붙여서 출력하기<a href="#2-문자열-붙여서-출력하기" class="hash-link" aria-label="Direct link to 2. 문자열 붙여서 출력하기" title="Direct link to 2. 문자열 붙여서 출력하기">​</a></h2><p>두 개의 문자열 str1, str2가 공백으로 구분되어 입력으로 주어집니다.
입출력 예와 같이 str1과 str2을 이어서 출력하는 코드를 작성해 보세요.</p><p>입력1</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apple pen</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>출력1</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">applepen</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;stdio.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#define LEN_INPUT1 11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#define LEN_INPUT2 11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int main(void) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    char s1[LEN_INPUT1];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    char s2[LEN_INPUT2];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scanf("%s %s", s1, s2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    printf("%s%s", s1, s2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-문자열-돌리기">3. 문자열 돌리기<a href="#3-문자열-돌리기" class="hash-link" aria-label="Direct link to 3. 문자열 돌리기" title="Direct link to 3. 문자열 돌리기">​</a></h2><p>문자열 str이 주어집니다.
문자열을 시계방향으로 90도 돌려서 아래 입출력 예와 같이 출력하는 코드를 작성해 보세요.</p><p>입력1</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">abcde</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>출력1</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">e</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;stdio.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#define LEN_INPUT 11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int main(void) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    char s1[LEN_INPUT];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scanf("%s", s1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int len = strlen(s1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for(int i=0; i&lt;len; i++){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        printf("%c\n", s1[i]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="character-array-vs-string">character array vs string<a href="#character-array-vs-string" class="hash-link" aria-label="Direct link to character array vs string" title="Direct link to character array vs string">​</a></h3><p>문자열을 표시하기 위해 character array를 썼습니다.
하지만 이것은 여러 문제를 가져옵니다.</p><p>첫째, character array는 정확한 데이터 타입이 아닙니다.
특히 ascii로 이루어진 character array는 정수 배열과 다를게 없습니다.</p><p>둘째, character array를 처리하기 위해 표준화된 연산자가 없습니다.
예를들어, <code>int a = 1 + 2;</code>는 가능하나 <code>char* a = '1' + '2';</code>는 안됩니다.</p><p>셋째, 배열 경계를 쉽게 넘을 수 있고 안정성에 문제가 됩니다.
배열 끝에 <code>\0</code>을 누락하기라도 하면, 문자열의 끝을 정상적으로 알 수 없습니다.</p><p><code>string</code>은 C++의 built-in data type이 아닙니다.
<code>string</code>은 class object로 하나의 type처럼 존재합니다.
이는 character array가 가지는 문제를 해결할 수 있습니다.</p><p>물론 character array도 장점이 있습니다.
정해진 길이의 정보가 같은 공간에 있기 때문에 빠르게 엑세스 가능합니다.
(컴퓨터 속도가 매우 빨라진 현재는 거의 의미 없는 장점입니다.)</p><br><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-홀짝-구분하기">4. 홀짝 구분하기<a href="#4-홀짝-구분하기" class="hash-link" aria-label="Direct link to 4. 홀짝 구분하기" title="Direct link to 4. 홀짝 구분하기">​</a></h2><p>자연수 n이 입력으로 주어졌을 때 만약 n이 짝수이면 "n is even"을, 홀수이면 "n is odd"를 출력하는 코드를 작성해 보세요.</p><p>입력1</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>출력1</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">100 is even</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;stdio.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int main(void) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int a;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scanf("%d", &amp;a);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (a%2==0) printf("%d is even", a);   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else printf("%d is odd", a);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-문자열-겹쳐쓰기">5. 문자열 겹쳐쓰기<a href="#5-문자열-겹쳐쓰기" class="hash-link" aria-label="Direct link to 5. 문자열 겹쳐쓰기" title="Direct link to 5. 문자열 겹쳐쓰기">​</a></h2><p>문자열 my_string, overwrite_string과 정수 s가 주어집니다. 문자열 my_string의 인덱스 s부터 overwrite_string의 길이만큼을 문자열 overwrite_string으로 바꾼 문자열을 return 하는 solution 함수를 작성해 주세요.</p><p>제한사항</p><ul><li>my_string와 overwrite_string은 숫자와 알파벳으로 이루어져 있습니다.</li><li>1 ≤ overwrite_string의 길이 ≤ my_string의 길이 ≤ 1,000</li><li>0 ≤ s ≤ my_string의 길이 - overwrite_string의 길이</li></ul><table><thead><tr><th>my_string</th><th>overwrite_string</th><th>s</th><th>result</th></tr></thead><tbody><tr><td>"He11oWor1d"</td><td>"lloWorl"</td><td>2</td><td>"HelloWorld"</td></tr><tr><td>"Program29b8UYP"</td><td>"merS123"</td><td>7</td><td>"ProgrammerS123"</td></tr></tbody></table><div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;stdio.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;stdbool.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;stdlib.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">char* solution(const char* my_string, const char* overwrite_string, int s) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int answer_len = strlen(my_string);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int e = s + strlen(overwrite_string);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 주어진 조건에 따라 s가 my_string - overwrite_string 보다 작으므로</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 정답 문자열 길이는 my_string과 같습니다.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    char* answer = (char*) malloc((answer_len+1) * sizeof(char));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 문자열을 바로 strcpy 함수로 복사해 둘 수 있으나</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 굳이 배열 순회와 할당을 중복해 할 필요 없습니다</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for(i=0; i&lt;answer_len; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (i&lt;s || e&lt;=i ) answer[i] = my_string[i];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else answer[i] = overwrite_string[i-s];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 문자열 배열의 끝을 표시해줍니다.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    answer[i] = '\0';</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return answer;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="malloc">malloc<a href="#malloc" class="hash-link" aria-label="Direct link to malloc" title="Direct link to malloc">​</a></h3><p><code>malloc</code>은 memory allocation을 하는 함수입니다.</p><p><code>malloc()</code>은 size bytes를 할당하고, 할당된 메모리의 포인터를 반환합니다.
<strong>메모리는 초기화 되지 않습니다.</strong> size가 0일 경우 NULL을 반환합니다.
또는 나중에 <code>free()</code>에 성공적으로 전달 될 수 있는 unique 포인터 값을 반환합니다.</p><p><code>free()</code> 함수는 <code>malloc()</code>, <code>calloc()</code>, <code>realloc()</code>후에 반드시 호출되어야 합니다.
포인터가 NULL인 경우 아무 연산도 하지 않습니다. <code>free()</code> 함수는 아무 값도 반환하지 않습니다.</p><p>이 문제에서는 주어지는 입력이 const이기 때문에, 변형된 문자열을 리턴하기 위하여 새 배열을 만들고 필요한 길이 만큼 동적 할당을 합니다.</p>]]></content:encoded>
            <category>code</category>
            <category>programmers</category>
        </item>
        <item>
            <title><![CDATA[코딩 기초 트레이닝1]]></title>
            <link>https://jwher.github.io/posts/cpp-coding-basic1</link>
            <guid>https://jwher.github.io/posts/cpp-coding-basic1</guid>
            <pubDate>Fri, 21 Apr 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[C/C++ 재활 훈련]]></description>
            <content:encoded><![CDATA[<p><a href="/posts/cpp-coding-basic1"><img loading="lazy" alt="programmers" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAAEYCAYAAACHjumMAAAjvElEQVR4nOzdCXwU5f0/8O/em90km2NzkwsCCSGBgFwiKIegeFFr1WIRq+AB4q1g7cHf+lOrrXfRH1qVilhQqdh6VawKIghy3yQkIZBAEnIfm733/5pB+HEkYbOZmWdm9vN+vfIix+7MF8h+9nlmnkNPEjJbbYlmi22CwWQp0ukNOWaLLZtIk0QaiiUiCxFppKwHQMWcFAi0EFGt29l+2OPuKPG4HLuc7c3fOh3NpVIVIeoLWqszGGwJ6Vfp9cZpVltCHhGNEvN8ABCEQKDM6Wj50dXR+l1zXeU7fp+nVaxTiRIwlqj4sVZbwuURkbG/1Or0/cQ4BwAIIBCob2+p+6ijreEDR0v9N36/zyPk4QUNGIvNnhGfnPOGTm+YIuRxAUB8Pq97f3PdkVtb6o/+INQxBQkYS7R9YHRc6uNmq20qEUUKcUwAYMLndTvXNtdXvtDeXPup3+fz9+Zgul49WW80xSZlPRyX3Hel3mguICJjb44HAMxptTp9tiUqbrreYI73eVzFPq+7MdSDhdyCsUTH58Wn5CzX6Y1DQj0GAMhdoLbhWNltLQ1HPw3l2SEFjD1twLzImKRXQnkuACiP29n2VvWh3ff4fR5HT57Xo4DR6gyGxIz8/zVbom/rcYUAoGhej+v7usr9NzodLVXBPifoazBancGSmJ73ntlquynkCgFAsbQ6fYbZGjOho73pC7/P0xzMc4JqwXDhktpv6Bq9wTS811UCgNK1V5VsGexxO8rO90DteR/AdYvS895FuADAT6xJmYNWmizRfc/3wPMGDH/NxRpzrWClAYDi6Y3mooQ+ucu0OkNUd4/rNmDsaQPm4YIuAHRGbzCPTs4c9FZ3j+nyIq/ZYsuNS+n3mSiVAYAq6AymfK1OV97R1rSjs5932oLR6Y2WhPS890WvDgAULzou7SVjRFRBZz/rNGBsCelzdXrjYNErAwDl02hi7Kn9f6vV6kxn/+icLpIl2p4bl9x3FRZ/AoBg6fTGAo1WW9XR1rj59O+f04KJjkt5Mpi7SwAAp4uMSbxbqzec0TA5I0gstoRMszVmsuSVAYDiaXWGgviUnDPuOp8RMDH29EVcI0byygBAFaxR8S8YzdaEk1+fChhLVPxYo9l6JbPKAED5NJooS1T8ZSe/PBUwVlsCukYA0GtRsSl3nfycDxitzmCMiIzFLGkA6DWdwTjGEhVfSCcDxhqTMFWr0+ewLgwAVEFjtSXcTycDxhwRfR3rigBAPcwWWz6dasHYEvqzLggA1ENnMI40W2yJ2p9uKY1mXRAAqIrWbLWN11qi4ieyrgQA1MdssU3QGkwWTGoEAMEZzJYirU5vyGNdCACoj05nyNGaLbYs1oUAgAppNHYtkSaJdR0AoE5a0pCNdREAoE5aIrKyLgIA1EmPlevCV1KinVKTkyg2NpoMej15PF5qammhQxWV1NAY1MZ9AN3SZA0aF2BdBEjLbDbR0MJ8stm63tKmobGJ9h44SG1tPdrrHOAMWBozzNjjY2n0iKJuw4UTFxtDw4sKKT4uVrLaQH0QMGEkOclOw4cWktl0zuLvneJaOiOGFVKiPV702kCdEDBhIsYWRfl5oc1pLRg0gL9eA9BTCJgwYDIZ+ZaL0WAI6fnc8wYO6Mu3aAB6AgETBgb0yya9Xt+rY5jNZioqHChYTRAeEDAqNyAni9JShRmsHWOLpvS0FEGOBeEBAaNiERFmwQNhQE42WS0Rgh4T1AsBo2I52ZlkCPG6S1cMBj1lpKcKekxQLwSMSmk0GsG6RmfLTE+j+NgYUY4N6oKAUamMPuK2MrIy00Q9PqgDAkaFtBoNZYrcjYmPi6VIq0XUc4DyIWBUyB4fSxaRL8RqtVoaPChX1HOA8iFgVCgjXZruS3R0FMXH4VoMdA0BozJWq4VvwUglLQULIkLXEDAqk5Qg7cTEpMQE0btjoFwIGJWRusui02kpJztD0nOCciBgVCbUCY29ER8f2+u5TqBOCJge0Gg0/IXN5KQEfl6OXq9jXdIZdDodWa3SL7FsMhqpT2qy5OcF+cPbznlwodI/J5uGDs7nh8ifvliT3++npuYWqq45Tkcqj1F5RSUdr6tnVmuMLYq0WjZLLGdmpNKhw5VMzg3yhYDphj0+jq6/dir/Z2e0Wi2/tCT3cXIxJy50yiuO0J69JbRnfzF5vT7J6o2O6n4ZTDFFmM0UHWWlltZ2ZjWA/OhiEjP/H+si5MhoMNCvZ/yCD4+e4Fo83HNyB/SlUcOHUGKCnTo6nNTc0iparSfZ42N7XK+Q9Ho91dTWMTs/yA9aMF0YM3oYf52lN4xGIxXkD+A/uFbN+o1bqbLqGLndHsHqPJ1Ox/aaUGKinSLMJupwupjWAfKBgOnCyAuKBD1edmY6/9HU3EJfffM97TtwUNDjc+Ji2G7SqdNqKSnBToeOVDGtA+QDAdMJriVgMhlFOTbXKrpu2uVUdayG9uwrpi3bdpPP1/vrNFGRVoqOjhSkxt7Izk6nozW1orXSQFlwm7oTcbHitgQ0Gg1/W/eySRfTXbNuovy8nF4fM71PCn9c1kxGI6YPwCkImE5ERUrXEoiLjaHrpk2l6ddfE/IoXO4FLfb6Lz2RKPF0BZAvdJE6YTBI/8+S0zeTcvreTMfrGmj1199RWflhCmZPX7PJRHkD+klQYfBiY2yUYI/j/y4Q3tCC6YTHw+76AffCvOmGaTRj+rX80pTnkzegL5NAPJ/83BxZdNmALQRMJxwdTtYlUFZGHz5orpgynm8RdIYLFrnuuBgRYWZ+VwvYQ8B0oqm5hXUJPL1eRxcMLaS5t8+gMaMvOKdFkJ3RR9athOTkBNYlAGMImE44ZTZQTKvV0qRLxtCc2b+iMaOGkdFo4LdxTZf59iEpSYnYQynMYapAFy4cNYz5yNizWSIiqG9WBmVlpJHZaOTn/8gZF4zcBy72hi+0YLpw7Fgt6xK61CcthW6efi1NuPhC/lqHnCUlxMsuqEE6aMF0gXvh9pPpSm3RkVZ+7V2LJYLfyjUxIZ5a29r5SZVyw4UL14qpb2hkXQowgBZMF0rLK1iX0KWzWy0J9ji6ZOxIGj1iqCz3KsJiVOELAdOF43UNVFcvv3ddjUbDX+Q9G9dSSO+TQpdOGEsDc3P4Fo5cGAx6stnYrVUD7CBgulFTe5x1CeewWizdXtPgXswF+QNo6uRLKCU5UdLautM3K511CcAAAqYb23fuZV3COaKjgltzl2vpjL1wOH97O10G85QS4uPJFo1WTLhBwHSj7NARqpdRN8mg13faPepOXFwMjR5RRBeNvqDXC2j1hlar4RdLh/CCgDmP7bvk04rpze3e1JQkunTCRTR8aKFoa92cT2Z6quxvq4OwEDDnUVp+mHUJp0REmHr1fK7blJ2VTtdccSldUFQgedBotVoa0C9L0nMCWwiY86ipraOKw/JYAvL0LVN6q292Bk2ZNI4K83Mlnc/Eddm0Mp4/BcLCQLsgNDQ2UdHgfKY1nNgixSZoGOj1erLb4/hlIVwuNzk6OvhtV8SkPzXwrknU84A8oAUThCNVx6it3cG0BrPZJFpLw2q10KgRRTRl4jhJ9rbmumm97e6BMshvpSKZcrvdRAwHr0WYxX9BWiwR/PymyqpqfkHy1jbxNlFLtMdTxZGjoh2/NyIjrZSbk01ZmX34z7UaLbW2tVFZ+RHau7+EnC55zbaXMwRMEHQ6HUUy2PP5dFy3QgpcKym9TwqlpSbT/pJSKi4pF2WFv4z0NH67XX8gmIVBxRcXe+J2/nU/m8rf0jcZO78A7nK76es1G+jT/3xDGzZu5bvP0DVN1qBx8vgflrHszHSa8cufMa0hOdHOd5Ok5nZ7aNeeA1R2SPi7acUHy/mxRiwlJdr5Bb2um3Y5P0q6J1paWun9jz6jV994lxqbmkWrUckQMEHgug1jLxzOtIbM9FSmq9d5vV4qKa2g3XsPCHZMrtu5dv2Pku7ffdLoEUPpkftup2FFBYIc75XFf6fX3lhGHU75zWhnCXeRglBUmM907VuDXs98UzWui5Zgj+O3SOG6TC2tbb0+Jtf1DAQC1NAo3bu/wWCgl/+8kBY8cCc/+FAoo4YX8W9CpeWH6eixGsGOq3QImCAUDc6X5O5KV0xGg2yWYeC6aX3SUvhb5ty7dW/XoImKjKRDh6XpJo0bM4Jee/EJunDkMFFag8lJCTRp/Bg6VlPLj50SYsdOpUPABKEgP5dpwESYTfxymXISFWnl77LE2KKptrY+5BeTTqellpY2and0CF7j6X4/fx798XcPkj0+VtTzRESYaerk8fz/Gdf9C3cImCCcXDWOFS5cWFzgDUZUVCRlZfXhu3DH6xpCGqgXGWnlb42LITsrnV57/gm6auqlJOUlrGFFBTR0cD5t2rxD1Nv9coeBdkFg/QvCvcvLmclo5PdxumzSOL5Vo+vhLXWuNZQswjWu4cMK6e+L/0KjRw6VNFxOumTsKPpg6SL+ln+4kvdvrkywHtbe0xcsK1z3YMSwwTR54lhK7eFiV/37ZQk61ue6aZfTO68/R+lpKYIdMxSpKUn08fLX+YvA4QhdpCD4fD5+mQNWoqKs/LwhpTCZjJSRnsovmh4gosYg7hIZDAYyGgy93uKEC6nfPDSH/zDI5N/MEmGmX/xsKl1y0Uj6cduusBozg3EwQdBoNDT//jvI2MXoTrFxrYGeLjQlJ1wXc+fufXT0PFvBuNxuWv/DFnK5Qxs5bDaZ6OW/LKTJE8aGWKk0vvnuB1qzbiP/d5XDNsVi4YIUAROk22ZeT2kpbPrSaSmJ/Du80h09VkMlpYeo9nh9l4+pq2+gbTv3ks/Xs4vFMbZoeuaPC/glKEB6bW3tdKCknA+V9Ru30IZN22h/cSnmIgXLHeK7qhA0GmVcgzmf1JQk/qOpuYU2bt7BD7U/mz0+juxxsVTTTQidLS42hlYtX8z8eku48Xg89MOP22npPz6ites38Ut+nA0BE6TKqmp+ThILalufiWttTLpkDN9a6Wzka15uDrW2O8gRxNiYrIw+9MwTCxAuEigrP0wbNm2l73/Ywm/pw7VGuTeL7iBgglR26Ag/EpQFlnOQxKLX6/iRr9xHecUR/t+34ae7dRFmE7/S3uatO8nXzbiatNRkWvzyk/w4JRDesepafmeNo9W19O7yVXTocGWPj4GACVJl1VF+xTcWI2oDMlnSQCxcy5D7OF5XT/sOlPLXaGJjomlw4UDatmNPp88xm020/O2X+GkLIIyODif9uHXniVbKhi20r/hgryeiImCC5PcHaN36zbiIKKIEezz/4fP5qPJoNZUfquTnYe3ac+CMqQS5/fvSsjdfZDp9Q+m4f+ODZRX0/Q+bacPGbbRx83ZRBpQiYHqguobNTo9qb8GcTafT8esEcx8F+QPo0vEX0e59xXzgDOifTQ/fezvCJQRcl+fdFavoUEUl7dlXQhVHxF/MHgHTA4crj/K34WJjbJKeN9wC5nT2+Fh+LZzhwwbz88ESE+2KGdnMUle3jaWGgOkB7oW+fec+mnDxaEnPy3XPwolGo+HnJ8XFxvD7a2OztuAEc9tYagiYHtqxe6/kAaOmFgwXHiajkUxmIz/y1mQy8YuNm01G/md6nY4s/Ab/aKWcTyi3jaWGgOmh1tZ2foX5qEjpVpgTe6+i3tBoiAx6Az//iAsLrfb/bqnr9Xo+TMw/rWcTEWFiNt1CDYS4bSw1BEwItmzbTePHSdeK6W4siBD4loNez7ce9AY9P0lQr9ed+N6pP7nv6/gpCyc+/+l7BvwKiUWM28ZSw29HCLj/8GFFBRQdJU0r5uzV4k698HU6/gWu050VCLr/C4VT3+e/d+JzqbZAgeBJddtYagiYEHDvIvv2l9CoEUNDer7RYOC7DRERZv46BL8kpuXEqnVGo+GMkbsa0vArvnGP5cLEqIJJj3BCdc1xWrr8I0lvG0sNAdMD3Dt/VKSVX13f7w+cWIXtpzDgfnbyeoPZZOS7Emazkb/mYDr5YT7xJ1oQ4amt3cFv+7J951764qu1tGPXPtYliQ4BcxadVsvPcRk0sD+//GNGehplZaTxt0tTk5NwzQF6zO/30wcffUYvLHqLamrrWJcjqbB8tcTG2Cg/L4eGDhnEL9XItUi4bkligp3f98dkwp0O6D2Px0PLV35CS5at5G8ph6OwCJiiwoH8pLiBuTl06YSLMPsWRLd3fwk998rf+H2sw5lqAya3f1+6euokuvaay3q8ADVAb3zx1Vp69A/PUHMnC2qFG1UFDNdCmXv7DJo84SJ+0BeAlHw+H/1m4bP0warPWZciG6oImLTUZPrd/Hn8Ys8YYg6sPPzbp2jVJ6tZlyErig+YQQP709I3npd8hjPA6V5c9BbCpROKDpj+/bJo5buvojsETNXW1dNLry1hXYYsKbY/odFoaOFv7kO4AFM+n4/ueQh7F3ZFsQHTNzuDLhp9AesyIMxx3aJNW3awLkO2FBswMbZo1iVAmGtvd/Cjc6Frig2Y3XsPyG5xHQgvz7/yJlUdrWZdhqwpNmBcLjcten0p6zIgjK3buIV1CbKn2IDhfLjqcyo+WM66DAhD3677gYpLyliXIXuKDhiuizRj9oOsy4Aw9PRfXmNdgiIoOmA4x+vqadbdj1J9QyPrUiBM7N57AC3nICk+YDhfr1lPDzz6P1RaVsG6FAgDew8cZF2CYqgiYDjfrf+Rbpp1P63bsJl1KaBy//7sv6xLUAzVBAyn9ng93Xz7g3TDzHn8fsYAQjtQUoY3sR5QVcCc9OPWnXzQhMOapyCt997/mHUJiqLKgOE0t7Ty24sACOlACS7u9oRqA4b4LVdZVwBqUl1znN+vCIKn6oDZu7+EdQmgIp+vXsO6BMVRdcDgYhwI6cv/fse6BMVRdcA0Nbfwu+YBCAHLMvScqgOGc/+jT5yztzNAT23ftZffQA16RvUBs2PXPlqx8hPWZYDCffafb1mXoEiqDxjOU395jbZs28W6DFAoj8dD/8H1l5CERcC0Oxy0YOGz5EVXCUKwfuNWOnykinUZihQWAcMpLaugq6+fzY9lAOiJnXv2sy5BscImYDj7i0vpD0++wM9ZAgiGy+WiZSswPSBUYRUwnNVfr6OZdzxEtcfrWJcCCvD1mg1UU4vflVCFXcDQTzNix025kTZv3cm6FJC55bgD2SthGTAct8dDN9/+EC1+6x/k92PSEpzL6XTR7r3FrMtQNF1MYmbYbkvn9fn46QQHSw9RXv++FBcbw7okkJE333mfVn+zjnUZiqbJGjQOb98/bUX78rN/oKumTmJdCshAS0srjZxwLb89DoQubLtIZwsEAnTv/D/SrXPm07Yde1iXA4z9uHUXwkUACJjTcCHz7Xc/0C9uvpuWLFuJnSPD2AerPmNdgiqgi9SNjD6pdO+cX9N10y5nXQpIaPvOvfTzX83h33CgdxAwQdDr9TT7lhto1swbyB4fx7ocENnNsx+kdT9gLSEhIGB6wBYdRVMnX0K/eWgORUdHsS4HRLBp8w668df3sC5DNcL6NnVPuVxu2r2vmFas/JQ6OpxkNpsoOSmBdVkgoEd+9zRVVlWzLkM10ILppbwBfWnho/fR6JFDWZcCvdTS0kpDxlzJugxVQcAIJLd/XyoqHEh3zrqJsjPTWZcDIeBaLx+u+px1GaqCgBHBZZPG0TVXTqZxY0ZQVKSVdTkQhH0HDtJV18/GspgCQ8CIyGAw0BWXjaerL59EF180kgwGPeuSoBOBQIDuvPe3mBYgAgSMhAYN7E9XXT6RLh1/EeX0y2JdDvzkxUVv0UuvLWFdhiohYBjQarU0pDCPcvpm0RVTxvNdKZ1Ox7qssOTo6KBJV83ASociQcDIQHxcDF099VIaM2oYJSTEU8HA/vzgPhCXy+Wih3/7NH3yxdesS1EtBIwMRVotdPXUSXTNlZfSiGGD0boRyddrN9CsuQtYl6FqCBiZi42x0YD+2ZSelkIjLxhCI4cP4edIaTQa1qUpWn1DIz+pFTt/igsBo0DZmek0afwYGlI4kPqkJlPBoFzSo5XTI3Me+B19sXot6zJUDwGjAjG2aCoclMsP9Js8cRz/OXTtky++pnsexgwZKSBgVIhr4axavpiioyJZlyI7dfWNNHL8z7AUg0Sw4JQKlVccoQ8/wpD3s3l9Ppr30EKEi4QQMCrldLlYlyArXKi89OrbtHHzdtalhBUEjEqNvXA46xJkZeXHn9NfF7/Duoywg4BRoYkXX0iDC/JYlyEbJaWH6E/PL2ZdRlhCwKhMjC2aHnvkbtZlyMbxunp+Ccz6hkbWpYQlBIzKPDDvNuqXncG6DFnwer00//fPUA32IWcGE15UpCB/AN143VWsy5CFjg4nXTdjLr/OC7CDFoxKxMXG0OsvP0Umo5F1KbJw65z5CBcZQAtGJaZOuYRSkhNZl8Ec1y1a9PpS3I6WCbRgVCA2Jprm33cH6zJk4fW3l9OLr77Nugz4CVowKvC7+fOwTxMRPfHsK/T20g9ZlwGnQcAoXNHgfPr5NeG9tW27w0HP//VNeuudD1iXAmdBwCjck394iHUJTHm9Xnr86Zfpg4+wWb0cIWAUbMLFF1J+Xn/WZTBTUlpOt85ZQFVHsROjXCFgFCrCbKaFv7mXdRnM7Np7gG6542FqbGpmXQp0A3eRFOqGn19BmelprMuQHNclWvXJapox6wGEiwKgBaNASYl2mv/AnazLYOLRhc/Syo+/YF0GBAkBo0APzptFlogI1mVIauv23fT4n16mnbv3sy4FegABozAJ9jiaMG406zIkw3WJli5fRc++sBiLaCkQAkZBNBoNPffUb/nN2cJBY1Mz3TZ3AW3fuZd1KRAiBIyCTJ44lt9mVu24YHnulb/RshUfsy4FegkBoyDz7pzJugRReTweWrJsJb35zvtUU4s1XNQAAaMQM2/6ORXmq3O/I6/XSxs2baM3liyn79b/yLocEBACRgH0ej3dNuMXrMsQRUtLK02/7X7au7+EdSkgAgSMAsyZ/SvKzOjDugxBcYHy1tIPaM26TVRX38C6HBAJAkbmtFotzZ55A+syBFN8sJz++a8v6J33PqIOp5N1OSAyBIzMTZk0ThVrvezZV0yv/W0ZffHVWvL5fKzLAYkgYGQsKipS0csxtLU76ONPvqQ3lqygiiNVrMsBBhAwMjbtykv5xbyV5lh1Lb382hL65rsfcLs5zCFgZMoeH0f3z72VdRlBCwQCtH7jVvrk8//Svz//L7U7OliXBDKAgJGpObN+RfFxsazLCMrmbbvo9088T/uLS1mXAjKDgJEhvV5PUyaNZV1Gt7hu0JJlH9K6DVswhgW6hICRodt/fSP1SUthXUanduzaR59++Q0tW/4xOTrQDYLuIWBkJi01mR64exbrMs5RfLCcFr/1Hv3zX/9hXQooCAJGZq6eOpEMBnn8t7S0ttGKlZ/wm5lhtC2EQh6/ycCLi42hO26dzroMfp+hFxe9TZ+vXoMV+6FXEDAycs9dMyk2xsbs/PUNjbT2+0301F9epbr6RmZ1gHogYGTCZDTSNVdMZnb+D1d9Rn985q/U2trGrAZQHwSMTNxx23SKi5W29eL3+/ktQN57/2PaumMPP1gOQEgIGJmYOf1aSc+3c/d+fj/nNes2SnpeCC8IGBkoHJTLTw2Qgsfjob+/90/+OgtaLCA2BIwMLHxUmi1gl61YRU8//7/U3u6Q5HwACBjGRg0voguGFop6jrLyw7TwqRdp3YbNop4H4GwIGMamXSnenSOPx0v/+mw1Pfvi61R7vF608wB0BQHDUE6/LJp+/dWiHX/W3QuwSj8wpWVdQDi7/ZYbRTluSekhuv7muxEuwBxaMIzodFoaPkz4ay9fffM9PfjYkxgwB7KAgGFk2pWTqW9WhmDH83q99Le/r6AXFr1NbrdbsOMC9AYChoH4uBh6auHDgh2vpraO5j38/2jz1p2CHRNACAgYBoYVFZDJZBLkWLv3FdOd9z5GR4/VCnI8ACEhYBgQ6tb0gZIyunn2g9TU3CLI8QCEhoCRWN+sdLrysgm9Ps7OPfvpxpn3kNPlEqQuADHgNrXEZt/yy14f490Vq+jWu+YjXED20IKRkMlopHFjhof8fL/fz6+J+9SfX8W+zqAICBgJTZ0yvle7Bby19AN68s+LBK0JQEwIGAndffuMkJ7ncrno1rkLaMPGrYLXBCAmBIxEIsxmfu5RKGbe8TBt2rJD8JoAxIaAkciVU3t+56ipuYVeevVthAsoFgJGIjdce2WPHu/3++nxp1/i18wFUCoEjAQGF+TRsCGDgn48Fy73PvI4ffqfb0StC0BsCBgJFObnkk6nC+qxXLeIa7kgXEANMNBOZBqNhmbdckPQj39x0dvoFoFqoAUjsikTx1J2Zvp5H+dyueiWOx+hjZu3S1IXgBTQghHZVVMnBfW4W+cuQLiA6qAFI7LszD7d/tzv99OSdz/EIDpQJbRgRJSdlU6DBg7o9jEf/ftLeuLZv0pWE4CU0IIR0Z23Te/25//48N/0xJ9ekaweAKmhBSOSyEgrTbui64WlDpSU0nMv/w2zokHV0IIRycDcfmQ2d74sZmn5Ybp2+hyEC6geWjAiGV7U+ZYkZeWH6abb7kO4QFhAwIhk0oSLzvleW1s7/fquR7CNK4QNBIwIkhLtNKRg4Dnff+ixp+hI1TEmNQGwgIARwfU/u4L0+jPnHn386Wr68uvvmNUEwAICRgQD83LO+Hrztl30+/95gVk9AKwgYASm1WppSEHeqa+PHquhBx/9H+wVDWEJASOw/v2yKC01+dTXjz3+Z1x3gbCFgBHY5Ilj+T+9Xi/dce9jtGbdJtYlATCDgBHYqOFF/J8frvqcVn+9jnU5AEwhYARWOCiXdu05QM+8sJh1KQDMIWAEZjQa6IFHn8CG9AAIGGFZrRaaNXcBP9cIAIg0WYPGBVgXAQDqhBYMAIgGAQMAouECxsW6CABQJy0FAk2siwAAdeJaMDWsiwAAddK6ne1HWBcBACoUCLRpPe6Og6zrAAD18Xk9pVqPy7GLdSEAoD5ctmid7c3fsi4EANSHyxat2+0oIwqUsS4GANTF6Wheq/V7PYGO9ubNrIsBAPXwed0H3K72g/xIXr/Ps5Z1QQCgHs725u1+nzfAB0xT7eGlRAFs1gMAguhob15CJ+cieVyOlvbmupWsiwIA5fN53AfbGo99QadPduxobfgn06oAQBU62hpePfn5qYBxtNb/l4gw6A4AQhcgX0v90X+d/PJUwPj9Pm99ddkt3KfMigMARXM6mp9zu9pLT359xnowrfVV673ujjVMKgMARfP7PJX1Rw/+8fTvnbPgVHNd1fOSVgUAqtDR1rjC43a0n/493dkP8rqdB/VGs91oto6UtDoAUCyfx73leOX+2X6/z3n6989pwfj9Xn9zfdWfsU4MAAQlQL6musMPeT2ucxav63RNXndHa0VTbcVsSYoDAEVztNQ939pwrNNrt+d0kU5yOpqLLdHxGTq9caio1QGAYvm9nt1Hy7f/vKufd7urQPWh3fd4Pa7vRakMAJQtEDhSe3jfNd09pNuA8fs8juOVB270up1bBS8OABTL7/NW1x8rnevsaC7v7nGaYA5mMFky03Iu2ENEVsEqBADFqj28b6Kjte6b8z0uqI3XPC5HRdXBLYO97o7tglQHAIrk93mqa4/smxRMuFB3F3k7OXCj29n+ldkaM1Kr0/fpVZUAoDyBQEVDdfld7c21Xwb7lKADhuP1uBrbmmvfj7DG9NcZjPkhFQkAiuP3enZXV+y53NFat6knz+tRwBAfYn53a2P1B0RUZrbaJhBpzD09BgAoRIB8zvam56tKt17r8547kO58ehwwJzkdzTs72ho/N0VE23R6Q2GoxwEAefJ5PVuaqit+WV9z8M1QjxFywJwowF3T3lz7qUarP6zTGzK1On1Sb44HAOz5fd5jjtb6149X7pvd4Wgs7s2xgrpNHQyt3qCJT8q51WqzP0caihHquAAgGb+zveXF+qMlfzh7VnSoBAuYk/QGU3ykLenyqLjUO3R6w1jSBHcrHADY8HndxR0tja+3Ndf8y+loLhHy2IIHzOks0fbB1mj7fWarLV+nN44W81wAEDyf173f2d68w+N0vNNUd/gzsc4jasCczmyxJRrN1kssUfETDWbLYJ3OkEcaTZxU5wcIW4FAq8/nKfO4HLuc7c3fujsc65yOpmK/3xsQ+9T/PwAA///cU7DNiS/X/wAAAABJRU5ErkJggg==" width="280" height="280" class="img_ev3q"></a><br>
<em>프로그래머스 코딩 기초 트레이닝 해설 - C/C++</em>  </p><p>이 글은 파이썬과 같은 하나의 언어에 익숙하다는 전제하에 작성합니다.  </p><p>필자는 파이썬을 너무 많이 쓰다 보니, C stdlib 함수를 전부 잊어버렸습니다.
설명을 곁들여 차근차근 배워봅시다!</p><br><br><br><br><br><br><h1>Day1</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-문자열-출력하기">1. 문자열 출력하기<a href="#1-문자열-출력하기" class="hash-link" aria-label="Direct link to 1. 문자열 출력하기" title="Direct link to 1. 문자열 출력하기">​</a></h2><p>문자열 str이 주어질 때, str을 출력하는 코드를 작성해 보세요.</p><div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;stdio.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#define LEN_INPUT 1000001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int main(void) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    char s1[LEN_INPUT];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scanf("%s", s1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    printf("%s", s1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="scanf">scanf<a href="#scanf" class="hash-link" aria-label="Direct link to scanf" title="Direct link to scanf">​</a></h3><p>scanf는 stdio 헤더파일에 있는 함수로 posix(portable operating system interface)에 포함됩니다.
<a href="https://man7.org/linux/man-pages/man3/scanf.3.html" target="_blank" rel="noopener noreferrer">리눅스 메뉴얼 페이지</a></p><p>scanf는 표시된 format에 입력을 스캔합니다.</p><p>예를들어 "%s"는 공백이 없는 문자(character) 시퀀스를 매칭합니다.
다음에 오는 포인터(s1)는 자동으로 추가되는 null byte ('\0')로 끝나고 입력 시퀀스를 가질 수 있을 만큼 긴 문자 배열의 처음이여야 합니다.</p><p>성공하면, 이 함수는 성공적으로 매칭되고 할당된 입력 항목의 수를 반환합니다. 초기 매칭에 실패한 경우 제공된 것보다 적거나 0일 수 있습니다.</p><p>첫번째 성공적인 변환이나 매칭 실패가 일어나기 전에 입력 끝에 도달하면 EOF가 반환됩니다.
읽기 오류시에도 EOF가 반환되고, 스트림에 대한 오류를 표시하기 위해 errno가 설정됩니다.</p><br><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="printf">printf<a href="#printf" class="hash-link" aria-label="Direct link to printf" title="Direct link to printf">​</a></h3><p>printf 또한 stdio 헤더파일에 있는 함수입니다.
<a href="https://man7.org/linux/man-pages/man3/printf.3.html" target="_blank" rel="noopener noreferrer">리눅스 메뉴얼 페이지</a></p><p>printf는 표시된 format에 따른 출력을 생성합니다.</p><p>예를 들어 "%s"의 경우 l 수정자가 앞에 없으면, 문자 배열에 대한 포인터인 const char* 일 것으로 예상합니다.
배열 문자는 null byte '\0'까지 기록됩니다(출력에 포함되지 않습니다).
정밀도가 지정되면 지정된 숫자 이상은 쓰지 않습니다. 정밀도가 주어지면 null byte가 있을 필요가 없습니다.
정밀도가 지정되지 않거나 배열 크기보다 크면 null byte가 필요합니다.</p><p>l 수정자가 있으면, wide 문자 배열에 대한 포인터인 const wchar*로 예상합니다.</p><p>성공적으로 반환하면, 쓴 문자 수를 반환합니다(null byte 제외).</p><p>snprintf(), vsnprintf() 함수는 size 바이트 이상을 쓰지 않습니다(null byte 포함).
이 제한으로 출력이 잘린 경우, 반환 값은 충분한 공간이 있을 때 기록될 문자 수(null byte 제외) 입니다.
따라서 size 이상 반환 값은 출력이 잘렸다는 것을 의미합니다.</p><p>출력 에러에 도달하면, 음수가 반환됩니다.</p><br><br><br><br><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-a와-b-출력하기">2. a와 b 출력하기<a href="#2-a와-b-출력하기" class="hash-link" aria-label="Direct link to 2. a와 b 출력하기" title="Direct link to 2. a와 b 출력하기">​</a></h2><p>정수 a와 b가 주어집니다. 각 수를 입력받아 입출력 예와 같은 형식으로 출력하는 코드를 작성해 보세요.</p><p>입력1</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">4 5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>출력1</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">a = 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b = 5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;stdio.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int main(void) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int a;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int b;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scanf("%d %d", &amp;a, &amp;b);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    printf("a = %d\n", a);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    printf("b = %d\n", b);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="개행문자">개행문자<a href="#개행문자" class="hash-link" aria-label="Direct link to 개행문자" title="Direct link to 개행문자">​</a></h3><p>carriage return(CR)과 line feed(LF)가 물리적인 타자기와 프린터로부터 상속받았습니다.
<code>\n</code>은 line feed(한줄씩 인쇄)를, <code>\r</code>은 carriage return(줄 끝에서 시작으로 돌아감)을 의미합니다.
따라서 개행 문자는 장치마다 조금씩 달랐습니다. 유니코드는 여러 글자를 모두 줄바꿈 문자로 정의하고 있습니다.</p><br><br><br><br><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-문자열-반복해서-출력하기">3. 문자열 반복해서 출력하기<a href="#3-문자열-반복해서-출력하기" class="hash-link" aria-label="Direct link to 3. 문자열 반복해서 출력하기" title="Direct link to 3. 문자열 반복해서 출력하기">​</a></h2><p>문자열 str과 정수 n이 주어집니다.
str이 n번 반복된 문자열을 만들어 출력하는 코드를 작성해 보세요.</p><p>입력1</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">string 5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>출력1</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">stringstringstringstringstring</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;stdio.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#define LEN_INPUT 11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int main(void) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    char s1[LEN_INPUT];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int a;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scanf("%s %d", s1, &amp;a);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for(int i=0; i&lt;a; i++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        printf("%s", s1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="for문">for문<a href="#for문" class="hash-link" aria-label="Direct link to for문" title="Direct link to for문">​</a></h3><p>for는 세 부분으로 이루어 집니다. for(초기화 문; 조건문; 루프문)
세 부분 다 옵셔널로 작성하지 않아도 작동합니다. 조건문이 작성되지 않았을 때 true로 간주합니다.
따라서  <code>break</code> <code>return</code> <code>goto</code>로만 for body 밖으로 나갈 수 있습니다.</p><p><code>continue</code>는 루프문이 실행되게 합니다. <code>break</code>는 루프문이 실행되지 않고 for body를 나갑니다.</p><div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">for( ; ; )</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>다음 문장은 무한루프를 만들기 위해 사용됩니다.</p><br><br><br><br><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-대소문자-바꿔서-출력하기">4. 대소문자 바꿔서 출력하기<a href="#4-대소문자-바꿔서-출력하기" class="hash-link" aria-label="Direct link to 4. 대소문자 바꿔서 출력하기" title="Direct link to 4. 대소문자 바꿔서 출력하기">​</a></h2><p>영어 알파벳으로 이루어진 문자열 str이 주어집니다. 각 알파벳을 대문자는 소문자로 소문자는 대문자로 변환해서 출력하는 코드를 작성해 보세요.</p><p>입력1</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">aBcDeFg</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>출력1</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">AbCdEfG</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;stdio.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#define LEN_INPUT 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int main(void) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    char s1[LEN_INPUT];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scanf("%s", s1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int len = strlen(s1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for(int i=0; i&lt;len; i++){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (isupper(s1[i])) s1[i] = tolower(s1[i]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else if(islower(s1[i])) s1[i] = toupper(s1[i]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    printf("%s", s1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="strlen">strlen<a href="#strlen" class="hash-link" aria-label="Direct link to strlen" title="Direct link to strlen">​</a></h3><p>strlen(const char *s)은 null byte ('\0')을 제외한 포인터 s가 가리키는 문자열의 길이를 계산합니다.</p><p>s가 가리키는 문자열 바이트 수를 반환합니다.</p><br><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="대소문자">대소문자<a href="#대소문자" class="hash-link" aria-label="Direct link to 대소문자" title="Direct link to 대소문자">​</a></h3><p>대소문자를 구분하는 방법은 여러가지가 있습니다.</p><p>하나는, ASCII 순서를 이용해(유니코드도 이어받았습니다) 확인하는 것입니다.</p><div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// 65~90이면 대문자입니다</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int big_a   = 'A' // 65</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int big_z   = 'Z' // 90</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 97~122면 소문자입니다</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int small_a = 'a' // 97</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int small_z = 'z' // 122</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>다음과 같이 대소문자로 변환할 수 있습니다.</p><div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">int offset = 'a' - 'A'; // 32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if(isupper(c)) c += offset;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if(islower(c)) c -= offset;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>다른 방법은 ctype에 <code>tolower</code>/<code>toupper</code> 함수를 사용하는 것입니다.</p><br><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-특수문자-출력하기">5. 특수문자 출력하기<a href="#5-특수문자-출력하기" class="hash-link" aria-label="Direct link to 5. 특수문자 출력하기" title="Direct link to 5. 특수문자 출력하기">​</a></h2><p>다음과 같이 출력하도록 코드를 작성해 주세요.</p><p>출력예시</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">!@#$%^&amp;*(\'"&lt;&gt;?:;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;stdio.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int main(void) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    printf("!@#$%^&amp;*(\\'\"&lt;&gt;?:;");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="escape-character">Escape character<a href="#escape-character" class="hash-link" aria-label="Direct link to Escape character" title="Direct link to Escape character">​</a></h3><p>일부 문자는 제어를 위해 예약되어 있습니다. 예를 들어 <code>'</code>는 문자나 문자열을 나타내기 위한 글자입니다.
이를 표시하기 위해 이스케이프 문자 <code>\</code>를 사용합니다.
<code>\</code> 스스로도 제어 문자를 시작하는 문자로 예약되어있어 문자로 출력하기 위해서 <code>\\</code>로 작성하여야 합니다.</p><br><br><br>]]></content:encoded>
            <category>code</category>
            <category>programmers</category>
        </item>
        <item>
            <title><![CDATA[지도자의 부르심]]></title>
            <link>https://jwher.github.io/posts/discipleship-training-1</link>
            <guid>https://jwher.github.io/posts/discipleship-training-1</guid>
            <pubDate>Sat, 01 Apr 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[새싹목자훈련 1주차]]></description>
            <content:encoded><![CDATA[<p><a href="/posts/discipleship-training-1"><img loading="lazy" alt="the prayer" src="/assets/images/prayer-6191ba552cac9cbe7cc308f0529eedc0.png" width="250" height="239" class="img_ev3q"></a><br>
<em>10주간의 제자훈련</em>  </p><h1>서문</h1><p>당신은 어떤 이유에서든지, 하나님의 부르심을 받은 분입니다.<br>
<!-- -->우리는 우리의 삶을 산다고 착각하지만, 어떤 나라에서 태어났는지 어떤 가정에서 자라는지 하나님이 결정하셨습니다.  </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-부르심이란">1 부르심이란?<a href="#1-부르심이란" class="hash-link" aria-label="Direct link to 1 부르심이란?" title="Direct link to 1 부르심이란?">​</a></h2><p><em>지도자로서의 부르심이란?</em></p><blockquote><p>예수 그리스도의 종 바울은
사도로 부르심을 받아
하나님의 복음을 위하여 택정함을 입었으니<br>
<!-- -->-<!-- --> 로마서 1:1</p></blockquote><p>그리스도인 지도자에 있어서 부르심은 하나님께로부터 옵니다.
그리고 이 부르심은 궁극적으로 우리가 주님의 교회를 이끌고 섬기는 토대가 됩니다.</p><p>사역의 기본은 하나님의 부르심!
하나님은 신실함으로 여러분을 이끌어주고 계십니다.</p><p>찬송: 하나님의 부르심</p><iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/tdWn2-Tw-5E" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-본론">2 본론<a href="#2-본론" class="hash-link" aria-label="Direct link to 2 본론" title="Direct link to 2 본론">​</a></h2><p><em>부르심을 확인하는 네 가지 핵심</em></p><p>부르심을 확인하는 방법은 <a href="#%EB%82%B4%EC%A0%81-%EA%B0%90%EB%8F%99">내적 감동</a>, <a href="#%EA%B3%B5%EB%8F%99%EC%B2%B4%EC%9D%98-%ED%99%95%EC%9D%B8">공동체의 확인</a>, <a href="#%EA%B8%B0%ED%9A%8C">기회</a>, <a href="#%EC%A7%80%EC%86%8D%EC%A0%81%EC%9D%B8-%EC%84%B1%EC%9E%A5%EA%B3%BC-%EB%B0%9C%EC%A0%84">지속적인 성장과 발전</a>이 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="내적-감동">내적 감동<a href="#내적-감동" class="hash-link" aria-label="Direct link to 내적 감동" title="Direct link to 내적 감동">​</a></h3><p><em>하나님이 나를 부르셨다는 확신이 있는가?</em></p><p>영어로 소명(the calling)이란 단어를 살펴보면 '부름'이라는 뜻입니다.
즉 소명은 '내적인 부르심'을 뜻합니다.</p><blockquote><p>안디옥 교회에 선지자들과 교사들이 있으니 곧 바나바와 니게르라 하는 시므온과 구레네 사람 루기오와 분봉 왕 헤롯의 젖동생 마나엔과 및 사울이라
주를 섬겨 금식할 때에 성령이 이르시되 내가 불러 시키는 일을 위하여 바나바와 사울을 따로 세우라 하시니
이에 금식하며 기도하고 두 사람에게 안수하여 보내니라<br>
<!-- -->-<!-- --> 사도행전 13:1-3</p></blockquote><p>안디옥 교회에서 그들이 금식하고 기도하던 중에 성령의 명령을 듣게 되었습니다.
성령의 명령(Calling)은 '바나바와 바울을 따로 세우라'라는 것이였습니다.</p><p>하나님의 부르심(소명)을 충분히 받아들일 수 있도록 준비된, 내적 감동이 있는 자에게 부르심을 허락하십니다.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>개인 묵상</summary><div><div class="collapsibleContent_i85q">나는 어떻게 살아야 되나, 짧게 묵상하였는데 주님께서 바나바라는 음성을 주셨습니다. 바나바가 누군지도 몰랐지만, 첫주차 새목강의에 바울의 동역자로 바나바가 나오는 것 아닙니까!</div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="공동체의-확인">공동체의 확인<a href="#공동체의-확인" class="hash-link" aria-label="Direct link to 공동체의 확인" title="Direct link to 공동체의 확인">​</a></h3><p>때론 이것이 진정한 소명인지 자아성취를 위한 욕망인지 구분하기 어려울 때가 있습니다.
따라서 지도자는 자신의 소명을 반드시 공동체를 통해 확인받아야 합니다.</p><p>하지만 이것은 자신의 소명에 흔들릴 때
공동체의 확인을 통해 우리의 소명을 다시금 새롭게 할 수 있음을 말합니다!</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>개인 묵상</summary><div><div class="collapsibleContent_i85q">저는 자아 성취욕이 강한 사람입니다. 그래서 처음엔 제자훈련을 받는것이 내 명예와 지식을 위한 것이 아닌가 고민하였습니다. 당연히 주님을 더 가까이 모시고 싶다는 욕심도 있습니다. 쉽게 말하면 '완장질'이라고 할까요?<p>매년 한번에서 많아야 두번 있는 제자훈련 명단에 빠졌을때 저는 항상 실망했습니다.
하지만 올해 제자훈련 명단에 또 빠졌을때 낙심이 아닌 주님이 언젠가 꼭 부를거라는 확신을 했고,
정말 기적처럼 마지막 12번째 사람으로 제자훈련을 받게 되었습니다.</p></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="기회">기회<a href="#기회" class="hash-link" aria-label="Direct link to 기회" title="Direct link to 기회">​</a></h3><p>기회가 주어지지 않는다면 소명을 실천하는 일은 당연히 불가능 할것입니다.
하나님은 하나님의 일을 위해 부르신 자에게 기회를 주십니다.</p><p>또한, 기회는 지도자의 가슴 속에 강한 내적 동기를 일으켜 줍니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="지속적인-성장과-발전">지속적인 성장과 발전<a href="#지속적인-성장과-발전" class="hash-link" aria-label="Direct link to 지속적인 성장과 발전" title="Direct link to 지속적인 성장과 발전">​</a></h3><p><em>하나님께서 부어주시는 은혜</em></p><p>하나님은 지도자에게 끊임없는 소명의식을 주십니다.
이로인해 지도지는 지치지 않는 열정과 날마다 새로운 마음을 가질 수 있습니다.</p><p>하나님으로부터 온 소명을 따라 사는 사람은 날마다 성장하며 발전합니다.
지도자는 하나님의 영광을 위한 탁월함의 헌신으로 살게 됩니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="마치며">마치며<a href="#마치며" class="hash-link" aria-label="Direct link to 마치며" title="Direct link to 마치며">​</a></h2><p><em>지도자로서의 부르심을 품은 자</em></p><br><p>지도자는,  </p><p>그 사명이 다하는 날까지  </p><p>소명을 따라 살아가고자 하는 마음의 <strong>내적인 감동</strong>을 주십니다.  </p><p><strong>공동체</strong>는 그 리더의 소명을 인정하고 연합합니다.  </p><p>부어주신 <strong>소명을 이룰 수 있는 기회</strong>를 하나님께서 제공하십니다.  </p><p><strong>날마다 성장과 발전</strong>을 지속적으로 갖는 지도자로 헌신합니다.  </p><br><blockquote><p>하나님의 은사와 부르심에는 후회하심이 없느니라<br>
<!-- -->-<!-- -->로마서 11:29</p></blockquote>]]></content:encoded>
            <category>theology</category>
        </item>
        <item>
            <title><![CDATA[도커 엔진]]></title>
            <link>https://jwher.github.io/posts/the-docker-engine</link>
            <guid>https://jwher.github.io/posts/the-docker-engine</guid>
            <pubDate>Thu, 23 Mar 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[도커 딥 다이브]]></description>
            <content:encoded><![CDATA[<p><a href="/posts/the-docker-engine"><img loading="lazy" alt="the docker engine" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUwMCIgaGVpZ2h0PSIyMTAwIiB2aWV3Qm94PSIwIDAgMjU2IDIxNSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0zOC42MTcgMTczLjk4NHYtMTYuMzYyYzAtMi4xNSAxLjM0NC0zLjg3NyAzLjU3LTMuODc3aC42MTZjMi4yMjUgMCAzLjU2MyAxLjcyOSAzLjU2MyAzLjg3N3YzNC40NDdjMCA4LjQtNC4xNSAxNS4wODQtMTEuMzgyIDE5LjM0MmEyMS4zNzQgMjEuMzc0IDAgMCAxLTEwLjk0NSAyLjk4NWgtMS41MzdjLTguNDAyIDAtMTUuMDc3LTQuMTUzLTE5LjM0Mi0xMS4zOGEyMS4zMTQgMjEuMzE0IDAgMCAxLTIuOTg0LTEwLjk0N3YtMS41MzVjMC04LjQwMyA0LjE1Mi0xNS4wODMgMTEuMzc4LTE5LjM0OWEyMS4yOTggMjEuMjk4IDAgMCAxIDEwLjk0OC0yLjk4NWgxLjUzN2M1LjY4NiAwIDEwLjUxIDIuMjA0IDE0LjU3OCA1Ljc4NHpNNy45MjQgMTkxLjNjMCA2LjA2OCAyLjk0MSAxMC42MyA4LjI1OCAxMy41NCAyLjE1IDEuMTc2IDQuNDg0IDEuODA4IDYuOTM3IDEuODA4IDUuOTU2IDAgMTAuMzc0LTIuODEgMTMuNDIxLTcuODU3IDEuNDE3LTIuMzQ4IDIuMDc3LTQuOTE3IDIuMDc3LTcuNjQ4IDAtNS4yNi0yLjQ5LTkuMzY1LTYuNzI5LTEyLjQxNC0yLjU3LTEuODQ4LTUuNDYzLTIuNzc1LTguNjE4LTIuNzc1LTYuNDkyIDAtMTEuMTY0IDMuMjgtMTMuOTY4IDkuMTA2LS45NDYgMS45Ny0xLjM3OCA0LjA2MS0xLjM3OCA2LjI0em02NS4zMjQtMjMuMWgxLjA3NGM4Ljk3OCAwIDE1LjgwNiA0LjM1NSAyMC4xMzMgMTIuMTkyIDEuNzMgMy4xMzUgMi42NTYgNi41NTcgMi42NTYgMTAuMTQydjEuNTM1YzAgOC40LTQuMTQyIDE1LjA5My0xMS4zODUgMTkuMzQzLTMuMzUzIDEuOTY3LTcuMDU3IDIuOTg0LTEwLjk0MyAyLjk4NGgtMS41MzVjLTguNDAyIDAtMTUuMDc5LTQuMTUzLTE5LjM0Mi0xMS4zOGEyMS4zMTYgMjEuMzE2IDAgMCAxLTIuOTg3LTEwLjk0N3YtMS41MzVjMC04LjQwNCA0LjE2OS0xNS4wNjIgMTEuMzc3LTE5LjM0NyAzLjM1MS0xLjk5MSA3LjA1OC0yLjk4NyAxMC45NTItMi45ODd6bS0xNC41OCAyMy4xYzAgNS44OSAyLjg5IDEwLjIyMyA3Ljg2NSAxMy4yNyAyLjMzNiAxLjQzIDQuOTA5IDIuMDc4IDcuNjM4IDIuMDc4IDUuODIgMCAxMC4xMjItMi45NTEgMTMuMTE2LTcuODYzIDEuNDI4LTIuMzQyIDIuMDc0LTQuOTE1IDIuMDc0LTcuNjQyIDAtNS40NzctMi42MzgtOS42NjEtNy4xNDgtMTIuNjkzLTIuNDcxLTEuNjYzLTUuMjIyLTIuNDk2LTguMTk4LTIuNDk2LTYuNDkyIDAtMTEuMTY0IDMuMjgtMTMuOTY3IDkuMTA2LS45NDggMS45Ny0xLjM4IDQuMDYxLTEuMzggNi4yNHptNzAuNjU2LTE0LjcyN2MtMS4xNy0uNTQ4LTMuMzYtLjczLTQuNjI0LS43NzgtNi40NzQtLjI0NC0xMS4xNTggMy40MDItMTMuOTA2IDkuMTEzLS45NDkgMS45Ny0xLjM4MiA0LjA1NS0xLjM4MiA2LjIzNSAwIDYuNjM3IDMuNDg1IDExLjI4NCA5LjQwOSAxNC4xMTcgMi4xNjQgMS4wMzQgNC45NTggMS4yMyA3LjMyMyAxLjIzIDIuMDggMCA1LjAyLTEuMjc0IDYuODY2LTIuMTUxbC4zMi0uMTUyaDEuNDMzbC4xNTguMDMyYzEuNzYyLjM2NyAzLjA5MiAxLjQ4NCAzLjA5MiAzLjM4di43NjdjMCA0LjcxOC04LjYyMiA1Ljc5OC0xMS45MTIgNi4wMjgtMTEuNjEuODAzLTIwLjI5My01LjU3My0yMy42MDMtMTYuNjQ3LS41NzUtMS45MjMtLjgzNC0zLjgzMy0uODM0LTUuODM3di0xLjUzM2MwLTguNDAzIDQuMTctMTUuMDU5IDExLjM3Ny0xOS4zNCAzLjM1MS0xLjk5IDcuMDU3LTIuOTkgMTAuOTUtMi45OWgxLjUzNmM0LjEzIDAgNy45MzQgMS4xNzMgMTEuMzQ0IDMuNTAybC4yOC4xOTQuMTc3LjI5MmMuMzY4LjYxLjY4NSAxLjMxNi42ODUgMi4wNDJ2Ljc2N2MwIDEuOTc4LTEuNDggMy4wNDItMy4yNjYgMy4zODZsLS4xNDguMDI2aC0uNDU4Yy0xLjE1NiAwLTMuNzg1LTEuMTk3LTQuODE3LTEuNjgzem0yNS4xMzQgNS4yNDdjMy4wMS0zLjAxNCA2LjAzLTYuMDIyIDkuMDg1LTguOTg2Ljg1MS0uODI3IDQuMDc0LTQuMzI3IDUuMzQzLTQuMzI3aDEuMzg4bC4xNTguMDMzYzEuNzY4LjM2NyAzLjA5MiAxLjQ4NiAzLjA5MiAzLjM4NnYuNzY2YzAgMS4yOTYtMS41MTggMi44MDItMi4zNTUgMy42ODktMS43OCAxLjg4Ny0zLjY1NCAzLjcxMi01LjQ3NiA1LjU2bC05LjM2MiA5LjUwNGM0LjAzMSA0LjA0IDguMDU4IDguMDgzIDEyLjA1NiAxMi4xNTRhMzEzLjMwNCAzMTMuMzA0IDAgMCAxIDMuMzAxIDMuMzk2Yy4zODUuNDA1Ljk1My45MDkgMS4yNzYgMS40Ny4zNDcuNTI2LjU2IDEuMTE5LjU2IDEuNzUydi44bC0uMDQ1LjE4NWMtLjQzNSAxLjc2OC0xLjU1NyAzLjE5NC0zLjUxNiAzLjE5NGgtLjYxN2MtMS4yODIgMC0yLjczLTEuNDUtMy42MDgtMi4yNzktMS44MS0xLjcwNi0zLjU1Ny0zLjUtNS4zMzEtNS4yNDNsLTUuOTQ5LTUuODR2OS4zMzRjMCAyLjE1LTEuMzQ2IDMuODc4LTMuNTY5IDMuODc4aC0uNjFjLTIuMjI2IDAtMy41Ny0xLjcyOC0zLjU3LTMuODc4di01Mi41OTZjMC0yLjE1IDEuMzQ1LTMuODcgMy41Ny0zLjg3aC42MWMyLjIyMyAwIDMuNTY5IDEuNzIgMy41NjkgMy44N3YyNC4wNDh6bTk2LjU3Ny0xMy4zMTNoLjc3YzIuMzI0IDAgMy44NzUgMS41NjYgMy44NzUgMy44NzcgMCAzLjIwOC0zLjA2NyA0LjAyOS01LjcyIDQuMDI5LTMuNDggMC02LjgwMyAyLjEwNy05LjIwMiA0LjQ3LTIuOTkxIDIuOTQ5LTQuMyA2LjcyNi00LjMgMTAuODc4djE4Ljc1OWMwIDIuMTUtMS4zNDMgMy44NzYtMy41NyAzLjg3NmgtLjYxMmMtMi4yMjcgMC0zLjU2OS0xLjcyNS0zLjU2OS0zLjg3NnYtMTkuODM2YzAtNy42MTcgMy43MDgtMTMuODM1IDkuODktMTguMTk2IDMuNjkxLTIuNjA1IDcuOTE5LTMuOTggMTIuNDM4LTMuOTh6bS01NS4wNzQgMzcuMTc2YzIuODIuOTg1IDYuMDM1Ljg0NCA4LjkyOC4zNCAxLjQ4LS42MjkgNS4yNjQtMi4yOCA2LjY1Ni0yLjAzOGwuMjE3LjAzNy4yLjA5OGMuODUuNDEyIDEuNjYxLjk5NSAyLjA5NSAxLjg2IDEuMDE0IDIuMDI3LjUyNyA0LjA2NS0xLjQ2NSA1LjIxNmwtLjY2My4zODNjLTcuMzUgNC4yNDItMTUuMTY4IDMuNjU0LTIyLjQ5NS0uMzA4LTMuNTAzLTEuODk0LTYuMTgzLTQuNzA1LTguMTYtOC4xMzJsLS40NjItLjgwMWMtNC43MTktOC4xNzItNC4wODItMTYuNzY4IDEuMjQtMjQuNTM5IDEuODM3LTIuNjg2IDQuMjM4LTQuNzYxIDcuMDQ1LTYuMzg0bDEuMDYyLS42MTNjNi45MjItMy45OTYgMTQuMzQxLTMuNzIyIDIxLjQ1LS4yMTUgMy44MjMgMS44ODYgNi45MiA0LjY5NyA5LjA1NCA4LjM5NGwuMzg0LjY2NmMxLjU1IDIuNjg2LS40NTggNS4wMjYtMi41MzEgNi42MjYtMi40MDYgMS44NTYtNC44MzUgNC4wOS03LjE0MSA2LjA4LTUuMTQyIDQuNDM5LTEwLjI3NiA4Ljg4OC0xNS40MTQgMTMuMzN6bS02LjY1NS00LjY3NGM1Ljc1LTQuOTMgMTEuNTAyLTkuODY1IDE3LjIzNy0xNC44MTYgMS45Ni0xLjY5IDQuMTA5LTMuNDQ0IDYuMDUzLTUuMjIxLTEuNTYtMS45NjYtNC4xNjYtMy4zODMtNi4zOC00LjIyOC00LjQ3LTEuNzAzLTguODc3LTEuMTMxLTEyLjk3NiAxLjIzNS01LjM2NSAzLjA5OC03LjY1IDguMDMxLTcuNDUgMTQuMTcuMDggMi40MTguNzMgNC43NDggMi4wMTMgNi44MDUuNDUyLjcyNS45NTcgMS40MDYgMS41MDMgMi4wNTV6TTE0Ny40ODggNDUuNzMyaDIyLjg2NnYyMy4zNzVoMTEuNTYxYzUuMzQgMCAxMC44MzEtLjk1MSAxNS44ODctMi42NjQgMi40ODUtLjg0MyA1LjI3My0yLjAxNSA3LjcyNC0zLjQ5LTMuMjI4LTQuMjE0LTQuODc2LTkuNTM1LTUuMzYtMTQuNzgtLjY2LTcuMTM1Ljc4LTE2LjQyMSA1LjYwOC0yMi4wMDVsMi40MDQtMi43OCAyLjg2NCAyLjMwM2M3LjIxMSA1Ljc5MyAxMy4yNzYgMTMuODg5IDE0LjM0NSAyMy4xMTggOC42ODMtMi41NTQgMTguODc4LTEuOTUgMjYuNTMxIDIuNDY3bDMuMTQgMS44MTItMS42NTIgMy4yMjZDMjQ2LjkzMyA2OC45NDYgMjMzLjQgNzIuODYgMjIwLjE3IDcyLjE2N2MtMTkuNzk3IDQ5LjMwOS02Mi44OTggNzIuNjUzLTExNS4xNTcgNzIuNjUzLTI3IDAtNTEuNzctMTAuMDkzLTY1Ljg3Ni0zNC4wNDdsLS4yMzEtLjM5LTIuMDU1LTQuMTgyYy00Ljc2OC0xMC41NDQtNi4zNTItMjIuMDk1LTUuMjc4LTMzLjYzN2wuMzIzLTMuNDU3SDUxLjQ1VjQ1LjczMmgyMi44NjVWMjIuODY2aDQ1LjczM1YwaDI3LjQ0djQ1LjczMiIgZmlsbD0iIzM2NDU0OCIvPjxwYXRoIGQ9Ik0yMjEuNTcgNTQuMzhjMS41MzMtMTEuOTE2LTcuMzg0LTIxLjI3NS0xMi45MTQtMjUuNzE5LTYuMzczIDcuMzY4LTcuMzYzIDI2LjY3OCAyLjYzNSAzNC44MDgtNS41OCA0Ljk1Ni0xNy4zMzcgOS40NDgtMjkuMzc2IDkuNDQ4SDM1LjM3Yy0xLjE3IDEyLjU2NyAxLjAzNiAyNC4xNCA2LjA3NSAzNC4wNDVsMS42NjcgMy4wNWE1Ni41MzYgNTYuNTM2IDAgMCAwIDMuNDU1IDUuMTg0YzYuMDI1LjM4NyAxMS41OC41MiAxNi42NjIuNDA4aC4wMDJjOS45ODctLjIyIDE4LjEzNi0xLjQgMjQuMzEyLTMuNTRhMS43NjEgMS43NjEgMCAwIDEgMS4xNTMgMy4zMjZjLS44MjIuMjg2LTEuNjc4LjU1Mi0yLjU2Mi44MDVoLS4wMDNjLTQuODYzIDEuMzg5LTEwLjA3OCAyLjMyMy0xNi44MDYgMi43MzguNC4wMDctLjQxNi4wNi0uNDE4LjA2LS4yMjkuMDE1LS41MTcuMDQ4LS43NDcuMDYtMi42NDguMTQ5LTUuNTA2LjE4LTguNDI4LjE4LTMuMTk2IDAtNi4zNDMtLjA2LTkuODYyLS4yNGwtLjA5LjA2YzEyLjIxIDEzLjcyNCAzMS4zMDIgMjEuOTU1IDU1LjIzNCAyMS45NTUgNTAuNjQ4IDAgOTMuNjA4LTIyLjQ1MiAxMTIuNjMyLTcyLjg1NyAxMy40OTYgMS4zODUgMjYuNDY3LTIuMDU3IDMyLjM2Ny0xMy41NzUtOS4zOTgtNS40MjMtMjEuNDg0LTMuNjk0LTI4LjQ0My0uMTk2IiBmaWxsPSIjMjJBMEM4Ii8+PHBhdGggZD0iTTIyMS41NyA1NC4zOGMxLjUzMy0xMS45MTYtNy4zODQtMjEuMjc1LTEyLjkxNC0yNS43MTktNi4zNzMgNy4zNjgtNy4zNjMgMjYuNjc4IDIuNjM1IDM0LjgwOC01LjU4IDQuOTU2LTE3LjMzNyA5LjQ0OC0yOS4zNzYgOS40NDhINDQuMDQ4Yy0uNTk4IDE5LjI0NiA2LjU0NCAzMy44NTUgMTkuMTggNDIuNjg3aC4wMDNjOS45ODctLjIyIDE4LjEzNi0xLjQgMjQuMzEyLTMuNTRhMS43NjEgMS43NjEgMCAwIDEgMS4xNTMgMy4zMjZjLS44MjIuMjg2LTEuNjc4LjU1Mi0yLjU2Mi44MDVoLS4wMDNjLTQuODYzIDEuMzg5LTEwLjUyNiAyLjQ0My0xNy4yNTQgMi44NTgtLjAwMiAwLS4xNjMtLjE1NS0uMTY1LS4xNTUgMTcuMjM3IDguODQyIDQyLjIzIDguODEgNzAuODg1LTIuMTk3IDMyLjEzLTEyLjM0NCA2Mi4wMjktMzUuODYgODIuODktNjIuNzU3LS4zMTQuMTQyLS42Mi4yODctLjkxNy40MzYiIGZpbGw9IiMzN0IxRDkiLz48cGF0aCBkPSJNMzUuNjQ1IDg4LjE4NmMuOTEgNi43MzIgMi44OCAxMy4wMzUgNS44IDE4Ljc3NmwxLjY2NyAzLjA1YTU2LjQzMiA1Ni40MzIgMCAwIDAgMy40NTUgNS4xODRjNi4wMjYuMzg3IDExLjU4MS41MiAxNi42NjQuNDA4IDkuOTg3LS4yMiAxOC4xMzYtMS40IDI0LjMxMi0zLjU0YTEuNzYxIDEuNzYxIDAgMCAxIDEuMTUzIDMuMzI2Yy0uODIyLjI4Ni0xLjY3OC41NTItMi41NjIuODA1aC0uMDAzYy00Ljg2MyAxLjM4OS0xMC40OTYgMi4zODMtMTcuMjI0IDIuNzk5LS4yMzEuMDE0LS42MzQuMDE3LS44NjcuMDMtMi42NDYuMTQ4LTUuNDc1LjIzOS04LjM5OC4yMzktMy4xOTUgMC02LjQ2My0uMDYxLTkuOTgtLjI0IDEyLjIxIDEzLjcyNCAzMS40MiAyMS45ODUgNTUuMzUyIDIxLjk4NSA0My4zNiAwIDgxLjA4NC0xNi40NTggMTAyLjk3OS01Mi44MjJIMzUuNjQ1IiBmaWxsPSIjMUI4MUE1Ii8+PHBhdGggZD0iTTQ1LjM2NyA4OC4xODZjMi41OTIgMTEuODIgOC44MjEgMjEuMDk5IDE3Ljg2NCAyNy40MTggOS45ODctLjIyIDE4LjEzNi0xLjQgMjQuMzEyLTMuNTRhMS43NjEgMS43NjEgMCAwIDEgMS4xNTMgMy4zMjZjLS44MjIuMjg2LTEuNjc4LjU1Mi0yLjU2Mi44MDVoLS4wMDNjLTQuODYzIDEuMzg5LTEwLjYxNSAyLjM4My0xNy4zNDQgMi43OTkgMTcuMjM2IDguODQgNDIuMTU3IDguNzEzIDcwLjgxLTIuMjkzIDE3LjMzNC02LjY2IDM0LjAxNy0xNi41NzQgNDguOTg0LTI4LjUxNUg0NS4zNjciIGZpbGw9IiMxRDkxQjQiLz48cGF0aCBkPSJNNTUuMjYgNDkuNTQzaDE5LjgxOHYxOS44MThINTUuMjZWNDkuNTQzem0xLjY1MSAxLjY1MmgxLjU2NFY2Ny43MWgtMS41NjRWNTEuMTk1em0yLjk0IDBoMS42MjdWNjcuNzFoLTEuNjI2VjUxLjE5NXptMy4wMDIgMGgxLjYyN1Y2Ny43MWgtMS42MjdWNTEuMTk1em0zLjAwNCAwaDEuNjI2VjY3LjcxaC0xLjYyNlY1MS4xOTV6bTMuMDAzIDBoMS42MjZWNjcuNzFINjguODZWNTEuMTk1em0zLjAwMiAwaDEuNTY1VjY3LjcxaC0xLjU2NVY1MS4xOTV6TTc4LjEyNiAyNi42NzdoMTkuODE5djE5LjgxN2gtMTkuODJWMjYuNjc3em0xLjY1MiAxLjY1MmgxLjU2M3YxNi41MTRoLTEuNTYzVjI4LjMyOXptMi45NCAwaDEuNjI2djE2LjUxNGgtMS42MjVWMjguMzI5em0zLjAwMiAwaDEuNjI2djE2LjUxNEg4NS43MlYyOC4zMjl6bTMuMDAzIDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAzIDBoMS42Mjd2MTYuNTE0aC0xLjYyN1YyOC4zMjl6bTMuMDAyIDBoMS41NjZ2MTYuNTE0aC0xLjU2NlYyOC4zMjl6IiBmaWxsPSIjMjNBM0MyIi8+PHBhdGggZD0iTTc4LjEyNiA0OS41NDNoMTkuODE5djE5LjgxOGgtMTkuODJWNDkuNTQzem0xLjY1MiAxLjY1MmgxLjU2M1Y2Ny43MWgtMS41NjNWNTEuMTk1em0yLjk0IDBoMS42MjZWNjcuNzFoLTEuNjI1VjUxLjE5NXptMy4wMDIgMGgxLjYyNlY2Ny43MUg4NS43MlY1MS4xOTV6bTMuMDAzIDBoMS42MjZWNjcuNzFoLTEuNjI2VjUxLjE5NXptMy4wMDMgMGgxLjYyN1Y2Ny43MWgtMS42MjdWNTEuMTk1em0zLjAwMiAwaDEuNTY2VjY3LjcxaC0xLjU2NlY1MS4xOTV6IiBmaWxsPSIjMzRCQkRFIi8+PHBhdGggZD0iTTEwMC45OTMgNDkuNTQzaDE5LjgxOHYxOS44MThoLTE5LjgxOFY0OS41NDN6bTEuNjUxIDEuNjUyaDEuNTYzVjY3LjcxaC0xLjU2M1Y1MS4xOTV6bTIuOTQgMGgxLjYyNlY2Ny43MWgtMS42MjZWNTEuMTk1em0zLjAwMyAwaDEuNjI2VjY3LjcxaC0xLjYyNlY1MS4xOTV6bTMuMDAzIDBoMS42MjZWNjcuNzFoLTEuNjI2VjUxLjE5NXptMy4wMDIgMGgxLjYyOFY2Ny43MWgtMS42MjhWNTEuMTk1em0zLjAwMyAwaDEuNTY0VjY3LjcxaC0xLjU2NFY1MS4xOTV6IiBmaWxsPSIjMjNBM0MyIi8+PHBhdGggZD0iTTEwMC45OTMgMjYuNjc3aDE5LjgxOHYxOS44MTdoLTE5LjgxOFYyNi42Nzd6bTEuNjUxIDEuNjUyaDEuNTYzdjE2LjUxNGgtMS41NjNWMjguMzI5em0yLjk0IDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAzIDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAzIDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAyIDBoMS42Mjh2MTYuNTE0aC0xLjYyOFYyOC4zMjl6bTMuMDAzIDBoMS41NjR2MTYuNTE0aC0xLjU2NFYyOC4zMjl6TTEyMy44NTkgNDkuNTQzaDE5LjgxOHYxOS44MThoLTE5LjgxOFY0OS41NDN6bTEuNjUyIDEuNjUyaDEuNTYzVjY3LjcxaC0xLjU2M1Y1MS4xOTV6bTIuOTQgMGgxLjYyNlY2Ny43MWgtMS42MjZWNTEuMTk1em0zLjAwMiAwaDEuNjI2VjY3LjcxaC0xLjYyNlY1MS4xOTV6bTMuMDAzIDBoMS42MjdWNjcuNzFoLTEuNjI3VjUxLjE5NXptMy4wMDMgMGgxLjYyN1Y2Ny43MWgtMS42MjdWNTEuMTk1em0zLjAwMyAwaDEuNTY0VjY3LjcxaC0xLjU2NFY1MS4xOTV6IiBmaWxsPSIjMzRCQkRFIi8+PHBhdGggZD0iTTEyMy44NTkgMjYuNjc3aDE5LjgxOHYxOS44MTdoLTE5LjgxOFYyNi42Nzd6bTEuNjUyIDEuNjUyaDEuNTYzdjE2LjUxNGgtMS41NjNWMjguMzI5em0yLjk0IDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAyIDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAzIDBoMS42Mjd2MTYuNTE0aC0xLjYyN1YyOC4zMjl6bTMuMDAzIDBoMS42Mjd2MTYuNTE0aC0xLjYyN1YyOC4zMjl6bTMuMDAzIDBoMS41NjR2MTYuNTE0aC0xLjU2NFYyOC4zMjl6IiBmaWxsPSIjMjNBM0MyIi8+PHBhdGggZD0iTTEyMy44NTkgMy44MWgxOS44MThWMjMuNjNoLTE5LjgxOFYzLjgxem0xLjY1MiAxLjY1MWgxLjU2M3YxNi41MTZoLTEuNTYzVjUuNDZ6bTIuOTQgMGgxLjYyNnYxNi41MTZoLTEuNjI2VjUuNDZ6bTMuMDAyIDBoMS42MjZ2MTYuNTE2aC0xLjYyNlY1LjQ2em0zLjAwMyAwaDEuNjI3djE2LjUxNmgtMS42MjdWNS40NnptMy4wMDMgMGgxLjYyN3YxNi41MTZoLTEuNjI3VjUuNDZ6bTMuMDAzIDBoMS41NjR2MTYuNTE2aC0xLjU2NFY1LjQ2eiIgZmlsbD0iIzM0QkJERSIvPjxwYXRoIGQ9Ik0xNDYuNzI1IDQ5LjU0M2gxOS44MTh2MTkuODE4aC0xOS44MThWNDkuNTQzem0xLjY1IDEuNjUyaDEuNTY1VjY3LjcxaC0xLjU2NFY1MS4xOTV6bTIuOTQgMGgxLjYyN1Y2Ny43MWgtMS42MjZWNTEuMTk1em0zLjAwNCAwaDEuNjI3VjY3LjcxaC0xLjYyN1Y1MS4xOTV6bTMuMDAyIDBoMS42MjdWNjcuNzFoLTEuNjI3VjUxLjE5NXptMy4wMDQgMGgxLjYyNlY2Ny43MWgtMS42MjZWNTEuMTk1em0zLjAwMiAwaDEuNTY0VjY3LjcxaC0xLjU2NFY1MS4xOTV6IiBmaWxsPSIjMjNBM0MyIi8+PHBhdGggZD0iTTk2LjcwNCAxMDEuNDkyYTUuNDY4IDUuNDY4IDAgMSAxLS4wMDIgMTAuOTM1IDUuNDY4IDUuNDY4IDAgMCAxIC4wMDItMTAuOTM1IiBmaWxsPSIjRDNFQ0VDIi8+PHBhdGggZD0iTTk2LjcwNCAxMDMuMDQzYy41IDAgLjk3Ny4wOTQgMS40MTcuMjY1YTEuNTk4IDEuNTk4IDAgMCAwIC43OTggMi45OGMuNjA1IDAgMS4xMy0uMzM1IDEuNDAyLS44MzFhMy45MTUgMy45MTUgMCAxIDEtMy42MTctMi40MTRNMCA5MC4xNjJoMjU0LjMyN2MtNS41MzctMS40MDQtMTcuNTItMy4zMDItMTUuNTQ0LTEwLjU2LTEwLjA3IDExLjY1Mi0zNC4zNTMgOC4xNzUtNDAuNDgyIDIuNDMtNi44MjQgOS44OTgtNDYuNTU0IDYuMTM1LTQ5LjMyNS0xLjU3Ni04LjU1NiAxMC4wNDEtMzUuMDY3IDEwLjA0MS00My42MjMgMC0yLjc3MyA3LjcxMS00Mi41MDIgMTEuNDc0LTQ5LjMyNyAxLjU3NS02LjEyOCA1Ljc0Ni0zMC40MSA5LjIyMy00MC40OC0yLjQyOEMxNy41MjIgODYuODYgNS41MzkgODguNzU4IDAgOTAuMTYzIiBmaWxsPSIjMzY0NTQ4Ii8+PHBhdGggZD0iTTExMS4yMzcgMTQwLjg5Yy0xMy41NC02LjQyNS0yMC45NzEtMTUuMTYtMjUuMTA2LTI0LjY5NC01LjAzIDEuNDM1LTExLjA3NSAyLjM1My0xOC4xIDIuNzQ3LTIuNjQ2LjE0OC01LjQzLjIyNC04LjM1LjIyNC0zLjM2OCAwLTYuOTE3LS4xLTEwLjY0My0uMjk3IDEyLjQxNyAxMi40MSAyNy42OTIgMjEuOTY0IDU1Ljk3NiAyMi4xMzggMi4wODggMCA0LjE2LS4wNCA2LjIyMy0uMTE4IiBmaWxsPSIjQkREOUQ3Ii8+PHBhdGggZD0iTTkxLjE2IDEyNC45OTRjLTEuODczLTIuNTQzLTMuNjktNS43MzktNS4wMjYtOC44LTUuMDMgMS40MzctMTEuMDc3IDIuMzU1LTE4LjEwMyAyLjc1IDQuODI2IDIuNjE5IDExLjcyNyA1LjA0NiAyMy4xMyA2LjA1IiBmaWxsPSIjRDNFQ0VDIi8+PC9nPjwvc3ZnPg==" width="2500" height="2100" class="img_ev3q"></a><br>
<em>The Docker Engine</em><br>
<em>이 글은 <a href="https://www.docker.com/captains/nigel-poulton/" target="_blank" rel="noopener noreferrer">Nigel Poulton</a>의 Docker Deep Dive를 읽고 작성되었습니다</em>  </p><p>이 글에선 도커 엔진 밑에서 작동하는것들에 대해 빠르게 살펴볼 것입니다.</p><p>이 챕터에서 다루고 있는 것들을 몰라도 도커를 사용할 수 있습니다.
하지만 도커를 마스터하고 싶다면, 밑에서 일어나고 있는 일을 이해해야 합니다.</p><p>이 글은 이론에 대해 다루므로, 실습은 없습니다.</p><br><br><br><br><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-tldr">The TLDR<a href="#the-tldr" class="hash-link" aria-label="Direct link to The TLDR" title="Direct link to The TLDR">​</a></h2><p><em>커피 한잔 하면서 읽을 수 있는 요약</em>  </p><p><em>도커 엔진</em>은 컨테이너를 실행하고 관리하는 핵심 소프트웨어입니다.
우리는 자주 간단하게 <em>도커</em>라고 부릅니다. VMware에 대해 좀 알고 있다면, ESXi처럼 생각하는게 유용할 것입니다.</p><p>도커는 많은 작은 특별한 도구로 만들어진 모듈러 디자인입니다.
이는 Open Container Initiative(OCI)에서 관리중인 공개 표준으로 가능합니다.</p><p>많은 면에서 도커 엔진은 자동차 엔진과 비슷합니다. 둘다 모듈단위에 매우 작은 부분의 연결로 만들어진다는 것입니다.</p><ul><li>자동차 엔진은 많은 특별한 부분들이 함께 작동해 차가 움직이게합니다. - 흡기구, 스로틀바디, 실린더, 점화 플러그, 배기구 등</li><li>도커 엔진은 많은 특별한 도구가 함께 작동해 컨테이너를 생성하고 실행합니다. - APIs, execution driver, runtimes, shims 등</li></ul><p>현재 도커의 주요 요소는 다음과 같습니다. Docker daemon, containerd, runc 그리고 다양한 스토리지간 네트워킹하는 플러그인이 있습니다.</p><p>runc와 containerd는 소문자로 표기합니다.</p><p><img loading="lazy" alt="그림1" src="/assets/images/docker-engine-e894a6ed21190925ddd1bb5d094bdf00.png" width="1450" height="572" class="img_ev3q"><br>
<em>그림1 High level view</em>  </p><br><br><br><br><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-deep-dive">The Deep Dive<a href="#the-deep-dive" class="hash-link" aria-label="Direct link to The Deep Dive" title="Direct link to The Deep Dive">​</a></h2><p><em>자세한 설명</em>  </p><p>도커가 처음 릴리즈 되었을때, 도커 엔진은 두개의 주요 컴포넌트였습니다.</p><ul><li>Docker daemon</li><li>LXC</li></ul><p>도커 데몬은 단일(monolithic) 바이너리였습니다.
이는 도커 클라이언트, 도커 API, 컨테이너 런타임, 이미지 빌드와 더 많은 것에 대한 코드를 포함하고 있었습니다.</p><p>LXC는 데몬에 리눅스 커널에 존재하는 컨테이너의 기본 빌딩 블럭에 접근하는 방법을 제공합니다.
이것들은 <em>namespaces</em>와 <em>control groups</em>(cgroups) 같은 것들입니다.</p><p><img loading="lazy" alt="그림2" src="/assets/images/original-docker-architecture-b58bbc84d3bd804e609b2d22a701a4c4.png" width="806" height="674" class="img_ev3q"><br>
<em>그림2 Original Docker architecture</em>  </p><br><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lxc-제거하기">LXC 제거하기<a href="#lxc-제거하기" class="hash-link" aria-label="Direct link to LXC 제거하기" title="Direct link to LXC 제거하기">​</a></h3><p><em>Getting rid of LXC</em></p><p>LXC에 대한 의존성으로 시작해봅시다.</p><p>처음으로, LXC는 리눅스 한정적입니다. 이는 멀티 플랫폼이 되려는 열망을 가진 (도커)프로젝트에 큰 문제입니다.</p><p>둘째로, 프로젝트에 굉장히 핵심적인 부분을 외부 도구에 의존하는것은 개발에 방해가 될 수 있는 큰 위험입니다.</p><p>결과적으로, 도커 Inc에서는 LXC의 대체로 <em>libcontainer</em>라 불리는 자체 도구를 만들었습니다.
<em>libcontainer</em>의 목적은 플랫폼에 상관없는 도구로, 커널 호스트에 존재하는 근본적인 컨테이너 빌딩 블록 접근을 도커에 제공하는 것입니다.</p><p>Libcontainer는 도커 0.9에서 기본 <em>execution dirver</em>로 LXC를 대체했습니다.</p><br><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="단일-도커-데몬-제거하기">단일 도커 데몬 제거하기<a href="#단일-도커-데몬-제거하기" class="hash-link" aria-label="Direct link to 단일 도커 데몬 제거하기" title="Direct link to 단일 도커 데몬 제거하기">​</a></h3><p><em>Getting rid of the monolithic Docker daemon</em></p><p>시간이 지나며, 도커 데몬의 단일 환경(monolithic nature)은 더더욱 문제가 생겼습니다.</p><ol><li>혁신이 어렵습니다.</li><li>점점 느려집니다.</li><li>생태(ecosystem)가 원하는게 아니였습니다.</li></ol><p>도커 Inc는 이런 문제를 인지하고 단일 데몬을 부분으로 나누고 모듈화하는데 큰 기여를 했습니다.
작업의 목표는 데몬을 가능한 작게 기능적으로 쪼개고 작은 특화된 도구로 다시 구현하는 것입니다.
특화된 도구는 교체할 수 있을 뿐만 아니라, 서드파티에서 다른 도구를 만들기 위해 재사용할 수 있습니다.
이 계획은 작은 특화된 도구를 같이 모아 큰 도구를 만들 수 있다는 시도해왔고 검증된 <a href="/posts/welcome-to-kubernetes#unix-%EC%B2%A0%ED%95%99">유닉스 철학</a>을 따릅니다.</p><p>도커 엔진을 나누고 리팩토링하는 작업은 모든 컨테이너 실행과 컨테이너 런타임 코드를 데몬으로부터 완전히 제거하였고 작고 특화된 도구로 바꾸었습니다.</p><p><img loading="lazy" alt="그림3" src="/assets/images/current-docker-engine-d2de994a564f4f6986b32ef850b2815f.png" width="1832" height="1106" class="img_ev3q">
<em>그림3 High level view of the current Docker engine</em></p><br><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="oci의-영향">OCI의 영향<a href="#oci의-영향" class="hash-link" aria-label="Direct link to OCI의 영향" title="Direct link to OCI의 영향">​</a></h3><p><em>The influence of the Open Container Initiative</em></p><p>도커 Inc가 데몬을 나누고 코드 리팩토링을 할때, <a href="#opencontainers">OCI</a>는 두가지 컨테이너 관련 명세를 정의하고 있었습니다. (a.k.a. 표준)</p><ol><li><a href="#image-spec">이미지 명세</a></li><li><a href="#runtime-spec">컨테이너 런타임 명세</a></li></ol><p>두 명세는 2017 7월 버전 1.0에 공개되었고, 안정성이 가장 중요시되었기 때문에 너무 많은것을 바꿀 수 없었습니다.
최신 이미지 명세는 v1.0.1로 2017년 11월에 공개되었습니다.
최신 런티암 명세는 v1.0.2로 2020년 3월에 공개되었습니다.</p><p>도커 Inc는 이 표준에 강하게 관련되었고, 많은 코드를 기여했습니다.</p><p>도커 1.11 (2016 전반기)에 도커 엔진은 OCI 명세에 최대한 비슷하게 구현되었습니다.
예를들어 도커 대몬은 더이상 어떤 컨테이너 런타임 코드를 포함하지 않습니다 - 모든 컨테이너 런타임 코드는 분리된 OCI-conpliant 레이어에서 구현되었습니다.
기본적으로 도커는 <em>runc</em>를 이를 위해 사용합니다. runc는 OCI container-runtime 명세에 <em>reference implementation</em>입니다.
그림3에서 runc 컨테이너 런타임 레이어를 볼 수 있습니다.</p><p>마찬가지로, 도커 엔진의 <em>containerd</em> 컴포넌트는 도커 이미지가 <em>runc</em>에서 유효한 OCI 번들로 표현될 수 있게 합니다.</p><br><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="runc">runc<a href="#runc" class="hash-link" aria-label="Direct link to runc" title="Direct link to runc">​</a></h3><p>이전에 언급했듯, <em>runc</em>는 OCI 컨테이너 런타임 명세의 reference implementation입니다.
도커 Inc는 runc의 명세를 정의하고 개발하는데 많이 관여했습니다.</p><p>만약 다른 모든것을 제거한다면, runc는 libcontainer의 작고 경량화된 CLI wrapper입니다.
(libcontainer가 초기 도커 아키텍처에서 호스트 OS와 인터페이스 역할을 하고 있던 LXC를 대체한것을 기억하세요)</p><p>runc는 컨테이너 생성이라는 하나의 목적을 가집니다. runc는 일을 매우 잘하고, 빠릅니다!
그러나 CLI wrapper로써, 이는 효과적인 독립된 컨테이너 런타임 도구입니다.
이 뜻은 다운로드해 바이너리를 빌드하면, runc (OCI) 컨테이너를 빌드하고 사용하는데 모든 것을 갖춘 것입니다.
그러나 뼈와 같고(bare bone) 매우 저수준 동작(low-level)은, 발달한 도커 엔진의 다채로운 기능을 얻을 수 없음을 뜻합니다.</p><p>우리는 runc가 동작하는 레이어를 "OCI layer"라고 부르기도 합니다.
그림3에서 확인할 수 있습니다.</p><p>runc 릴리즈 정보를 다음에서 확인할 수 있습니다.</p><ul><li><a href="https://github.com/opencontainers/runc/releases" target="_blank" rel="noopener noreferrer">https://github.com/opencontainers/runc/releases</a></li></ul><br><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="containerd">containerd<a href="#containerd" class="hash-link" aria-label="Direct link to containerd" title="Direct link to containerd">​</a></h3><p>도커 데몬 기능을 줄이려는 노력의 일환으로, 모든 컨테이너 실행 로직은 찢어져 containerd(컨테이너 d)라 불리는 새로운 도구로 리팩토링되었습니다.
이는 컨테이너 생명주기를 관리하는 목적만 수행합니다. (start, stop, pause, rm)</p><p>containderd는 리눅스와 윈도우 데몬으로 가능하고, 도커는 1.11 릴리즈부터 리눅스에서 사용되고 있습니다.
도커 엔진 스택에서, containerd는 OCI 레이어에서 데몬과 runc 사이에 위치합니다.</p><p>전에 기술했듯이, containerd는 작고, 경량화되고 하나의 목적 - 컨테이너의 생명주기 관리를 의도했습니다.
그러나, 시간이 지나며 더 많은 기능으로 가지를 뻗었습니다.
이미지 풀, 볼륨, 네트워크 같은 기능으로요.</p><p>더 많은 기능을 추가하게 된 이유중 하나는 다른 프로젝트에서 사용하기 편하게 했기 때문입니다.
예를들어 쿠버네티스와 같은 프로젝트에서, containerd가 추가적인 이미지를 푸쉬하고 풀같은 것을 하는건 유익했습니다.
이런 이유로, containerd는 간단한 컨테이너 생명주기 관리보다 더 많은 것을 수행합니다.
그러나, 모든 추가적인 기능은 원하는것만 선택하고 고를수있도록 모듈이고 부가적입니다.
따라서, 쿠버네티스와 같은 프로젝트에서 containerd를 포함하는것은 가능합니다, 그러나 프로젝트에 필요한 조각만 가져갑니다.</p><p>containerd는 도커 Inc에서 개발되었고 CNCF에 기부되었습니다.
이 글을 쓸때, containerd는 완전히 졸업한(fully graduated) CNCF 프로젝트로, 안정적이고 제품에 사용가능하다고 생각할 수 있다는 뜻입니다.
여기에서 최신 릴리즈를 확인할 수 있습니다.</p><ul><li><a href="https://github.com/containerd/containerd/releases" target="_blank" rel="noopener noreferrer">https://github.com/containerd/containerd/releases</a></li></ul><br><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="새-컨테이너-시작하기">새 컨테이너 시작하기<a href="#새-컨테이너-시작하기" class="hash-link" aria-label="Direct link to 새 컨테이너 시작하기" title="Direct link to 새 컨테이너 시작하기">​</a></h3><p><em>Starting a new container</em></p><p>이제 큰 그림을 보았고, 역사의 일부를 보았으니, 새 컨테이너를 생성하는 과정을 살펴봅시다.</p><p>컨테이너를 시작하는 가장 일반적인 방법은 도커 CLI를 사용하는 것입니다.
<code>docker container run</code> 명령어는 <code>alpine:latest</code> 이미지에 기반한 간단한 새 컨테이너를 시작할 것입니다.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ docker container run --name ctrl -it alpine:latest sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이 커맨드를 도커 CLI에 입력했을 때, 도커 클라이언트는 적절한 API payload로 변환해 도커 데몬이 노출한 API endpoint로 POST합니다.
API는 데몬에 구현되어있고, 로컬 소켓과 네트워크로 노출될 수 있습니다.
리눅스에서 소켓은 <code>/var/run/docker.sock</code>이고 윈도우에선 <code>\pipe\docker_engine</code>입니다.</p><p>한번 데몬이 새 컨테이너를 생성하라는 명령을 받으면, containerd를 호출하게 됩니다.
데몬이 더이상 컨테이너를 생성하는 어떤 코드도 없다는걸 기억하세요.</p><p>데몬은 containerd와 <a href="#grpc">gRPC</a>위에 CRUD 스타일 API를 통해 통신합니다.</p><p>이름과 달리, containerd는 컨테이너를 실제로 생성하지 못합니다.
containerd는 <em>runc</em>를 통해 컨테이너를 생성합니다.
containerd는 요구된 도커 이미지를 OCI 번들로 바꾸고 runc에게 이를 사용해 새 컨테이너를 만들라고 말합니다.</p><p>runc는 OS 커널과 인터페이스해 모든 컨테이너 구성에 필요한(namespaces, cgroups 등)것을 합칩니다.
컨테이너 프로세스는 runc의 자식 프로세스로 시작되고, 시작되는대로 runc는 종료됩니다.</p><p>자! 이제 컨테이너가 시작되었습니다. 이 프로세스는 그림4에 요약되었습니다.</p><p><img loading="lazy" alt="그림4" src="/assets/images/create-container-process-abafc5be161404ef5ed926d68754d0ed.png" width="828" height="1150" class="img_ev3q"><br>
<em>그림4 Starting a new container</em></p><br><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="이-모델의-한가지-큰-장점">이 모델의 한가지 큰 장점<a href="#이-모델의-한가지-큰-장점" class="hash-link" aria-label="Direct link to 이 모델의 한가지 큰 장점" title="Direct link to 이 모델의 한가지 큰 장점">​</a></h3><p><em>One huge benefit of this model</em></p><p>데몬에서 컨테이너를 시작하고 관리하는 모든 로직과 코드를 제거했다는 뜻은 전체 컨테이너 런티임이 도커 데몬으로부터 분리되었다는 뜻입니다.
"데몬없는(daemonless) 컨테이너"라고 부르기도 하고, 이는 실행중인 컨테이너에 영향을 미치지 않고 도커 데몬을 업그레이드하고 관리하는걸 가능하게 합니다.</p><p>과거 모델에서, 컨테이너 런타임 로직은 데몬에 구현되었기 때문에, 데몬을 사작하고 정지하는것은 호스트에서 동작중인 컨테이너를 죽였습니다.
이것은 제품 환경에서 큰 문제입니다 - 특히 얼마나 자주 새 버전의 도커가 릴리즈 되는지 고려해야 한다면요!
모든 데몬을 업그레이드 할때 호스트의 모든 컨테이너를 죽일 것입니다 - 좋지 않습니다!</p><p>다행히, 이제 문제가 아닙니다.</p><br><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="shim이-무엇인가요">Shim이 무엇인가요?<a href="#shim이-무엇인가요" class="hash-link" aria-label="Direct link to Shim이 무엇인가요?" title="Direct link to Shim이 무엇인가요?">​</a></h3><p><em>What's this shim all about</em></p><p>이 챕터의 일부 다이어그램은 shim 컴포넌트를 보여주고 있습니다.
Shim은 데몬없는 컨테이너 구현에 필수적입니다(실행중인 컨테이너를 데몬 업그레이드와 같은것을 위해 데몬과 분리하는 것을 직전에 언급했습니다).</p><p>더 전에 <em>containerd</em>는 runc를 사용해 새 컨테이너를 생성한다고 언급했습니다.
사실은, 모든 컨테이너가 생성될때 새 runc 인스턴스를 포크합니다.
그러나, 한번 각 컨테이너가 생성되면, 부모 runc 프로세스는 종료됩니다.
이는 수백개의 runc 인스턴스 없이 수백개의 컨테이너를 실행할 수 있다는 뜻입니다.</p><p>한번 컨테이너의 부모 runc 프로세스가 종료되면, 연관된 containerd-shim 프로세스가 컨테이너의 부모가 됩니다.
컨테이너의 부모로 shim이 수행하는 책임 일부는 다음을 포합합니다:</p><ul><li>열린 STDIN과 STDOUT 스트림을 유지해 데몬이 재시작되어도, 파이프가 닫히는 등에 따라 컨테이너가 종료되지 않게 합니다.</li><li>데몬에 컨테이너의 종료 상태를 보고합니다.</li></ul><br><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="리눅스에서-어떻게-구현됬나요">리눅스에서 어떻게 구현됬나요?<a href="#리눅스에서-어떻게-구현됬나요" class="hash-link" aria-label="Direct link to 리눅스에서 어떻게 구현됬나요?" title="Direct link to 리눅스에서 어떻게 구현됬나요?">​</a></h3><p><em>How it's implemented on Linux</em></p><p>리눅스 시스템에서, 논의한 컴포넌트는 다음과 같이 별도의 바이너리로 구현됩니다:</p><ul><li>dockerd (도커 데몬)</li><li>docker-containerd(containerd)</li><li>docker-containerd-shim(shim)</li><li>docker-runc(runc)</li></ul><p>도커 호스트에서 <code>ps</code> 명령어를 실행해 리눅스 시스템에서 모두 확인할 수 있습니다.
당연하게도, 몇몇은 실행중인 컨테이너가 있어야 보일 것입니다.</p><br><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="데몬의-요점은-무엇인가요">데몬의 요점은 무엇인가요?<a href="#데몬의-요점은-무엇인가요" class="hash-link" aria-label="Direct link to 데몬의 요점은 무엇인가요?" title="Direct link to 데몬의 요점은 무엇인가요?">​</a></h3><p><em>What's the point of the daemon</em></p><p>모든 실행과 런타임 코드가 데몬으로부터 제거되었으면 이런 질문을 할 수 있습니다: "데몬엔 뭐가 남아있나요?"</p><p>당연하게도, 대답은 시간이 갈수록 점점 기능이 제거되고 모듈화되며 바뀔 것입니다.
그러나, 현재는 몇가지 중요한 기능이 데몬에 포함되어 있습니다; 이미지 관리, 이미지 빌드, REST API, 인증, 보안, 코어 네트워킹 그리고 오케스트레이션.</p><br><br><br><br><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="챕터-요약">챕터 요약<a href="#챕터-요약" class="hash-link" aria-label="Direct link to 챕터 요약" title="Direct link to 챕터 요약">​</a></h2><p>도커 엔진은 모듈러 디자인이고 OCI의 공개 표준에 기반하고 있습니다.</p><p>도커 데몬은 풍부하고 버전관리된 HTTP API인 도커 API를 구현해 나머지 도커 프로젝트와 나란히 개발되었습니다.</p><p>컨테이너 실행은 도커 Inc에서 작성되고 CNCF에 기여된 <em>containerd</em>에 의해 관리됩니다.
containerd를 컨테이너 생명주기 관리를 다루는 감독자로 생각할 수 있습니다.
이는 작고 경량화되고 다른 프로젝트와 서드 파티 도구에 사용될 수 있습니다.
예를 들어, 쿠버네티스에 가장 흔한 컨테이너 런타임이 되고 있습니다.</p><p>containerd는 실제로 컨테이너를 생성하기 위해 OCI-compliant 컨테이너 런타임에 말해야 합니다.
기본적으로 도커는 <em>runc</em>를 기본 컨테이너 런타임으로 사용합니다.
runc는 OCI 런타임 명세의 de facto 구현이고 OCI-compliant 번들로부터 컨테이너를 시작하도록 기대됩니다.
containerd는 runc에게 말하고 도커 이미지가 OCI-compliant 번들로 runc에 보이도록 보장합니다.</p><p>runc는 독립적인 CLI 도구로 컨테이너를 만드는데 사용할 수 있습니다.
runc는 libcontainer에 기반하고, 마찬가지로 다른 프로젝트와 서드 파티 도구에 사용될 수 있습니다.</p><p>아직 많은 기능이 도커 데몬에 구현되어 있습니다.
더 많은 것이 시간이 지나며 쪼개질 것입니다.
현재 도커 데몬 내부 기능으로 포함되어 있지만, 이에 국한되지 않습니다; 도커 API, 이미지 관리, 인증, 보안 기능과 코어 네트워킹.</p><br><br><br><br><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="opencontainers"><a href="https://www.opencontainers.org/" target="_blank" rel="noopener noreferrer">opencontainers</a><a href="#opencontainers" class="hash-link" aria-label="Direct link to opencontainers" title="Direct link to opencontainers">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="image-spec"><a href="https://github.com/opencontainers/image-spec" target="_blank" rel="noopener noreferrer">image-spec</a><a href="#image-spec" class="hash-link" aria-label="Direct link to image-spec" title="Direct link to image-spec">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="runtime-spec"><a href="https://github.com/opencontainers/runtime-spec" target="_blank" rel="noopener noreferrer">runtime-spec</a><a href="#runtime-spec" class="hash-link" aria-label="Direct link to runtime-spec" title="Direct link to runtime-spec">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="grpc"><a href="https://grpc.io/" target="_blank" rel="noopener noreferrer">gRPC</a><a href="#grpc" class="hash-link" aria-label="Direct link to grpc" title="Direct link to grpc">​</a></h3><br><br><br><br><br><br>]]></content:encoded>
            <category>docker</category>
            <category>linux</category>
        </item>
        <item>
            <title><![CDATA[Pathways를 이용한 언어모델 스케일링]]></title>
            <link>https://jwher.github.io/posts/palm</link>
            <guid>https://jwher.github.io/posts/palm</guid>
            <pubDate>Sat, 11 Feb 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[PaLM: Scaling Language Modeling with Pathways]]></description>
            <content:encoded><![CDATA[<p><a href="/posts/palm"><img loading="lazy" alt="palm" src="/assets/images/palm-886a5652802d433a8b9ffcae67a3abff.jpeg" width="400" height="427" class="img_ev3q"></a><br>
<em>최대한 번역된 단어를 통일하였으나 원문을 보는것을 권장합니다.</em>  </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="요약">요약<a href="#요약" class="hash-link" aria-label="Direct link to 요약" title="Direct link to 요약">​</a></h2><p><em>Abstract</em></p><p>대규모 언어 모델은 few-shot learning을 사용한 다양한 자연어 처리 분야에서 눈에 띄는 성과를 보이고 있습니다.
이는 모델을 task-specific하게 적응하기 위한 예제 수를 수를 크게 줄입니다.
더 나아가 few-shot learning에 대한 영향에 대한 이해를 높이기 위해,
5400억개의 매개 변수, densely activated, <a href="/posts/attention-is-all-you-need">transformer</a> 언어 모델인 Pathways Language Model(PaLM)을 학습시켰습니다.</p><p>PaLM은 6144 TPU v4칩에서 Pathways를 사용해 학습했습니다. Pathways는 다양한 TPU Pods에서 고효율로 학습하길 가능하게 하는 ML system입니다.
수백개의 <strong>언어 이해와 생성</strong> 벤치마크에서 few-shot learning의 sota를 달성함을 보여줍니다.
많은 작업에서 PaLM은 540B는 고성능을 달성합니다. <strong>multi-step reasoning tasks</strong>에서 sota를 달성하고,
최근의 BIG-bench 벤치마크에서 평균 사람보다 나은 성능을 보여줍니다.
상당수의 BIG-bench tasks는 모댈 규모에 따라 불연속적인 성능 개선을 보여주었고,
이는 가장 큰 모델로 확장함에 따라 급격한 성능 증가를 보였음을 뜻합니다.
PaLM은 다양한 벤치마크에서 증명되는 강한 <strong>multilingual tasks</strong>와 <strong>source code generation</strong>을 갖춥니다.
편견(bias)과 독성(toxicity)에 대한 포괄적인 분석을 제공하고, 모델 규모와 관련하여 학습 데이터 암기(memorization)을 연구합니다.
최종적으로 LLM에 대한 윤리적 고려 사항과 점진적인 완화 전략에 대해 논의합니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-소개">1. 소개<a href="#1-소개" class="hash-link" aria-label="Direct link to 1. 소개" title="Direct link to 1. 소개">​</a></h2><p>(WIP 사전연구들)</p><p>(GLaM, Gopher, Chinchilla, Megatron-Turing NLG, LaMDA)</p><p>이 논문에서, scaling line으로 언어 모델링 개선을 계속하고 7800억 개의 고품질 텍스트 토큰에, densely activated, autoregressive transformer 5400억 개의 매개 변수를 학습합니다.
이것은 여러 텐서 처리 장치(TPU) v4 pod를 포함해 수천 개의 가속기 칩에 걸쳐 <strong>매우 큰 신경망</strong>을 <strong>매우 효율적</strong>으로 학습할 수 있는 새로운 ML 시스템인
<a href="#pathways-asynchronous-distributed-dataflow-for-ml">Pathways</a>를 사용해 달성했습니다.
새로운 모델은 Pathways Language Model (PaLM)이라고 부르며 수백 개의 자연어, 코드 및 수학적 추론 작업에서 sota few-shot 결과를 달성합니다.</p><p>이 작업의 요점은 다음과 같습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="효율적인-스케일링">효율적인 스케일링<a href="#효율적인-스케일링" class="hash-link" aria-label="Direct link to 효율적인 스케일링" title="Direct link to 효율적인 스케일링">​</a></h3><p><em>Efficient scaling</em></p><p>하나의 모델을 학습하는데 천에서 만개의 고효율 가속기를 사용할 수 있게 하는 새로운 ML system
<a href="#pathways-asynchronous-distributed-dataflow-for-ml">Pathways</a>의 첫번째 대규모 사용을 보입니다.
Pathways를 사용하면서 이전에는 도달할 수 없었던 효율성 수준에서 6144TPU v4 칩에 대한 540B 매개 변수 언어 모델을 학습했습니다.
대부분 이전의 대형 언어 모델은 단일 TPU 시스템(GLaM)이나 파이프라인 병렬 처리(GPipe)를 사용해
GPU 클러스터(-)나 여러 TPU v3 pod(Gopher)를 확장해 최대 4096 TPU v3 chips을 확장했습니다.
섹션 4에서 우리는 모델 FLOPS를 활용해 PaLM 540B를 6144 칩 두개의 TPU v4 Pods에서
매우 높은 46.2%라는 모델 FLOPs utilization을 달성하였고(이론적인 최고 수치에 비교한 수치)
57.8%의 하드웨어 FLOPs utilization을 보였습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="스케일링을-통한-지속적인-향상">스케일링을 통한 지속적인 향상<a href="#스케일링을-통한-지속적인-향상" class="hash-link" aria-label="Direct link to 스케일링을 통한 지속적인 향상" title="Direct link to 스케일링을 통한 지속적인 향상">​</a></h3><p><em>Continued improvements from scaling</em></p><p>섹션 6에서 다양한 주요 벤치마크를 수행하고, 상당한 차이를 보였습니다.
이것은 대규모 LM의 스케일링 개선이 정체되거나 포화점에 도달하지 않았다는 것을 보여줍니다.
표 4에서 가장 널리 평가된 29개의 영어 이해 벤치마크에서 28개의 sota를 달성했음을 보여줍니다.
이전에 수행된 다음 항목과 비교했습니다(GLaM, GPT-3, Megaron-Turing NLG, Gopher, Chinchilla, LaMDA)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="획기적인-능력">획기적인 능력<a href="#획기적인-능력" class="hash-link" aria-label="Direct link to 획기적인 능력" title="Direct link to 획기적인 능력">​</a></h3><p><em>Breakthrough capabilities</em></p><p>많은 어려운 작업에서 언어 이해와 생성에서 획기적인 능력을 보여줍니다.
특히, 섹션 <a href="#63-reasoning">6.3</a>은 정답을 도출하기 위해 multi-step 수학적 또는 상식적인 추론이 필요한 추론(reasoning) 작업 모음에 대한 평가를 제시합니다.
이전의 sota 결과는 좋은(strong) 결과를 얻기 위해 task-specific한 finetuning, domain-specific 아키텍처 및 task-specific verifiers 조합을 사용합니다.
이 작업에서, 우리는 모델 스케일링이 <a href="#chain-of-thought-prompting-elicits-reasoning-in-large-language-models">chain-of-thought prompting</a>과 결합될 때,
간단한 few-shot 평가가 다양한 추론 작업에서 finetuned sota를 능가하거나 같음을 보여줍니다.
섹션 <a href="#62-big-bench">6.2</a>에서 최근에 출시된 150개 이상의 새로운 언어 이해 및 생성 작업 제품군인
<a href="#beyond-the-imitation-game-measuring-and-extrapolating-the-capabilities-of-language-models">BIG-bench</a>의 획기적인 성능을 강조합니다.
BIG-bench의 대부분은 사람도 올바르게 대답하기가 매우 어렵습니다.
그림 1과 섹션 <a href="#9-%EC%84%A4%EB%AA%85-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0exploring-explanations">9</a>에서, 복잡한 추론 체인을 명시적으로 해석하고 설명하는 PaLM의 탐색 능력을 보여줍니다.</p><blockquote><p><img loading="lazy" alt="그림 1" src="/assets/images/figure1-88da2dc765f49fed86f0e52a9845c361.png" width="2322" height="650" class="img_ev3q"><br>
<em>그림1</em>  PaLM이 <em>chain-of-thought prompting</em>을 통해 탐색하는 능력을 보여줍니다.
모든 예제는 PaLM 540B에서 greedy(1-best) decoding을 통해 생성되었습니다. 프롬프트는 섹션 9에서 더 많은 예시를 보여줍니다.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="불연속적인-성능-개선">불연속적인 성능 개선<a href="#불연속적인-성능-개선" class="hash-link" aria-label="Direct link to 불연속적인 성능 개선" title="Direct link to 불연속적인 성능 개선">​</a></h3><p><em>Discontinuous improvements</em></p><p>스케일링 동작을 더 잘 이해하기 위해, 8B, 62B, 540B 세 가지 다른 파라미터 크기(scales)의 결과를 제시합니다.
일반적으로, 62B에서 540B로의 스케일링은 8B에서 62B로의 스케일링과 유사한 성능을 보이며,
이는 신경망 스케일링에서 종종 관찰되는 멱법칙(power law)인 경험 규칙(rule of thumb)과 일치합니다.
(Scaling laws for neural language models. Kaplan et al., 2020).
그러나, 특정 작업의 경우, 우리는 62B에서 540B로의 스케일링이 8B에서 62B로의 스케일링에 비해 정확도가 급격하게 증가하는 불연속적인 개선을 관찰합니다.
그러한 행동은 섹션 <a href="#62-big-bench">6.2</a> BIG-bench 작업 약 25%에서 관찰됩니다.
이는 모델이 충분한 규모를 달성할 때 대규모 LM의 새로운 기능이 나타날 수 있으며, 이러한 기능은 이전에 연구된 규모를 넘어 계속 나타날 수 있음을 시사합니다.</p><blockquote><p><img loading="lazy" alt="discontinuous-improvements" src="/assets/images/discontinuous-improvements-309574e5d88d2788b5667c9f1c9bb6ed.gif" width="1600" height="583" class="img_ev3q"><br>
<!-- -->대규모 모델에선 새로운 기능이 나타날 수 있습니다 (출처: 구글 블로그)</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="다국어-이해">다국어 이해<a href="#다국어-이해" class="hash-link" aria-label="Direct link to 다국어 이해" title="Direct link to 다국어 이해">​</a></h3><p><em>Multilingual understanding</em></p><p>대규모 언어 모델에 대한 이전 작업은 다국어 영역에서 제한된 평가를 수행했습니다.
이 논문에서, 우리는 다양한 언어로 기계 번역(섹션 <a href="#65-translation">6.5</a>), 요약(섹션 <a href="#66-multilingual-natural-language-generation">6.6</a>) 및 질문 답변(섹션 <a href="#67-multilingual-question-answering">6.7</a>)을 포함한 다국어 벤치마크에 보다 철저한 평가를 수행합니다.
학습 말뭉치(corpus)에서 비영어 데이터(≈ 22%)의 상대적으로 적은 비율에도 불구하고,
540B 모델의 few-shot 결과는 비영어 요약 작업에서 이전의 finetuned sota와 격차를 해소하고 번역 작업에서 이전의 sota를 능가할 수 있었습니다.
영어 및 다국어 작업에 대한 다국어 데이터의 비율을 증가시키는 영향을 이해하기 위해서 further work이 필요합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="편견과-독성">편견과 독성<a href="#편견과-독성" class="hash-link" aria-label="Direct link to 편견과 독성" title="Direct link to 편견과 독성">​</a></h3><p><em>Bias and toxicity</em></p><p>또한 편견과 독성에 대한 모델 성능을 평가하여 몇 가지 통찰력을 얻었습니다(섹션 <a href="#10-%EB%8C%80%ED%91%9C%EC%A0%81%EC%9D%B8-%ED%8E%B8%EA%B2%AC-%EB%B6%84%EC%84%9D">10</a>).
첫째, 성별과 직업 편견으로 Winogender conference task가 정확성이 모델 규모에 따라 향상된다는 것을 발견했으며,
PaLM 540B는 1-shot 또는 few-shot 설정에서 새로운 sota를 달성합니다.
둘째, 인종/종교/성별이 prompt continuation으로 수행된 동시 분석은 모델이 무슬림을 테러리즘, 극단주의 및 폭력과 연관시키는 고정관념을 잘못 주장하는 가능성을 보입니다.
이 행동은 모델 규모(scale) 전반에 걸쳐 일관성이 있었습니다.
마지막으로, prompt continuation에 대한 독성 분석은 8B 모델에 비해 62B 및 540B 모델의 전반적인 독성 수준이 약간 더 높다는 것을 보여줍니다.
그러나, model-generated continuation의 독성은 프롬프트 텍스트의 독성과 높은 상관 관계가 있는 반면,
human-generated continuations은 강한 독성 상관 관계가 없습니다.
이것은 모델이 인간이 생성한 텍스트보다 프롬프트 스타일에 더 크게 영향을 받는다는 것을 시사합니다.
향후 작업에서, 이러한 벤치마크를 영어가 아닌 언어로 확대하고 잠재적인 위험을 더 철저하게 설명할 계획입니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-모델-아키텍처">2. 모델 아키텍처<a href="#2-모델-아키텍처" class="hash-link" aria-label="Direct link to 2. 모델 아키텍처" title="Direct link to 2. 모델 아키텍처">​</a></h2><p>PaLM은 표준 <a href="/posts/attention-is-all-you-need">transformer</a> 아키텍처에서 디코더만 있는 설정을 사용했고
(즉, 각 timestep은 자신과 과거 timesteps만 참고 가능합니다) 다음 변경을 가했습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="swiglu-activation">SwiGLU Activation<a href="#swiglu-activation" class="hash-link" aria-label="Direct link to SwiGLU Activation" title="Direct link to SwiGLU Activation">​</a></h3><p>표준 ReLU, GeLU 또는 <a href="#glu-variants-improve-transformer">Swish activations</a>에 비해 성능이 크게 향상되는 것으로 나타난,
MLP(Multi-Layer Perceptron) intermediate activations에 SwiGLU activations (Swish(xW) · xV)를 사용합니다.
MLP에서 두 개가 아닌 세 개의 행렬 곱셈이 필요하지만,
<a href="#glu-variants-improve-transformer">Swish activations</a>에서 컴퓨팅 등가 실험
(즉, 표준 ReLU variant가 비례적으로 더 큰 차원을 가진 경우)에서 성능 향상을 입증합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="parallel-layers">Parallel Layers<a href="#parallel-layers" class="hash-link" aria-label="Direct link to Parallel Layers" title="Direct link to Parallel Layers">​</a></h3><p>각 트랜스포머 블록에 표준 직렬화된 식이 아닌 병렬(parallel) 식을 사용합니다.
<a href="#a-6-billion-parameter-autoregressive-language-model">A 6 Billion Parameter Autoregressive Language Model</a>
표준 식이 다음과 같이 쓴다면</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>y</mi><mo>=</mo><mi>x</mi><mo>+</mo><mi>M</mi><mi>L</mi><mi>P</mi><mo stretchy="false">(</mo><mi>L</mi><mi>a</mi><mi>y</mi><mi>e</mi><mi>r</mi><mi>N</mi><mi>o</mi><mi>r</mi><mi>m</mi><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>A</mi><mi>t</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy="false">(</mo><mi>L</mi><mi>a</mi><mi>y</mi><mi>e</mi><mi>r</mi><mi>N</mi><mi>o</mi><mi>r</mi><mi>m</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">y = x + MLP(LayerNorm(x+Attention(LayerNorm(x))))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10903em">M</span><span class="mord mathnormal">L</span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mopen">(</span><span class="mord mathnormal">L</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em">yer</span><span class="mord mathnormal" style="margin-right:0.10903em">N</span><span class="mord mathnormal" style="margin-right:0.02778em">or</span><span class="mord mathnormal">m</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">A</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">L</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em">yer</span><span class="mord mathnormal" style="margin-right:0.10903em">N</span><span class="mord mathnormal" style="margin-right:0.02778em">or</span><span class="mord mathnormal">m</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">))))</span></span></span></span></span></div><p>병렬 식은 다음과 같이 쓸 수 있습니다.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>y</mi><mo>=</mo><mi>x</mi><mo>+</mo><mi>M</mi><mi>L</mi><mi>P</mi><mo stretchy="false">(</mo><mi>L</mi><mi>a</mi><mi>y</mi><mi>e</mi><mi>r</mi><mi>N</mi><mi>o</mi><mi>r</mi><mi>m</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>+</mo><mi>A</mi><mi>t</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy="false">(</mo><mi>L</mi><mi>a</mi><mi>y</mi><mi>e</mi><mi>r</mi><mi>N</mi><mi>o</mi><mi>r</mi><mi>m</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">y = x + MLP(LayerNorm(x)) + Attention(LayerNorm(x))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10903em">M</span><span class="mord mathnormal">L</span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mopen">(</span><span class="mord mathnormal">L</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em">yer</span><span class="mord mathnormal" style="margin-right:0.10903em">N</span><span class="mord mathnormal" style="margin-right:0.02778em">or</span><span class="mord mathnormal">m</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">))</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">A</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">L</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em">yer</span><span class="mord mathnormal" style="margin-right:0.10903em">N</span><span class="mord mathnormal" style="margin-right:0.02778em">or</span><span class="mord mathnormal">m</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">))</span></span></span></span></span></div><p>MLP와 Attention 입력 matrix 곱셈은 합쳐질 수 있기 때문에,
대규모 스케일에서 병렬식이 대략 15% 빠르게 동작합니다.
Ablation 실험은 8B 크기에서 작은 품질 저하를 보여주었지만 62B 척도에서는 품질 저하가 없었기 때문에,
우리는 병렬 layer의 효과가 540B 크기에서 품질 저하가없다고(neutral) 추정합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="multi-query-attention">Multi-Query Attention<a href="#multi-query-attention" class="hash-link" aria-label="Direct link to Multi-Query Attention" title="Direct link to Multi-Query Attention">​</a></h3><p>표준 transformer 식은 각 시간 단계의 입력 벡터가 텐서 모양 <!-- -->[k,h]<!-- -->의, 여기서 h는 attention head 크기입니다,
"query", "key" 및 "value"가 선형으로 사영(projected)되는 k attention 헤드를 사용합니다.
여기서, key/value 사영 예측은 각 헤드에 대해 공유됩니다.
즉, "key"와 "value"는 <!-- -->[1, h]<!-- -->로 사영되지만, "query"는 여전히 <!-- -->[k, h]<!-- -->를 형성하기 위해 사영됩니다.
이는 모델 품질과 학습 속도에 영향이 없지만(neutral),
autoregressive 디코딩 시간에 상당한 비용 절감을 가져온다는 것을 발견했습니다.
<!-- -->[One write-head is all you need. Shazeer, 2019]<!-- -->
이것은 표준 multi-head attention이 autoregressive 디코딩 중에 가속기 하드웨어의 효율성이 낮기 때문입니다.
왜냐하면 key/value 텐서는 예제(examples) 간에 공유되지 않고, 한 번에 하나의 토큰만 디코딩되기 때문입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rope-embeddings">RoPE Embeddings<a href="#rope-embeddings" class="hash-link" aria-label="Direct link to RoPE Embeddings" title="Direct link to RoPE Embeddings">​</a></h3><p>절대적이거나 상대적인 position embeddings이 아닌 RoPE 임베딩을 사용합니다.
RoPE 임베딩이 더 긴 시퀀스 길이에서 더 좋은 효과를 보였기 때문입니다.
<a href="#roformer-enhanced-transformer-with-rotary-position-embedding">Roformer: Enhanced transformer with rotary position embedding</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="shared-input-output-embeddings">Shared Input-Output Embeddings<a href="#shared-input-output-embeddings" class="hash-link" aria-label="Direct link to Shared Input-Output Embeddings" title="Direct link to Shared Input-Output Embeddings">​</a></h3><p>과거 작업에서 자주 (but not universally) 수행되는 입력 및 출력 임베딩 매트릭스를 공유합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="no-biases">No Biases<a href="#no-biases" class="hash-link" aria-label="Direct link to No Biases" title="Direct link to No Biases">​</a></h3><p>밀도 높은 커널(dense kernel)이나 layer norms에는 bias가 사용되지 않았습니다.
이는 대형 모델의 학습 안정성을 증가시키는 것을 발견합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="vocabulary">Vocabulary<a href="#vocabulary" class="hash-link" aria-label="Direct link to Vocabulary" title="Direct link to Vocabulary">​</a></h3><p>우리는 과도한(excess) 토큰화 없이 학습 말뭉치(corpus)에서 많은 수의 언어를 지원하기 위해 선택된 256k 토큰으로 <a href="#a-simple-and-language-independent-subword-tokenizer-and-detokenizer-for-neural-text-processing">SentencePiece</a> 어휘(vocabulary)를 사용합니다.
어휘(vocavulary)는 학습 데이터에서 생성되었고, 학습 효율성을 향상시킨다는 것을 발견했습니다.
어휘는 완전히 무손실(lossless)이며 되돌릴 수 있습니다(reversible).
이것은 공백이 어휘(특히 코드에 중요한)에 완전히 보존되고 어휘외(out-of-vocabulary) 유니코드 문자는 각 바이트에 대한 어휘 토큰과 함께 UTF-8 바이트로 나뉩니다.
숫자는 항상 개별 숫자 토큰으로 나뉩니다 (예: "123.5 → 1 2 3 . 5").</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-모델-스케일-하이퍼파라미터">2.1 모델 스케일 하이퍼파라미터<a href="#21-모델-스케일-하이퍼파라미터" class="hash-link" aria-label="Direct link to 2.1 모델 스케일 하이퍼파라미터" title="Direct link to 2.1 모델 스케일 하이퍼파라미터">​</a></h3><p><em>Model Scale Hyperparameters</em></p><p>여기에서는 540B, 62B, 8B 세 모델 크기를 비교합니다.
FLOPs는 대략 파라미터 수와 비슷한데, 이 모델이 표준 dense transformer이기 때문입니다.
이 모델은 표1의 하이퍼파리미터로 구성되었습니다.
같은 데이터와 어휘를 사용해 세 모델은 독립적으로 학습되었습니다.
학습에 관한 내용은 섹션 <a href="#3-%ED%95%99%EC%8A%B5-%EB%8D%B0%EC%9D%B4%ED%84%B0%EC%85%8B">3</a>과 <a href="#5-%ED%95%99%EC%8A%B5-%EC%85%8B%EC%97%85">5</a>에 더 자세히 설명되어 있습니다.</p><blockquote><table><thead><tr><th>Model</th><th>Layers</th><th># of Heads</th><th>d_model</th><th># of Parameters(in billions)</th><th>Batch Size</th></tr></thead><tbody><tr><td>PaLM 8B</td><td>32</td><td>16</td><td>4096</td><td>8.63</td><td>256 -&gt; 512</td></tr><tr><td>PaLM 62B</td><td>64</td><td>32</td><td>8192</td><td>62.50</td><td>512 -&gt; 1024</td></tr><tr><td>PaLM 540B</td><td>118</td><td>48</td><td>18432</td><td>540.35</td><td>512 -&gt; 1024 -&gt; 2048</td></tr></tbody></table><p><em>표1</em> 모델 아키텍처 상세. feed-forward 크기는 항상 4*d_model이고 attention head 크기는 항상 256입니다.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-모델-카드">2.2 모델 카드<a href="#22-모델-카드" class="hash-link" aria-label="Direct link to 2.2 모델 카드" title="Direct link to 2.2 모델 카드">​</a></h3><p>PaLM에 대한 <a href="#model-cards-for-model-reporting">Model Card</a>는 부록 E에 있습니다.
이는 모델 아키텍처, 학습 설정, 학습 데이터, 확장된 사용을 위한 고수준의 요약입니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-학습-데이터셋">3 학습 데이터셋<a href="#3-학습-데이터셋" class="hash-link" aria-label="Direct link to 3 학습 데이터셋" title="Direct link to 3 학습 데이터셋">​</a></h2><p>PaLM 사전학습(pretraining) 데이터 세트는 광범위한 자연어 사용 사례를 나타내는 7800억 개의 토큰의 고품질 말뭉치(corpus)로 구성되어 있습니다.
데이터 세트는 필터링된 웹 페이지, 2권의 책, 위키피디아, 뉴스 기사, 소스 코드 및 소셜 미디어 대화의 혼합물입니다.
이 데이터 세트는 <a href="#lamda-language-models-for-dialog-applications">LaMDA</a>와
<a href="#glam-efficient-scaling-of-language-models-with-mixture-of-experts">GLaM</a>을 학습시키는 데 사용되는 데이터 세트에 기반을 두고 있습니다.
우리는 데이터(모든 모델에 대해 동일하게 shuffled)의 정확히 한 epoch에서 세 가지 모델을 모두 학습시키고 하위요소에서 데이터를 반복하지 않도록 혼합 비율을 선택합니다.</p><p>자연어 데이터 외에도, 사전학습 데이터 세트에는 코드도 포함되어 있습니다.
사전학습 데이터 세트의 소스 코드는 GitHub의 오픈 소스 저장소에서 가져옵니다.
저장소에 포함된 라이선스로 파일을 필터링하고 카피레프트 라이선스는 제외했습니다.
파일을 파일이름의 확장자로 필터링해 Java, HTML, Javascript, Python, PHP, C#, XML, C++, and C를 포함하는 24개의
대중적인 프로그래밍 언어로 제한해 196GB의 소스 코드를 얻었습니다.</p><p>또한, 소스 코드 저장소에서 일반적인것으로 알려진 중복된 파일을 파일 간의 Levenshtein 거리를 기반으로 중복을 제거합니다.<br>
<!-- -->(The adverse effects of code duplication in machine learning models of code Lopes et al., 2017; Allamanis, 2019)</p><p>표 2는 최종 PaLM 데이터 세트 혼합물을 만드는데 사용한 다양한 데이터 소스의 비율을 보여줍니다.
섹션 <a href="#8-%EB%8D%B0%EC%9D%B4%ED%84%B0%EC%85%8B-%EC%98%A4%EC%97%BC">8</a>에서 데이터 오염을 확인하고 학습 데이터 세트와 평가 데이터 간의 중복 분석을 제시합니다.
부록 D에는 언어 비율 분석을 포함한 추가 정보가 포함된 데이터 시트(Gebru et al., 2021)가 포함되어 있습니다.</p><blockquote><table><thead><tr><th>Total dataset size = 780 billion tokens</th><th></th></tr></thead><tbody><tr><td>Data source</td><td>Proportion of data</td></tr><tr><td>Social media conversations (multilingual)</td><td>50%</td></tr><tr><td>Filtered webpages (multilingual)</td><td>27%</td></tr><tr><td>Books (English)</td><td>13%</td></tr><tr><td>GitHub (code)</td><td>5%</td></tr><tr><td>Wikipedia (multilingual)</td><td>4%</td></tr><tr><td>News (English)</td><td>1%</td></tr></tbody></table><p>표2 학습 데이터 세트의 각 소스의 데이터 비율. 다국어 말뭉치에는 100개 이상의 언어의 텍스트가 포함되어 있으며, 분포는 부록 표29에 나와 있습니다.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-학습-인프라">4 학습 인프라<a href="#4-학습-인프라" class="hash-link" aria-label="Direct link to 4 학습 인프라" title="Direct link to 4 학습 인프라">​</a></h2><p><em>Training Infrastructure</em></p><p>(WIP 기반 논문들)</p><p>JAX, T5X, TPU v4 Pods, DCN
지금까지 설명된 가장 큰 TPU 구성인 이 시스템을 통해 파이프라인 병렬 처리를 사용하지 않고도 6144 칩으로 교육을 효율적으로 확장할 수 있었습니다.
(GPipe: Efficient training of giant neural networks using pipeline parallelism. Huang et al., 2019)</p><p>(WIP 이전 논문들)</p><p>LaMDA, GLaM, Megatron-Turing NLGm Gopher</p><p>파이프라이닝은 DCN(Smith et al., 2022)과 함께 사용됩니다,
이는 일반적으로 대역폭 요구 사항이 낮고 모델 및 데이터 병렬 처리로 가능한 최대효율 규모(scale)를 넘어 추가적인 병렬화를 제공하기 때문입니다.
파이프라이닝은 일반적으로 학습 배치를 "마이크로 배치"로 나누지만, 중요한 단점이 있습니다.
첫째, 앞뒤 패스(pass)의 시작과 끝에서 파이프라인을 채우고 비우는 동안 많은 장치가 완전히 유휴 상태인 파이프라이닝 "거품"인 step time overhead를 발생시킵니다.
둘째, 미니 배치 내의 각 마이크로 배치에 대해 메모리에서 가중치를 다시 로드하기 때문에 더 높은 메모리 대역폭을 요구합니다.
어떤 경우에는, 소프트웨어 복잡성 증가 또한 포함합니다. 다음 전략을 사용하여 PaLM 540B의 파이프라인 없는 학습을 6144 칩으로 효율적으로 확장할 수 있었습니다.</p><p>각 TPU v4 pod에는 모델 매개 변수의 전체 사본이 포함되어 있고,
각 가중치 텐서가 12-way 모델 병렬 처리와 256-way fully sharded 데이터 병렬 처리를 사용하는 3072 칩(Xu et al. (2021)에서 "2D finalized"라고 불리는 접근 방식)에 분할되어 있습니다.
Forward 패스 동안, 가중치는 data parallel axis를 통해 모두 수집되며, 각 레이어에서 완전히 sharded activation tensor가 저장됩니다.
Backward 패스 동안 나머지 activation은 rematerialized 되는데, 다른 recomputation 선택과 비교해 큰 배치 사이즈에서 높은 학습 throughput 결과를 내기 때문입니다.</p><p>Pathways 시스템을 사용하여 단일 TPU v4 pod를 넘어 학습을 확장합니다.
PaLM 540B는 Pathways의 클라이언트-서버 아키텍처를 활용하여 pod 수준에서 <strong>양방향 데이터 병렬성(two-way data parallelism)</strong>을 달성합니다.
여기서 하나의 파이썬 클라이언트는 각 pod에 학습 배치의 절반을 가져가며(dispatch),
각 pod는 표준 within-pod 데이터와 모델 병렬 처리를 사용하여 그라디언트를 병렬로 계산하기 위해 forward 및 backward 계산을 실행합니다.
그런 다음 pod는 원격 pod와 함께 그라디언트(배치의 절반이 계산됨)를 전송하고,
마지막으로 각 pod는 로컬 및 원격 그라디언트를 모으고 다음 time-step을 위해 bitwise-identical parameter를 얻기위해 parameter 업데이트를 병렬로 적용합니다.</p><blockquote><p><img loading="lazy" alt="figure2" src="/assets/images/figure2-193db2f2fe6c5e908dcb7490d7659ac1.png" width="1658" height="636" class="img_ev3q">
그림2 Pathways 시스템은 두개의 TPU v4 pod를 two-way data parallelism을 pod 레벨로 학습을 스케일합니다.</p></blockquote><p>그림 2는 Pathways 시스템이 양방향 pod 레벨 데이터 병렬 처리를 실행하는 방법을 보여줍니다.
하나의 파이썬 클라이언트는 각각 TPU pod를 구성하는 원격 서버에서 JAX/<a href="#xla-optimizing-compiler-for-tensorflow">XLA</a>
작업을 시작하는 sharded dataflow 프로그램(그림 2의 왼쪽 참조)을 구성합니다.
이 프로그램에는 pod 내 forward + backward 계산을 위한 컴포넌트 A(within-pod 그라디언트 하강(gradient decent) 포함),
cross-pod 그라디언트 전송을 위한 transfer subgraph, optimizer 업데이트(로컬 및 원격 그라디언트의 합산 포함)를 위한 컴포넌트 B가 포함되어 있습니다.
Pathways 프로그램은 각 pod에서 컴포넌트 A를 실행한 다음 출력 그라디언트를 다른 pod로 전송하고, 최종적으로는 각 pod에서 컴포넌트 B를 실행합니다.</p><p>Pathways 시스템 설계에는 프로그램 실행을 수천 개의 가속기 칩으로 확장할 수 있는 몇 가지 기능이 있습니다.
첫째, pod별 스케줄러(그림 2의 오른쪽 그림)에서 비동기 gang-scheduling을 통해 하나의 파이썬 클라이언트에서
원격 서버로 JAX/XLA 작업을 dispatch하는 latency를 가리고(mask),
둘째, sharded-dataflow 실행 모델을 통해 데이터 전송 관리 비용을 상환합니다.
(자세한 내용은 <a href="#pathways-asynchronous-distributed-dataflow-for-ml">Pathways</a>를 참고하세요)</p><p>Two-way pod-level 데이터 병렬 처리의 흥미로운 측면은 두 개의 pod에서 총 1536개의 호스트에 연결된 6144 TPU v4 칩의 규모(scale)로
cross-pod 그라디언트 전송을 위한 높은 학습 처리량(throughput)을 달성하는 과제입니다.
Cross-pod 그라디언트 전송은 각 코어가 model-sharded parameters에 대한 원격 그라디언트만 필요하기 때문에
두 pod의 해당 호스트 간에 1:1 전송만 필요합니다.
또한 두 pod 사이의 호스트는 Google 데이터 센터 네트워크를 통해 연결됩니다.
각 코어가 그라디언트 계산을 마칠 때까지 전송이 시작되지 않기 때문에(그림 2와 같이),
이것은 모든 호스트가 데이터 센터 네트워크 링크를 통해 동시에 그라디언트를 전송하는 매우 폭발적인(bursty) 워크로드를 초래합니다.
특히, 각 호스트 쌍은 모든 학습 단계에서 약 1.3GB의 그라디언트를 교환하고
합치게 되면 모든 호스트에서 81 Tbps라는 폭발적인 양이 됩니다.
이 워크로드의 폭발적인 속성은 도전과제를 제기하고
이는 최적의 DCN link utilization을 가능하게 하기 위해 Pathways 네트워킹 스택의 신중한(careful) 설계를 통해 해결합니다.
예를 들어, 혼잡의 영향을 완화하기 위해, 그라디언트 전송을 위한 데이터는 더 작은 청크로 쪼개지고
다양한 DCN 링크 세트를 통해 여러 개의 더 작은 flow를 통해 라우팅됩니다.
이러한 최적화를 통해, 우리는 학습 중에 단일 pod의 처리량에 비해 약 1.95배의 학습 처리량을 달성합니다
(단일 pod에 비해 두 개의 pod에서 배치 크기를 두 배로 늘리기 때문에 perfect weak scaling의 97%와 같습니다).
이론적 2배 처리량에 비해 성능의 격차(gap)는 backward 패스와 cross-pod 그라디언트 감소(reduction) 사이의 overlap 부족으로 인한 것입니다.
향후 작업에서 이것을 다룰 예정입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-학습-효율">4.1 학습 효율<a href="#41-학습-효율" class="hash-link" aria-label="Direct link to 4.1 학습 효율" title="Direct link to 4.1 학습 효율">​</a></h3><p><em>Training Efficiency</em></p><p>언어 모델의 가속기 효율성에 대해 이전에 보고된 대부분의 수치는 Hardware FLOPs Utilization (HFU)라고 부르는 메트릭을 사용합니다.
이것은 일반적으로 주어진 장치에서 관측되는 FLOPs의 이론상 최대(peak) FLOPs 비율에 대한 추정치를 나타냅니다.
그러나, 하드웨어 FLOPs 활용에는 몇 가지 문제가 있습니다.</p><p>첫째, 실행되는 하드웨어 FLOPs의 수는 시스템 의존적(system-dependent)이고 구현 의존적(implementation-dependent)이며 컴파일러의 설계 선택에 따라 다른 수의 operation을 초래할 수 있습니다.
<em>Rematerialization</em>은 컴퓨팅과 메모리 사용량을 trade-off 하는데 널리 사용되는 기술입니다.
그라디언트 하강(gradient descent)을 사용하여 대부분의 신경망 아키텍처의 backwards pass를 효율적으로 계산하려면,
배치에 대한 많은 중간 activations를 메모리에 저장해야 합니다.
만약 그것들이 모두 맞을(fit) 수 없다면, 일부 forward pass operations을 re-computed할 수 있습니다
(일부 activations를 저장하기보다는 <em>rematerialized</em>할 수 있습니다).
이것은 추가 하드웨어 FLOPs를 사용하여 메모리를 절약할 수 있는 절충점을 만들지만,
학습 시스템의 궁극적인 목표는 가능한 한 많은 하드웨어 FLOPs를 사용하지 않고, 초당 토큰의 높은 처리량(따라서 학습에 빠른 시간)을 달성하는 것입니다.</p><p>둘째, 관찰된 하드웨어 FLOPs를 측정하는 것은 그것들을 계산하거나 추적하는 데 사용되는 방법론에 달려있습니다(dependent).
관찰된 하드웨어 FLOPs는 analytical accounting
(Efficient large-scale language model training on gpu clusters using megatron-lm. Narayanan et al., 2021b)과
hardware performance counters
(GSPMD: general and scalable parallelization for ml computation graphs. Xu et al., 2021)를 사용하여 보고되었습니다.</p><p>이러한 문제를 감안할 때,
우리는 HFU가 LLM 교육 효율성에 대한 일관되고 의미 있는 지표가 아니라는 것을 알고 있다.
우리는 구현 독립적인 효율성에 대한 새로운 메트릭을 제안하고 모델 FLOPs 활용(MFU)이라고 불리는 시스템 효율성의 더 깨끗한 비교를 허용합니다.
이것은 최고 FLOP에서 작동하는 시스템의 이론적 최대 처리량에 대한 관찰된 처리량(초당 토큰)의 비율이다.
결정적으로, "이론적 최대" 처리량은 재물질화가 아닌 전방+후방 패스를 계산하는 데 필요한 작업만을 설명한다.
따라서 MFU는 분자가 단순히 초당 관찰된 토큰이며 분모는 모델 아키텍처와 주어진 시스템에 대한 게시된 최대 FLOP에만 의존하기 때문에 다른 시스템에서 훈련 실행 간의 공정한 비교를 허용합니다.
우리는 부록 B에서 MFU를 계산하기 위한 수학적 공식을 정교하게 설명한다.</p><blockquote><p>표3</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-학습-셋업">5. 학습 셋업<a href="#5-학습-셋업" class="hash-link" aria-label="Direct link to 5. 학습 셋업" title="Direct link to 5. 학습 셋업">​</a></h2><p><em>Training Setup</em></p><p>모델 학습은 대형 Transformer 언어 모델의 공정한(fairly) 표준적인 설정을 따랐습니다.
자세한 내용은 아래와 같습니다:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="가중치-초기화">가중치 초기화<a href="#가중치-초기화" class="hash-link" aria-label="Direct link to 가중치 초기화" title="Direct link to 가중치 초기화">​</a></h3><p><em>Weight initialization</em></p><p>커널 가중치(즉, 임베딩과 layer norm scale을 제외한 모든 것)는
"fan-in variance scaling", 즉 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi><mo>∼</mo><mi>N</mi><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mi mathvariant="normal">/</mi><msqrt><msub><mi>n</mi><mrow><mi>i</mi><mi>n</mi></mrow></msub></msqrt><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">W ∼ N(0,1/\sqrt{n_{in}})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.0647em;vertical-align:-0.3147em"></span><span class="mord mathnormal" style="margin-right:0.10903em">N</span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">1/</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7253em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord" style="padding-left:0.833em"><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">in</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span><span style="top:-2.6853em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3147em"><span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> 으로 초기화되며, 여기서 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mrow><mi>i</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">n_{in}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">in</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>은 입력 커널의 차원입니다.
입력 임베딩은 layer normalization이 임베딩에 적용되지 않기 때문에 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo>∼</mo><mi>N</mi><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">E ∼ N(0, 1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.05764em">E</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10903em">N</span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span> 으로 초기화됩니다.
왜냐하면 입력 및 출력 임베딩 레이어가 공유되기 때문에,
Pre-softmax 출력 로짓(logits)을 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi mathvariant="normal">/</mi><msqrt><mi>n</mi></msqrt></mrow><annotation encoding="application/x-tex">1/\sqrt{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0503em;vertical-align:-0.25em"></span><span class="mord">1/</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8003em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord" style="padding-left:0.833em"><span class="mord mathnormal">n</span></span></span><span style="top:-2.7603em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2397em"><span></span></span></span></span></span></span></span></span></span> 으로 스케일하며, 여기서 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">n</span></span></span></span></span>은 임베딩 크기입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="옵티마이저">옵티마이저<a href="#옵티마이저" class="hash-link" aria-label="Direct link to 옵티마이저" title="Direct link to 옵티마이저">​</a></h3><p><em>Optimizer</em></p><p>이 모델은 <a href="#adafactor-adaptive-learning-rates-with-sublinear-memory-cost">Adafactor optimzer</a>에서 factorization을 제외하고 학습되었습니다.
이것은 parameter matrix에서 root-mean-squre로 learning rate를 scale하는
"parameter scaling"을 가진 Adam(Adam: A method for stochastic optimization. Kingma &amp; Ba, 2014)과 동일한 효과입니다.
왜냐하면 가중치 초기화는 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi mathvariant="normal">/</mi><msqrt><mi>n</mi></msqrt></mrow><annotation encoding="application/x-tex">1/\sqrt{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0503em;vertical-align:-0.25em"></span><span class="mord">1/</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8003em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord" style="padding-left:0.833em"><span class="mord mathnormal">n</span></span></span><span style="top:-2.7603em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2397em"><span></span></span></span></span></span></span></span></span></span>에 비례하며,
이것의 효과는 <a href="#language-models-are-few-shot-learners">Brown et al.</a>에서와 같이 Adam learning rate의 메뉴얼 scaling down과 유사합니다.
그러나 parameter scaling은 다른 스케일(임베딩 및 layer norm scales)에서 작동하는 parameter matrices의 learning rate가 같은 속도로 scale down되지 않는다는 이점이 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="하이퍼파라미터-최적화">하이퍼파라미터 최적화<a href="#하이퍼파라미터-최적화" class="hash-link" aria-label="Direct link to 하이퍼파라미터 최적화" title="Direct link to 하이퍼파라미터 최적화">​</a></h3><p><em>Optimization hyperparameters</em></p><p>Adafactor의 learning rate를 0.001로 첫 10,000 단계를 거치고,
이후에 스텝 횟수 k에 따라 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi mathvariant="normal">/</mi><msqrt><mi>k</mi></msqrt></mrow><annotation encoding="application/x-tex">1/\sqrt{k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1822em;vertical-align:-0.25em"></span><span class="mord">1/</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9322em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord" style="padding-left:0.833em"><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span><span style="top:-2.8922em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1078em"><span></span></span></span></span></span></span></span></span></span>만큼 감소합니다(decayed).
학습 모멘텀 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>β</mi><mn>1</mn></msub><mo>=</mo><mn>0.9</mn></mrow><annotation encoding="application/x-tex">\beta_1=0.9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0.9</span></span></span></span></span>로 학습시킵니다.
2차 모멘트 보간(interpolation) 값은 스텝 횟수 k에 대해 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>β</mi><mn>2</mn></msub><mo>=</mo><mn>1.0</mn><mo>−</mo><msup><mi>k</mi><mrow><mo>−</mo><mn>0.8</mn></mrow></msup></mrow><annotation encoding="application/x-tex">\beta_2 = 1.0 − k^{−0.8}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">1.0</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">0.8</span></span></span></span></span></span></span></span></span></span></span></span></span>로 계산됩니다.
이 값은 큰 언어 모델을 학습할 때 표준 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>β</mi><mn>2</mn></msub><mo>=</mo><mn>0.99</mn></mrow><annotation encoding="application/x-tex">\beta_2 = 0.99</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0.99</span></span></span></span></span>보다 더 안정적이라는 것을 발견했습니다.
왜냐하면 희귀한(rare) 임베딩 토큰은 더 짧은 window에서 두 번째(second moments)를 잘못 추정할 수 있기 때문입니다.
모든 모델에 대해 1.0의 값으로 <a href="#understanding-the-exploding-gradient-problem">global norm gradient clipping</a>을 사용합니다.
우리는 학습중에 현재 학습률 lr에 대해 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><msup><mi>r</mi><mn>2</mn></msup><mi mathvariant="normal">.</mi><mn>0</mn></mrow><annotation encoding="application/x-tex">lr^2.0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord">.0</span></span></span></span></span>의 dynamic weight decay를 사용합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="손실-함수">손실 함수<a href="#손실-함수" class="hash-link" aria-label="Direct link to 손실 함수" title="Direct link to 손실 함수">​</a></h3><p><em>Loss function</em></p><p>모델은 레이블 스무딩(label smoothing)없이 모든 토큰의 평균 로그 확률(probability)인 표준 언어 모델링 손실함수로 학습됩니다.
또한 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>z</mi><mi>l</mi></msub><mi>o</mi><mi>s</mi><mi>s</mi><mo>=</mo><mn>1</mn><msup><mn>0</mn><mrow><mo>−</mo><mn>4</mn></mrow></msup><mo separator="true">⋅</mo><mi>l</mi><mi>o</mi><msup><mi>g</mi><mn>2</mn></msup><mi>Z</mi></mrow><annotation encoding="application/x-tex">z_loss = 10^{−4}·log^2Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em">l</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord mathnormal">oss</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.0085em;vertical-align:-0.1944em"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">4</span></span></span></span></span></span></span></span></span><span class="mpunct">⋅</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.07153em">Z</span></span></span></span></span> 보조(auxilizry)손실을 사용하여 softmax normalizer log(Z)가 0에 가까우도록 장려하며,
이는 학습의 안정성을 증가시키는 것을 발견합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="문장-길이">문장 길이<a href="#문장-길이" class="hash-link" aria-label="Direct link to 문장 길이" title="Direct link to 문장 길이">​</a></h3><p><em>Sequence lenght</em></p><p>2048의 시퀀스 길이가 모든 모델에 사용되었습니다.
입력 예제는 함께 연결된 다음 정확히 2048개의 토큰 시퀀스로 분할되므로, 패딩 토큰은 없지만, 예제는 중간에 분할될 수 있습니다.
입력 예제는 특별한 <!-- -->[eod]<!-- --> 토큰으로 서로 구분됩니다(differentiated).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="배치-크기">배치 크기<a href="#배치-크기" class="hash-link" aria-label="Direct link to 배치 크기" title="Direct link to 배치 크기">​</a></h3><p><em>Batch size</em></p><p>모든 모델에 대해, 우리는 학습 중에 배치 크기를 늘립니다.
가장 큰 모델의 경우, 우리는 50k 스텝까지 배치 크기 512(1M 토큰)를 사용하고,
115k 스텝까지 1024(2M 토큰)로 두 배로, 마지막으로 255k 스텝에서 학습이 완료될 때까지 2048(4M 토큰)로 다시 두 배로 사용합니다.
더 작은 모델들은 비슷한 스케줄을 따릅니다.</p><p>이러한 배치 크기 일정을 사용하는 이유는 두 가지입니다:
(1) 더 작은 배치 크기는 학습 초기에 더 샘플 효율적이며(즉, 토큰이 보이는 함수로써 더 나은 손실)
반면, 더 큰 배치 크기는 더 나은 그라디언트 추정치로 인해 학습 후기에 도움이 됩니다(Smith et al., 2018; McCandlish et al., 2018),
그리고 (2) 더 큰 배치 크기는 더 큰 매트릭스 곱셈 차원을 만들고 TPU의 효율을 증가시킵니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="비트단위-결정론">비트단위 결정론<a href="#비트단위-결정론" class="hash-link" aria-label="Direct link to 비트단위 결정론" title="Direct link to 비트단위 결정론">​</a></h3><p><em>Bitwise determinism</em></p><p>모델은 모든 체크포인트에서 완전히 비트단위(bitwise)로 재현할 수 있습니다.
다른말로, 모델이 한 번의 실행에서 17,000단계까지 학습되었고, 체크포인트 15,000에서 다시 시작하면
학습 프레임워크는 체크포인트 15,000에서 17,000까지 두 실행(run) 모두에서 동일한 결과를 얻을 수 있습니다.
이것은 두 가지 방법으로 달성됩니다: (1) JAX+XLA+T5X가 제공하는 비트 결정론적 모델링 프레임워크와
(2) 섞인 데이터가 랜덤 액세스 형식으로 기록되므로 주어진 학습 배치의 내용은 단계번호(step number) 함수일 뿐입니다.
(Roberts et al., 2022).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="드롭아웃">드롭아웃<a href="#드롭아웃" class="hash-link" aria-label="Direct link to 드롭아웃" title="Direct link to 드롭아웃">​</a></h3><p><em>Dropout</em></p><p>모델은 드롭아웃 없이 학습되었지만, 대부분의 경우에서 드롭아웃 0.1이 사용됩니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="51-학습-불안정">5.1 학습 불안정<a href="#51-학습-불안정" class="hash-link" aria-label="Direct link to 5.1 학습 불안정" title="Direct link to 5.1 학습 불안정">​</a></h3><p><em>Training Instability</em></p><p>가장 큰 모델의 경우, 그라디언트 클리핑(clipping)이 활성화되었음에도 불구하고 학습 중에 약 20번의 손실 스파이크를 관찰했습니다.
이러한 스파이크는 매우 불규칙한 간격으로 발생했고, 때로는 학습에 늦게 발생했으며, 더 작은 모델을 학습할 때 관찰되지 않았습니다.
가장 큰 모델의 학습 비용으로 인해, 우리는 이러한 급증을 완화하기 위한 원칙적인 전략을 결정할 수 없었습니다.</p><p>대신, 우리는 문제를 효과적으로 완화하기 위한 간단한 전략을 발견했습니다:
스파이크가 시작되기 약 100단계 전에 체크포인트에서 학습을 다시 시작했고,
스파이크 전과 도중에 본 배치를 다루는 약 200-500개의 데이터 배치를 건너뛰었습니다.
이 완화로, 손실은 같은 시점에서 다시 급증하지 않았습니다.</p><p>스파이크가 "나쁜 데이터" 그 자체로 인해 발생했다고 믿지 않습니다.
왜냐하면 스파이크를 둘러싼 데이터 배치를 취한 다음 다른 이전 체크포인트에서 시작하여 동일한 데이터 배치에 대해 학습한 몇 가지 절제 실험을 실행했기 때문입니다.
이 경우, 스파이크를 보지 못했습니다. 이것은 스파이크가 특정 모델 매개 변수 상태와 특정 데이터 배치의 조합으로 인해 발생한다는 것을 의미합니다.
미래에, 우리는 매우 큰 언어 모델에서 손실 급증에 대한 더 원칙적인 완화 전략을 연구할 계획입니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-평가">6 평가<a href="#6-평가" class="hash-link" aria-label="Direct link to 6 평가" title="Direct link to 6 평가">​</a></h2><p><em>Evaluation</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="61-english-nlp-tasks">6.1 English NLP tasks<a href="#61-english-nlp-tasks" class="hash-link" aria-label="Direct link to 6.1 English NLP tasks" title="Direct link to 6.1 English NLP tasks">​</a></h3><p>이전의 대형 언어 모델과 비교하기 위해, 우리는 29개의 영어 벤치마크 세트에서 PaLM 모델을 평가합니다.
GLaM, GPT-3</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="62-big-bench">6.2 BIG-bench<a href="#62-big-bench" class="hash-link" aria-label="Direct link to 6.2 BIG-bench" title="Direct link to 6.2 BIG-bench">​</a></h3><p>BIG-bench는 대규모 언어 모델에 대한 도전적인 작업을 생산하는 것을 목표로 하는 협업 벤치마크입니다(BIG-bench 협업, 2021).6
여기에는 논리적 추론, 번역, 질문 답변, 수학 등을 포함한 다양한 언어 모델링 작업을 다루는 150개 이상의 작업이 포함되어 있습니다.
이 섹션에서 우리는 BIG 벤치에서 PaLM 모델 제품군의 몇 안 되는 평가 결과를 제시하고 분석합니다.
빅 벤치는 텍스트 작업과 프로그래밍 작업을 모두 포함한다. 이 평가를 위해, 텍스트 작업만 고려되었습니다.</p><p>빅 벤치 데이터 릴리스에는 크라우드소싱 플랫폼의 많은 근로자(일반적으로 10명)가 각 작업을 해결하도록 요청받은 인간 성과 지표가 포함되어 있습니다.
이 작업자들은 소수의 샷 모델이 보는 것과 유사한 작업 설명과 예시를 받았고, 답을 제공하고자 하는 외부 도구(검색 엔진, 계산기 등)를 사용할 수 있었다.
모델과 인간의 성능은 모두 각 작업의 원래 제작자가 제공한 금 라벨에 대해 동일한 지표를 사용하여 측정되었다.
"최고의" 인간 성능은 가장 높은 예제 메트릭 점수를 가진 인간이 생성한 답변을 사용하여 계산된 반면, "평균" 인간 성능은 모든 인간이 생성한 답변의 평균 메트릭 점수를 사용하여 계산됩니다.</p><p>그림3</p><blockquote><p>그림3
PaLM의 빅 벤치 평가.
(왼쪽) PaLM, GPT-3, Gopher 및 Chinchilla의 평가.
이전 모델은 작업의 하위 집합에서만 평가되었으므로, 이 그래프는 세 가지 모델 모두가 평가한 58개의 작업에 대한 집계 결과를 보여줍니다.
(오른쪽) 150개의 BIG-벤치 작업의 더 큰 세트에 대한 PaLM 평가. 각 작업에 대해, 선호하는 메트릭의 결과가 사용된다.
결과는 객관식 작업의 경우 최대 점수를 100으로 설정하고 임의의 기회 점수를 0으로 설정하여 정규화되므로, 모델이 임의의 경우보다 더 나쁘게 수행하면 마이너스로 평가됩니다. 정규화된 결과는 모든 작업에서 평균된다.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="63-reasoning">6.3 Reasoning<a href="#63-reasoning" class="hash-link" aria-label="Direct link to 6.3 Reasoning" title="Direct link to 6.3 Reasoning">​</a></h3><ul><li></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="64-code-tasks">6.4 Code Tasks<a href="#64-code-tasks" class="hash-link" aria-label="Direct link to 6.4 Code Tasks" title="Direct link to 6.4 Code Tasks">​</a></h3><ul><li></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="65-translation">6.5 Translation<a href="#65-translation" class="hash-link" aria-label="Direct link to 6.5 Translation" title="Direct link to 6.5 Translation">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="66-multilingual-natural-language-generation">6.6 Multilingual Natural Language Generation<a href="#66-multilingual-natural-language-generation" class="hash-link" aria-label="Direct link to 6.6 Multilingual Natural Language Generation" title="Direct link to 6.6 Multilingual Natural Language Generation">​</a></h3><p>자연어 생성 작업은 문서, 표 또는 기타 구조화된 양식과 같은 텍스트 또는 비언어적 정보를 입력으로 제공하는 이해할 수 있는 텍스트를 자동으로 생성해야 합니다.
이 텍스트들은 의사소통 목표를 달성하고자 한다(예: 문서를 요약하고, 일련의 개념을 말로 표현한다).
소수의 조건부 자연어 생성은 과거에 비슷한 크기의 모델에 대해 탐구되지 않았다.
일반적으로 생성 평가는 생성 질문 답변과 객관식 언어 모델링 작업으로 제한되며, 이는 전체 문장이나 단락을 생성할 필요가 없습니다.
우리가 다른 섹션(GPT-3, GLaM, Gopher, LaMDA, Megatron-Turing NLG)에서 비교하는 대형 언어 모델 중 어느 것도 조건부 자연어 생성 작업(영어 또는 다국어)에 대한 샷 또는 미세 조정 결과를 보고하지 않습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="67-multilingual-question-answering">6.7 Multilingual Question Answering<a href="#67-multilingual-question-answering" class="hash-link" aria-label="Direct link to 6.7 Multilingual Question Answering" title="Direct link to 6.7 Multilingual Question Answering">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="68-analysis">6.8 Analysis<a href="#68-analysis" class="hash-link" aria-label="Direct link to 6.8 Analysis" title="Direct link to 6.8 Analysis">​</a></h3><h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-암기">7 암기<a href="#7-암기" class="hash-link" aria-label="Direct link to 7 암기" title="Direct link to 7 암기">​</a></h2><p><em>Memorization</em></p><p>신경망이 학습 데이터를 암기할 가능성이 있다는건 널리 알려진 사실입니다. 실은, overfitting에 대한 정의이기도 합니다.
일반적으로, 이러한 유형의 암기는 모델이 작은 학습 세트를 많이 통과할 때 발생합니다.
하지만, PaLM은 7800억개의 토큰 뭉치(corpus)를 통해 한번의 패스로 학습합니다.
반면에, PaLM은 굉장히 큰 용량을 지니고 있기 때문에 한번의 패스만으로도 학습 데이터의 상당 부분을 암기할 수 있다는건 그럴듯합니다.
또한 웹 파생 말뭉치(corpora)의 거의 복제된 텍스트는 몇개의 구문(작은 변화 포함)이 학습 중간에 많이 보입니다.</p><p>이 섹션에서, 우리는 PaLM 모델이 학습 데이터를 암기한 정도를 분석합니다.
이를 평가하기 위해, 우리는 학습 예에서 100개의 토큰 시퀀스를 무작위로 선택했고, span에서 처음 50개의 토큰으로 모델을 표시했습니다.
Greedy 디코딩을 실행하고 모델이 학습 예와 정확히 일치하는 50 토큰 연속을 얼마나 자주 생성했는지 측정합니다.
이 방법론은 50에서 500 토큰까지의 프롬프트 길이로 실험한 다음을 따릅니다.
(Quantifying memorization across neural language models. Carlini et al. 2022)</p><p>그림 18(a)는 세 가지 모델 스케일에 걸친 암기 일치율을 보여줍니다.
8B 모델이 데이터의 1.6%에 대한 50개의 토큰 지속을 정확히 재현할 수 있었고,
540B 모델은 데이터의 2.4%에 대한 지속을 재현할 수 있었다는 것을 알 수 있습니다.
또한 학습 데이터와 동일한 분포에서 샘플링된 보류된 데이터에 대한 "기억" 비율을 평가합니다.
일부 보류된 예제는 학습 세트 예제와 매우 유사하기 때문에 보류된 데이터에 대한 암기 비율은 0%보다 큽니다.
예를 들어 연도만 변경되는 상용구 오픈 소스 코드 라이선스가 있습니다.</p><blockquote><p>그림18</p></blockquote><p>그림 18:
(a) 세 가지 모델 크기에 대해 암기된 학습 사례의 비율. 보류된 데이터는 학습과 같은 분포에서 왔지만, 학습에서 정확히 볼 수 없었습니다.
(b) 학습에서 예시를 본 횟수에 따른 암기율의 로그 로그 플롯.
(c) 암기된 비율 예시, 코퍼스별로 분류.</p><p>그림 18(b)는 학습 예가 학습 데이터에서 정확히 본 횟수의 함수로서 암기율을 보여줍니다.
우리는 학습에서 정확히 한 번 본 예시는 우리의 가장 큰 모델에 대해 0.75%의 암기율이 있는 반면,
500번 이상 본 예시는 40% 이상의 암기율이 있다는 것을 알 수 있습니다.
중복률이 높은 예가 있는 이유는 학습이 전체 문서에서 중복 제거되기 때문이며, 여기서 우리는 100개의 토큰 스팬에 대한 암기화를 평가합니다.</p><p>그림 18(c)는 학습 데이터 코퍼스로 분류된 세 가지 모델의 암기율을 보여줍니다.
암기된 예시를 분석한 후, 가장 큰 차별화 요소는 학습에서 예시의 정확한 중복, 거의 중복 또는 템플릿의 양이라고 결론지었습니다.
코드 말뭉치(corpus)에는 상당한 양의 상용구 라이선스 문자열, 다른 곳에서 복사된 공유 코드 스니펫, 그리고 자동으로 생성된 코드가 있습니다.
책 말뭉치(corpus)는 주로 정말 독특한 텍스트 문자열을 포함합니다.</p><p>이러한 결과로, 암기화에 대한 다음과 같은 결론에 도달할 수 있습니다:</p><ul><li><p>큰 모델은 작은 모델보다 더 높은 암기율을 가집니다. Log-linear 경사는 이전에 Carlini에서 관측된것과 매우 유사합니다.</p></li><li><p>보류된 결과에 의해 입증된 바와 같이, 모델이 일반적인 템플릿과 상용구에 대한 정확한 일치 연속을 생성하기 때문에 어느 정도의 "기억"이 예상됩니다.
그러나, 학습 데이터에 대한 암기율은 보류된 데이터보다 훨씬 높으며, 이는 모델이 데이터의 일부를 진정으로 암기한다는 것을 나타냅니다.</p></li><li><p>예시가 암기될 가능성은 학습에서의 독특함과 강하게 연관되어 있습니다. 한 번만 볼 수 있는 예는 여러 번 볼 수 있는 예보다 암기될 가능성이 훨씬 적습니다.
이는 이전 연구와 일관성 있습니다.</p></li></ul><p>우리는 대부분의 암기 사례가 표 39에 표시된 예와 같이 우려를 유발할 것 같지 않은 공식 텍스트라는 것을 발견했습니다.
그러나, 우리는 또한 이야기, 뉴스 기사 및 사실의 암기화를 관찰했습니다.
실제로, 추출 가능한 암기된 콘텐츠의 양은 학습 데이터 세트, 모델 크기, 그리고 추출 공격을 수행하는 사람들이 프롬프트로 사용할 학습 세트의 텍스트에 대한 지식을 가지고 있는지 여부의 함수입니다.
예를 들어, Carlini et al. (2022)은 더 긴 프롬프트가 더 많은 암기 사례를 발견한다는 것을 보여줍니다.
그러나, 단순히 추출할 수 있는 학습 세트 텍스트의 양을 측정하는 것은 이 암기에 문제가 있는지 아닌지에 대해 아무것도 알려주지 않습니다.</p><p>암기 문제가 있는지 여부는 데이터 세트의 특성에 달려 있습니다 ("데이터 세트에 표면화되면 해로운 텍스트가 포함되어 있습니까?")
그리고 대상 응용 프로그램에 달려있습니다. ("기식된 텍스트가 생성되면 부정적인 결과가 있습니까?")
따라서, 대규모 언어 모델을 위한 다운스트림 애플리케이션을 선택할 때 항상 주의를 기울여야 합니다.
생성 시간 암기를 방지하기 위한 메모리 집약적이지만 계산적으로 효율적인 접근 방식 중 하나는
학습 데이터에 대해 블룸 필터를 구현하고 학습 데이터 세트에서 문자 그대로 발생하는 시퀀스를 제한하는 것입니다.
일부 소스의 데이터는 다른 소스보다 암기하면 더 문제가 될 수 있기 때문에, 그러한 접근 방식은 데이터의 일부 위에 블룸 필터를 구축함으로써 더 메모리 효율적일 수 있습니다.
이 접근 방식은 정확히 암기된 콘텐츠를 제거하지만, 대략 암기된 콘텐츠(기차 세트 텍스트와 한두 단어만 다른 세대)는 여전히 생성될 수 있습니다.
궁극적으로, 최고의 완화 전략은 긴 시퀀스 생성을 위해 대규모 언어 모델을 사용하는 것이 적절한 시기에 대해 신중하고 신중한 선택을 하는 것입니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="8-데이터셋-오염">8 데이터셋 오염<a href="#8-데이터셋-오염" class="hash-link" aria-label="Direct link to 8 데이터셋 오염" title="Direct link to 8 데이터셋 오염">​</a></h2><p><em>Dataset Contamination</em></p><p>이전 작업(Brown et al., 2020; Wei et al., 2022a; Du et al., 2021)은 벤치마크 평가 세트와 학습 데이터 간의 매우 높은 데이터 중복률을 보고합니다.
이 이전 작품들은 단순히 전체 평가 예제 텍스트와 학습 데이터 사이의 고차 n-그램(예: 13-그램)의 발생을 살펴보았고, 겹치는 모든 예가 "오염된" 것으로 간주합니다.
그러나, 많은 벤치마크는 오픈 웹에서 일부 컨텍스트를 가져온 다음, 그 컨텍스트에 대한 새로운 질문/답변을 생성하도록 요청함으로써 구성됩니다(또는 어노터에게 자동으로 생성된 질문에 답하도록 요청한다).
문맥은 이러한 작업에 대한 평가 시간에 제공되기 때문에, 모델이 이전에 언어 모델링 목표에 대한 문맥에 대해 학습했더라도, 이것은 평가 시간에 불공정한 이점을 주지 않습니다.</p><p>여기서, 단순히 고차 n-그램 중첩을 찾는 대신,
우리는 29개의 주요 영어 NLP 벤치마크 작업에 대한 통계를 계산하고 각각에서 많은 수의 예제를 수동으로 검사하여 오염된 예제의 비율이 높은 것을 결정했습니다.
이것은 각 데이터셋이 원래 어떻게 구성되었는지에 대한 지식과 함께 이루어졌습니다.</p><p>29개의 벤치마크 태스크를 대략 4개의 카테고리로 나눌 수 있습니다:</p><ul><li><p>Wholsesale contamination(전체 오염) – 데이터 세트 자체의 상당 부분이 오픈 웹에 나타나는 데이터 세트입니다. 우리는 이것들이 오염되었다고 생각합니다. 예: SQuADv2, Winograd.</p></li><li><p>Constructed from web - question+answers(또는 prefix+continuation)이 오픈 웹에서 자동으로 추출된 데이터 세트이므로,
많은 평가 예제가 우리의 학습 데이터에 있을 가능성이 높습니다. 우리는 이것들이 오염되었다고 생각합니다. 예: 웹 질문, ReCoRD, 람바다.</p></li><li><p>Context on web = 문맥이 웹에서 가져온 데이터 세트에 대한 질문에 답하지만, 질문은 그렇지 않습니다. 우리는 이것들이 오염되었다고 생각하지 않습니다. 예: BoolQ, Multirc, ANLI.</p></li><li><p>No significant overlap - 우리가 큰 학습 코퍼스에 있을 것으로 예상되는 일반적인 n-그램을 제외하고, 우리의 학습 데이터와 크게 겹치지 않은 데이터 세트입니다. 예: StoryCloze, OpenbookQA.</p></li></ul><p>우리는 29세트 중 10세트가 처음 두 범주에 속한다는 것을 발견했습니다.
이 세트들 중, 평가 예시의 일부만이 실제로 우리 학습에서 발견되었습니다.
이는 우리의 교육 코퍼스에는 약 2000억 단어의 샘플링/필터링된 영어 웹 데이터만 포함되어 있는 반면,
전체 웹에는 수조 개의 토큰이 포함되어 있기 때문입니다.
그래서, 우리는 문제의 8그램, 프롬프트 또는 대상의 최소 70%가 학습 데이터를 한 번 보았는지 여부에 따라 각 데이터 세트를 "오염된" 및 "깨끗한" 하위 집합으로 나눌 수 있었습니다.
우리는 표 18의 깨끗한 부분과 전체 세트에 대한 결과를 보고합니다.</p><p>우리는 동일한 수의 세트가 깨끗한 하위 집합에 대해 양수 대 음수 정확도 델타를 가지고 있다는 것을 알 수 있으며,
이는 데이터 오염이 보고된 결과의 의미 있는 인플레이션을 일으키지 않는다는 것을 의미합니다.
긍정적인 델타는 데이터 오염이 결과를 부풀리는 것에 <em>반대</em> 증거 역할을 하는 반면,
부정적인 델타는 데이터 오염에 의해 부풀려지는 결과에 대한 잠재적인 증거 역할을 한다는 점에 유의하십시오.
물론, 우리가 데이터의 다른 하위 집합을 평가하고 있기 때문에 (CB와 같은 테스트 세트 중 일부는 꽤 작다) 이것들은 apples-to-apples 비교가 아닙니다.
그러나, 540B 모델이 단순히 평가 세트의 많은 부분을 암기했다면, 540B 모델은 훨씬 더 큰 암기 능력을 가지고 있기 때문에 깨끗한 하위 집합이 8B 모델보다 더 큰 음의 델타를 가질 것으로 예상할 것입니다.
표 18에서 볼 수 있듯이, 8B와 540B는 모두 깨끗한 검증 세트와 전체 검증 세트 사이에 대략 비슷한 수의 음수 델타를 가지고 있습니다.</p><blockquote><p>표18</p></blockquote><p>우리는 기계 번역을 위해 비슷한 분석을 수행했습니다.
우리는 도매 오염을 발견하지 못했지만, 이러한 데이터 세트가 어떻게 구성되었는지 때문에 학습에서 발생하는 많은 대상 참조 문장이 있다는 것을 발견했습니다.
이 예시들은 일반적으로 우리 학습에서 소스와 목표를 모두 가지고 있지 않다는 점에 유의하십시오.
그래서, 우리는 목표 참조 문장이 우리의 학습과 높은 n-그램이 겹치는 평가 예제를 제거함으로써 이러한 세트의 깨끗한 하위 집합을 만들었습니다.
결과는 표 19에 제시되어 있습니다. 우리는 6개 세트 중 5개가 클린 세트와 풀 세트 사이에 BLEU 점수가 매우 유사하다는 것을 알 수 있습니다.
De-En의 결과는 클린 세트에서 대략 3.0 BLEU 더 나쁘지만, 이 델타는 규모에 걸쳐 일관성이 있습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="9-설명-살펴보기exploring-explanations">9 설명 살펴보기(Exploring Explanations)<a href="#9-설명-살펴보기exploring-explanations" class="hash-link" aria-label="Direct link to 9 설명 살펴보기(Exploring Explanations)" title="Direct link to 9 설명 살펴보기(Exploring Explanations)">​</a></h2><p>섹션 6.3에서, 우리는 생각의 사슬 자극(Wei et al., 2022b)이 어떻게 다단계 추론 작업에서 예측 정확도를 크게 향상시킬 수 있는지를 경험적으로 입증했다.
이 경우, 오류 분석은 부록 그림 28과 29에 나와 있지만, 모델에 의해 생성된 추론 체인은 평가 시간에 사용되지 않았다.
물론, 그러한 설명 세대는 정확성 개선을 넘어서는 이유로 유용할 수 있다.
첫째, 단순히 표면 수준의 통계적 추론을 하는 것이 아니라 모델이 "올바른 이유"에 대한 정답을 만들어내고 있는지 여부를 아는 것은 큰 과학적 관심사이다.
둘째, 설명은 주어진 예측에 대한 자신감을 높이거나 낮추기 위해 시스템의 최종 사용자에게 잠재적으로 보여질 수 있다.
셋째, 많은 상황에서(예: 농담을 설명하는 것), 설명 자체는 원하는 결과물이다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="10-대표적인-편견-분석">10 대표적인 편견 분석<a href="#10-대표적인-편견-분석" class="hash-link" aria-label="Direct link to 10 대표적인 편견 분석" title="Direct link to 10 대표적인 편견 분석">​</a></h2><p><em>Representational Bias Analysis</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="101-사회-집단의-분배-편향">10.1 사회 집단의 분배 편향<a href="#101-사회-집단의-분배-편향" class="hash-link" aria-label="Direct link to 10.1 사회 집단의 분배 편향" title="Direct link to 10.1 사회 집단의 분배 편향">​</a></h3><p><em>Distributional bias in social groups</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="102">10.2<a href="#102" class="hash-link" aria-label="Direct link to 10.2" title="Direct link to 10.2">​</a></h3><p><em>Toxicity in open-ended generation</em></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="11-윤리적인-고려사항">11 윤리적인 고려사항<a href="#11-윤리적인-고려사항" class="hash-link" aria-label="Direct link to 11 윤리적인 고려사항" title="Direct link to 11 윤리적인 고려사항">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="12-관련-작업">12 관련 작업<a href="#12-관련-작업" class="hash-link" aria-label="Direct link to 12 관련 작업" title="Direct link to 12 관련 작업">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="13-스케일링에-열린-질문">13 스케일링에 열린 질문<a href="#13-스케일링에-열린-질문" class="hash-link" aria-label="Direct link to 13 스케일링에 열린 질문" title="Direct link to 13 스케일링에 열린 질문">​</a></h2><p><em>Open Questions in Scaling</em></p><p>소개 섹션에서, 우리는 소수의 학습을 위한 대규모 LM의 상당한 품질 개선으로 이어진 네 가지 주요 축을 설명합니다.
이것들은 다음과 같이 요약할 수 있습니다:
(1) 모델 깊이와 너비,
(2) 학습된 토큰 수,
(3) 교육 코퍼스 품질,
(4) 증가된 컴퓨팅 없이 증가된 모델 용량(즉, 희소 모델)</p><p>논문의 나머지 부분에서, 우리는 주로 요인 (1)을 탐구하는 데 초점을 맞추고 있지만,
이 작업과 이전 작업에서 이것이 유일한 중요한 요소가 아니라는 것이 분명하다.
예를 들어, PaLM 62B는 총 학습 FLOP 수가 훨씬 낮음에도 불구하고 상당한 수의 작업에서 GPT-3 및 기타 대규모 LM을 능가한다.
비록 우리가 이것을 결정적으로 말하기 위해 필요한 ablation 연구를 수행하지는 않지만,
이것은 (3)이 주요 요인이라는 것을 암시할 것이다.
그러나, Du et al. (2021)은 동일한 학습 코퍼스에 대한 절제 연구를 수행했으며,
신중한 데이터 필터링을 통한 소수의 학습의 개선이 매우 중요하다는 것을 보여주었다.</p><p>마찬가지로, 우리는 그러한 연구를 대규모로 수행하는 데 드는 높은 교육 비용 때문에 (1) 대 (2)의 효과를 알아내기 위해 절제 연구를 수행하지 않았다.
즉, 중요한 오픈 스케일링 질문은 다음과 같습니다:
"7T 토큰을 위해 학습된 62B 매개 변수 모델은 780B 토큰을 위해 학습된 540B 매개 변수 모델과 어떻게 비교됩니까? 3.6T 토큰을 위한 120B 모델은 어떤가요? 1.8T 토큰의 경우 240B?"
그러한 모델이 PaLM 540B와 거의 같은 총 교육 비용을 가질 것이라는 것은 분명하다.
그러나, 다운스트림 작업 성과가 비교 가능하다면, 추론 비용이 그 크기에 비례하기 때문에 더 작은 모델이 확실히 바람직할 것이다.</p><p>아주 최근에, Hoffmann et al. (2022)은 이 정확한 질문을 탐구하기 위해 출판되었다.
그곳에서 저자들은 1.4T 데이터 토큰으로 학습된 70B 매개 변수 모델인 Chinchilla라는 새로운 언어 모델을 학습시킨다.
이것은 동일한 교육 코퍼스와 일반 교육 설정을 사용하여 300B 데이터 토큰으로 학습된 280B 매개 변수 모델인 Gopher와 비교됩니다.
두 모델 모두 비슷한 교육 비용을 가지고 있지만, 친칠라는 다양한 언어 작업에서 고퍼를 크게 능가한다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="14-결론">14 결론<a href="#14-결론" class="hash-link" aria-label="Direct link to 14 결론" title="Direct link to 14 결론">​</a></h2><p><em>Conclustion</em></p><p>이 작업에서, 우리는 고품질의 다양한 텍스트의 780B 토큰으로 학습된 540B parameter dense transformer 언어 모델인 PaLM을 학습함으로써 소수의 언어 이해와 생성의 경계를 계속 넓히고 있습니다.
(내용)</p><p>이 작업의 또 다른 중요한 교훈은 다단계 논리적 추론이 필요한 추론 작업에 대한 획기적인 성과이다.
우리의 몇 샷 결과는 다양한 산술 및 상식적인 추론 작업에서 미세 조정된 최첨단과 일치하거나 초과합니다.
추론 작업에 대한 결과는 모델 규모만으로 달성되는 것이 아니라, 모델이 예측하기 전에 자연어 논리적 추론 체인을 생성하도록 명시적으로 표시되는 스케일과 생각 체인 프롬프트의 조합에 의해 달성된다.
섹션 9에서 우리는 PaLM이 농담을 설명하고 시나리오에 대한 복잡한 질문에 답하기 위해 명시적인 논리적 추론 체인을 작성할 수 있었던 많은 흥미로운 예를 제시합니다.</p><p>이러한 결과로부터, 우리는 많은 결론을 도출할 수 있다.
첫째, 여기에 제시된 결과는 소수의 언어 이해에 대한 규모의 개선이 아직 정체되지 않았음을 시사한다.
PaLM 540B의 결과를 동일하게 학습된 62B 및 8B 모델 변형과 비교할 때, 개선은 일반적으로 로그 선형입니다.
이것만으로도 우리가 아직 스케일링 곡선의 정점에 도달하지 못했다는 것을 시사한다.
그러나, 많은 벤치마크에서, 개선은 실제로 불연속적이며, 이는 8B에서 62B로의 개선이 매우 겸손하지만, 540B로 확장할 때 엄청나게 뛰어든다는 것을 의미한다.
이것은 언어 모델의 특정 기능이 충분한 규모로 학습되었을 때만 나타나며, 미래 세대의 모델에서 나타날 수 있는 추가 기능이 있음을 시사한다.</p><p>둘째, 추론 작업에 대한 획기적인 성과(섹션 6.3)는 중요한 영향을 미친다.
예측을 설명하기 위해 자연어를 생성할 수 있는 모델이 왜 모델이 특정 예측을 했는지 더 잘 이해하기 위해 시스템의 최종 사용자에게 유익하다는 것은 분명하다.
그러나, 이러한 결과는 그것을 훨씬 뛰어넘으며, 모델이 명시적인 추론 체인을 생성하도록 유도하는 것이 예측 자체의 품질을 크게 향상시킬 수 있다는 것을 보여준다.
즉, 모델의 생성(단일한 이해가 아닌) 기능은 일반적으로 중요한 언어 생성을 필요로 하지 않는 범주적 예측 또는 회귀로 모델링된 작업에도 매우 유익할 수 있다.</p><p>마지막으로, 우리는 소수의 언어 모델링을 위한 규모의 경계를 넓히는 목표를 달성했지만,
미래 세대의 모델을 위한 이상적인 네트워크 아키텍처와 교육 계획에 대한 많은 열린 질문이 여전히 있습니다.
PaLM은 Google과 그 너머에서 ML 스케일링의 미래로 Pathways를 확립하기 위한 우리의 비전의 첫 번째 단계일 뿐입니다.
이를 위해, 우리는 잘 정립된 레시피에서 이 스케일링 기능을 시연하기로 결정했습니다:
자그레시브 언어 모델링을 수행하도록 학습된 조밀하고, 디코더 전용, 완전 주의 트랜스포머 모델.
그러나, 우리의 더 넓은 목표는 다양한 새로운 건축 선택과 교육 계획을 탐구하고, 가장 유망한 시스템과 Pathways의 확장 기능을 결합하는 것입니다.
우리는 PaLM이 여러 양식에 걸쳐 광범위한 일반화 기능을 갖춘 대규모 모듈화된 시스템을 개발한다는 궁극적인 목표에 대한 강력한 기반을 보여준다고 믿습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="google-blog"><a href="https://ai.googleblog.com/2022/04/pathways-language-model-palm-scaling-to.html" target="_blank" rel="noopener noreferrer">Google Blog</a><a href="#google-blog" class="hash-link" aria-label="Direct link to google-blog" title="Direct link to google-blog">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pathways-asynchronous-distributed-dataflow-for-ml"><a href="https://arxiv.org/pdf/2203.12533.pdf" target="_blank" rel="noopener noreferrer">Pathways: Asynchronous distributed dataflow for ML</a><a href="#pathways-asynchronous-distributed-dataflow-for-ml" class="hash-link" aria-label="Direct link to pathways-asynchronous-distributed-dataflow-for-ml" title="Direct link to pathways-asynchronous-distributed-dataflow-for-ml">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="chain-of-thought-prompting-elicits-reasoning-in-large-language-models"><a href="https://arxiv.org/pdf/2201.11903.pdf" target="_blank" rel="noopener noreferrer">Chain of thought prompting elicits reasoning in large language models</a><a href="#chain-of-thought-prompting-elicits-reasoning-in-large-language-models" class="hash-link" aria-label="Direct link to chain-of-thought-prompting-elicits-reasoning-in-large-language-models" title="Direct link to chain-of-thought-prompting-elicits-reasoning-in-large-language-models">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="glu-variants-improve-transformer"><a href="https://arxiv.org/pdf/2002.05202.pdf" target="_blank" rel="noopener noreferrer">GLU variants improve transformer</a><a href="#glu-variants-improve-transformer" class="hash-link" aria-label="Direct link to glu-variants-improve-transformer" title="Direct link to glu-variants-improve-transformer">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-6-billion-parameter-autoregressive-language-model"><a href="https://github.com/kingoflolz/mesh-transformer-jax" target="_blank" rel="noopener noreferrer">A 6 Billion Parameter Autoregressive Language Model</a><a href="#a-6-billion-parameter-autoregressive-language-model" class="hash-link" aria-label="Direct link to a-6-billion-parameter-autoregressive-language-model" title="Direct link to a-6-billion-parameter-autoregressive-language-model">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="roformer-enhanced-transformer-with-rotary-position-embedding"><a href="https://arxiv.org/pdf/2104.09864.pdf" target="_blank" rel="noopener noreferrer">Roformer: Enhanced transformer with rotary position embedding</a><a href="#roformer-enhanced-transformer-with-rotary-position-embedding" class="hash-link" aria-label="Direct link to roformer-enhanced-transformer-with-rotary-position-embedding" title="Direct link to roformer-enhanced-transformer-with-rotary-position-embedding">​</a></h3><p>A new position embedding method that incorporates explicit relative position dependency in
self-attention to enhance the performance of transformer architectures.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-simple-and-language-independent-subword-tokenizer-and-detokenizer-for-neural-text-processing"><a href="https://aclanthology.org/D18-2012.pdf" target="_blank" rel="noopener noreferrer">A simple and language independent subword tokenizer and detokenizer for neural text processing</a><a href="#a-simple-and-language-independent-subword-tokenizer-and-detokenizer-for-neural-text-processing" class="hash-link" aria-label="Direct link to a-simple-and-language-independent-subword-tokenizer-and-detokenizer-for-neural-text-processing" title="Direct link to a-simple-and-language-independent-subword-tokenizer-and-detokenizer-for-neural-text-processing">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="model-cards-for-model-reporting"><a href="https://dl.acm.org/doi/10.1145/3287560.3287596" target="_blank" rel="noopener noreferrer">Model cards for model reporting</a><a href="#model-cards-for-model-reporting" class="hash-link" aria-label="Direct link to model-cards-for-model-reporting" title="Direct link to model-cards-for-model-reporting">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lamda-language-models-for-dialog-applications"><a href="https://arxiv.org/pdf/2201.08239.pdf" target="_blank" rel="noopener noreferrer">Lamda: Language models for dialog applications</a><a href="#lamda-language-models-for-dialog-applications" class="hash-link" aria-label="Direct link to lamda-language-models-for-dialog-applications" title="Direct link to lamda-language-models-for-dialog-applications">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="glam-efficient-scaling-of-language-models-with-mixture-of-experts"><a href="https://arxiv.org/pdf/2112.06905.pdf" target="_blank" rel="noopener noreferrer">GLaM: Efficient scaling of language models with mixture-of-experts</a><a href="#glam-efficient-scaling-of-language-models-with-mixture-of-experts" class="hash-link" aria-label="Direct link to glam-efficient-scaling-of-language-models-with-mixture-of-experts" title="Direct link to glam-efficient-scaling-of-language-models-with-mixture-of-experts">​</a></h3><p>4</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="xla-optimizing-compiler-for-tensorflow"><a href="https://www.tensorflow.org/xla?hl=ko" target="_blank" rel="noopener noreferrer">XLA: Optimizing compiler for TensorFlow</a><a href="#xla-optimizing-compiler-for-tensorflow" class="hash-link" aria-label="Direct link to xla-optimizing-compiler-for-tensorflow" title="Direct link to xla-optimizing-compiler-for-tensorflow">​</a></h3><p>5</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adafactor-adaptive-learning-rates-with-sublinear-memory-cost"><a href="https://arxiv.org/pdf/1804.04235.pdf" target="_blank" rel="noopener noreferrer">Adafactor: Adaptive learning rates with sublinear memory cost</a><a href="#adafactor-adaptive-learning-rates-with-sublinear-memory-cost" class="hash-link" aria-label="Direct link to adafactor-adaptive-learning-rates-with-sublinear-memory-cost" title="Direct link to adafactor-adaptive-learning-rates-with-sublinear-memory-cost">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="language-models-are-few-shot-learners"><a href="https://proceedings.neurips.cc/paper/2020/file/1457c0d6bfcb4967418bfb8ac142f64a-Paper.pdf" target="_blank" rel="noopener noreferrer">Language models are few-shot learners</a><a href="#language-models-are-few-shot-learners" class="hash-link" aria-label="Direct link to language-models-are-few-shot-learners" title="Direct link to language-models-are-few-shot-learners">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="understanding-the-exploding-gradient-problem"><a href="https://arxiv.org/pdf/1211.5063.pdf" target="_blank" rel="noopener noreferrer">Understanding the exploding gradient problem</a><a href="#understanding-the-exploding-gradient-problem" class="hash-link" aria-label="Direct link to understanding-the-exploding-gradient-problem" title="Direct link to understanding-the-exploding-gradient-problem">​</a></h3><p>hpo</p><p>6-2</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="beyond-the-imitation-game-measuring-and-extrapolating-the-capabilities-of-language-models"><a href="https://github.com/google/BIG-bench/" target="_blank" rel="noopener noreferrer">Beyond the imitation game: Measuring and extrapolating the capabilities of language models</a><a href="#beyond-the-imitation-game-measuring-and-extrapolating-the-capabilities-of-language-models" class="hash-link" aria-label="Direct link to beyond-the-imitation-game-measuring-and-extrapolating-the-capabilities-of-language-models" title="Direct link to beyond-the-imitation-game-measuring-and-extrapolating-the-capabilities-of-language-models">​</a></h3>]]></content:encoded>
            <category>ml</category>
            <category>paper</category>
        </item>
        <item>
            <title><![CDATA[대규모 병렬프로세서 프로그래밍(소개)]]></title>
            <link>https://jwher.github.io/posts/cudabook-1</link>
            <guid>https://jwher.github.io/posts/cudabook-1</guid>
            <pubDate>Thu, 09 Feb 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Programming Massively Parallel Processors - Chapter 1]]></description>
            <content:encoded><![CDATA[<p><a href="/posts/cudabook-1"><img loading="lazy" alt="a100" src="/assets/images/nvidia_a100-341d2137101485bc904e9aa47c1d6267.png" width="992" height="682" class="img_ev3q"></a><br>
<em>이 글은 David B. Kirk의 Programming Massively Parallel Processors를 읽고 작성했습니다.</em><br>
<em>과거의 내용이여서 맞지 않는 부분은 임의로 수정하였습니다</em>  </p><h1>1. 소개</h1><p>마이크로프로세서는 하나의 central processing unit(CPU), 인텔이나 AMD의 것에 기반하고
빠른 성능 향상과 값 감소를 30년간 이끌었습니다.
이 마이크로프로세서는 GFLOPS 또는 기가(10^12) 부동소수점 연산을 데스크탑에선 초당 수행하고,
TFLOPS 또는 테라(10^15) 부동소수점 연산을 클러스터 서버에서 초당 수행합니다.
이 엄격한 성능 향상은 애플리케이션 소프트웨어가 더 많은 기능을 하고,
더 나은 사용자 경험을 제공하며, 더 유용한 결과를 생성해 내고 있습니다.
사용자는 이런 개선에 익숙한 상황속에서 더 나은 개선을 요구하고, 컴퓨터 산업계에 긍정적인 사이클을 만듭니다.</p><p>하지만 이 동기는, 2003년부터 에너지 소모와 방열 문제로 클럭 주기에 제한을 걸고
단일 cpu에서 각 클락에 수행할 수 있는 생산적인 수준을 낮추면서 느려졌습니다.
따라서 모든 마이크로프로세서 벤더가 프로세서 코어라 불리는 멀티프로세싱 유닛을 가진 모델로 전환하였고,
처리 능력을 높이기 위해 각 칩에 사용되었습니다.
이 전환은 소프트웨어 개발자 커뮤니티에 엄청난 영향을 미쳤습니다.
<a href="#software-and-the-concurrency-revolution">[Sutter2005]</a></p><p><em>No free cake</em></p><p>전통적으로, 대다수의 소프트웨어 응용 프로그램은 폰 노이만의 1945년 보고서에 설명한 것처럼 순차적 프로그램으로 작성되었습니다.
이러한 프로그램의 실행은 사람이 순차적으로 코드 단계를 나아가는 것으로 이해할 수 있습니다.
역사적으로, 대부분의 소프트웨어 개발자는 순차적 애플리케이션의 속도를 높이기 위해
새로운 하드웨어 발전에 의존해 왔습니다.
새로운 세대의 프로세서가 도입될 때마다 같은 소프트웨어는 더 빨리 실행됬습니다.
컴퓨터 사용자 또한 새로운 세대의 마이크로프로세서마다 더 빠르게 실행되는 기대에 익숙해졌습니다.
그러한 기대는 더이상 유효하지 않습니다.
순차적 프로그램은 하나의 프로세서 코어에서만 작동하고, 오늘날 사용중인 것보다 더 빨라지지 않습니다.
성능 개선이 없다면 애플리케이션 개발자들은 새로운 마이크로프로세서가 도입될 때마다,
더이상 새 기능과 능력을 도입할 수 없으며, 컴퓨터 산업의 성장 기회를 줄일 것입니다.</p><p>대신에, 새 세대의 마이크로프로세서마다 성능 향상을 꾸준히 누릴수 있는 애플리케이션 소프트웨어는,
다중 스레드가 작업을 더 빨리 끝내도록 협업하는 병렬 프로그램이 될 것입니다.
이 새롭고 극적으로 확대된 병렬 프로그램 개발의 인센티브는 동시성 혁명<a href="#software-and-the-concurrency-revolution">[Sutter2005]</a>이라고 불립니다.
병렬 프로그래밍의 실체는 결코 새로운 것이 아닙니다.
고성능 프로그래밍 커뮤니티는 수년간 병렬프로그램을 개발해 왔습니다.
이 프로그램은 대규모의 비싼 컴퓨터에서 동작합니다.
단지 몇개의 엘리트 애플리케이션만 이 비싼 컴퓨터를 사용할 수 있게 정의되었고,
따라서 적은 수의 애플리케이션 개발자만 병렬 프로그래밍을 할 수 있게 제한되었습니다.
이제는 모든 새 마이크로프로세서가 병렬 컴퓨터임으로, 병렬적으로 개발되어야 하는 애플리케이션이 급격히 늘었습니다.
이제는 소프트웨어 개발자들이 병렬 프로그램을 어떻게 해야할지 강한 필요가 생겼습니다.
이 책은 그 내용에 집중합니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="11-이기종-병렬-컴퓨팅">1.1 이기종 병렬 컴퓨팅<a href="#11-이기종-병렬-컴퓨팅" class="hash-link" aria-label="Direct link to 1.1 이기종 병렬 컴퓨팅" title="Direct link to 1.1 이기종 병렬 컴퓨팅">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="12-현대-gpu의-아키텍처">1.2 현대 GPU의 아키텍처<a href="#12-현대-gpu의-아키텍처" class="hash-link" aria-label="Direct link to 1.2 현대 GPU의 아키텍처" title="Direct link to 1.2 현대 GPU의 아키텍처">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="13-왜-더-빠르거나-병렬화를-해야하는가">1.3 왜 더 빠르거나 병렬화를 해야하는가?<a href="#13-왜-더-빠르거나-병렬화를-해야하는가" class="hash-link" aria-label="Direct link to 1.3 왜 더 빠르거나 병렬화를 해야하는가?" title="Direct link to 1.3 왜 더 빠르거나 병렬화를 해야하는가?">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="14-실제-애플리케이션에서-속도-높이기">1.4 실제 애플리케이션에서 속도 높이기<a href="#14-실제-애플리케이션에서-속도-높이기" class="hash-link" aria-label="Direct link to 1.4 실제 애플리케이션에서 속도 높이기" title="Direct link to 1.4 실제 애플리케이션에서 속도 높이기">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="15-병렬-프로그래밍-언어와-모델">1.5 병렬 프로그래밍 언어와 모델<a href="#15-병렬-프로그래밍-언어와-모델" class="hash-link" aria-label="Direct link to 1.5 병렬 프로그래밍 언어와 모델" title="Direct link to 1.5 병렬 프로그래밍 언어와 모델">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="software-and-the-concurrency-revolution"><a href="https://dl.acm.org/doi/pdf/10.1145/1095408.1095421" target="_blank" rel="noopener noreferrer">Software and the Concurrency Revolution</a><a href="#software-and-the-concurrency-revolution" class="hash-link" aria-label="Direct link to software-and-the-concurrency-revolution" title="Direct link to software-and-the-concurrency-revolution">​</a></h3>]]></content:encoded>
            <category>tech</category>
            <category>parallel computing</category>
        </item>
        <item>
            <title><![CDATA[Attention 다시보기]]></title>
            <link>https://jwher.github.io/posts/attention-is-all-you-need</link>
            <guid>https://jwher.github.io/posts/attention-is-all-you-need</guid>
            <pubDate>Wed, 04 Jan 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Attention is all you need]]></description>
            <content:encoded><![CDATA[<p><a href="/posts/attention-is-all-you-need"><img loading="lazy" alt="attention" src="/assets/images/scaled-dot-product-attention-988673f659a216536303bc0a43748d1f.png" width="718" height="942" class="img_ev3q"></a><br>
<em>이 글은 Attention is all you need를 읽고 번역한 내용입니다</em>  </p><p>2017년에 작성되어 이제는 옛날 논문이자 NLP의 기본 논문이 된 Attention Is All You Need를 다시 살펴보려 합니다.
<a href="https://arxiv.org/pdf/1706.03762" target="_blank" rel="noopener noreferrer">원문</a></p><p>같이 보기  </p><ul><li>tensor2tensor</li><li>BERT</li></ul><p><em>최대한 번역된 단어를 통일하였으나 원문을 보는것을 권장합니다.</em><br>
<em>개인적으로 첨가한 단락은 기울게 표시했습니다.</em>  </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="abstract">Abstract<a href="#abstract" class="hash-link" aria-label="Direct link to Abstract" title="Direct link to Abstract">​</a></h2><p>지배적인 sequence transduction 모델은 인코더와 디코더를 포함한 복잡한 recurrent 또는 convolutional 신경망을 기반으로 합니다.
가장 성능이 좋은 모델 또한 attention 메커니즘을 통해 인코더와 디코더를 연결합니다.</p><p>여기서 새로운 간단한 네트워크 아키텍처를 제안합니다, <strong>Transformer</strong>로 attention 메커니즘에만 기반해, recurrence와 convolutions를 완전히 분배합니다.
실험은 두 기계번역 작업이 얼마나 우수한 품질로 더 많은 병렬화와 확연히 적은 학습 시간이 필요한지 보여줍니다.</p><p>우리 모델은 WMT 2014 영어-독일어 번역 작업에서 28.4 BLEU를 달성했습니다, 앙상블을 포함한 기존의 존재하는 최고 결과를 2 BLEU만큼 향상했습니다.
WMT 2014 영어-프랑스어 번역 작업에선 새 단일 모델 state-of-the-art BLEU 점수를 41.8로, 학계에서 최고의 모델을 학습시키는 비용의 아주 작은 부분인, 3.5일간 8대의 GPU로 학습시켜 달성했습니다.  </p><p>Transformer는 크고 작은 학습 데이터에서 성공적인 영여권 파싱을 적용하며 다른 작업을 일반화하기 쉬움을 보입니다.</p><p><em>transduction &lt;-&gt; induction</em>
<em>BLEU (bilingual evaluation understudy)</em></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-introduction">1. Introduction<a href="#1-introduction" class="hash-link" aria-label="Direct link to 1. Introduction" title="Direct link to 1. Introduction">​</a></h2><p>Recurrent 신경망, long short-term memory <a href="#13-long-short-term-memory">[13]</a> 와 gated recurrent
신경망은 특히, sequence 모델링과 언어 모델링, 기계 번역같은 transduction 문제에 sota 접근 방식으로 확고히 자리잡았습니다.
많은 공헌이 recurrent 언어 모델과 encoder-decoder 구조의 경계를 넓히기 위해 있어왔습니다.</p><p>Recurrent 모델은 일반적으로 입출력의 글자 위치를 기반으로 계산합니다.
계산 시간을 기준으로 위치를 정렬하면, hidden state <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">h_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>가 이전 hidden state인 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">h_{t-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9028em;vertical-align:-0.2083em"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em"><span></span></span></span></span></span></span></span></span></span></span>과 위치 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em"></span><span class="mord mathnormal">t</span></span></span></span></span>에 대한 입력으로 생성됩니다.
자연스럽게 상속되는 sequential한 특징은 학습에서 병렬화를 배제하고, 메모리 제한이 예제의 배치를 제한하기 때문에, 긴 sequence에서 더 심각한 문제를 만듭니다.
최근 작업은 분해 트릭과 조건부 계산을 통해 계산 효율성을 크게 향상시켰으며, 후자의 경우 모델 성능 또한 크게 향상시켰습니다.
그러나 기본적인 sequential 계산 제한은 남아있습니다.</p><p>Attention 메커니즘은 많은 작업에서 매력적인 sequence 모델링과 transduction 모델의 필수적인 부분이 되었으며,
입력 또는 출력 시퀀스 거리에 상관없이 종속성을 모델링할 수 있습니다. <a href="#19-structured-attention-networks">[19]</a>
그러나 몇몇 경우 <a href="#a-decomposable-attention-model">[27]</a> 를 제외하고 attention 메커니즘은 recurrent 네트워크와 함께 사용됩니다.</p><p>이번 작업물에서 Transformer, recurrence를 피하고 입력과 출력 사이에서 전역 종속성을 끌어내기 위해 attention 메커니즘에 전부 의존하는 모델 구조, 를 제안합니다.
Transformer는 확연히 많은 병렬성과 8대의 P100 GPU를 12시간이라는 적은 시간동안 학습시켜 새로운 번역 품질의 sota를 달성할 수 있습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-background">2. Background<a href="#2-background" class="hash-link" aria-label="Direct link to 2. Background" title="Direct link to 2. Background">​</a></h2><p>Sequential 계산을 줄이기 위한 목표는 Extended Neural GPU, Byte Net, ConvS2S <a href="#9-convolutional-sequence-to-sequence-learning">[9]</a> 의 기초를 형성했고,
전부 convolutional neural networks를 기본 빌딩 블록으로 사용하고,
모든 입출력 위치에 hidden representation을 병렬로 계산합니다.</p><p>이 모델에서, 두개의 임의 입출력 위치 신호를 연관시키는데 필요한 작업 수는,
ConvS2S에서는 선형적으로, ByteNet에선 로그로 증가합니다.
이는 먼 위치 사이에 의존성을 배우는걸 더 어렵게 만듭니다.
Transformer는 이 연산을 상수로 줄이지만,
평균 attention-weighted 위치로 안한 효과적인 resolution을 줄여도,
<a href="#32-attention">3.2</a> 섹션에서 설명한 대로 Multi-Head Attention이 상쇄하는 효과를 지닙니다.</p><p>Self-attention, 때로 intra-attention으로 불리는것은 sequence의 표현을 계산하기 위해
단일 sequence의 다른 위치를 연관시키는 attention 메커니즘입니다.
Self-attention은 읽기 이해, 추상적인 요약, 텍스트 함의 및 문장 표현에 독립적인 학습을 포함한 다양한 작업에 효과적으로 사용되었습니다.</p><p>End-to-end 메모리 네트워크는 sequence-aligned recurrence 대신 recurrent attention 메커니즘에 기반으로 해
간단한 언어 question answering과 언어 모델링 작업을 잘 수행하는 것으로 나타났습니다.</p><p>우리가 아는한, Transformer는 입출력 표현을 계산하기 위해 sequence-aligned RNN이나 convolution이 아닌
self-attention에 완전히 의존하는 최초의 transduction 모델이란 것입니다.
다음 단락에서 Transformer를 설명하고, self-attention의 동기와 Neural GPUs learn algorithms, ByteNet,
ConvS2S <a href="#9-convolutional-sequence-to-sequence-learning">[9]</a> 같은 다른 모델에 비한 장점을 논의합니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-model-architecture">3. Model Architecture<a href="#3-model-architecture" class="hash-link" aria-label="Direct link to 3. Model Architecture" title="Direct link to 3. Model Architecture">​</a></h2><p>가장 경쟁력있는 신경 sequence transduction 모델은 encoder-decoder구조를 가지고 있습니다.
여기 인코더는 입력 심볼 표현의 sequence (<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>x</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">x_1, ..., x_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>)을 연속적인 표현 sequence <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">z</mi><mo>=</mo><mo stretchy="false">(</mo><msub><mi>z</mi><mn>1</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>z</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathbb{z} = (z_1,...,z_n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>에 매핑합니다.
주어진 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.04398em">z</span></span></span></span></span>에 대해 디코더는 출력 sequence (<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mn>1</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>y</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">y_1, ..., y_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>)를 한번에 한 요소씩 생성합니다.
각 단계에서 모델은 다음을 생성할 때 이전에 생성된 기호를 추가 입력으로 사용해, auto-regressive <a href="#10-generating-sequences-with-recurrent-neural-networks">[10]</a> 합니다.</p><p>Transformer는 stacked self-attention과 point-wise를 사용해, Figure1의 왼쪽과 오른쪽에서 각각 볼 수 있는, 인코더와 디코더를 위한 fully connected layer 전체 구조를 따릅니다.</p><p><img loading="lazy" alt="Figure1" src="/assets/images/figure1-f9a62e2fa13288922da5ace8e2f361ff.png" width="816" height="1196" class="img_ev3q"><br>
<em>Figure1 : The Transformer - model architecture.</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-encoder-and-decoder-stacks">3.1 Encoder and Decoder Stacks<a href="#31-encoder-and-decoder-stacks" class="hash-link" aria-label="Direct link to 3.1 Encoder and Decoder Stacks" title="Direct link to 3.1 Encoder and Decoder Stacks">​</a></h3><p>Encoder:<br>
<!-- -->인코더는 N=6의 동일한 레이어 스택으로 구성됩니다.
각 레이어는 두 하위 레이어를 가집니다.
첫번째는 multi-head self-attention 메커니즘이고,
두번째는 간단한 position-wise fully connected 네트워크입니다.
두 하위 레이어에 layer normalization <a href="#1-layer-normalization">[1]</a> 을 거친,
residual connection <a href="#11-deep-residual-learning-for-image-recognition">[11]</a> 을 연결했습니다.
즉, 각 하위 레이어의 출력은 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mi>a</mi><mi>y</mi><mi>e</mi><mi>r</mi><mi>N</mi><mi>o</mi><mi>r</mi><mi>m</mi><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>S</mi><mi>u</mi><mi>b</mi><mi>l</mi><mi>a</mi><mi>y</mi><mi>e</mi><mi>r</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">LayerNorm(x+Sublayer(x))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">L</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em">yer</span><span class="mord mathnormal" style="margin-right:0.10903em">N</span><span class="mord mathnormal" style="margin-right:0.02778em">or</span><span class="mord mathnormal">m</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mord mathnormal">u</span><span class="mord mathnormal">b</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em">yer</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">))</span></span></span></span></span>이고, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>u</mi><mi>b</mi><mi>l</mi><mi>a</mi><mi>y</mi><mi>e</mi><mi>r</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Sublayer(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mord mathnormal">u</span><span class="mord mathnormal">b</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em">yer</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span>는 하위 계층 자체에 의해 구현된 함수입니다.
이런 residual connection을 용이하게 하기 위해, embedding 레이어를 포함한 모델의 모든 하위 레이어는,
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mo>=</mo><mn>512</mn></mrow><annotation encoding="application/x-tex">d_{model}=512</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">512</span></span></span></span></span> 차원 출력을 만듭니다.</p><p>Decoder:<br>
<!-- -->디코더 또한 N=6의 동일한 레이어 스택으로 구성됩니다.
각 인코더 레이어에 있는 두 하위 레이어에 더해서, 디코더는 인코더 스택 출력에 multi-head attention을 하는 세번째 레이어 하위 레이어를 추가합니다.
인코더와 마찬가지로, 각 하위 계층에 layer normalization을 거친,
residual connection을 도입했습니다.
또한 디코더 스택이 subsequent 위치를 attending하는 걸 막기 위해 self-attention 하위 레이어를 수정했습니다.
이 마스킹은, 출력 임베딩이 한 위치로 offset 된다는 사실과 결합해, 위치 i에 대한 예측이 i 보다 작은 알려진 출력 위치에만 의존하도록 보장합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-attention">3.2 Attention<a href="#32-attention" class="hash-link" aria-label="Direct link to 3.2 Attention" title="Direct link to 3.2 Attention">​</a></h3><p>Attention 함수는 query와 key-value 짝을 출력에 매핑하는 것으로 설명할 수 있으며,
query, key, value와 출력은 모두 벡터입니다.
출력은 value 가중치의 합으로 계산되고,
각 value에 할당된 가중치는 해당 query와 그에 대응하는 key의 compatibility function에 의해 계산됩니다.</p><p><img loading="lazy" alt="Figure2" src="/assets/images/figure2-491479fbcc15d6905750d04e19eb623e.png" width="1214" height="660" class="img_ev3q"><br>
<em>Figure2 : (left) Scaled Dot-Product Attention. (right) Multi-Head Attention consists of several attention layers running in parallel.</em></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="321-scaled-dot-product-attention">3.2.1 Scaled Dot-Product Attention<a href="#321-scaled-dot-product-attention" class="hash-link" aria-label="Direct link to 3.2.1 Scaled Dot-Product Attention" title="Direct link to 3.2.1 Scaled Dot-Product Attention">​</a></h4><p>이 attention을 "Scaled Dot-Product Attention"으로 부릅니다. (Figure 2)
입력은 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> 차원의 query와 key, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>v</mi></msub></mrow><annotation encoding="application/x-tex">d_v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> 차원의 value로 이루어 집니다.
모든 query와 key의 dot-product(<em>내적</em>) 을 계산하고, 각각 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><msub><mi>d</mi><mi>k</mi></msub></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{d_k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.1828em"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8572em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord" style="padding-left:0.833em"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span><span style="top:-2.8172em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1828em"><span></span></span></span></span></span></span></span></span></span>로 나눈 후, softmax 함수를 거쳐 value 가중치를 얻습니다.</p><p>실제로는, matrix Q에 함께 모인, query 집합을 한번에 attention function을 계산합니다.
key와 value도 마찬가지로 함께 모인 matrix K 와 V로 있습니다.
출력 matrix는 다음과 같이 계산합니다.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.16em" columnspacing="1em"><mtr><mtd class="mtr-glue"></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>A</mi><mi>t</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy="false">(</mo><mi>Q</mi><mo separator="true">,</mo><mi>K</mi><mo separator="true">,</mo><mi>V</mi><mo stretchy="false">)</mo><mo>=</mo><mi>s</mi><mi>o</mi><mi>f</mi><mi>t</mi><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><mfrac><mrow><mi>Q</mi><msup><mi>K</mi><mi>T</mi></msup></mrow><msqrt><msub><mi>d</mi><mi>k</mi></msub></msqrt></mfrac><mo stretchy="false">)</mo><mi>V</mi></mrow></mstyle></mtd><mtd class="mtr-glue"></mtd><mtd class="mml-eqn-num"></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{equation} Attention(Q,K,V) = softmax({QK^T \over \sqrt{d_k}})V \end{equation}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4483em;vertical-align:-0.9742em"></span><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4742em"><span style="top:-3.4742em"><span class="pstrut" style="height:3.5183em"></span><span class="mord"><span class="mord mathnormal">A</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">Q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.07153em">K</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.22222em">V</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord mathnormal">so</span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5183em"><span style="top:-2.2528em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8572em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord" style="padding-left:0.833em"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span><span style="top:-2.8172em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1828em"><span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">T</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.93em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.22222em">V</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9742em"><span></span></span></span></span></span></span></span><span class="tag"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4742em"><span style="top:-3.4742em"><span class="pstrut" style="height:3.5183em"></span><span class="eqn-num"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9742em"><span></span></span></span></span></span></span></span></span></div><p>가장 많이 사용되는 attention function은 additive attention <a href="#2-neural-machine-translation-by-jointly-learning-to-align-and-translate">[2]</a> 과,
Dot-product(multiplicative) attention입니다.
Dot-product attention은 scaling 요소인 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><msqrt><msub><mi>d</mi><mi>k</mi></msub></msqrt></mfrac></mrow><annotation encoding="application/x-tex">1 \over \sqrt{d_k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3831em;vertical-align:-0.538em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em"><span style="top:-2.5864em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8622em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mtight" style="padding-left:0.833em"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.3488em;margin-left:0em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em"><span></span></span></span></span></span></span></span></span><span style="top:-2.8222em"><span class="pstrut" style="height:3em"></span><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1778em"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.538em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>를 제외하고 여기서 다루는(<em>Scaled Dot-Product Attention</em>) 알고리즘과 동일합니다.
Additive attention은 하나의 hidden layer를 사용한 feed-forward network 함수로 호환성 함수를 계산합니다.
이 둘은 이론적으로 복잡성이 같지만, dot-product attention은 고도로 최적화된 행렬 곱셈 코드가 적용되기 때문에, 더 빠르고 공간 효율적입니다.</p><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>가 작을때는 두 메커니즘이 유사하게 수행되지만,
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>가 클때 스케일링 하지 않으면 additive attention은 dot-product attention를 능가합니다. <a href="#3-massive-exploration-of-neural-machine-translation-architectures">[3]</a>
여기에선 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>가 크다면 dot-product는 큰 단위로 커져, softmax 함수를 매우 작은 영역으로 밀어 넣는다고 추측합니다.
이에 대응하기 위해 dot-product를 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><msqrt><msub><mi>d</mi><mi>k</mi></msub></msqrt></mfrac></mrow><annotation encoding="application/x-tex">1 \over \sqrt{d_k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3831em;vertical-align:-0.538em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em"><span style="top:-2.5864em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8622em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mtight" style="padding-left:0.833em"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.3488em;margin-left:0em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em"><span></span></span></span></span></span></span></span></span><span style="top:-2.8222em"><span class="pstrut" style="height:3em"></span><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1778em"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.538em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>로 scale 합니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="322-multi-head-attention">3.2.2 Multi-Head Attention<a href="#322-multi-head-attention" class="hash-link" aria-label="Direct link to 3.2.2 Multi-Head Attention" title="Direct link to 3.2.2 Multi-Head Attention">​</a></h4><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">d_{model}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> 차원 크기의 key, value와 query를 사용한 하나의 attention 함수를 사용하는 것 보다,
query, key, value를 다르게 h번, 각각 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>v</mi></msub></mrow><annotation encoding="application/x-tex">d_v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> 차원으로 linear projection으로 학습된 것을
선형으로 사영하는게 유익함을 알았습니다.
각각 사영된 버전의 query, key, value로 attention 함수를 완전히 병렬적으로 수행할 수 있으며, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>v</mi></msub></mrow><annotation encoding="application/x-tex">d_v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> 차원 출력 value를 넘겨줍니다.
이는 다시 한번 연결되고 사영되어, Figure2에서 처럼 최종 value를 결과로 냅니다.</p><p>Multi-head attention은 모델이 다른 위치의 다른 representation subspace에서 공동으로 정보를 얻을 수 있게 합니다.
하나의 attention head만 있으면 평균이 이를 억제합니다.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>M</mi><mi>u</mi><mi>l</mi><mi>t</mi><mi>i</mi><mi>H</mi><mi>e</mi><mi>a</mi><mi>d</mi><mo stretchy="false">(</mo><mi>Q</mi><mo separator="true">,</mo><mi>K</mi><mo separator="true">,</mo><mi>V</mi><mo stretchy="false">)</mo><mo>=</mo><mi>C</mi><mi>o</mi><mi>n</mi><mi>c</mi><mi>a</mi><mi>t</mi><mo stretchy="false">(</mo><mi>h</mi><mi>e</mi><mi>a</mi><msub><mi>d</mi><mn>1</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>h</mi><mi>e</mi><mi>a</mi><msub><mi>d</mi><mi>h</mi></msub><mo stretchy="false">)</mo><msup><mi>W</mi><mi>O</mi></msup><mspace linebreak="newline"></mspace><mi>w</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mtext>&nbsp;</mtext><mi>h</mi><mi>e</mi><mi>a</mi><msub><mi>d</mi><mi>i</mi></msub><mo>=</mo><mi>A</mi><mi>t</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy="false">(</mo><mi>Q</mi><msubsup><mi>W</mi><mi>i</mi><mi>Q</mi></msubsup><mo separator="true">,</mo><mi>K</mi><msubsup><mi>W</mi><mi>i</mi><mi>K</mi></msubsup><mo separator="true">,</mo><mi>V</mi><msubsup><mi>W</mi><mi>i</mi><mi>V</mi></msubsup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">MultiHead(Q, K, V ) = Concat(head_1, ..., head_h)W^O \\ where \ head_i = Attention(QW_i^Q , KW_i^K , VW_i^V )</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10903em">M</span><span class="mord mathnormal">u</span><span class="mord mathnormal">lt</span><span class="mord mathnormal">i</span><span class="mord mathnormal">He</span><span class="mord mathnormal">a</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord mathnormal">Q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.07153em">K</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.22222em">V</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.1413em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.07153em">C</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal">c</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">a</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">a</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">h</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em">O</span></span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em"></span><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="mord mathnormal">h</span><span class="mord mathnormal">ere</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">a</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.2361em;vertical-align:-0.2769em"></span><span class="mord mathnormal">A</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">Q</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9592em"><span style="top:-2.4231em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.1809em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2769em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.07153em">K</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913em"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em">K</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.22222em">V</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913em"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em">V</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div><p>사영이 매개변수 행렬이라고 하면 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>i</mi><mi>Q</mi></msubsup><mo>∈</mo><msup><mi mathvariant="double-struck">R</mi><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mo>×</mo><msub><mi>d</mi><mi>k</mi></msub></mrow></msup></mrow><annotation encoding="application/x-tex">W_i^Q \in \mathbb{R}^{d_{model} \times d_k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2361em;vertical-align:-0.2769em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9592em"><span style="top:-2.4231em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.1809em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2769em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8491em"></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.3488em;margin-left:0em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em"><span></span></span></span></span></span></span><span class="mbin mtight">×</span><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.3488em;margin-left:0em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>i</mi><mi>K</mi></msubsup><mo>∈</mo><msup><mi mathvariant="double-struck">R</mi><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mo>×</mo><msub><mi>d</mi><mi>k</mi></msub></mrow></msup></mrow><annotation encoding="application/x-tex">W_i^K \in \mathbb{R}^{d_{model} \times d_k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1em;vertical-align:-0.2587em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em"><span style="top:-2.4413em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em">K</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2587em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8491em"></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.3488em;margin-left:0em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em"><span></span></span></span></span></span></span><span class="mbin mtight">×</span><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.3488em;margin-left:0em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>,
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>i</mi><mi>V</mi></msubsup><mo>∈</mo><msup><mi mathvariant="double-struck">R</mi><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mo>×</mo><msub><mi>d</mi><mi>v</mi></msub></mrow></msup></mrow><annotation encoding="application/x-tex">W_i^V \in \mathbb{R}^{d_{model} \times d_v}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1em;vertical-align:-0.2587em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em"><span style="top:-2.4413em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em">V</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2587em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8491em"></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.3488em;margin-left:0em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em"><span></span></span></span></span></span></span><span class="mbin mtight">×</span><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1645em"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span> 그리고 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>W</mi><mi>O</mi></msup><mo>∈</mo><msup><mi mathvariant="double-struck">R</mi><mrow><mi>h</mi><msub><mi>d</mi><mi>v</mi></msub><mo>×</mo><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow></msup></mrow><annotation encoding="application/x-tex">W^O \in \mathbb{R}^{hd_v \times d_{model}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8804em;vertical-align:-0.0391em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em">O</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8491em"></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1645em"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em"><span></span></span></span></span></span></span><span class="mbin mtight">×</span><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.3488em;margin-left:0em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span> 입니다.</p><p>여기에선 h = 8인 병렬적인 attention layer와 head를 사용했습니다.
각 레이어에서 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub><mo>=</mo><msub><mi>d</mi><mi>v</mi></msub><mo>=</mo><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mi mathvariant="normal">/</mi><mi>h</mi><mo>=</mo><mn>64</mn></mrow><annotation encoding="application/x-tex">d_k = d_v = d_{model} / h =64</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">64</span></span></span></span></span>를 사용했습니다.
각 head의 차원 감소로, 최종 계산 비용은 전체 차원의 single-head attention과 비슷합니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="323-applications-of-attention-in-our-model">3.2.3 Applications of Attention in our Model<a href="#323-applications-of-attention-in-our-model" class="hash-link" aria-label="Direct link to 3.2.3 Applications of Attention in our Model" title="Direct link to 3.2.3 Applications of Attention in our Model">​</a></h4><p>Transformer는 multi-head attention을 세가지 다른 방법으로 사용합니다:</p><ul><li><p>"인코더-디코더 attention" 레이어에서, 쿼리는 이전 디코더 레이어에서 가져오고, 메모리 키와 값은 인코더의 출력에서 가져옵니다.
이는 디코더의 모든 위치에서 모든 출력 sequence를 attend 할 수 있게 합니다.
이는 sequence-to-sequence 모델에서 일반적인 인코더-디코더 attention 메커니즘을 모방한 것입니다.
[38, <a href="#2-neural-machine-translation-by-jointly-learning-to-align-and-translate">2</a>, <a href="#9-convolutional-sequence-to-sequence-learning">9</a>]</p></li><li><p>인코더는 self-attention layer를 포함하고 있습니다. self-attention 레이어의 모든 key, value, query는 같은 위치에서 나오고,
여기에서는 인코더의 이전 레이어 출력입니다. 인코더의 각 위치는 이전 계층의 인코더의 모든 위치를 attend 할 수 있습니다.</p></li><li><p>유사하게, 디코더의 self-attention 레이어는 디코더의 각 모든 위치에서 자기 위치를 포함한 모든 디코더 위치를 attend 할 수 있게 합니다.
디코더가 auto-regressive한 특징을 보존하기 위해 leftward 정보 흐름을 방지해야 합니다.
scaled dot-product attention 안에 허용되지 않는 소프트맥스의 입력 value를 모두 마스킹(-<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>inf</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\inf</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mop">in<span style="margin-right:0.07778em">f</span></span></span></span></span></span>)해 구현했습니다. Figure2를 보세요.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-position-wise-feed-forward-networks">3.3 Position-wise Feed-Forward Networks<a href="#33-position-wise-feed-forward-networks" class="hash-link" aria-label="Direct link to 3.3 Position-wise Feed-Forward Networks" title="Direct link to 3.3 Position-wise Feed-Forward Networks">​</a></h3><p>attention 하위 계층 외에도 인코더와 디코더의 각 레이어에는, 각 위치에 개별적이고 동일하게 적용되는, fully connected feed-forward 네트워크를 포함합니다.
이는 사이에 ReLU 활성함수를 포함한 두 linear transformation로 구성됩니다.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.16em" columnspacing="1em"><mtr><mtd class="mtr-glue"></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>F</mi><mi>F</mi><mi>N</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mi>x</mi><msub><mi>W</mi><mn>1</mn></msub><mo>+</mo><msub><mi>b</mi><mn>1</mn></msub><mo stretchy="false">)</mo><msub><mi>W</mi><mn>2</mn></msub><mo>+</mo><msub><mi>b</mi><mn>2</mn></msub></mrow></mstyle></mtd><mtd class="mtr-glue"></mtd><mtd class="mml-eqn-num"></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{equation} FFN(x) = max(0,xW_1+b_1)W_2 + b_2 \end{equation}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2em;vertical-align:-0.35em"></span><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em"><span style="top:-3.01em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em">FFN</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">x</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em"><span></span></span></span></span></span></span></span><span class="tag"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em"><span style="top:-2.85em"><span class="pstrut" style="height:2.84em"></span><span class="eqn-num"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em"><span></span></span></span></span></span></span></span></span></div><p>linear transformation은 다른 위치에서도 동일하지만, 레이어마다 다른 매개 변수를 사용합니다.
다른 방법으로 커널 크기가 1인 두 convolution으로 표시할 수 있습니다.
입력과 출력 차원은 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mo>=</mo><mn>512</mn></mrow><annotation encoding="application/x-tex">d_{model} = 512</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">512</span></span></span></span></span>이고 내부 layer는 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>f</mi><mi>f</mi></mrow></msub><mo>=</mo><mn>2048</mn></mrow><annotation encoding="application/x-tex">d_{ff} = 2048</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em">ff</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">2048</span></span></span></span></span> 입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="34-embeddings-and-softmax">3.4 Embeddings and Softmax<a href="#34-embeddings-and-softmax" class="hash-link" aria-label="Direct link to 3.4 Embeddings and Softmax" title="Direct link to 3.4 Embeddings and Softmax">​</a></h3><p>다른 sequence transduction 모델과 비슷하게,
학습된 embedding을 사용해 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">d_{model}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> 차원의 벡터 입력 토큰과 출력 토큰으로 바꿉니다.
또한 일반적인 학습된 linear transformation과 softmax 함수를 이용해 디코더 출력으로 다음 토큰의 확률을 예측합니다.
여기서 다루는 모델은, 두개의 embedding layer와 pre-softmax linear transformation 사이에 동일한 가중치 메트릭스를 공유합니다.
Embedding layer에서 가중치에 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{d_{model}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.1828em"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8572em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord" style="padding-left:0.833em"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span><span style="top:-2.8172em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1828em"><span></span></span></span></span></span></span></span></span></span>을 곱합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="35-positional-encoding">3.5 Positional Encoding<a href="#35-positional-encoding" class="hash-link" aria-label="Direct link to 3.5 Positional Encoding" title="Direct link to 3.5 Positional Encoding">​</a></h3><p>이 모델은 recurrence도 convolution도 없기 때문에, 모델이 sequence의 순서를 사용하려면,
sequence에서 상대적이거나 절대적인 토근 위치 정보를 삽입해줘야만 했습니다.
이를 해결하기 위해 "positional encodings"를 인코더와 디코더 스택의 바닥에 있는 입력 embedding에 추가했습니다.
Positional encoding은 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>m</mi></msub><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow><annotation encoding="application/x-tex">d_model</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span></span></span></span></span>과 같은 차원을 임베딩으로 가져, 둘이 더해질 수 있도록 합니다.
여기에 많은 학습되고 고정된 positional encoding 선택이 있습니다. <a href="#9-convolutional-sequence-to-sequence-learning">[9]</a></p><p>여기에선, 다른 주기의 사인과 코사인 함수를 사용합니다:</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>P</mi><msub><mi>E</mi><mrow><mo stretchy="false">(</mo><mi>p</mi><mi>o</mi><mi>s</mi><mo separator="true">,</mo><mn>2</mn><mi>i</mi><mo stretchy="false">)</mo></mrow></msub><mo>=</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>p</mi><mi>o</mi><mi>s</mi><mi mathvariant="normal">/</mi><mn>1000</mn><msup><mn>0</mn><mrow><mn>2</mn><mi>i</mi><mi mathvariant="normal">/</mi><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow></msup><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mi>P</mi><msub><mi>E</mi><mrow><mo stretchy="false">(</mo><mi>p</mi><mi>o</mi><mi>s</mi><mo separator="true">,</mo><mn>2</mn><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msub><mo>=</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mi>p</mi><mi>o</mi><mi>s</mi><mi mathvariant="normal">/</mi><mn>1000</mn><msup><mn>0</mn><mrow><mn>2</mn><mi>i</mi><mi mathvariant="normal">/</mi><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">PE_{(pos, 2i)} = sin(pos/10000^{2i/d_{model}}) \\ PE_{(pos, 2i+1)} = cos(pos/10000^{2i/d_{model}})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0385em;vertical-align:-0.3552em"></span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.5198em;margin-left:-0.0576em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">os</span><span class="mpunct mtight">,</span><span class="mord mtight">2</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.188em;vertical-align:-0.25em"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">in</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mord mathnormal">os</span><span class="mord">/1000</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">i</span><span class="mord mtight">/</span><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.3488em;margin-left:0em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1.0385em;vertical-align:-0.3552em"></span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.5198em;margin-left:-0.0576em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">os</span><span class="mpunct mtight">,</span><span class="mord mtight">2</span><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.188em;vertical-align:-0.25em"></span><span class="mord mathnormal">cos</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mord mathnormal">os</span><span class="mord">/1000</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">i</span><span class="mord mtight">/</span><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.3488em;margin-left:0em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mi>o</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">pos</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal">p</span><span class="mord mathnormal">os</span></span></span></span></span>는 위치이고 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em"></span><span class="mord mathnormal">i</span></span></span></span></span>는 차원입니다. 따라서 각 차원의 positional encoding은 사인 곡선에 대응됩니다.
파장은 2<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span></span></span></span></span>에서 10000까지 기하학적 진행을 형성합니다.
어떤 고정된 offset k, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><msub><mi>E</mi><mrow><mi>p</mi><mi>o</mi><mi>s</mi><mo>+</mo><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">PE_{pos+k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em"></span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">os</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span></span></span></span></span>가 선형 함수 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><msub><mi>E</mi><mrow><mi>p</mi><mi>o</mi><mi>s</mi></mrow></msub></mrow><annotation encoding="application/x-tex">PE_{pos}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em"></span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">os</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span></span></span></span></span>로 표현될 수 있기 때문에,
모델이 상대적인 위치에 따라 쉽게 attend 하는 법을 배울 수 있다는 가설을 세웠고 이 함수를 선택했습니다.</p><p>또한 학습된 positional embedding <a href="#9-convolutional-sequence-to-sequence-learning">[9]</a> 을 사용하는 방법을 실험했으나,
두 버전이 거의 동일한 결과를 냈다는 것을 발견했습니다. (Table 3 열 E를 보세요)
모델이 훈련 중에 발생하는것 보다 더 긴 sequence 길이를 추정할 수 있기 때문에 사인 곡선 버전을 선택했습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-why-self-attention">4. Why Self-Attention<a href="#4-why-self-attention" class="hash-link" aria-label="Direct link to 4. Why Self-Attention" title="Direct link to 4. Why Self-Attention">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-training">5. Training<a href="#5-training" class="hash-link" aria-label="Direct link to 5. Training" title="Direct link to 5. Training">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-results">6. Results<a href="#6-results" class="hash-link" aria-label="Direct link to 6. Results" title="Direct link to 6. Results">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-conclusion">7. Conclusion<a href="#7-conclusion" class="hash-link" aria-label="Direct link to 7. Conclusion" title="Direct link to 7. Conclusion">​</a></h2><p>작성중</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><p>내용 이해에 필요한 부분을 번역했습니다. 원문을 보는걸 권장합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-layer-normalization"><a href="https://arxiv.org/pdf/1607.06450.pdf" target="_blank" rel="noopener noreferrer">1 Layer normalization</a><a href="#1-layer-normalization" class="hash-link" aria-label="Direct link to 1-layer-normalization" title="Direct link to 1-layer-normalization">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-neural-machine-translation-by-jointly-learning-to-align-and-translate"><a href="https://arxiv.org/pdf/1409.0473.pdf" target="_blank" rel="noopener noreferrer">2 Neural machine translation by jointly learning to align and translate</a><a href="#2-neural-machine-translation-by-jointly-learning-to-align-and-translate" class="hash-link" aria-label="Direct link to 2-neural-machine-translation-by-jointly-learning-to-align-and-translate" title="Direct link to 2-neural-machine-translation-by-jointly-learning-to-align-and-translate">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-massive-exploration-of-neural-machine-translation-architectures"><a href="https://arxiv.org/pdf/1703.03906.pdf" target="_blank" rel="noopener noreferrer">3 Massive exploration of neural machine translation architectures</a><a href="#3-massive-exploration-of-neural-machine-translation-architectures" class="hash-link" aria-label="Direct link to 3-massive-exploration-of-neural-machine-translation-architectures" title="Direct link to 3-massive-exploration-of-neural-machine-translation-architectures">​</a></h3><p>섹션 4.5 Attention Mechanism
주로 사용하는 어텐션 메커니즘은 additive, multiplilicative입니다.</p><p>계산량은 식(7)이 적습니다. 주어진 어텐션 key <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">h_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span></span></span></span></span>(인코더 상태)와 어텐션 쿼리 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">s_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>(디코더 상태)일때 어텐션 값은 다음과 같이 계산됩니다.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mi>s</mi><mi>c</mi><mi>o</mi><mi>r</mi><mi>e</mi><mo stretchy="false">(</mo><msub><mi>h</mi><mi>j</mi></msub><mo separator="true">,</mo><msub><mi>s</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mo>&lt;</mo><mi>v</mi><mo separator="true">,</mo><mi>t</mi><mi>a</mi><mi>n</mi><mi>h</mi><mo stretchy="false">(</mo><msub><mi>W</mi><mn>1</mn></msub><msub><mi>h</mi><mi>j</mi></msub><mo stretchy="false">)</mo><mo>+</mo><msub><mi>W</mi><mn>2</mn></msub><msub><mi>s</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>&gt;</mo></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(6)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">score(h_j, s_i) = &lt;v,tanh(W_1h_j)+W_2s_i)&gt; \tag{6}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em"></span><span class="mord mathnormal">score</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=&lt;</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em"></span><span class="mord mathnormal" style="margin-right:0.03588em">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">anh</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">&gt;</span></span><span class="tag"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">6</span></span><span class="mord">)</span></span></span></span></span></span></div><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mi>s</mi><mi>c</mi><mi>o</mi><mi>r</mi><mi>e</mi><mo stretchy="false">(</mo><msub><mi>h</mi><mi>j</mi></msub><mo separator="true">,</mo><msub><mi>s</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mo>&lt;</mo><msub><mi>W</mi><mn>1</mn></msub><msub><mi>h</mi><mi>j</mi></msub><mo separator="true">,</mo><msub><mi>W</mi><mn>2</mn></msub><msub><mi>s</mi><mi>i</mi></msub><mo>&gt;</mo></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(7)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">score(h_j, s_i) = &lt;W_1h_j,W_2s_i&gt; \tag{7}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em"></span><span class="mord mathnormal">score</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=&lt;</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">&gt;</span></span><span class="tag"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">7</span></span><span class="mord">)</span></span></span></span></span></span></div><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mn>1</mn></msub><msub><mi>h</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">W_1h_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span></span></span></span></span>와 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mn>2</mn></msub><msub><mi>s</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">W_2s_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>의 차원성을 "attention dimensionality"라고 부르고,
128에서 1024까지 레이어 크기를 바꿔봤습니다.</p><table><thead><tr><th>Attention</th><th>newstest2013</th><th>Params</th></tr></thead><tbody><tr><td>Mul-128</td><td>22.03 ± 0.08 (22.14)</td><td>65.73M</td></tr><tr><td>Mul-256</td><td>22.33 ± 0.28 (22.64)</td><td>65.93M</td></tr><tr><td>Mul-512</td><td>21.78 ± 0.05 (21.83)</td><td>66.32M</td></tr><tr><td>Mul-1024</td><td>18.22 ± 0.03 (18.26)</td><td>67.11M</td></tr><tr><td>Add-128</td><td>22.23 ± 0.11 (22.38)</td><td>65.73M</td></tr><tr><td>Add-256</td><td>22.33 ± 0.04 (22.39)</td><td>65.93M</td></tr><tr><td>Add-512</td><td>22.47 ± 0.27 (22.79)</td><td>66.33M</td></tr><tr><td>Add-1028</td><td><strong>22.10</strong> ± 0.18 (22.36)</td><td>67.11M</td></tr></tbody></table><p>additive 어텐션이 multiplicative 보다 조금씩이지만 더 나은 성능을 보여주고
차원은 적은 영향만 있는 것을 보입니다.</p><p><em>여기에서 볼 것은 multiplicative 어텐션이 차원이 커질수록 성능이 떨어지는데, 논문에서는 scale로 해결할 수 있다고 생각한 것입니다.</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="9-convolutional-sequence-to-sequence-learning"><a href="https://arxiv.org/pdf/1705.03122.pdf" target="_blank" rel="noopener noreferrer">9 Convolutional sequence to sequence learning</a><a href="#9-convolutional-sequence-to-sequence-learning" class="hash-link" aria-label="Direct link to 9-convolutional-sequence-to-sequence-learning" title="Direct link to 9-convolutional-sequence-to-sequence-learning">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="10-generating-sequences-with-recurrent-neural-networks"><a href="https://arxiv.org/pdf/1308.0850.pdf" target="_blank" rel="noopener noreferrer">10 Generating sequences with recurrent neural networks</a><a href="#10-generating-sequences-with-recurrent-neural-networks" class="hash-link" aria-label="Direct link to 10-generating-sequences-with-recurrent-neural-networks" title="Direct link to 10-generating-sequences-with-recurrent-neural-networks">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-deep-residual-learning-for-image-recognition"><a href="https://arxiv.org/pdf/1512.03385.pdf" target="_blank" rel="noopener noreferrer">11 Deep residual learning for image recognition</a><a href="#11-deep-residual-learning-for-image-recognition" class="hash-link" aria-label="Direct link to 11-deep-residual-learning-for-image-recognition" title="Direct link to 11-deep-residual-learning-for-image-recognition">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13-long-short-term-memory"><a href="https://blog.xpgreat.com/file/lstm.pdf" target="_blank" rel="noopener noreferrer">13 Long short-term memory</a><a href="#13-long-short-term-memory" class="hash-link" aria-label="Direct link to 13-long-short-term-memory" title="Direct link to 13-long-short-term-memory">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="19-structured-attention-networks"><a href="https://arxiv.org/pdf/1702.00887.pdf" target="_blank" rel="noopener noreferrer">19 Structured attention networks</a><a href="#19-structured-attention-networks" class="hash-link" aria-label="Direct link to 19-structured-attention-networks" title="Direct link to 19-structured-attention-networks">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="27-a-decomposable-attention-model"><a href="https://arxiv.org/pdf/1606.01933.pdf" target="_blank" rel="noopener noreferrer">27 A decomposable attention model</a><a href="#27-a-decomposable-attention-model" class="hash-link" aria-label="Direct link to 27-a-decomposable-attention-model" title="Direct link to 27-a-decomposable-attention-model">​</a></h3>]]></content:encoded>
            <category>ml</category>
            <category>paper</category>
        </item>
        <item>
            <title><![CDATA[7가지 동시성 모델(스레드와 락) 거인의 어깨 위에서]]></title>
            <link>https://jwher.github.io/posts/concurrency-models-4</link>
            <guid>https://jwher.github.io/posts/concurrency-models-4</guid>
            <pubDate>Wed, 28 Dec 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Seven Concurrency Models in Seven Weeks - Chapter2 Day3]]></description>
            <content:encoded><![CDATA[<p><a href="/posts/concurrency-models-4"><img loading="lazy" alt="concurrency" src="/assets/images/giant-742f13317c6cb330164833f4e2d540cd.jpeg" width="849" height="1024" class="img_ev3q"></a><br>
<em>이 글은 Paul Butcher의 Seven Concurrency Models in Seven Weeks을 읽고 작성했습니다</em>  </p><p>Nanos gigantum humeris insidentes</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="day-3-on-the-shoulders-of-giants">Day 3: On the Shoulders of Giants<a href="#day-3-on-the-shoulders-of-giants" class="hash-link" aria-label="Direct link to Day 3: On the Shoulders of Giants" title="Direct link to Day 3: On the Shoulders of Giants">​</a></h2><p><a href="/posts/concurrency-models-3">Day2</a>에서 <code>java.util.concurrent</code>가 포함하는
광범위하고, 고성능에, 완전히 디버그된 동시성 데이터 구조와 유용성이 강화된 락을 다뤘습니다.
오늘은 자체 해결책을 만드는 것보다 이를 사용하는게 더 좋다는것을 보일 것입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="thread-creation-redux">Thread-Creation Redux<a href="#thread-creation-redux" class="hash-link" aria-label="Direct link to Thread-Creation Redux" title="Direct link to Thread-Creation Redux">​</a></h3><p><a href="/posts/concurrency-models-3">day1</a>에서는 어떻게 스레드를 시작하는지 보았습니다.
하지만 스레드를 직접 만들어서 제대로 작동하게 되는 경우는 드뭅니다.
여기 어떤것을 보내던 메아리(echo)치는 서버가 있습니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">EchoServer</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">IOException</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ConnectionHandler</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">Runnable</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">InputStream</span><span class="token plain"> in</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token class-name">OutputStream</span><span class="token plain"> out</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">ConnectionHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Socket</span><span class="token plain"> socket</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">IOException</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                in </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> socket</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getInputStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                out </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> socket</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getOutputStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">byte</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> buffer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">byte</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1024</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">while</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">n </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> in</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">buffer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">buffer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">flush</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">IOException</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">ServerSocket</span><span class="token plain"> server </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ServerSocket</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">4567</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">           </span><span class="token class-name">Socket</span><span class="token plain"> socket </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">accept</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">           </span><span class="token class-name">Thread</span><span class="token plain"> handler </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ConnectionHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">socket</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">           handler</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>강조된 라인은 들어오는 연결을 수락하고 새 스레드를 만들어 처리하는 일반적인 패턴을 따릅니다.
이것은 잘 작동하나 몇가지 문제를 겪습니다.
첫째로 스레드 생성이 싸지만, 공짜는 아닙니다. 이 디자인은 매 연결마다 값을 치를 겁니다.
둘째로 연결 만큼 커넥션을 생성합니다. 커넥션이 처리될 수 있는 양보다 빠르게 들어오면 스레드가 증가할 것이고 서버는 멈추거나 고장날 것입니다.
이는 Denial-of-Service(DoS) 공격에 완전히 열려있습니다.</p><p>스레드 풀을 사용해서 문제를 해결할 수 있습니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> threadPoolSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getRuntime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">availableProcessors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">ExecutorService</span><span class="token plain"> executor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Executors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">newFixedThreadPool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">threadPoolSize</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Socket</span><span class="token plain"> socket </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">accept</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ConnectionHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">socket</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이 코드는 가능한 프로세스의 두배의 스레드를 생성합니다.
<code>execute()</code>요청이 한 순간에 더 많이 들어온다면 스레드가 사용가능할때까지 큐에 들어갈 것입니다.
이 뜻이 연결마다 생성되는 스레드의 오버헤드에 손해를 입지 않는게 아닙니다.
그러나 서버가 높은 부하에서 동작 가능한 것을 보장합니다.
(모든 요청이 빠르게 처리되기 충분하지 않겠지만, 적어도 몇은 처리될 것입니다)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="copy-on-write">Copy on Write<a href="#copy-on-write" class="hash-link" aria-label="Direct link to Copy on Write" title="Direct link to Copy on Write">​</a></h3><p><a href="/posts/concurrency-models-2#the-perils-of-alien-methods">day1</a>에서 동시성 프로그램에서 어떻게 리스너를 안전하게 부를 수 있는지 살펴봤습니다.
<code>updateProgress()</code>를 변경해 방어적인 복사를 했던 것을 상기해봅시다. <a href="/posts/concurrency-models-2#the-perils-of-alien-methods">code</a>
자바 표준 라이브러리가 제공하는 더 세런되고 준비된 <code>CopyOnWriteArrayList</code> 해결책이 있습니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">CopyOnWriteArrayList</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">ProgressListener</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> listeners</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">addListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ProgressListener</span><span class="token plain"> listener</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listeners</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">listener</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">removeListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ProgressListener</span><span class="token plain"> listener</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listeners</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">remove</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">listener</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">updateProgress</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ProgressListener</span><span class="token plain"> listener</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> listeners</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        listener</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">onProgress</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">n</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이름에서 알 수 있다시피. <code>CopyOnWriteArrayList</code>는 이전 방어적 복사 전략을 처음부터 뒤집습니다.
리스트를 순회하기 전에 복사본을 만드는 대신에, 변경사항이 있으면 복사합니다.
존재하는 이터레이터는 이전 복사본을 계속 참조할 것입니다.
이는 많은 사용사례에서 적절한 접근 방법이 아니지만 여기에선 적합한 방법입니다.</p><p>첫째로 결과물이 매우 명확하고 간결한 코드를 만든다는 것입니다.
사실 <code>listeners</code>의 정의와 별개로 day1에서 단순하게 만든 스레드 안전하지 않은 버전과 동일합니다.
둘째로 <code>updateProgress()</code>이 호출될 때마다 복사할 필요가 없고, <code>listeners</code> 만 수정하면 되어 더 효과적입니다.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>How Large Should My Thread Pool Be?</summary><div><div class="collapsibleContent_i85q"><p>스레드의 적절한 크기는 실행하는 하드웨어,
IO나 CPU bound 어떤 것에 관련 있는지,
기계가 어떤 것을 같은 시간에 실행시키는지,
기타 다른 요인들에 따라 다릅니다.</p><p>그렇지만, 좋은 경험 법칙은 계산 집약적인 작업의 경우 사용 가능한 코어와 거의 같은 수의 스레드를 갖는 것입니다.
더 많은 숫자가 IO 집약적인 작업에서 적절할 수 있습니다.</p><p>이 경험 첩칙을 너머, 실제적인 부하 테스트를 하는것이 최선일 것입니다.</p></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-complete-program">A Complete Program<a href="#a-complete-program" class="hash-link" aria-label="Direct link to A Complete Program" title="Direct link to A Complete Program">​</a></h3><p>현재까지 격리된 독립적인 도구를 살펴봤습니다.
다시 상기하자면, 작지만 현실적인 문제를 해결하려고 합니다.
위키피디아에서 가장 많이 사용되는 단어가 무엇일까요?</p><p>이는 찾기 쉬울 것입니다. XML 덤프를 다운로드 받아 단어수를 세는 프로그램을 만듭니다.
덤프 크기가 40GiB정도 되어 좀 걸리겠지만, 병렬화를 통해 속도를 높일 수 있을 것입니다.</p><p>베이스라인을 시작합시다.
첫 10만장에서 단어를 세는 sequential 프로그램은 얼마나 걸릴까요?</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">WordCount</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">HashMap</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">Integer</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> counts </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HashMap</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">Integer</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Iterable</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Page</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> pages </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Pages</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"enwiki.xml"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Page</span><span class="token plain"> page</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> pages</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">Iterable</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> words </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Words</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">page</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getText</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> word</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> words</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token function" style="color:#d73a49">countWord</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">word</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">countWord</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> word</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Integer</span><span class="token plain"> currentCount </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> counts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">word</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">currentCount </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            counts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">word</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            counts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">word</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> currentCount </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>저자의 맥북 프로에선 105초 미만으로 걸립니다.</p><p>병렬 버전을 어디에서 시작하면 될까요? 메인 루프에서 각 순회마다 두 작업을 합니다.
처음엔 XML에서 <code>Page</code>를 파싱하고, 텍스트에서 단어를 셉니다.</p><p><em>producer-comsumer</em> 패턴은 이 문제를 해결하기 위한 고전적인 패턴입니다.
한 스레드가 값을 만들고 소비하는 대신, producer와 consumer 두 스레드를 만듭니다.</p><p>여기에 producer를 구현한 <code>Parser</code>가 있습니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Parser</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">Runnable</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">BlockingQueue</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Page</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> queue</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Parser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">BlockingQueue</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Page</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> queue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">queue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> queue</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">           </span><span class="token class-name">Iterable</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Page</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> pages </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Pages</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"enwiki.xml"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">           </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Page</span><span class="token plain"> page</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> pages</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">               queue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">page</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Exception</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">printStackTrace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>run()</code> 메서드는 이전의 sequential 해결책으로 이루어진 외부 루프를 포함합니다.
대신 새로 파싱된 페이지의 단어를 세는 대신에 큐의 꼬리에 넣습니다.</p><p>여기 대응하는 consumer가 있습니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Counter</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">Runnable</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">BlockingQueue</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Page</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> queue</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Map</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">Integer</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> counts</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Counter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">BlockingQueue</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Page</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> queue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Map</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">Integer</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> counts</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">queue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> queue</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">counts </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> counts</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">while</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">               </span><span class="token class-name">Page</span><span class="token plain"> page </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> queue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">take</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">page</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isPoisonPill</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">               </span><span class="token class-name">Iterable</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> words </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Words</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">page</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getText</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">               </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> word</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> words</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">                   </span><span class="token function" style="color:#d73a49">countWord</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">word</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Exception</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">printStackTrace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>예상하셨을지 모르겠지만, sequential 해결책이 내부에 포함되어 있고, 큐에서 값을 가져옵니다.</p><p>마지막으로 수정된 버전의 두 스레드를 생성하는 메인 루프입니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">ArrayBlockingQueue</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Page</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> queue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ArrayBlockingQueue</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Page</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">HashMap</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">Integer</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> counts </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HashMap</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">Integer</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Thread</span><span class="token plain"> counter </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Counter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> counts</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Thread</span><span class="token plain"> parser </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Parser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">counter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">parser</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">parser</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">queue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">PoisonPill</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">counter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>java.util.concurrent</code>의 <code>ArrayBlockingQueue</code>는 동시성 큐로 producer-consumer 패턴을 구현합니다.
이는 단지 효율적인 <code>put()</code>과 <code>take()</code> 메서드를 제공하는게 아닌 필요할때만 블록합니다.
빈 큐에서 <code>take()</code> 하려는 것은 큐가 비지 않을 때까지 큐를 블록합니다.
가득 찬 큐에서 <code>put()</code> 하려는 것은 큐가 빌때까지 큐를 블록합니다.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Why a Blocking Queue?</summary><div><div class="collapsibleContent_i85q"><p>블로킹 큐와 같이 <code>java.util.concurrent</code>는 unbounded, wait-free, nonblocking 큐인 <code>ConcurrentLinkedQueue</code>를 제공합니다.
마치 필요한 것만 있는 것 같은데 왜 이 문제에 좋은 선택이 아닐까요?</p><p>이 문제는 producer와 consumer가 같은 속도로 동작하지 않는다는 것입니다.
특히 producer가 더 빠르게 동작하면 큐는 점점 더 커집니다.
여기서 사용한 위키피디아 덤프는 40GiB 정도입니다. 이는 쉽게 메모리에 너무 큰 큐를 만듭니다.</p><p>따라서 블로킹 큐를 사용해 producer가 consumer보다 앞에 있는걸 허용하지만, 너무 많이가지 못하게 합니다.</p></div></div></details><p>이 문제에 다른 흥미로운 점은 consumer가 언제 종료되어야 할지 아는 것입니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">page</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isPoisonPill</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이름이 보이듯 <em>poison pill</em>은 언제 데이터가 끝에 도달하고 consumer가 종료해야하는지 알려주는 특별 토큰입니다.
C/C++에서 end of string에 사용하는 null character와 같은 역할을 합니다.</p><p>좋은 소식은 속도 향상이 있다는 것입니다.
(저자의 컴퓨터에선 95초로 10초 빨라졌습니다.)
하지만 더 좋게 할 수 있습니다.
producer-consumer 패턴의 장점은 다중 producer와 consumer에도 적용할 수 있다는 것입니다.</p><p>하지만 producer와 consumer중 어디에 더 집중해야 할까요? 어느 부분에 시간이 더 소요될까요?
저자가 stopwatch로 확인했을때 문서 파싱은 10초 소요되었습니다.
잠깐 생각하면 놀랍지 않은게, 순차적인 방법이 105초가 걸리고 producer-consumer가 95초가 걸렸습니다.
명확하게 10초가 파싱(producer)에, 95초가 단어를 세는데(consumer) 사용됬습니다.
병렬적으로 진행하며 10초를 아낀 것입니다.</p><p>따라서 성능을 더 개선하기 위해 consumer의 개수를 늘려야 합니다.</p><p><img loading="lazy" alt="multi-conumer" src="/assets/images/multi-consumer-e00a163dfb4fa8275159cd17d680fbfc.png" width="1962" height="900" class="img_ev3q"></p><p>다중 스레드가 단어를 동시에 세려면, <code>count</code> 맵에 동기적인 접근하는 방법을 찾아야 합니다.</p><p>첫번째로 고민할 수 있는 방법은 <code>Colleections</code>에서 반환하는 <code>synchronizedMap()</code>을 사용하는 것입니다.
불행히 synchronized collections는 atomic 읽기-수정-쓰기 메서드를 제공하지 않습니다.
<code>HashMap</code>을 쓰고자 한다면, 직접 동기적인 접근을 해야합니다.</p><p>여기 정확히 동기적인 접근을 하는 수정된 <code>countWord()</code> 메서드가 있습니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">countWord</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> word</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">   lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">lock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Integer</span><span class="token plain"> currentCount </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> counts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">word</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">currentCount </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            counts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">word</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            counts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">word</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> currentCount </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">unlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>여기 다중 consumer를 실행하는 수정된 메인 루프가 있습니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">ArrayBlockingQueue</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Page</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> queue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ArrayBlockingQueue</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Page</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">HashMap</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">Integer</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> counts </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HashMap</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">Integer</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">ExecutorService</span><span class="token plain"> executor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Executors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">newCachedThreadPool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NUM_COUNTERS</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">++</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Counter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> counts</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Thread</span><span class="token plain"> parser </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Parser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">parser</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">parser</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NUM_COUNTERS</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">++</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    queue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">PoisonPill</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">shutdown</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">awaitTermination</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10L</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">TimeUnit</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">MINUTES</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>다중 스레드를 관리하기 편하게 thread pool로 바꾼것을 빼고 이전것과 비슷합니다.
깨끗이 종료하기 위해 정확한 숫자의 poison pill을 큐에 넣는 것이 중요합니다.</p><p>보기에 좋지만 꿈을 짖밟는 결과를 봅시다.</p><table><thead><tr><th>Consumer</th><th>Time(s)</th><th>Speedup</th></tr></thead><tbody><tr><td>1</td><td>101</td><td>1.04</td></tr><tr><td>2</td><td>212</td><td>0.49</td></tr></tbody></table><p>왜 consumer를 추가한게 더 느려졌을까요? 약간 느려진것도 아닌 두배나?
답은 너무 많은 스레드가 하나의 공유 자원에 동시에 접근해 과도한 경쟁이 발생했기 때문입니다.
여기에선 <code>count</code> 맵에 접근할때 locked여서 unlock 할때까지 유용한 일을 하는 대신 대기시간이 더 길었기 때문입니다.</p><p>행복하게도, <code>java.util.concurrent</code>에선 <code>ConcurrentHashMap</code>이 우리가 정확히 필요한 것입니다.
atomic 읽기-수정-쓰기 메서드만 제공하는게 아니라 lock striping이라 불리는 기술을 사용해 고수준의 동시성 접근을 허용하기 때문입니다.</p><p>여기에 <code>ConcurrentHashMap</code>을 사용한 수정된 <code>countWord()</code>가 있습니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">countWord</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> word</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Integer</span><span class="token plain"> currentCount </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> counts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">word</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">currentCount </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">counts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">putIfAbsent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">word</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">counts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">replace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">word</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> currentCount</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> currentCount </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>정확히 어떻게 작동하는지 이해하기 위해 작은 시간을 소모할만 합니다.
<code>put()</code>을 사용하는 대신 <code>putIfAbsent()</code>와 <code>replace()</code>를 조합합니다.
여기 <code>putIfAbsent()</code>에 대한 문서가 있습니다.</p><blockquote><p>If the specified key is not already associated with a value, associate it with the given value. This is equivalent to</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">map</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">containsKey</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> map</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> map</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>except that the action is performed atomically.</p></blockquote><p><code>replace()</code>에 대한 문서입니다.</p><blockquote><p>Replaces the entry for a key only if currently mapped to a given value. This is equivalent to</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">map</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">containsKey</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> map</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">equals</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oldValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  map</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> newValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>except that the action is performed atomically.</p></blockquote><p>따라서 이 함수를 언제 호출하던, 반환값을 확인 후 예상대로 변화를 만들었는지 확인합니다.
그렇지 않다면 루프를 돌아 다시 시도합니다.</p><p>이 버전에서 스톱워치는 더 좋은 결과를 보여줍니다.</p><table><thead><tr><th>Consumer</th><th>Time(s)</th><th>Speedup</th></tr></thead><tbody><tr><td>1</td><td>120</td><td>0.87</td></tr><tr><td>2</td><td>83</td><td>1.26</td></tr><tr><td>3</td><td>65</td><td>1.61</td></tr><tr><td>4</td><td>63</td><td>1.67</td></tr><tr><td>5</td><td>70</td><td>1.50</td></tr><tr><td>6</td><td>79</td><td>1.33</td></tr></tbody></table><p>성공했습니다! 이번에는 더 많은 consumer가 적어도 4 초과하기 전까지 속도를 빠르게 해주었습니다.
63초는 105초보다 더 빠르긴 하지만, 두배로 빠르지 않습니다.
저자의 맥북은 4코어입니다. 4배의 속도 향상에 가까워 질 순 없을까요?</p><p>약간의 생각을 해보면, 이 해결책이 <code>counts</code> 맵에 더 많은 경쟁을 만드는게 확실합니다.
각 consumer가 공유된 카운터를 동시에 업데이트 하기보다, 로컬 카운트를 가지고 종료하기 전에 합치는게 낫습니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mergeCounts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Map</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">Entry</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">Integer</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> e</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> localCounts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">entrySet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">String</span><span class="token plain"> word </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getKey</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Integer</span><span class="token plain"> count </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">Integer</span><span class="token plain"> currentCount </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> counts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">word</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">currentCount </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">counts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">putIfAbsent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">word</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> count</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">counts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">replace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">word</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> currentCount</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> currentCount </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> count</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이는 이상적인 4배 속도 향상에 더 가깝습니다.</p><table><thead><tr><th>Consumer</th><th>Time(s)</th><th>Speedup</th></tr></thead><tbody><tr><td>1</td><td>95</td><td>1.10</td></tr><tr><td>2</td><td>57</td><td>1.83</td></tr><tr><td>3</td><td>40</td><td>2.62</td></tr><tr><td>4</td><td>39</td><td>2.69</td></tr><tr><td>5</td><td>35</td><td>2.96</td></tr><tr><td>6</td><td>33</td><td>3.14</td></tr><tr><td>7</td><td>41</td><td>2.55</td></tr></tbody></table><p>이 버전은 consumer를 추가했을 때 성능이 더 빨라질 뿐만 아니라, 4개 이상일때도 속도가 증가합니다.
이는 저자의 맥북 코어가 하다당 두 <a href="/categories/category/computer-architecture">하이퍼스레드</a>를 지원하기 때문입니다(intel).
<code>availableProcessors()</code>는 물리 코어가 4개여서 실제론 8을 반환합니다.</p><p><img loading="lazy" alt="word-count-performance" src="/assets/images/word-count-performance-3b4add3e159c60a967052ff2b385abbc.png" width="2114" height="1502" class="img_ev3q"></p><p>이 그래프는 세가지 버전의 퍼포먼스를 보여줍니다.
성능은 처음에 선형으로 증가하다 폭이 줄어들고, 결국엔 피크에 도달한 후 느려집니다.</p><p>잠시 당신이 한 것을 돌아볼 필요가 있습니다.
여기에서 concurrent queue와 concurrent map을 사용해 좀더 세련된 producer-consumer 프로그램을 만들었습니다.
또한 standard library의 도움을 받아 어떠한 명시적인 락 없이 구현했습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="day-3-wrap-up">Day 3 Wrap-Up<a href="#day-3-wrap-up" class="hash-link" aria-label="Direct link to Day 3 Wrap-Up" title="Direct link to Day 3 Wrap-Up">​</a></h2><p>3일차에서 스레드와 락을 사용한 프로그래밍 논의를 마치려고 합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-we-learned-in-day-3">What We Learned in Day 3<a href="#what-we-learned-in-day-3" class="hash-link" aria-label="Direct link to What We Learned in Day 3" title="Direct link to What We Learned in Day 3">​</a></h3><p><code>java.util.concurrent</code>가 쉽고 더 안전하고 더 효율적인 기능을 제공하는것을 살펴보았습니다.</p><ul><li>스레드를 직접 생성하는 대신 스레드 풀을 사용</li><li><code>CopyOnWriteArrayList</code>를 사용해 더 효과적이고 단순한 리스너 관리 코드 생성</li><li><code>ArrayBlockingQueue</code>를 사용해 producer와 consumer가 소통 허용</li><li><code>ConcurrentHashMap</code>을 통해 맵에 대한 높은 동시성 접근 허용</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="day-3-self-study">Day 3 Self-Study<a href="#day-3-self-study" class="hash-link" aria-label="Direct link to Day 3 Self-Study" title="Direct link to Day 3 Self-Study">​</a></h3><p>찾아보기  </p><ul><li>The documentation for <code>ForkJoinPool</code>—how does a fork/join pool differ from a thread pool? When might you prefer one, and when the other?</li><li>What is <em>work-stealing</em> and when might it be useful? How would you implement work-stealing with the facilities provided by <code>java.util.concurrent</code>?</li><li>What is the difference between a <code>CountDownLatch</code> and a <code>CyclicBarrier</code>? When might you use one, and when the other?</li><li>What is Amdahl’s law? What does it say about the maximum theoretical speedup we might be able to get for our word-counting algorithm?</li></ul><p>실습  </p><ul><li>Rewrite the producer-consumer code to use a separate “end of data” flag instead of a poison pill. Make sure that your solution correctly handles the cases where the producer runs faster than the consumer and vice versa. What will happen if the consumer has already tried to remove something from the queue when the “end of data” flag is set? Why do you think that the poison-pill approach is so commonly used?</li><li>Run the different versions of the word-count program on your computer, as well as any others you can get access to. How do the performance graphs differ from one computer to another? If you could run it on a computer with 32 cores, do you think you would see anything close to a 32x speedup?</li></ul><br><br><h1>Wrap-Up</h1><p>스레드와 락 프로그래밍은 아마 다른 기술보다 더 많은 의견을 나눈 것입니다.
이는 올바르게 하기 매우 어렵다는 명성이 있고, 많은 프로그래머가 축소해 어떤 희생을 치르더라도 멀티스레드 프로그래밍을 피합니다.
다른사람이 이해하지 못해도, 몇가지 간단한 규칙만 따르면 프로그래밍에 어려움이 없을 것입니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="strengths">Strengths<a href="#strengths" class="hash-link" aria-label="Direct link to Strengths" title="Direct link to Strengths">​</a></h2><p>스레드와 락의 주요 강점은 광범위하게 적용할 수 있는 모델이라는 것입니다.
예상할 수 있듯이, 우리가 나중에 다룰 많은 접근방식의 기초라는 점을 감안할 때, 광범위한 문제에 적용할 수 있습니다.
이는 실제 하드웨어가 하는 것에 더 가깝기 때문에, 올바르게 사용한다면 매우 효율적일 것입니다.
또한 매우 작은 문제부터 큰 범위까지 세부 문제를 해결하는데 사용될 수 있다는 것입니다.</p><p>게다가, 대부분 프로그래밍 언어에 쉽게 통합할 수 있습니다.
언어 디자이너는 적은 노력으로 명령형이나 객체지향 언어에 스레드와 락을 추가할 수 있습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="weaknesses">Weaknesses<a href="#weaknesses" class="hash-link" aria-label="Direct link to Weaknesses" title="Direct link to Weaknesses">​</a></h2><p>스레드와 락은 병렬처리를 직접 지원하지 않습니다. <a href="/posts/concurrency-models-1#concurrent-or-parallel">intro</a></p><p>몇몇 실험적인 분산 메모리 공유 시스템에 의해 스레드와 락은 공유 메모리 아키텍처만 지원합니다.
분산 메모리를 지원하는 경우, 다른 곳을 찾아야 합니다. 이는 스레드와 락이 단일 시스템 문제를 해결하기에 너무 크기 때문입니다.</p><p>가장 큰 약점은 스레드와 락 프로그램이 어려워 접근하기 힘들다는 것입니다.
언어 디자이너가 스레드와 락을 언어에 추가하는 건 쉬울 수 있지만, 실력이 떨어지는 프로그래머에겐 도움이 되지 않을 것입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-elephant-in-the-room">The Elephant in the Room<a href="#the-elephant-in-the-room" class="hash-link" aria-label="Direct link to The Elephant in the Room" title="Direct link to The Elephant in the Room">​</a></h3><p>멀티스레드 프로그램이 어렵다는 말은, 작성하기가 아니라 <em>테스트</em> 하기가 어렵다는 것입니다.
이는 빠질 수 있는 함정이 아니라, 빠졌는지 알 수도 없는 함정입니다.</p><p>메모리 모델을 예로 들어보면, <a href="/posts/concurrency-models-2#memory-visibility">day1</a>에서 두 스레드가 동기화 없이 메모리 위치에 엑세스하면 모둔 종류의 이상한 일이 일어날 수 있습니다.
하지만 틀린 것을 어떻게 알까요? 적절한 동기화 없이 메모리에 절대 접근할 수 없다는것을 증명하기 위해 어떤 테스트를 작성하겠습니까?</p><p>안타깝게도 방법이 없습니다. 당신은 스트레스 테스트를 위해 무언가 쓸 수 있지만,
그 테스트를 통과한다고 해서 그게 옳다는 것을 의미하지 않습니다.
<a href="/posts/concurrency-models-2#multiple-locks">식사하는 철학자</a> 문제에서도 문제가 잘못된걸 알았지만, 일주일 이상 시행되는 것을 보았습니다.</p><p>스레딩 버그가 드물게 발생하는 것도 문제의 큰 부분입니다.
문제가 10분마다 발생하면 빨리 찾겠지만, 문제의 재발을 위해 몇달간 서버를 실행시켜야 한다면 디버깅하는건 사실상 불가능합니다.</p><p>더 나쁜 것은, 철저하고 오랫동안 테스트하면 스레딩 버그가 없는 프로그램을 작성하는 것이 가능하다는 것입니다.
엑세스 메모리 접근이 재정렬될 수 있다고 해도, 실재로 일어나지 않습니다.
이 문제는 JVM을 업그레이드 하거나 다른 하드웨어로 옮길때 갑자기 마주하는 아무도 이해못하는 신비한 실패로 맞닥드릴 것입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="maintenance">Maintenance<a href="#maintenance" class="hash-link" aria-label="Direct link to Maintenance" title="Direct link to Maintenance">​</a></h3><p>이 문제는 코드를 작성할때도 끔직하지만, 코드가 그대로 있는 경우는 거의 없습니다.
한가지 사실은 모둔 것이 정확하게 동기화 되야 하는 것입니다.
락은 순서대로 요구되고, 외부 함수가 락중에 호출되선 안됩니다.
다른 10명의 프로그래머가 12개월간 유지보수를 해도 그렇게 유지될 수 있는지는 또 다른 문제입니다.
지난 10년간 우리는 자동화된 테스트로 리팩토링을 자신있게 할 수 있었습니다.
하지만, 스레드 문제를 테스트를 신뢰할 수 없다면,
멀티스레드 코드 리팩토링도 신뢰할 수 없습니다.</p><p>결론은 멀티스레드 코드에 매우 신중해야 하는 것입니다.
작업 후에도 신중하게 살펴보세요. 이것은 쉽지도 않고 확장할수도 없습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="other-languages">Other Languages<a href="#other-languages" class="hash-link" aria-label="Direct link to Other Languages" title="Direct link to Other Languages">​</a></h2><p>JVM에서 스레드와 락 프로그래밍을 더 하고 싶다면,
Java Concurrency in Practice로 시작하세요.
<code>java.util.concurrent</code> 패키지의 저자가 작성한 책입니다.
멀티스레드 프로그래밍은 여러 언어마다 다양하지만, chapter1에서 다룬 일반적인 원칙은 널리 적용 가능합니다.
공유 변수를 접근하기 위해 동기화 필요, 락을 요구할때 고정된 전역 순서로, alien 메서드를 락을 가진 상태에서 호출하면 안되는 규칙은
스레드와 락이 있는 모든 언어에 적용할 수 있습니다.</p><p>특별히 Java memory model을 살펴봤으나, 동시성 코드에서 재정렬된 메모리 접근은 자바의 독특한 점이 아닙니다.
차이점은, 대부분의 언어는 어떻게 언제 재정렬이 가능한지 잘 정의된 메모리 모델이 없다는 것입니다.
자바는 잘 정의된 메모리 모델을 가진 주요 언어의 선구자입니다. C와 C++는 C11과 C++11 표준에서야 메모리 모델이 추가되었습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="final-thoughts">Final Thoughts<a href="#final-thoughts" class="hash-link" aria-label="Direct link to Final Thoughts" title="Direct link to Final Thoughts">​</a></h2><p>이런 도전에도 멀티스레드 프로그래밍은 미래에 함께할 것입니다.
하지만 우리는 다른 옵션에 대해 나머지 부분에서 살펴볼 것입니다.</p><p>다음 장에서는 변화 가능한 상태를 피하며 스레드와 락 문제를 피하는 함수형 프로그래밍에 대해 알아볼 것입니다.
함수형 코드를 써 본적이 없어도 함수형 언어를 이해하는 것은 가치있습니다.
확인하겠지만, 다른 많은 동시성 모델의 기반이 되고 있습니다.</p>]]></content:encoded>
            <category>tech</category>
            <category>parallel computing</category>
            <category>distributed computing</category>
            <category>java</category>
        </item>
        <item>
            <title><![CDATA[7가지 동시성 모델(스레드와 락) 고유 락 개선하기]]></title>
            <link>https://jwher.github.io/posts/concurrency-models-3</link>
            <guid>https://jwher.github.io/posts/concurrency-models-3</guid>
            <pubDate>Mon, 19 Dec 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Seven Concurrency Models in Seven Weeks - Chapter2 Day2]]></description>
            <content:encoded><![CDATA[<p><a href="/posts/concurrency-models-3"><img loading="lazy" alt="concurrency" src="/assets/images/icing-262e8ab8c3eef2927d9b58ff930d610c.jpeg" width="300" height="400" class="img_ev3q"></a><br>
<em>이 글은 Paul Butcher의 Seven Concurrency Models in Seven Weeks을 읽고 작성했습니다</em>  </p><p>Declaring a method as synchronized is just syntactic sugar for surrounding the method’s body</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="day-2-beyond-intrinsic-locks">Day 2: Beyond Intrinsic Locks<a href="#day-2-beyond-intrinsic-locks" class="hash-link" aria-label="Direct link to Day 2: Beyond Intrinsic Locks" title="Direct link to Day 2: Beyond Intrinsic Locks">​</a></h2><p>자바 5는 <code>java.util.concurrent</code>를 도입하며 모든것이 바뀌었습니다.
이번에는 향상된 락 메커니즘이 제공하는 것을 살펴 보겠습니다.</p><p>고유 락은 편리하지만 제한되었습니다.</p><ul><li>고유 락을 얻기 위해 블락된 스레드를 인터럽트할 수 있는 방법이 없습니다</li><li>고유 락을 요구하는 동안 시간제한을 할 수 있는 방법이 없습니다.</li><li>고유 락을 요구하는 방법은 <code>synchronized</code> 한 방법 뿐입니다. 이 뜻은 락 점유와 해제가 같은 메소드에서 수행되어야 하고 엄격하게 중첩되야 합니다.</li></ul><p><code>ReentrantLock</code>은 명확한 락과 언락 메소드를 <code>synchronized</code> 대신 제공하면서 이런 제한을 넘을 수 있게 해줍니다.
어떻게 고유 락을 개선할지 보기 전에, 어떻게 <code>ReentrantLock</code>이 <code>synchronized</code>를 대체하는지 살펴봅시다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">Lock</span><span class="token plain"> lock </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ReentrantLock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">lock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    «use shared resources»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">unlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>try ... finally</code> 구문은 언제나 락이 해제되도록 보장하는 좋은 예제입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="interruptible-locking">Interruptible Locking<a href="#interruptible-locking" class="hash-link" aria-label="Direct link to Interruptible Locking" title="Direct link to Interruptible Locking">​</a></h3><p>고유 락이 인터럽트가 불가능 하므로, 데드락을 복구할 방법이 없습니다.
데드락을 유발하고 스레드를 통해 인터럽트하는 예제 코드를 살펴봅시다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Uninterruptible</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">InterruptedException</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Object</span><span class="token plain"> o1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Object</span><span class="token plain"> o2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Thread</span><span class="token plain"> t1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">synchronized</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">o1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">synchronized</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">o2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">InterruptedException</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"t1 interrupted"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Thread</span><span class="token plain"> t2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">synchronized</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">o2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">synchronized</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">o1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">InterruptedException</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"t2 interrupted"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    t1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> t2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    t1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">interrupt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> t2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">interrupt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    t1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> t2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이 프로그램은 JVM이 죽이지 않는 한 데드락상태가 끝나지 않습니다.</p><p>하지만 <code>ReentrantLock</code>을 사용해 재구현하면, <code>lockInterruptibly()</code> 메서드를 통해 해결할 수 있습니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">ReentrantLock</span><span class="token plain"> l1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ReentrantLock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">ReentrantLock</span><span class="token plain"> l2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ReentrantLock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Thread</span><span class="token plain"> t1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">           l1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">lockInterruptibly</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">           l2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">lockInterruptibly</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">InterruptedException</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"t1 interrupted"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이 버전은 <code>Thread.interrupt()</code>가 호출되면 깨끗이 종료됩니다.
좀더 지저분해 보이는 구문은, 데드락 스레드에 인터럽트 가능하게 하는 작은 비용입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="timeouts">Timeouts<a href="#timeouts" class="hash-link" aria-label="Direct link to Timeouts" title="Direct link to Timeouts">​</a></h3><p><code>ReentrantLock</code>은 락을 요구할때 시간제한을 허용함으로써 고유 락의 제한을 해결합니다.
<a href="/posts/concurrency-models-2">day1</a> 에서 살펴본 “dining philosophers”를 봅시다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Philosopher</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">ReentrantLock</span><span class="token plain"> leftChopstick</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rightChopstick</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Random</span><span class="token plain"> random</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Philosopher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ReentrantLock</span><span class="token plain"> leftChopstick</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">ReentrantLock</span><span class="token plain"> rightChopstick</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">leftChopstick </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> leftChopstick</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">rightChopstick </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> rightChopstick</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        random </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">while</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">random</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">nextInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Think for a while leftChopstick.lock();</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">                       </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rightChopstick</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">tryLock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">TimeUnit</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">MILLISECONDS</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Got the right chopstick</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                            </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                                </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">random</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">nextInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Eat for a while</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> rightChopstick</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">unlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">                       </span><span class="token comment" style="color:#999988;font-style:italic">// Didn't get the right chopstick - give up and go back to thinking</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> leftChopstick</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">unlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">InterruptedException</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>lock()</code>을 사용하는 대신, 락을 얻는데 시간제한을 두고 실패하는 <code>tryLock()</code>을 사용합니다.
이 버전은 고정된 전역 순서대로 여러 락 요청을 해야하는 규칙을 지키지 않고 데드락에 걸리지 않습니다.
(최소한 영원히 데드락상태이지 않습니다)</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Livelock</summary><div><div class="collapsibleContent_i85q"><p><code>tryLock()</code>은 영원히 데드락에 빠지는걸 막아주지만, 좋은 해결책을 뜻하는 것은 아닙니다.
첫째로 데드락이 발생했을 때 복구하는 방법을 제공하지 데드락을 피하는 방법이 아닙니다.
둘째로 <em>livelock</em>이라 불리는 현상에 취약합니다. 모든 스레드가 동시에 시간제한을 초과했을 때 즉시 데드락에 걸릴 수 있습니다.
데드락이 영원히 지속되지 않지만, 진행도 일어나지 않습니다.</p><p>이 현상은 각 스레드를 다른 시간제한 값을 설정하며 시간제한을 동시에 발생할 기회를 줄이는 방법 등으로 완화할 수 있습니다.
그러나 시간제한은 좋은 해결책인 경우는 적습니다. 데드락을 피하는 방법이 첫번째로 고민되어야 할 것입니다.</p></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hand-over-hand-locking">Hand-over-Hand Locking<a href="#hand-over-hand-locking" class="hash-link" aria-label="Direct link to Hand-over-Hand Locking" title="Direct link to Hand-over-Hand Locking">​</a></h3><p>연결 리스트에 한 엔트리를 추가하길 원하는 상황을 가정해 봅시다.
한 방법은 전체 리스트를 보호하는 하나의 락을 가지는 접근 방법이 있습니다.
이 방법은 락이 걸렸을때 아무도 리스트에 접건할 수 없음을 의미합니다.
<em>Hand-over-hand</em> 락은 리스트의 작은 부분만 락을 하는 대안으로,
다른 스레드가 락이 걸린 특정 노드를 제외하고 자유롭게 접근할 수 있도록 하는 방법입니다.</p><p><img loading="lazy" alt="Hand-over-hand locking" src="/assets/images/hand-over-hand-locking-9afbfe2301051e47c935f4357b91018a.png" width="1598" height="1486" class="img_ev3q"><br>
<em>Hand-over-hand locking</em>  </p><p>노드를 삽입하려는 위치의 양 옆을 락해야 합니다.
1번과 2번 노드를 락하며 시작합니다.
새 노드를 삽입하기 위해 락을 해야하는 맞는 지점이 아니기 때문에 1번 노드의 락을 해제하고 3번 노드를 락합니다.
여전히 맞는 지점이 아니기 때문에 2번 노드의 락을 해제하고 4번 노드를 락합니다.
이 과정을 적절한 위치를 찾을때까지 반복하고, 새 노드를 넣습니다.
마지막으로 삽입한 위치의 노드 양 옆의 락을 해제합니다.</p><p>이 락과 언락은 고유 락으로 불가능합니다. 하지만 <code>ReentrantLock</code>은 우리가 <code>lock()</code>과 <code>unlock()</code>을 원하는 시점에 호출할 수 있어 가능합니다. 여기 이 방법으로 정렬 링크드 리스트를 구현한 클래스입니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ConcurrentSortedList</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Node</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token class-name">Node</span><span class="token plain"> prev</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token class-name">Node</span><span class="token plain"> next</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token class-name">ReentrantLock</span><span class="token plain"> lock </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ReentrantLock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token class-name">Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token class-name">Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Node</span><span class="token plain"> prev</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Node</span><span class="token plain"> next</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">prev </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> prev</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">next </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> next</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Node</span><span class="token plain"> head</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Node</span><span class="token plain"> tail</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">ConcurrentSortedList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    head </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> tail </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    head</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">next </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tail</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> tail</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">prev </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> head</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">insert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token class-name">Node</span><span class="token plain"> current </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> head</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    current</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">lock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token class-name">Node</span><span class="token plain"> next </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> current</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">next</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        next</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">lock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">next </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> tail </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> next</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            </span><span class="token class-name">Node</span><span class="token plain"> node </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> current</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> next</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            next</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">prev </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            current</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">next </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> current</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">unlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        current </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> next</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        next </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> current</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">next</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> next</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">unlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>insert()</code> 메서드는 새로 삽입되는 항목보다 작은 엔트리가 나올때까지 찾으며 리스트가 언제나 정렬된 상태를 보장합니다.
이를 찾으면 새 노드를 직전에 삽입해 해결합니다.</p><p>삽입 뿐만 아니라 리스트에 안전하게 자리잡을 수 있게 다른 연산도 지원합니다.
여기 리스트에 얼마나 많은 개체가 있는지 세는 메서드가 있습니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Node</span><span class="token plain"> current </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tail</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> count </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">current</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">prev </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> head</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">ReentrantLock</span><span class="token plain"> lock </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> current</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">lock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">++</span><span class="token plain">count</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            current </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> current</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">prev</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">unlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> count</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Global Ordering 규착을 깨지 않나요?</summary><div><div class="collapsibleContent_i85q"><p><code>ConcurrentSortedList</code>의 <code>insert()</code>는 리스트의 head부터 tail로 찾습니다.
<code>size()</code>는 리스트의 tail부터 head로 움직입니다.
이게 "항상 전역으로 고정된 순서대로 여러 락을 얻는" 규칙을 위배하지 않나요?</p><p>그렇지 않습니다. <code>size()</code> 메서드는 절대 <em>여러</em> 락을 잡고있지 않습니다.
한번에 하나의 락 이상으로 갖지 않기 때문입니다.</p></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="condition-variables">Condition Variables<a href="#condition-variables" class="hash-link" aria-label="Direct link to Condition Variables" title="Direct link to Condition Variables">​</a></h3><p>동시성 프로그래밍은 종종 어떤 일이 일어나길 기다리는것에 연관됩니다.
아마 큐에서 개체를 제거하기 전에 비지 않은 상태인지 기다려야 할 것입니다.
또는 버퍼에 개체를 추가할 때 가능한 공간이 있는지 기다려야 합니다.
이런 상황을 해결하기 위해 컨디션 변수가 디자인되어야 합니다.</p><p>컨디선 변수를 효과적으로 사용하기 위해, 특별한 패턴을 따라야 합니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">ReentrantLock</span><span class="token plain"> lock </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ReentrantLock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Condition</span><span class="token plain"> condition </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">newCondition</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">lock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">«condition is </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain">»</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        condition</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">await</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    «use shared resources»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">unlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>컨디션 변수는 락과 관련있습니다. 그리고 스레드는 조건이 가능할 때까지 락을 쥐고 있어야 합니다.
락을 쥐고 있는 동안 조건이 참인지 확인합니다.
조건이 참이 되면 하려고 하는 일을 하고 락을 해제합니다.</p><p>만약 조건이 참이 아니라면 <code>await()</code>를 호출해 <em>자동으로</em> 락을 해제하고 컨디션 변수를 블록합니다.
다른 스레드의 관점에서, 연산이 일어났는지 아닌지 둘중 하나인 하나의 연산으로 보이고, 절반만 된 상태가 없기 때문에, 연산이 <em>atomic</em> 하다고 할 수 있습니다.</p><p>다른 스레드가 <code>signal()</code> 또는 <code>signalAll()</code>을 호출해 조건이 참이 됨을 알리면,
<code>await()</code>는 블록을 해제하고 자동으로 락을 다시 요구합니다.
중요한 점은 <code>await()</code>이 리턴하는 시점입니다. 이는 단지 조건이 참 <em>일수도</em> 있다는걸 나타내기 때문입니다.
이게 <code>await()</code>이 루프 안에서 불리는 이유입니다. 다시 돌아가 조건이 참인지 확인하고 <code>await()</code>을 필요하면 다시 호출해야 합니다.</p><p>이는 "식사하는 철학자" 문제에 다른 해결책을 제시합니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Philosopher</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">boolean</span><span class="token plain"> eating</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Philosopher</span><span class="token plain"> left</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Philosopher</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">ReentrantLock</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Condition</span><span class="token plain"> condition</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Random</span><span class="token plain"> random</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Philosopher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ReentrantLock</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        eating </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">table </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        condition </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">newCondition</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        random </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setLeft</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Philosopher</span><span class="token plain"> left</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">left </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> left</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setRight</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Philosopher</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">right </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token function" style="color:#d73a49">think</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token function" style="color:#d73a49">eat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">InterruptedException</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">think</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">InterruptedException</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">lock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            eating </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            left</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">condition</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">signal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            right</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">condition</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">signal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">unlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">eat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">InterruptedException</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">lock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">left</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">eating </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">eating</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                condition</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">await</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            eating </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">unlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이 해결책은 <code>chopstick</code>이 아닌 <code>table</code> 하나의 락을 사용하여 다릅니다.
철학자가 양 옆의 식사하는 이웃과 동시에 식사할 수 없다는 사실을 이용합니다.
다른말로, 배고픈 철학자는 이 조건을 기다립니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">left</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">eating </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">eating</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>철학자가 배고프면 먼저 식탁에 락을 걸어 다른 철학자가 상태 변화를 할 수 없게 합니다.
그리고 이웃이 먹고있는지 확인합니다. 그렇지 않다면 먹기 시작하고 식탁의 락을 해제합니다.
먹는중이였다면 (식탁의 락을 해제하는) <code>await()</code>을 호출합니다.</p><p>철학자가 식사를 끝내고 생각을 하길 원한다면, 먼저 식탁에 락을 걸고 식사중이지 않음을 설정합니다.
그리고 이웃에게 신호를 보내 식사가 가능함을 알리고 식탁의 락을 해제합니다.
만약 이웃이 현재 대기중이였으면, 깨어나 식탁의 락을 요구하고, 그들이 먹을 수 있는 상태인지 살펴볼 것입니다.</p><p>비록 살펴본 해결책중 코드가 더 복잡하지만, 더 나은 동시성을 제공합니다.
이전 해결책은 다른 철학자들이 하나의 젓가락을 가지고 다른사람을 기다리느라 한명만 식사를 하는 경우가 종종 있었습니다.
이 해결책으로는 이론적으로 먹을 수 있는 상태라면(이웃이 먹고있지 않을 때) 먹을 수 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="atomic-variables">Atomic Variables<a href="#atomic-variables" class="hash-link" aria-label="Direct link to Atomic Variables" title="Direct link to Atomic Variables">​</a></h3><p><a href="/posts/concurrency-models-2#our-first-lock">day 1</a>에서 <code>increment()</code> 메서드에 동기화를 사용해 멀티스레드 카운터를 고정시켰습니다.
이제 <code>java.util.concurrent.atomic</code>이 더 좋은 옵션을 주는 것을 보여줍니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Counting</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">InterruptedException</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">AtomicInteger</span><span class="token plain"> counter </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">AtomicInteger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">CountingThread</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">for</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">++</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    counter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">incrementAndGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">CountingThread</span><span class="token plain"> t1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">CountingThread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">CountingThread</span><span class="token plain"> t2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">CountingThread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> t2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> t2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">counter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>AtomicInteger</code>의 <code>incrementAndGet()</code> 메서드는 기능적으로 <code>++count</code>와 같습니다.
(<code>count++</code>와 같은 <code>getAndIncrement()</code> 또한 제공합니다)
<code>++count</code>와 다르게 이는 원자성을 가집니다.</p><p>락 대신에 atomic 변수를 사용하는건 많은 이점이 있습니다.
첫째로 락을 필요할때 요구하는 것을 잊지 않습니다.
예를들어, <code>getCount()</code>가 동기화되지 않아 발생한 <code>Counter</code>의 memory-visible 문제가 이 코드에서 발생할 수 없습니다.
둘째로 어떤 락도 관련되어있지 않기 때문에 atomic 변수를 데드락에 걸리게 하는 연산은 불가능합니다.
마지막으로, atomic 변수는 락이나 블록 없이 달성하는 <em>non-blocking</em>, <em>lock-free</em> 알고리즘의 기초입니다.
락이 들어간 프로그램이 다루기 어렵다고 생각하면, lock-free 코드를 짤 수 있을때까지 기다리세요.
다행이 <code>java.util.concurrent</code>는 lock-free 코드가 가능하고 만들어 고통 없이 이점을 얻을 수 있습니다.
이 클래스는 <a href="/posts/concurrency-models-4">day3</a>에서 다룹니다.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Volatile은 어떤가요?</summary><div><div class="collapsibleContent_i85q"><p>자바는 변수를 <em>volatile</em>로 표시해 읽고 쓰는 순서가 바뀌지 않게 보장합니다.
<a href="/posts/concurrency-models-2/#-mysterious-memory"><code>Puzzle</code></a>의 <code>answerReady</code>를 volatile로 만들어 해결할 수 있습니다.</p><p>Volatile은 동기화에 매우 약합니다.
예를들어 <code>count</code>를 volatile로 만들어도 <code>count++</code>가 atomic하게 동작하는것을 보장하지 않기 때문에,
<code>Counter</code>를 해결하는데 도움을 주지 않습니다.</p><p>최근에 고도로 최적화된 JVM은 락에 매우 적은 오버헤드를 지니고 volatile 변수를 사용하는게 맞는 경우는 적습니다.
<code>volatile</code> 사용을 고려하고 있다면 <code>java.util.concurrent.atomic</code> 클래스를 사용하는걸 먼저 고려해보세요.</p></div></div></details><h2 class="anchor anchorWithStickyNavbar_LWe7" id="day-2-wrap-up">Day 2 Wrap-Up<a href="#day-2-wrap-up" class="hash-link" aria-label="Direct link to Day 2 Wrap-Up" title="Direct link to Day 2 Wrap-Up">​</a></h2><p>day1에서 기본적으로 배운 것에 <code>java.util.concurrent.locks</code>와 <code>java.util.concurrent.atomic</code>에서 제공하는 더 세련되고 유연한 방법을 배웠습니다.
이 방법을 이해하는게 중요하지만, lock을 직접 사용해야 하는 예제를 day3에서 살펴볼 것입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-we-learned-in-day-2">What We Learned in Day 2<a href="#what-we-learned-in-day-2" class="hash-link" aria-label="Direct link to What We Learned in Day 2" title="Direct link to What We Learned in Day 2">​</a></h3><p><code>ReentrantLock</code>과 <code>java.util.concurrent.atomic</code>이 다음에 나오는 것을 할 수 있어 고유 락의 제한을 극복하는 것을 확인했습니다.  </p><ul><li>락을 요구하는 중에 interrupt</li><li>락을 요구하는데 시간제한</li><li>어떤 순서로든 락 요구 및 해제</li><li>중재를 위한 조건이 참이 될때까지 기다리는 컨디션 변수</li><li>atomic 변수를 사용해 락 사용을 완전히 회피</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="day-2-self-study">Day 2 Self-Study<a href="#day-2-self-study" class="hash-link" aria-label="Direct link to Day 2 Self-Study" title="Direct link to Day 2 Self-Study">​</a></h3><p>찾아보기  </p><ul><li>ReentrantLock supports a fairness parameter. What does it mean for a lock to be “fair”? Why might you choose to use a fair lock? Why might you not?</li><li>What is ReentrantReadWriteLock? How does it differ from ReentrantLock? When might you use it?</li><li>What is a “spurious wakeup”? When can one happen and why doesn’t a well-written program care if one does?</li><li>What is AtomicIntegerFieldUpdater? How does it differ from AtomicInteger? When might you use it?</li></ul><p>실습  </p><p>What would happen if the loop within the “dining philosophers” implementation that uses condition variables was replaced with a simple if statement? What failure modes might you see? What would happen if the call to signal() was replaced by signalAll()? What problems (if any) would this cause?</p><p>Just as intrinsic locks are more limited than ReentrantLock, they also support a more limited type of condition variable. Rewrite the dining philosophers to use an intrinsic lock plus the wait() and notify() or notifyAll() methods. Why is it less efficient than using ReentrantLock?</p><p>Write a version of ConcurrentSortedList that uses a single lock instead of hand-over-hand locking. Benchmark it against the other version. Does hand-over-hand locking provide any performance advantage? When might it be a good choice? When might it not?</p>]]></content:encoded>
            <category>tech</category>
            <category>parallel computing</category>
            <category>distributed computing</category>
            <category>java</category>
        </item>
        <item>
            <title><![CDATA[7가지 동시성 모델(스레드와 락) 상호 배제와 메모리 모델]]></title>
            <link>https://jwher.github.io/posts/concurrency-models-2</link>
            <guid>https://jwher.github.io/posts/concurrency-models-2</guid>
            <pubDate>Wed, 14 Dec 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Seven Concurrency Models in Seven Weeks - Chapter2 Day1]]></description>
            <content:encoded><![CDATA[<p><a href="/posts/concurrency-models-2"><img loading="lazy" alt="concurrency" src="/assets/images/ford-model-t-48420c1c3827d5d9e882499e160fc44f.jpeg" width="540" height="360" class="img_ev3q"></a><br>
<em>이 글은 Paul Butcher의 Seven Concurrency Models in Seven Weeks을 읽고 작성했습니다</em>  </p><p>Threads-and-locks programming is like a Ford Model T</p><h1>The Simplest Thing That Could Possibly Work</h1><p>Thread와 Lock은 하드웨어가 실제로 동작하는 것에 조금 더 형식을 부여한 것입니다.
이는 너무 간단하기 때문에, 강한 강점과 강한 약점을 같게 합니다.</p><p>Thread와 Lock은 목표를 달성하기에 작은 제약조건만 요구합니다.
하지만 실력없는 프로그래머한텐 처음부터 제대로 작동하게 만들기 어렵고,
심지어 관리하기 힘들게 만들어 거의 어떤 도움도 주지 못합니다.</p><p>이 글에선 자바를 통해 threads-and-locks 프로그래밍을 할 것입니다.
하지만, 원리는 thread를 지원하는 어떤 언어든 적용 가능합니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="day-1-mutual-exclusion-and-memory-models">Day 1: Mutual Exclusion and Memory Models<a href="#day-1-mutual-exclusion-and-memory-models" class="hash-link" aria-label="Direct link to Day 1: Mutual Exclusion and Memory Models" title="Direct link to Day 1: Mutual Exclusion and Memory Models">​</a></h2><p>동시성 프로그래밍을 전혀 해보지 않은게 아니라면,
당신은 <em>mutual exclusion</em>에 대한 컨셉에 익숙할 것입니다.
lock을 사용하여 한 스레드만 데이터에 접근 가능합니다.</p><p>또한, mutual exclusion이 <em>race conditions</em>와 <em>deadlocks</em>로 잘못될 수 있다는 것에 익숙할 것입니다.
이것에 대해 더 자세히 다룰 것이지만, 더 기본적인 shared memory를 다루는데에 더 걱정해야 합니다.
race condition과 deadlock이 이상한 행동을 보일 수 있다고 생각하면,
shared memory가 얼마나 기괴해질 수 있는지 기다려보세요.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-thread">Creating a Thread<a href="#creating-a-thread" class="hash-link" aria-label="Direct link to Creating a Thread" title="Direct link to Creating a Thread">​</a></h3><p>자바의 기본적인 동시성 단위는 <em>thread</em>입니다.
이름에서 알 수 있다시피 하나의 스레드 제어를 대표합니다.
스레드는 다른 스레드들과 공유메모리를 통해 통신합니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">HelloWorld</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">InterruptedException</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Thread</span><span class="token plain"> myThread </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Hello from new thread"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        myThread</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">yield</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Hello from main thread"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        myThread</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이 코드는 하나의 스레드 인스턴스를 생성하고 시작합니다.
이 시점에서, 스레드의 <code>run()</code> 메소드가 남은 <code>main()</code>과 함께 동시적으로 실행됩니다.
마지막으로 <code>join()</code>이 모든 스레드가 종료될 때 까지 기다립니다.
(이는 <code>run()</code>이 return하면 수행됩니다.)</p><p>다음 결과를 얻거나</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Hello from main thread</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello from new thread</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>대신 이런 결과를 얻을 수 있습니다.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Hello from new thread</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello from main thread</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이는 어떤 스레드가 <code>println()</code>을 받는가에 따라 다릅니다.
이런 타이밍에 대한 의존성은 멀티스레드 프로그래밍을 어렵게 만드는 원인입니다.
코드를 한번 실행시켰을 때 동작이 일관성을 보장한다고 할 수 없기 때문입니다.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>왜 `Thread.yield`를 사용하나요?</summary><div><div class="collapsibleContent_i85q"><p>Java documentation에 따르면 <code>yeild()</code>는</p><blockquote><p>a hint to the scheduler that the current thread is willing to yield its current use of a processor.</p></blockquote><p>이 호출이 없다면, 새 스레드의 시작 오버헤드 때문에 메인 스레드가 거의 확정적으로 <code>println()</code>을 처음으로 받을 수 있습니다.
(하지만, 보장되는것은 아닙니다)</p><p>이를 <code>Thread.sleep(1)</code>로 바꾸면 어떻게 될까요?</p></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="our-first-lock">Our First Lock<a href="#our-first-lock" class="hash-link" aria-label="Direct link to Our First Lock" title="Direct link to Our First Lock">​</a></h3><p>여러 스레드가 공유 메모리에 접근하면, 서로의 발을 밟을 수 있습니다.
<em>lock</em>을 사용하여 한 시점에 한 스레드만 접근가능하게 하여 <em>mutual exclusion(상호배제)</em>함으로서 회피할 수 있습니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Counting</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">InterruptedException</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Counter</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> count </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">increment</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">++</span><span class="token plain">count</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getCount</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> count</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Counter</span><span class="token plain"> counter </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Counter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">CountingThread</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">for</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">++</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    counter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">increment</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">CountingThread</span><span class="token plain"> t1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">CountingThread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">CountingThread</span><span class="token plain"> t2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">CountingThread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> t2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> t2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">counter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getCount</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이 코드를 돌린다면, 매번 다른 값을 얻을 것입니다.
이는 연산할 때 타이밍이 연관되면서, 두 스레드간 <code>Counter</code>의 <code>count</code>멤버에 <em>race condition</em>이 발생했기 때문입니다.</p><p>이런 결과에 놀랐다면, 자바 컴파일러가 <code>++count</code>에서 생성하는 바이트코드를 생각해 봅시다.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">getfield #2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">iconst_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">iadd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">putfield #2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>JVM 바이트코드에 익숙하지 않더라도 <code>getfield</code>에서 <code>count</code> 값을 가져오고
<code>iconst_1</code>는 따라오는 <code>iadd</code>를 통해 1을 더합니다.
<code>putfield</code>는 다시 값을 <code>count</code>에 작성하게 됩니다.
이 패턴은 <em>read-modify-write</em>로 흔히 알려져 있습니다.</p><p>해결법은 <code>count</code>에 <em>synchronize</em> 엑세스를 주는 것입니다.
그 방법 중 하나는 모든 자바 객체에 고유 락(intrinsic lock)을 사용하며 <code>increment()</code>를 동기화 시키는 것입니다.
(<em>mutex</em>, <em>monitor</em>, <em>critical section</em>으로도 들어봤을 것입니다.)</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Counter</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> count </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">   </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">synchronized</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">increment</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">++</span><span class="token plain">count</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getCount</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> count</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이제 <code>increment()</code>는 호출할때 <code>Counter</code>의 오브젝트 락을 요구하고, 반환할때 해제합니다.
따라서 한 스레드만 한 때에 함수 바디를 실행할 수 있습니다.
다른 스레드가 호출하면 락이 해제될 때까지 <em>block</em> 됩니다.
<a href="/posts/concurrency-models-3#atomic-variables">(이후에 <code>java.util.concurrent.atomic</code> 패키지가 락을 사용하는 대신 좋은 대안을 제공하는것을 보입니다)</a></p><p>매번 20000이라는 결과를 얻기에 이제 충분합니다!
하지만, 이 코드에도 약간의 버그가 남아있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mysterious-memory">Mysterious Memory<a href="#mysterious-memory" class="hash-link" aria-label="Direct link to Mysterious Memory" title="Direct link to Mysterious Memory">​</a></h3><p>이 코드는 어떤 결과를 낼까요?</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Puzzle</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">boolean</span><span class="token plain"> answerReady </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> answer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token plain"> t1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            answer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">42</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            answerReady </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token plain"> t2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">answerReady</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"The meaning of life is: "</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> answer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"I don't know the answer"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">InterruptedException</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        t1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> t2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        t1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> t2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>"race condition"을 생각하고 계셨다면, 정답입니다!
어떤 스레드가 먼저 실행될지 순서에 따라 meaning of life을 알 수 있을지 다릅니다.
하지만 우리가 볼 수 있는 다른 결과가 있습니다.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">The meaning of life is: 0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>어떻게 <code>answer</code>가 <code>answerReady</code>가 <code>true</code>가 되기전에 0일 수 있을까요?
이는 6-7번째 줄에서 우리에 발밑에서 일어나는 일 때문입니다.</p><ul><li>컴파일러가 코드를 재정렬하며 정적으로 최적화하게 허용되었습니다</li><li>JVM이 코드를 재정렬하여 동적으로 최적화하게 허용되었습니다.</li><li>하드웨어가 그것들을 재정렬하여 성능을 향상시킬 수 있게 허용되었습니다.</li></ul><p>가끔 우리 스레드에 보이지 않는 것들이 영향을 미치기도 합니다. <code>run()</code>을 다시 작성했다고 상상해 봅시다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">answerReady</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"The meaning of life is: "</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> answer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이 프로그램은 <code>answerReady</code>가 <code>true</code>가 되지 않기 때문에 절대 끝나지 않을 수 있습니다.</p><p>불행하게도 최근의 성능 향상은 이런 최적화를 통해 이루어졌기 때문에, 이 결과를 다뤄야만 합니다.
확실하게 모든것에 자유로울 순 없지만, 어떤것에 의지하고 의지하지 말아야 할지 알아야 합니다.
따라서 자바 메모리 모델이 들어오게 되었습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="memory-visibility">Memory Visibility<a href="#memory-visibility" class="hash-link" aria-label="Direct link to Memory Visibility" title="Direct link to Memory Visibility">​</a></h3><p>자바 메모리 모델은 하나의 스레드를 통해 메모리 변화가 일어나면 다른 스레드에 <em>visible</em> 하도록 정의되었습니다. <a href="#1java-memory-model">[1]</a>
결론은 읽기 쓰기에 synchronization을 사용하지 않는 한 보장할 수 없음을 나타냅니다.</p><p>중요한 점은 두 스레드 모두 synchronization이 필요하다는 것을 쉽게 놓친다는 것입니다.</p><p>멀티스레드 프로그램이 잘못될 수 있는 일반적인 두 방법인
race condition과 memory visibility를 살펴보았으니 세번째로 deadlock을 살펴봅시다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="multiple-locks">Multiple Locks<a href="#multiple-locks" class="hash-link" aria-label="Direct link to Multiple Locks" title="Direct link to Multiple Locks">​</a></h3><p>앞선 단락을 다 읽었다면 멀티스레드 세계에서 모든 메소드가 동기화되어야 한다고 생각한다면 용서받을 것입니다.
하지만 이는 쉽지 않습니다.</p><p>첫째로 끔찍하게 비효율적입니다.
모든 메소드가 동기화된다면 대부분의 시간을 block되는데 사용할 것입니다.
하지만 이는 걱정 중 하나일 뿐입니다.
하나 이상의 락이 있다면 스레드가 데드락에 걸릴 기회를 만드는 것입니다.</p><p>학술논문에서 동시성에 대해 자주 사용되는 "식사하는 철학자" 문제를 통해 deadlock을 보일 것입니다.
다섯명의 철학자가 원탁에 앉은 것을 상상해 보세요.
테이블에는 5개의 젓가락(10개가 아닙니다)이 다음과 같이 놓여있습니다.</p><p><img loading="lazy" alt="dinning-philosophers" src="/assets/images/dinning-philosophers-dd1641278f6fa0b0efa9c7af5078101b.png" width="414" height="372" class="img_ev3q"></p><p>철학자들은 배고프다고 생각할 수 있고, 배고프면 양쪽의 젓가락을 잡아 잠시 식사합니다.
다 먹으면 젓가락을 다시 내려놓습니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Philosopher</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Chopstick</span><span class="token plain"> left</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Random</span><span class="token plain"> random</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Philosopher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Chopstick</span><span class="token plain"> left</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Chopstick</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">left </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> left</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">right </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    random </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">while</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">random</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">nextInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">// Think for a while</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">synchronized</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">left</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// Grab left chopstick </span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">synchronized</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">right</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">                 </span><span class="token comment" style="color:#999988;font-style:italic">// Grab right chopstick </span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">random</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">nextInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Eat for a while</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">InterruptedException</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>다섯명을 동시에 설정하면, 몇시간정도 행복하게 작동하다 어느 순간 모두 멈추게 됩니다.
잠깐 생각해보면, 모든 철학자가 같은 때에 먹기를 결심할때 왼쪽의 젓가락을 잡고
오른쪽을 잡으려는 순간, 모두가 한 젓가락을 잡고 자신의 오른쪽에 젓가락을 기다리느라 멈춰있게 됨을 알 수 있습니다.
Deadlock</p><p>행복하게도 데드락에 걸리지 않도록 보장하는 규칙이 있습니다.
항상 전역으로 고정된 순서대로 여러 락을 얻는 것입니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Philosopher</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Chopstick</span><span class="token plain"> first</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> second</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Random</span><span class="token plain"> random</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Philosopher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Chopstick</span><span class="token plain"> left</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Chopstick</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">   </span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">left</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getId</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getId</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">     first </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> left</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> second </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">     first </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> second </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> left</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    random </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">while</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">random</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">nextInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">// Think for a while</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">       </span><span class="token keyword" style="color:#00009f">synchronized</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">first</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">                   </span><span class="token comment" style="color:#999988;font-style:italic">// Grab first chopstick </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">         </span><span class="token keyword" style="color:#00009f">synchronized</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">second</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// Grab second chopstick </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">random</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">nextInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Eat for a while</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">InterruptedException</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>left</code>와 <code>right</code> 젓가락을 잡는 대신, <code>first</code>와 <code>second</code>를 젓가락 id 순서대로 잡으면서 락 없이 행복하게 계속될 수 있습니다.
<em>(젓가락 1번과 5번 사이에 앉은 사람이 왼쪽 대신에 오른쪽을 먼저 살펴보며 해결됩니다)</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-perils-of-alien-methods">The Perils of Alien Methods<a href="#the-perils-of-alien-methods" class="hash-link" aria-label="Direct link to The Perils of Alien Methods" title="Direct link to The Perils of Alien Methods">​</a></h3><p>큰 프로그램은 종종 <em>listeners</em>를 만들어 모듈과 디커플링합니다.
여기에 예제로 <em>ProgressListeners</em>가 등록될 수 있는 클래스가 있습니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Downloader</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">InputStream</span><span class="token plain"> in</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">OutputStream</span><span class="token plain"> out</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">ArrayList</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">ProgressListener</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> listeners</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Downloader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">URL</span><span class="token plain"> url</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> outputFilename</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">IOException</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        in </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> url</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">openConnection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getInputStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        out </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">FileOutputStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">outputFilename</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        listeners </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ArrayList</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">ProgressListener</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">synchronized</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">addListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ProgressListener</span><span class="token plain"> listener</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        listeners</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">listener</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">synchronized</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">removeListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ProgressListener</span><span class="token plain"> listener</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        listeners</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">remove</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">listener</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">synchronized</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">updateProgress</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ProgressListener</span><span class="token plain"> listener</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> listeners</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">           listener</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">onProgress</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">n</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> n </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> total </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">byte</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> buffer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">byte</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1024</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">while</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">n </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> in</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">buffer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">buffer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                total </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token function" style="color:#d73a49">updateProgress</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">total</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">flush</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">IOException</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>addListener()</code>, <code>removeListener()</code>, <code>updateProgress()</code>가 모두 동기화되면서
여러개의 스레드가 다른 스레드의 발을 밟지 않고 호출될 수 있습니다.</p><p>문제는 <em>alien method</em>라 불리는 <code>updateProgress()</code> 입니다.
이 메소드는 아무것도 모르고, 다른 락을 요구하는 것을 포함해 모든 것을 할 수 있습니다.
따라서 우리는 두개의 락이 어떤 순서대로 요구해야하는지 알지 못한다는 것입니다.
이것은 우리가 방금 본 데드락을 이끌 수 있습니다.</p><p>유일한 해결 방법은, 락 없이 alien 메소드를 실행하는 것입니다.
이를 위해 <code>listener</code>의 <em>defensive copy</em>를 해야합니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">updateProgress</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">ArrayList</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">ProgressListener</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> listenersCopy</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">synchronized</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">       listenersCopy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ArrayList</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">ProgressListener</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">listeners</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">clone</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ProgressListener</span><span class="token plain"> listener</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> listenersCopy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        listener</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">onProgress</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">n</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이 변경은 일석이조의 효과를 가집니다.
락 없이 alien 메소드를 부를 수 있게 해주고 락을 들고있는 시간을 최소화시켜줍니다.
필요 이상으로 락을 들고있으면 성능 하락과과 데드락의 위험성을 부릅니다.
또한, 이 변경은 동시성과 관련 없는 다른 버그를 고칩니다.
리스너는 <code>removeListener()</code>를 <code>onProgress()</code> 메소드 실행 중에 <code>listner</code>의 복사 없이 호출할 수 있습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="day1-wrap-up">Day1 Wrap-Up<a href="#day1-wrap-up" class="hash-link" aria-label="Direct link to Day1 Wrap-Up" title="Direct link to Day1 Wrap-Up">​</a></h2><p>자바의 멀티스레드의 기초 코드를 다뤘습니다.
다음에서는 더 나은 선택을 제공하는 표준 라이브러리를 살펴볼 것입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-we-learned-in-day-1">What We Learned in Day 1<a href="#what-we-learned-in-day-1" class="hash-link" aria-label="Direct link to What We Learned in Day 1" title="Direct link to What We Learned in Day 1">​</a></h3><p>자바에서 상호 배제 실행을 위해, 모든 자바 객체에 포함된 락을 사용한 스레드를 만드는 법을 다뤘습니다.
또한 스레드와 락에서 세가지 주요 위험인 race conditions, deadlock, and memory visibility를 보았습니다.
그리고 이를 피하기 위한 방법에 대해 논의했습니다.</p><ul><li>Synchronize all access to shared variables.</li><li>Both the writing and the reading threads need to use synchronization.</li><li>Acquire multiple locks in a fixed, global order.</li><li>Don’t call alien methods while holding a lock.</li><li>Hold locks for the shortest possible amount of time.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="day-1-self-study">Day 1 Self-Study<a href="#day-1-self-study" class="hash-link" aria-label="Direct link to Day 1 Self-Study" title="Direct link to Day 1 Self-Study">​</a></h3><p>찾아보기  </p><ul><li>Check out William Pugh’s “Java memory model” website.</li><li>Acquaint yourself with the JSR 133 (Java memory model) FAQ.</li><li>What guarantees does the Java memory model make regarding initialization safety? Is it always necessary to use locks to safely publish objects between threads?</li><li>What is the double-checked locking anti-pattern? Why is it an anti-pattern?</li></ul><p>실습  </p><p>Experiment with the original, broken “dining philosophers” example.
Try modifying the length of time that philosophers think and eat and the number of philosophers.
What effect does this have on how long it takes until deadlock?
Imagine that you were trying to debug this and wanted to increase the likelihood of reproducing the deadlock—what would you do?</p><p>(Hard) Create a program that demonstrates writes to memory appearing to be reordered in the absence of synchronization.
This is difficult because although the Java memory model allows things to be reordered,
most simple examples won’t be optimized to the point of actually demonstrating the problem.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1java-memory-model"><a href="http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4" target="_blank" rel="noopener noreferrer">[1]Java Memory Model</a><a href="#1java-memory-model" class="hash-link" aria-label="Direct link to 1java-memory-model" title="Direct link to 1java-memory-model">​</a></h3>]]></content:encoded>
            <category>tech</category>
            <category>parallel computing</category>
            <category>distributed computing</category>
            <category>java</category>
        </item>
        <item>
            <title><![CDATA[7가지 동시성 모델(소개)]]></title>
            <link>https://jwher.github.io/posts/concurrency-models-1</link>
            <guid>https://jwher.github.io/posts/concurrency-models-1</guid>
            <pubDate>Mon, 12 Dec 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Seven Concurrency Models in Seven Weeks - Chapter1]]></description>
            <content:encoded><![CDATA[<p><a href="/posts/concurrency-models-1"><img loading="lazy" alt="concurrency" src="/assets/images/seven-plate-4b5359f57c5a2fed7996002037f5fcff.png" width="456" height="706" class="img_ev3q"></a><br>
<em>이 글은 Paul Butcher의 Seven Concurrency Models in Seven Weeks을 읽고 작성했습니다</em>  </p><p>As Amdahl’s law starts to eclipse Moore’s law, a transition from object-oriented programming to concurrency-oriented programming is taking place.</p><h1>ch1. introduction</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="concurrent-or-parallel">Concurrent or Parallel?<a href="#concurrent-or-parallel" class="hash-link" aria-label="Direct link to Concurrent or Parallel?" title="Direct link to Concurrent or Parallel?">​</a></h2><p><em>통상 Concurrent는 동시성, Parallel은 병렬성으로 해석합니다</em></p><p>As Rob Pike puts it,</p><blockquote><p>Concurrency is about dealing with lots of things at once. Parallelism is about doing lots of things at once.</p></blockquote><p>concurrency는 여러개를 한번에 다루는것, parallel은 여러개가 한때에 진행되는 것을 의미합니다.</p><blockquote><p>수업에서 학생이 읽는것을 들으면서, 반을 조용히시키고, 질문을 하는것은 concurrent 합니다.
만약, 보조 선생님이 한명 추가되어 같은 일을 하면 concurrent하고 parallel 하다고 할 수 있습니다.</p></blockquote><p>concurrency나 parallelism은 전통적인 threads와 locks이 직접적인 parallelism을 지원하지 않기때문에 더 헷갈립니다.
멀티코어를 쓰레드와 락을 사용하고 싶다면, concurrent 프로그램을 작성해 parallel 하드웨어에서 돌리는 방법만 선택할 수 있습니다.</p><p>concurrent 프로그램은 종종 <em>nondeterministic(비결정적)</em>하기 때문에 불행합니다.
하지만 parallelism은 비결정적인 것을 도입하지 않아도 됩니다. 예를들어, array가 가진 숫자가 두배가 되는것은 비결정적인 것이 아닙니다. 프로그래밍 언어들은 비결정적이라는 공포를 도입하지 않아도 parallelism을 위해 특별한 지원을 할 수 있습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="병렬-아키텍처">병렬 아키텍처<a href="#병렬-아키텍처" class="hash-link" aria-label="Direct link to 병렬 아키텍처" title="Direct link to 병렬 아키텍처">​</a></h2><p><em>Pararell Architecture</em>  </p><p>parallelism을 멀티 코어로 생각할 수 있지만, 현대 컴퓨터에선 parallel을 다양한 레벨에서 수행합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="비트-레벨">비트 레벨<a href="#비트-레벨" class="hash-link" aria-label="Direct link to 비트 레벨" title="Direct link to 비트 레벨">​</a></h3><p>32bit 컴퓨터가 왜 8bit 보다 빠를까요? 8bit 컴퓨터가 32bit 숫자 두개를 더할려면 8bit 연산 연속이 필요할 것입니다. 반대로, 32bit가 8bit 숫자 두개를 더하려면 32bit에 포함된 4byte 각각으로 계산해 동시에 처리할 수 있습니다.</p><p>이렇게 64bit 아키텍쳐까지 왔지만, 이런 병렬성엔 제한이 있기 때문에 128bit 컴퓨터를 조만간 볼 순 없을것입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="명령어-레벨">명령어 레벨<a href="#명령어-레벨" class="hash-link" aria-label="Direct link to 명령어 레벨" title="Direct link to 명령어 레벨">​</a></h3><p>pipelining, out-of-order execution, speculative excution으로 현대 cpu는 높은 병렬성을 지닙니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="데이터-병렬성">데이터 병렬성<a href="#데이터-병렬성" class="hash-link" aria-label="Direct link to 데이터 병렬성" title="Direct link to 데이터 병렬성">​</a></h3><p>SIMD, for “single instruction, multiple data”
이미지 처리에서 많이 사용, 현대의 GPU는 엄청나게 강력한 data-parallel 프로세서 입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="작업-레벨">작업 레벨<a href="#작업-레벨" class="hash-link" aria-label="Direct link to 작업 레벨" title="Direct link to 작업 레벨">​</a></h3><p>가장 많은 사람들이 생각하는 병렬처리 단계입니다. 멀티 프로세서로 이루어집니다.
프로그래머의 관점으로 보면, 가장 구분되는 특징은 메모리 모델입니다.
공유 메모리 구조를 가지는가, 분산 메모리 구조를 가지는가의 차이가 있습니다.</p><p><img loading="lazy" alt="shared memory" src="/assets/images/shared_memory-ccbb9e45ca6de69a80e677596262853f.png" width="1314" height="844" class="img_ev3q"><br>
<em>공유메모리를 통한 병렬성</em>  </p><br><p><img loading="lazy" alt="distributed memory" src="/assets/images/distributed_memory-cd7729d3e35f3e36c635eaaa9c6a85b8.png" width="1302" height="584" class="img_ev3q"><br>
<em>분산메모리를 통한 병렬성</em></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="동시성">동시성<a href="#동시성" class="hash-link" aria-label="Direct link to 동시성" title="Direct link to 동시성">​</a></h2><p><em>Concurrency</em>  </p><p>동시성을 사용하면 더 responsive(반응적)하고, fault tolerant(오류 무결), efficient(효율적), simple(단순)합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="concurrent-software-for-a-concurrent-world">Concurrent Software for a Concurrent World<a href="#concurrent-software-for-a-concurrent-world" class="hash-link" aria-label="Direct link to Concurrent Software for a Concurrent World" title="Direct link to Concurrent Software for a Concurrent World">​</a></h3><p><em>Concurrency is the key to responsive systems.</em>  </p><p>The world is concurrent, and so should your software be if it wants to interact effectively.</p><blockquote><p>By downloading files in the background, you avoid frustrated users having to stare at an hourglass cursor.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="distributed-software-for-a-distributed-world">Distributed Software for a Distributed World<a href="#distributed-software-for-a-distributed-world" class="hash-link" aria-label="Direct link to Distributed Software for a Distributed World" title="Direct link to Distributed Software for a Distributed World">​</a></h3><p><em>distributing software helps it handle failure.</em>  </p><p>Sometimes geographical distribution is a key element of the problem you’re solving.</p><blockquote><p> You might locate half your servers in a data center in Europe and the others in the United States, so that a power outage at one site doesn’t result in global downtime.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="resilient-software-for-an-unpredictable-world">Resilient Software for an Unpredictable World<a href="#resilient-software-for-an-unpredictable-world" class="hash-link" aria-label="Direct link to Resilient Software for an Unpredictable World" title="Direct link to Resilient Software for an Unpredictable World">​</a></h3><p><em>Concurrency enables resilient, or fault-tolerant</em>  </p><p>Independence is important because a failure in one task should not be able to bring down another.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="simple-software-in-a-complex-world">Simple Software in a Complex World<a href="#simple-software-in-a-complex-world" class="hash-link" aria-label="Direct link to Simple Software in a Complex World" title="Direct link to Simple Software in a Complex World">​</a></h3><p><em>it might be hard to believe, but a concurrent solution can be simpler and clearer</em></p><p>The extra work required to translate from the concurrent problem to its sequential solution clouds the issue.
You can avoid this extra work by creating a solution with the same structure as the problem:
rather than a single complex thread that tries to handle multiple tasks when they need it, create one simple thread for each.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="일곱개의-모델">일곱개의 모델<a href="#일곱개의-모델" class="hash-link" aria-label="Direct link to 일곱개의 모델" title="Direct link to 일곱개의 모델">​</a></h2><ul><li>thread and locks</li><li>functional programming</li><li>the clojure way</li><li>actors</li><li>communicating sequential processes</li><li>data parallelism</li><li>the lambda architecture</li></ul><p>각 모델은 다른 장점을 지니고 있습니다. 앞으로의 챕터에서 다음 질문을 기억합시다.</p><ul><li>모델이 동시성 문제를 해결하는지, 병렬성 문제를 해결하는지, 둘다인지</li><li>어떤 병렬성 아키텍처를 타깃으로 하는지</li><li>모델이 탄력적이거나 지리학적으로 분산된 코드 작성을 제공하는지</li></ul>]]></content:encoded>
            <category>tech</category>
            <category>parallel computing</category>
            <category>distributed computing</category>
        </item>
        <item>
            <title><![CDATA[요구사항에 사용하는 RFC 키워드]]></title>
            <link>https://jwher.github.io/posts/requirement-levels</link>
            <guid>https://jwher.github.io/posts/requirement-levels</guid>
            <pubDate>Sun, 11 Dec 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Key words for use in RFCs to Indicate Requirement Levels]]></description>
            <content:encoded><![CDATA[<p><a href="/posts/requirement-levels"><img loading="lazy" alt="rfc" src="/assets/images/rfc-9328c23ba14ce24fad50e85c2798ee3e.jpeg" width="436" height="395" class="img_ev3q"></a><br>
<em>Key words for use in RFCs to Indicate Requirement Levels</em>  </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="request-for-comments">Request For Comments<a href="#request-for-comments" class="hash-link" aria-label="Direct link to Request For Comments" title="Direct link to Request For Comments">​</a></h2><p>RFC(Request for Comments) 문서는 "비평을 기다리는 문서"라는 의미로,
대부분 Internet Engineering Task Force(IETF)에서 관리되는
컴퓨터 네트워크 공학 등에서 인터넷 기술에 적용 가능한 새로운 연구, 혁신, 기법 등을 아우르는 메모를 나타냅니다.</p><p>대표적으로 웹의 기반이 되는 프로토콜인 HTTP 1.1은 <a href="https://www.rfc-editor.org/rfc/rfc2068" target="_blank" rel="noopener noreferrer">RFC-2068</a>에서 시작되었습니다.</p><p>RFC 편집자는 매 RFC 문서에 일련 번호를 부여합니다.
일단 일련 번호를 부여 받고 출판되면, RFC는 절대 폐지되거나 수정되지 않습니다.
만약 어떤 RFC 문서가 수정이 필요하다면, 저자는 수정된 문서를 다른 RFC 문서로 다시 출판해야 합니다.</p><p>변화하는 환경에 맞게 프로토콜이 업그레이드되어 기술 표준을 갱신할 경우,
RFC 는 명확성을 위해 기존 문서를 갱신하는게 아니라 새로운 RFC 를 만들고
수정된 문서는 상단에 Update, Obsoletes로 어떤 문서가 수정되고 무효화되었는지 표시합니다.</p><p>앞서 본 HTTP 1.1을 처음 제안한 RFC-2068 또한 <a href="https://www.rfc-editor.org/rfc/rfc2616" target="_blank" rel="noopener noreferrer">RFC-2616</a>와 같은 많은 문서로 업데이트 되었습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rfc-2119">RFC 2119<a href="#rfc-2119" class="hash-link" aria-label="Direct link to RFC 2119" title="Direct link to RFC 2119">​</a></h2><p>Key words for use in RFCs to Indicate Requirement Levels</p><p><strong>Abstract</strong>  </p><p>많은 표준 문서에서 요구사항을 나타내는데 여러 단어가 사용됩니다.
이 문자는 대문자로 작성되고, 문서의 시작에 다음 문구를 사용합니다.</p><blockquote><p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
"SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and
"OPTIONAL" in this document are to be interpreted as described in
<a href="https://www.rfc-editor.org/rfc/rfc2119" target="_blank" rel="noopener noreferrer">RFC 2119</a>.</p></blockquote><p>이 단어 사용의 간제성은 문서의 요구 레벨에 따라 바뀔 수 있습니다.</p><ol><li><p>MUST<br>
<!-- -->REQUIRED, SHALL</p></li><li><p>MUST NOT<br>
<!-- -->SHALL NOT</p></li><li><p>SHOULD<br>
<!-- -->RECOMMANDED</p></li><li><p>SHOULD NOT<br>
<!-- -->NOT RECOMMANDED</p></li><li><p>MAY<br>
<!-- -->OPTIONAL</p></li><li><p>Guidance in the use of these Imperatives<br>
<!-- -->이 용어는 조심스럽게 사용되어야 합니다.
각별히 MUST는 상호 운영에 진짜 필요한 것 또는 위협을 부를 수 있는 행동의 제한을 두기 위해 사용되어야 합니다.</p></li><li><p>Security Considerations<br>
<!-- -->이 용어는 주로 보안 구현사항에 자주 사용됩니다.</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p>RFC 뿐만 아니라 많은 공개 소프트웨어 문서에서 RFC 2119를 서두에 포함하고 있습니다.
가장 많이 인용되는 문서가 아닌가 싶네요.</p><p>심심할때 <a href="https://en.wikipedia.org/wiki/April_Fools%27_Day_Request_for_Comments" target="_blank" rel="noopener noreferrer">만우절날 작성된 RFC</a>를 읽는 재미가 있습니다.</p><p><del>HTTP Status code 중에 <code>418 I'm a teapot</code>이 있는걸 아시나요</del><br>
<a href="https://www.rfc-editor.org/rfc/rfc2324" target="_blank" rel="noopener noreferrer">RFC 2324 — Hyper Text Coffee Pot Control Protocol (HTCPCP/1.0).</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><p><a href="https://www.rfc-editor.org/rfc/rfc2119" target="_blank" rel="noopener noreferrer">RFC 2119</a><br>
<a href="https://en.wikipedia.org/wiki/Request_for_Comments" target="_blank" rel="noopener noreferrer">[Wiki]Request for Comments</a></p>]]></content:encoded>
            <category>tech</category>
        </item>
        <item>
            <title><![CDATA[머신러닝에 숨은 기술 부채]]></title>
            <link>https://jwher.github.io/posts/hidden-technical-debt</link>
            <guid>https://jwher.github.io/posts/hidden-technical-debt</guid>
            <pubDate>Mon, 24 Oct 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Hidden Technical Debt in Machine Learning Systems]]></description>
            <content:encoded><![CDATA[<p><a href="/posts/hidden-technical-debt"><img loading="lazy" alt="ML" src="/assets/images/brain-c15fbe157a97855d64b9f3581db6c8f6.jpg" width="1200" height="630" class="img_ev3q"></a><br>
<em>이 글은 Hidden Technical Debt in Machine Learning Systems을 읽고 번역한 내용입니다</em>  </p><p><em>최대한 번역된 단어를 통일하였으나 원문을 보는것을 권장합니다.</em><br>
<em>개인적으로 첨가한 단락은 기울게 표시했습니다.</em>  </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="기술-부채">기술 부채<a href="#기술-부채" class="hash-link" aria-label="Direct link to 기술 부채" title="Direct link to 기술 부채">​</a></h2><p>Ward Cunningham 이 도입한 1992년 빠르게 소프트웨어를 만들때 야기되는 장기 비용을 말합니다
이 부채는 재정 부채와 마찬가지로 전략적으로 사용될 수 있습니다.
모든 부채는 나쁜것이 아니나 언젠가는 해결되어야 합니다.</p><p>기술부채는 다음과 같은 방법으로 해결됩니다. </p><ul><li>refactoring code</li><li>improving unit tests</li><li>deleting dead code</li><li>reducing dependencies</li><li>tightening APIs</li><li>improving documentation</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="복잡한-모델이-무너트린-경계">복잡한 모델이 무너트린 경계<a href="#복잡한-모델이-무너트린-경계" class="hash-link" aria-label="Direct link to 복잡한 모델이 무너트린 경계" title="Direct link to 복잡한 모델이 무너트린 경계">​</a></h2><p>전통적인 소프트웨어는 응축(encapsulation)과 모듈화라는 <strong>강한 추상화 경계</strong>를 통해 코드를 유지하기 쉽게 만들고, 코드의 변경과 개선을 격리(isolate) 시킵니다.
하지만, 머신러닝 시스템에서 <strong>강한 추상화 경계</strong>를 강요하기 어렵습니다.
ML은 <em>외부 데이터에 의존</em> 없이 소프트웨어 로직으로 잘 표현될 수 없기 때문입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="얽힘entanglement">얽힘(Entanglement)<a href="#얽힘entanglement" class="hash-link" aria-label="Direct link to 얽힘(Entanglement)" title="Direct link to 얽힘(Entanglement)">​</a></h3><p>머신러닝 시스템은 출력(signal)이 섞이고 얽혀있어 격리가 불가능합니다.
모델에서 x1, ... , xn 특징(feature)을 사용하는 시스템이 있다고 가정해봅시다.
x1을 바꾸게 된다면 남은 n-1 특징들은 전부 바뀔 것입니다.
새 특징 xn+1을 추가하는것, xj를 제거하는것도 마찬가지입니다</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="수정-종속correction-cascades">수정 종속(Correction Cascades)<a href="#수정-종속correction-cascades" class="hash-link" aria-label="Direct link to 수정 종속(Correction Cascades)" title="Direct link to 수정 종속(Correction Cascades)">​</a></h2><p>모델 ma에 약간 다른 문제를 해결하기 위해 ma'
ma에 대한 종속</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="정의되지-않은-사용처undeclared-consumers">정의되지 않은 사용처(Undeclared Consumers)<a href="#정의되지-않은-사용처undeclared-consumers" class="hash-link" aria-label="Direct link to 정의되지 않은 사용처(Undeclared Consumers)" title="Direct link to 정의되지 않은 사용처(Undeclared Consumers)">​</a></h2><p>아직 작성중에 있습니다!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><p><a href="https://proceedings.neurips.cc/paper/2015/file/86df7dcfd896fcaf2674f757a2463eba-Paper.pdf" target="_blank" rel="noopener noreferrer">Hidden Technical Debt in Machine Learning Systems</a></p>]]></content:encoded>
            <category>ml</category>
            <category>paper</category>
        </item>
        <item>
            <title><![CDATA[오래걸리는 API 설계]]></title>
            <link>https://jwher.github.io/posts/api-design-for-long-jobs</link>
            <guid>https://jwher.github.io/posts/api-design-for-long-jobs</guid>
            <pubDate>Sun, 11 Sep 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[오래걸리는 API 설계]]></description>
            <content:encoded><![CDATA[<p><a href="/posts/api-design-for-long-jobs"><img loading="lazy" alt="api" src="/assets/images/api-3a186817d2936f95501612aeb3012c60.png" width="512" height="512" class="img_ev3q"></a><br>
<em>오래걸리는 API 설계</em></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="문제점">문제점<a href="#문제점" class="hash-link" aria-label="Direct link to 문제점" title="Direct link to 문제점">​</a></h2><p>API를 개발하다 보면, 백그라운드에서 오랜 시간이 걸리는 것들이 있습니다.
특히, 학습이나 추론같은 AI를 API로 제공할때 많이 발생하게 됩니다.
<del>(가장 크게 실패했다고 느낀 점입니다)</del></p><p>REST는 요청이 수초 안에 끝나기 때문에, 동기적(synchronous)인 API에 적합한 부분이 있습니다. 작업에 시간이 더 걸린다면, 애플리케이션이 연결 상태를 유지한채 작업이 끝날때가지 멈춰(block)있는 것은 좋은 해결방법이 아닙니다.
연결이 지속되면 전체 서비스와 로드벨런서 자원을 계속 사용하게 되고, 네트워크 환경에 따라 연결이 끊길 가능성이 높아집니다.
(연결이 끊기면 사용자는 같은 요청을 또 보내겠죠!)</p><p>타이크(Tyk)라는 API 관리 플랫폼 회사에 좋은 글이 있어 각색하였습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="예제">예제<a href="#예제" class="hash-link" aria-label="Direct link to 예제" title="Direct link to 예제">​</a></h2><p><em>타이크 社의 예제를 각색했습니다</em><br>
<!-- -->벌크 인퍼런스 API 요청을 가정해봅시다.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[POST] /v1/inference/bulk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {...},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {...},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {...},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>API 서버는 빨리(수초 이내에) 끝나지 않을 것을 압니다.
따라서, <code>202 Accepted</code> 상태를 반환합니다.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 202 Accepted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Location: https://api.example.com/v1/inference/jobs/3971</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>202 Accepted</code>는 사용자의 요청이 정상적이였으나, 서버가 즉시 응답할 수 없다는 것을 의미합니다.
여기에 <code>Location</code> 헤더가 추가되어 <code>GET</code> 요청으로 결과를 확일할 수 있는 URL을 제공합니다.</p><br><br><p>사용자는 제공된 URL을 폴링하여 작업이 끝났는지 확인합니다.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[GET] /v1/inference/jobs/3971</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>작업이 진행중이라면 사용자는 status가 <code>InProgress</code>(또는 정의된 status값)인 응답을 받습니다.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 200 OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "jobId": "3971",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "status": "InProgress",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "percentComplete": "25",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "suggestedNextPollTime": "2018-10-02T11:00:00.00Z",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "estimatedCompletionTime": "2018-10-02T14:00:00.00Z"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>작업이 완료되었다면 사용자는 status가 <code>Completed</code>인 응답을 받습니다.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 200 OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "jobId": "3971",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "status": "Completed",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "completionTime": "2018-10-02T14:00:00.00Z",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "_links": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      { "rel":"results", "https://api.example.com/v1/inference/jobs/3971/results" },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="폴링을-사용하지-않는-방법">폴링을 사용하지 않는 방법<a href="#폴링을-사용하지-않는-방법" class="hash-link" aria-label="Direct link to 폴링을 사용하지 않는 방법" title="Direct link to 폴링을 사용하지 않는 방법">​</a></h2><ul><li>작업이 완료되었을때 알려줄(<code>POST</code>) <strong>웹훅</strong>을 사용합니다<ul><li>사용자의 부담이 커질 수 있지만, 작업이 끝날때까지 폴링하는 것을 방지할 수 있습니다</li></ul></li><li><strong>Server Sent Event(SSE)</strong>나 <strong>웹소켓</strong>을 사용합니다</li></ul><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="결론">결론?<a href="#결론" class="hash-link" aria-label="Direct link to 결론?" title="Direct link to 결론?">​</a></h2><p>이전까지는 오래걸리는 작업에 대한 반응형 웹을 백엔드에서 지원해주려면 SSE나 웹소켓을 사용해야 한다고 생각했습니다.</p><p>하지만 FE개발자에게 좋은 방법만은 아니였다는(특히 웹소켓을 IE같은 구형 브라우저까지 고민해야 했다면!) 것을 경험적으로 느끼고 있었습니다.</p><p>폴링을 포함한 다양한 상태 모니터링 방법을 제공해 <strong>천사같은 백엔드 개발자</strong>가 되어보는건 어떨까요?</p><p><del><em>물론 그런건 세상에 없습니다</em></del></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><p><a href="https://tyk.io/blog/api-design-guidance-long-running-background-jobs/" target="_blank" rel="noopener noreferrer">API design guidance: long running background jobs</a></p>]]></content:encoded>
            <category>web</category>
        </item>
        <item>
            <title><![CDATA[학습에 중요한 데이터 찾기]]></title>
            <link>https://jwher.github.io/posts/deep-learning-on-a-data-diet</link>
            <guid>https://jwher.github.io/posts/deep-learning-on-a-data-diet</guid>
            <pubDate>Fri, 09 Sep 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[학습에 중요한 데이터 찾기]]></description>
            <content:encoded><![CDATA[<p><a href="/posts/deep-learning-on-a-data-diet"><img loading="lazy" alt="deep-learning" src="/assets/images/network-fc1751c0911b9eb0f3a8ad599e6b4a9f.png" width="512" height="512" class="img_ev3q"></a><br>
<em>학습에 중요한 데이터 찾기</em><br>
<em>이 글은 2021 7 15 NeurIPS에 등재된 Deep learning on a data diet을 번역해 작성되었습니다</em></p><br><p><em>최대한 번역된 단어를 통일하였으나 원문을 보는것을 권장합니다.</em><br>
<em>개인적으로 첨가한 단락은 기울게 표시했습니다.</em>  </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="딥러닝과-데이터">딥러닝과 데이터<a href="#딥러닝과-데이터" class="hash-link" aria-label="Direct link to 딥러닝과 데이터" title="Direct link to 딥러닝과 데이터">​</a></h2><p>최근 딥러닝에서 성과 일부는, 더욱더 큰 데이터셋을 사용해서 과매개변수화(overparameterized)된 네트워크를 만들며 이루어졌습니다.<br>
<em>*<!-- --> 과매개변수화: 데이터로부터 추정할 수 있는 것보다 많은 매개변수를 가지는 모델을 이릅니다</em></p><p>이는 자연스러운 질문을 남깁니다. 그럼 얼마만큼의 데이터가 일반화에 불필요(superfluous)한가? 이는 어떻게 찾아야 하는가?  </p><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="최근-연구">최근 연구<a href="#최근-연구" class="hash-link" aria-label="Direct link to 최근 연구" title="Direct link to 최근 연구">​</a></h2><p>데이터 정리(pruning data)에 대한 최근 연구[<a href="#1-selection-via-proxy">1</a>, <a href="#2-data-distribution-search-to-select-core-set-for-machine-learning">2</a>]는 원본 데이터셋과 동일한 정확도를 유지하는 중심집합(coresets)의 넓은 맥락을 찾는 것이였습니다. 이는 전체 데이터셋에서 학습 오류의 작은 차이를 내는 예제들을 찾는 방법으로 접근합니다. 하지만, 딥러닝의 볼록하지않은(non-convex) 본질 때문에, 이 기법은 약한 이론적 보장과, 실례에서 비효율성은 보수적인 추정을 불러일으킵니다.<br>
<em>*<!-- --> 볼록하지 않음(non-convex): 해결방법이 하나 이상일 수 있는, 즉 지역 최솟값(local minimizer)이 존재하는 문제를 말합니다</em></p><p>최근에 발견된 다른 접근 방식 [<a href="#8-an-empirical-study-of-example-forgetting-during-deep-neural-network-learning">8</a>]은 학습 동안 "잊혀진 사건(forgetting event)"으로 불리는 맞게 분류되었다 맞지 않게 분류되도록 바뀐 예제 횟수를 추적하고, 다른 것들이 반복적으로 잊혀질동안 덜 잊혀진 예제를 발견합니다. 하지만, 이 방법은 학습 중에 잊혀지는 통계 정보를 수집하기 때문에 학습의 중간 또는 끝에서 망각점수(forgetting score)가 계산됩니다.</p><p>넓게 바라보면, 데이터셋 정리 방법은 많은 질문을 남깁니다. 정확도(accuracy) 손상 없이 학습 데이터에서 제거할 수 있는 예제의 본질은 무엇인가? 얼마나 빨리 그런 예제를 알아챌 수 있을까? 얼마나 많은 예제를 찾아야 하고, 어떻게 데이터 분산에 의존하는가? 이에 대한 일반적인 대답은 없을 것입니다. 이 연구에서는 표준 비전 벤치마크와 네트워크 구조에서 경험적인 방법을 찾습니다.</p><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="어떤-표본이-학습에-중요한가">어떤 표본이 학습에 중요한가?<a href="#어떤-표본이-학습에-중요한가" class="hash-link" aria-label="Direct link to 어떤 표본이 학습에 중요한가?" title="Direct link to 어떤 표본이 학습에 중요한가?">​</a></h2><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사전조건">사전조건<a href="#사전조건" class="hash-link" aria-label="Direct link to 사전조건" title="Direct link to 사전조건">​</a></h3><p>지도학습(supervised), 분류(classification)에서 독립항등분포(independent and identically distribution)인 알려지지 않은 데이터 분포 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi></mrow><annotation encoding="application/x-tex">D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.02778em">D</span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>∈</mo><msup><mi mathvariant="double-struck">R</mi><mi>d</mi></msup></mrow><annotation encoding="application/x-tex">x \in {\mathbb R}^d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8491em"></span><span class="mord"><span class="mord"><span class="mord mathbb">R</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span></span></span></span></span> 인 입력 벡터, 원핫 벡터 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>∈</mo><msup><mrow><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">}</mo></mrow><mi>K</mi></msup></mrow><annotation encoding="application/x-tex">y \in {\{0,1\}}^K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.2312em;vertical-align:-0.25em"></span><span class="mord"><span class="mord"><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">1</span><span class="mclose">}</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9812em"><span style="top:-3.2029em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em">K</span></span></span></span></span></span></span></span></span></span></span></span>로 인코딩된 레이블에서 정의된 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>∈</mo><msubsup><mrow><mo stretchy="false">{</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>y</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></msubsup></mrow><annotation encoding="application/x-tex">S \in {\{(x_i, y_i)\}}^N_{i=1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7224em;vertical-align:-0.0391em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.2809em;vertical-align:-0.2997em"></span><span class="mord"><span class="mord"><span class="mopen">{(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)}</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9812em"><span style="top:-2.4003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em"><span></span></span></span></span></span></span></span></span></span></span> 학습 셋을 가정합니다.</p><p>고정된 신경망 아키텍처에서 입력 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>∈</mo><msup><mi mathvariant="double-struck">R</mi><mi>d</mi></msup></mrow><annotation encoding="application/x-tex">x \in \mathbb R^d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8491em"></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span></span></span></span></span>과 신경망 가중치 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo>∈</mo><mi>W</mi><mo>⊆</mo><msup><mi mathvariant="double-struck">R</mi><mi>D</mi></msup></mrow><annotation encoding="application/x-tex">w \in W \subseteq \mathbb R^D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em"></span><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em"></span><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8413em"></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em">D</span></span></span></span></span></span></span></span></span></span></span></span>에 대한 출력 로짓을 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>w</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>∈</mo><msup><mi mathvariant="double-struck">R</mi><mi>K</mi></msup></mrow><annotation encoding="application/x-tex">f_w(x) \in \mathbb R^K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em">w</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8413em"></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em">K</span></span></span></span></span></span></span></span></span></span></span></span>라고 합시다.</p><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi><mo stretchy="false">(</mo><msub><mi>z</mi><mn>1</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>z</mi><mi>k</mi></msub><msub><mo stretchy="false">)</mo><mi>k</mi></msub><mo>=</mo><mi>e</mi><mi>x</mi><mi>p</mi><mrow><mo stretchy="false">{</mo><msub><mi>z</mi><mi>k</mi></msub><mo stretchy="false">}</mo></mrow><mi mathvariant="normal">/</mi><msubsup><mo>∑</mo><mrow><msup><mi>k</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>=</mo><mn>1</mn></mrow><mi>K</mi></msubsup><mi>e</mi><mi>x</mi><mi>p</mi><mrow><mo stretchy="false">{</mo><msub><mi>z</mi><msup><mi>k</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msub><mo stretchy="false">}</mo></mrow></mrow><annotation encoding="application/x-tex">\sigma (z_1,...,z_k)_k = exp{\{z_k\}}/\sum^K_{k'=1}exp{\{z_{k'}\}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.03588em">σ</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.2809em;vertical-align:-0.2997em"></span><span class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mord mathnormal">p</span><span class="mord"><span class="mopen">{</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">}</span></span><span class="mord">/</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9812em"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em"><span style="top:-2.786em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em">K</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mord mathnormal">p</span><span class="mord"><span class="mopen">{</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em"><span style="top:-2.786em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span></span></span>로 주어진 소프트맥스 함수 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">σ</span></span></span></span></span>를 가정합니다.</p><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>w</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>σ</mi><mo stretchy="false">(</mo><mi>f</mi><mo stretchy="false">(</mo><mi>w</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(w,x) = \sigma(f(w,x))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.03588em">σ</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">x</span><span class="mclose">))</span></span></span></span></span>를 신경망 출력의 확률벡터 형태로 가정합니다.</p><p>크기 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.10903em">M</span></span></span></span></span>의 미니배치 수열 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>S</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>S</mi><mn>1</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>S</mi><mrow><mi>T</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>⊆</mo><mi>S</mi></mrow><annotation encoding="application/x-tex">S_0, S_1, ..., S_{T-1} \subseteq S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8917em;vertical-align:-0.2083em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">T</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span></span></span></span></span>에 따라 반복되는 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>w</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>w</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>w</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">w_0, w_1, w_2, ..., w_T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>의 stochastic gradient descent(SGD)를 가정하면, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>g</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi mathvariant="normal">▽</mi><msub><mi>w</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub></msub><mi>l</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">(</mo><msub><mi>w</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">g_{t-1}(x,y)=\triangledown_{w_{t-1}}l(p(w_{t-1},x),y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.0418em;vertical-align:-0.2918em"></span><span class="mord"><span class="mord amsrm">▽</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em"><span style="top:-2.357em;margin-left:-0.0269em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2025em"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2918em"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mclose">)</span></span></span></span></span>, and <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>T</mi></mrow><annotation encoding="application/x-tex">t=1,...,T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span></span></span></span></span>에서</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><msub><mi>w</mi><mi>t</mi></msub><mo>=</mo><msub><mi>w</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>−</mo><mi>η</mi><munder><mo>∑</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>∈</mo><msub><mi>S</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub></mrow></munder><msub><mi>g</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(1)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">w_t = w_{t-1} - \eta \sum_{(x,y) \in S_{t-1}}g_{t-1}(x,y) \tag{1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7917em;vertical-align:-0.2083em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.566em;vertical-align:-1.516em"></span><span class="mord mathnormal" style="margin-right:0.03588em">η</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em"><span style="top:-1.809em;margin-left:0em"><span class="pstrut" style="height:3.05em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">x</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.03588em">y</span><span class="mclose mtight">)</span><span class="mrel mtight">∈</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em"><span style="top:-2.357em;margin-left:-0.0576em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2025em"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.05em"><span class="pstrut" style="height:3.05em"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.516em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mclose">)</span></span><span class="tag"><span class="strut" style="height:2.566em;vertical-align:-1.516em"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">1</span></span><span class="mord">)</span></span></span></span></span></span></div><p>위를 얻을 수 있습니다.</p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gradient-norm-score-와-infinitesimal-analysis">Gradient norm score 와 infinitesimal analysis<a href="#gradient-norm-score-와-infinitesimal-analysis" class="hash-link" aria-label="Direct link to Gradient norm score 와 infinitesimal analysis" title="Direct link to Gradient norm score 와 infinitesimal analysis">​</a></h3><p>학습셋 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span></span></span></span></span>를 고정합니다. SGD는 무작위 초기화 과정으로 학습되기 때문에 시간 t&gt;0에서 가중치 벡터 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">w_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>는 확률변수(random variable)입니다. 여기에서 손실 벡터의 크기가 관심 대상입니다.</p><p><strong>정의1</strong> 학습 예제(x,y)의 시간 t에서 GraNd score는 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi mathvariant="double-struck">E</mi><msub><mi>W</mi><mi>t</mi></msub></msub><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><msub><mi>g</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi><msub><mi mathvariant="normal">∣</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">x_t(x,y)=\mathbb E_{W_t} ||g_t(x,y)||_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.0001em;vertical-align:-0.2501em"></span><span class="mord"><span class="mord mathbb">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2963em"><span style="top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em"><span></span></span></span></span></span></span><span class="mord">∣∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mclose">)</span><span class="mord">∣</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> 입니다.</p><p>여기서 어떤 GraNd score가 학습 예제의 training loss 변화에 기여를 제어하는지 설명합니다. 분석의 단순화를 위해 training dynamicst가 연속적인 시간에 있는것처럼 근사합니다.</p><p>분석의 핵심 분량은 일반적인 레이블된 예제 (x,y)에 대한 loss의 시간 미분값 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="normal">△</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><msub><mi>S</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mo>−</mo><mfrac><mrow><mi>d</mi><mi>l</mi><mo stretchy="false">(</mo><msub><mi>f</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\triangle_t((x,y),S_t) = - {dl(f_t(x),y) \over dt}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord">△</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">((</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em"></span><span class="mord">−</span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">t</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.01968em">l</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2963em"><span style="top:-2.357em;margin-left:-0.1076em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.03588em">y</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span> (<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mo>⋅</mo><mo stretchy="false">)</mo><mo>=</mo><msub><mi>f</mi><msub><mi>w</mi><mi>t</mi></msub></msub><mo stretchy="false">(</mo><mo>⋅</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f_t(\cdot)=f_{w_t}(\cdot)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">⋅</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.0001em;vertical-align:-0.2501em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2963em"><span style="top:-2.357em;margin-left:-0.0269em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">⋅</span><span class="mclose">)</span></span></span></span></span>에서) 입니다. 시간 t에서 미니배치 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>S</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">S_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>에서 계산된 경사도에서 (x,y)의 loss의 변화율은 체인룰에 따라</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><msub><mi mathvariant="normal">△</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><msub><mi>S</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo>=</mo><msub><mi>g</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mfrac><msub><mi>d</mi><msub><mi>W</mi><mi>t</mi></msub></msub><mrow><mi>d</mi><mi>t</mi></mrow></mfrac></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(2)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\triangle_t((x,y),S_t) = g_t(x,y){d_{W_t} \over dt} \tag{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord">△</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">((</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.0574em;vertical-align:-0.686em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mclose">)</span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="mord mathnormal">t</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2963em"><span style="top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span class="tag"><span class="strut" style="height:2.0574em;vertical-align:-0.686em"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">2</span></span><span class="mord">)</span></span></span></span></span></span></div><p>이는 이산 시간 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><msub><mi>d</mi><msub><mi>W</mi><mi>t</mi></msub></msub><mrow><mi>d</mi><mi>t</mi></mrow></mfrac><mo>≈</mo><msub><mi>W</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>−</mo><msub><mi>W</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">{d_{W_t} \over dt} \approx W_{t+1} - W_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3766em;vertical-align:-0.345em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0316em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">t</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.5454em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.3567em;margin-left:0em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.3448em;margin-left:-0.1389em;margin-right:0.1em"><span class="pstrut" style="height:2.6151em"></span><span class="mord mathnormal mtight">t</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2703em"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3364em"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8917em;vertical-align:-0.2083em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>과 연관되어 있습니다(식1 참고).
우리의 목표는 미니배치 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>S</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">S_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>에서 학습점을 제거하는 것이 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="normal">△</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><msub><mi>S</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\triangle_t((x,y),S_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord">△</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">((</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>에 어떤 영향을 미치는지 이해하는 것입니다.</p><p><strong>부분정리2</strong> 학습에서 제거된 집합 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>S</mi><mrow><mi mathvariant="normal">¬</mi><mi>j</mi></mrow></msub><mo>=</mo><mi>S</mi><mi mathvariant="normal">\</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>j</mi></msub><mo separator="true">,</mo><msub><mi>y</mi><mi>j</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">S_{\neg{j}} = S \backslash (x_j, y_j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">¬</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em">j</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mord">\</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>라 하자. 그러면 모든 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mclose">)</span></span></span></span></span>에 대해 다음을 만족하는 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">c</span></span></span></span></span>가 존재한다.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><msub><mi mathvariant="normal">△</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>S</mi><mo stretchy="false">)</mo><mo>−</mo><msub><mi mathvariant="normal">△</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><msub><mi>S</mi><mrow><mi mathvariant="normal">¬</mi><mi>j</mi></mrow></msub><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mo>≤</mo><mi>c</mi><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><msub><mi>g</mi><mi>t</mi></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mi>j</mi></msub><mo separator="true">,</mo><msub><mi>y</mi><mi>j</mi></msub><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(3)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">|| \triangle_t((x,y),S)-\triangle_t((x,y),S_{\neg{j}}) || \le c||g_t(x_j,y_j)|| \tag{3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">∣∣</span><span class="mord"><span class="mord">△</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">((</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord">△</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">((</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">¬</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em">j</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">∣∣</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em"></span><span class="mord mathnormal">c</span><span class="mord">∣∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">∣∣</span></span><span class="tag"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">3</span></span><span class="mord">)</span></span></span></span></span></span></div><p><em>증명.</em> 주어진 예제 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">x</span></span></span></span></span>에 대해 체인룰에 따라 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="normal">△</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>S</mi><mo stretchy="false">)</mo><mo>=</mo><mo>−</mo><mfrac><mrow><mi>d</mi><mi>l</mi><mo stretchy="false">(</mo><msub><mi>f</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac><mo>=</mo><mo>−</mo><mfrac><mrow><mi>d</mi><mi>l</mi><mo stretchy="false">(</mo><msub><mi>f</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><mrow><mi>d</mi><msub><mi>W</mi><mi>t</mi></msub></mrow></mfrac><mfrac><mrow><mi>d</mi><msub><mi>W</mi><mi>t</mi></msub></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\triangle_t((x,y),S) = - {dl(f_t(x),y) \over dt} = - {dl(f_t(x),y) \over dW_t}{dW_t \over dt}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord">△</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">((</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em"></span><span class="mord">−</span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">t</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.01968em">l</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2963em"><span style="top:-2.357em;margin-left:-0.1076em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.03588em">y</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.4551em;vertical-align:-0.4451em"></span><span class="mord">−</span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2963em"><span style="top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.01968em">l</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2963em"><span style="top:-2.357em;margin-left:-0.1076em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.03588em">y</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4451em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8962em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">t</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.4101em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2963em"><span style="top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span>를 얻는다. SGD를 이용하므로 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>d</mi><msub><mi>W</mi><mi>t</mi></msub></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac><mo>=</mo><mo>−</mo><mi>η</mi><msub><mo>∑</mo><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mi>j</mi></msub><mo separator="true">,</mo><msub><mi>y</mi><mi>j</mi></msub><mo stretchy="false">)</mo><mo>∈</mo><msub><mi>S</mi><mi>t</mi></msub></mrow></msub><msub><mi>g</mi><mi>t</mi></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mi>j</mi></msub><mo separator="true">,</mo><msub><mi>y</mi><mi>j</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">{dW_t \over dt} = -\eta \sum_{(x_j,y_j) \in S_t}g_t(x_j,y_j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2412em;vertical-align:-0.345em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8962em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">t</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.4101em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2963em"><span style="top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.247em;vertical-align:-0.497em"></span><span class="mord">−</span><span class="mord mathnormal" style="margin-right:0.03588em">η</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2253em"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em"><span style="top:-2.357em;margin-left:-0.0359em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em"><span></span></span></span></span></span></span><span class="mclose mtight">)</span><span class="mrel mtight">∈</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2963em"><span style="top:-2.357em;margin-left:-0.0576em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.497em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> 입니다. 학습에 관련 없는 상수 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mo>=</mo><mi>η</mi><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mfrac><mrow><mi>d</mi><mi>l</mi><mo stretchy="false">(</mo><msub><mi>f</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><mrow><mi>d</mi><msub><mi>W</mi><mi>t</mi></msub></mrow></mfrac><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi></mrow><annotation encoding="application/x-tex">c=\eta||{dl(f_t(x),y) \over dW_t}||</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.4551em;vertical-align:-0.4451em"></span><span class="mord mathnormal" style="margin-right:0.03588em">η</span><span class="mord">∣∣</span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2963em"><span style="top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.01968em">l</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2963em"><span style="top:-2.357em;margin-left:-0.1076em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.03588em">y</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4451em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mord">∣∣</span></span></span></span></span>라고 하면 수식(3)을 얻을 수 있습니다.</p><p>어떤 학습 단계에서 주어진 현재 위치 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">W_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>에서 다른 예제의 loss를 줄이기 위한 학습 예제 (x,y)의 기여는 수식(3)으로 제한됩니다. 상수 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">c</span></span></span></span></span>는 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mclose">)</span></span></span></span></span>로 결정되지 않기 때문에 경사 노름(gradient norm) <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><msub><mi>g</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi></mrow><annotation encoding="application/x-tex">||g_t(x,y)||</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">∣∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mclose">)</span><span class="mord">∣∣</span></span></span></span></span>만 고려하면 됩니다. 예상되는 경사 노름 값은, (x,y)에서 GradNd score와 같습니다. 다른말로, 작은 GraNd score는 주어진 시간 안에 나머지 훈련 데이터를 배우는데 제한된 영향을 지닙니다. 따라서 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="normal">△</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\triangle_t(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord">△</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span>를 관리하는데 더 큰 노름값이 중요하므로 예제를 각 GraNd score로 순위를 매길 것을 제안합니다.</p><p>임의의 입력 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>∈</mo><msup><mi mathvariant="double-struck">R</mi><mi>d</mi></msup></mrow><annotation encoding="application/x-tex">x \in \mathbb R^d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8491em"></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span></span></span></span></span>에 대해 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span></span></span>번째 로짓 경사도 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>ψ</mi><mi>t</mi><mrow><mo stretchy="false">(</mo><mi>k</mi><mo stretchy="false">)</mo></mrow></msubsup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi mathvariant="normal">▽</mi><msub><mi>W</mi><mi>t</mi></msub></msub><msubsup><mi>f</mi><mi>t</mi><mrow><mo stretchy="false">(</mo><mi>k</mi><mo stretchy="false">)</mo></mrow></msubsup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\psi^{(k)}_t(x)=\triangledown_{W_t}f^{(k)}_t(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2948em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">ψ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em"><span style="top:-2.4542em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span><span style="top:-3.2198em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2458em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.2949em;vertical-align:-0.2501em"></span><span class="mord"><span class="mord amsrm">▽</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2963em"><span style="top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em"><span style="top:-2.4542em;margin-left:-0.1076em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span><span style="top:-3.2198em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2458em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span>를 가정합시다. GraNd는 다음과 같습니다.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><msub><mi>X</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="double-struck">E</mi><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>K</mi></munderover><msub><mi mathvariant="normal">▽</mi><msup><mi>f</mi><mrow><mo stretchy="false">(</mo><mi>k</mi><mo stretchy="false">)</mo></mrow></msup></msub><mi>l</mi><mo stretchy="false">(</mo><msub><mi>f</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>y</mi><msup><mo stretchy="false">)</mo><mi>T</mi></msup><msubsup><mi>ψ</mi><mi>t</mi><mrow><mo stretchy="false">(</mo><mi>k</mi><mo stretchy="false">)</mo></mrow></msubsup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi><msub><mi mathvariant="normal">∣</mi><mn>2</mn></msub></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(4)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">X_t(x,y) = \mathbb E ||\sum^K_{k=1}\triangledown_{f^{(k)}} l(f_t(x),y)^T\psi^{(k)}_t(x)||_2 \tag{4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:3.1304em;vertical-align:-1.3021em"></span><span class="mord mathbb">E</span><span class="mord">∣∣</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em"><span style="top:-1.8479em;margin-left:0em"><span class="pstrut" style="height:3.05em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em"><span class="pstrut" style="height:3.05em"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em"><span class="pstrut" style="height:3.05em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em">K</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3021em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord amsrm">▽</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.4694em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.822em"><span style="top:-2.822em;margin-right:0.0714em"><span class="pstrut" style="height:2.5357em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3667em"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">T</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">ψ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em"><span style="top:-2.4542em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span><span style="top:-3.2198em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2458em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord">∣</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height:3.1304em;vertical-align:-1.3021em"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">4</span></span><span class="mord">)</span></span></span></span></span></span></div><p>Cross entropy를 사용하므로 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="normal">▽</mi><msup><mi>f</mi><mrow><mo stretchy="false">(</mo><mi>k</mi><mo stretchy="false">)</mo></mrow></msup></msub><mi>l</mi><mo stretchy="false">(</mo><msub><mi>f</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>y</mi><msup><mo stretchy="false">)</mo><mi>T</mi></msup><mo>=</mo><mi>p</mi><mo stretchy="false">(</mo><msub><mi>W</mi><mi>t</mi></msub><mo separator="true">,</mo><mi>x</mi><msup><mo stretchy="false">)</mo><mrow><mo stretchy="false">(</mo><mi>k</mi><mo stretchy="false">)</mo></mrow></msup><mo>−</mo><msub><mi>y</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">\triangledown_{f^{(k)}} l(f_t(x),y)^T=p(W_t,x)^{(k)}-y_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2081em;vertical-align:-0.3667em"></span><span class="mord"><span class="mord amsrm">▽</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.4694em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.822em"><span style="top:-2.822em;margin-right:0.0714em"><span class="pstrut" style="height:2.5357em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3667em"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">T</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.138em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">x</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> 입니다. <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><msubsup><mi>ψ</mi><mi>t</mi><mrow><mo stretchy="false">(</mo><mi>k</mi><mo stretchy="false">)</mo></mrow></msubsup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><msub><mo stretchy="false">}</mo><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">\{\psi^{(k)}_t(x)\}_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2948em;vertical-align:-0.25em"></span><span class="mopen">{</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">ψ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em"><span style="top:-2.4542em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span><span style="top:-3.2198em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2458em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mclose"><span class="mclose">}</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> 가 로짓에 대해 대락적으로 직교하고, logit과 예제 x에 대해 비슷한 크기이면 <strong>GraNd를 error vector의 노름으로 추정할 수 있습니다.</strong></p><p><strong>정의3</strong> EL2N score는 학습 표본 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mclose">)</span></span></span></span></span>에서 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">E</mi><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mi>p</mi><mo stretchy="false">(</mo><msub><mi>W</mi><mi>t</mi></msub><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo><mo>−</mo><mi>y</mi><mi mathvariant="normal">∣</mi><msub><mi mathvariant="normal">∣</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\mathbb E||p(W_t,x)-y||_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathbb">E</span><span class="mord">∣∣</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mord">∣</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> 입니다.</p><p>실험적인 결과로, 이 추정은 몇 epoch 이후 정확해집니다.</p><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="데이터-정리를-통한-grand와-el2n-점수의-경험적-평가">데이터 정리를 통한 GraNd와 EL2N 점수의 경험적 평가<a href="#데이터-정리를-통한-grand와-el2n-점수의-경험적-평가" class="hash-link" aria-label="Direct link to 데이터 정리를 통한 GraNd와 EL2N 점수의 경험적 평가" title="Direct link to 데이터 정리를 통한 GraNd와 EL2N 점수의 경험적 평가">​</a></h2><p>신경망 Depth의 다양성을 위해 ResNet18과 ResNet50을, 데이터셋 난이도의 다양성을 위해 CIFAR-10, CIFAR-100, CINIC-10을 사용하였습니다. 모든 점수는 10회의 독립적인 학습 결과의 평균입니다. 최종 테스트 정확도(accuracy)는 무작위 초기화된 네트워크와 선택된 부분집합으로 학습해 얻은 결과입니다.</p><p><img loading="lazy" alt="figure1" src="/assets/images/Figure1-998999ade963932df9b2bb0a25da2347.png" width="2398" height="1218" class="img_ev3q">
Fig. 1은 상하로 두개의 실험과, 3개의 다른 네트워크와 데이터셋 조합의 결과입니다.</p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="시작할때-데이터-정리">시작할때 데이터 정리<a href="#시작할때-데이터-정리" class="hash-link" aria-label="Direct link to 시작할때 데이터 정리" title="Direct link to 시작할때 데이터 정리">​</a></h3><p><strong>Pruning at initialization</strong><br>
<!-- -->모든 설정에서 GraNd 점수를 사용한 것이 무작위로 선택한것 보다 나았습니다. 이는 주목할만한데, GraNd는 초기값의 평균 경사도 노름 정보만 가지고 있기 때문입니다. 이는 무작위 네트워크로 만들어진 학습 분포가 분류 문제에서 기하학적으로 많은 정보를 가진다는 것입니다. EL2N은 일관적인 효과를 거두지 못했고 망각점수(forgetting score)는 정의되지 않습니다.</p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="학습-초기에-데이터-정리">학습 초기에 데이터 정리<a href="#학습-초기에-데이터-정리" class="hash-link" aria-label="Direct link to 학습 초기에 데이터 정리" title="Direct link to 학습 초기에 데이터 정리">​</a></h3><p><strong>Pruning early in training</strong><br>
<!-- -->몇번의 학습 후에, EL2N 점수는 일반화를 위한 중요한 예제 식별에 매우 효과적이였습니다. 중간정도의 데이터를 정리했을 때 전체 데이터셋을 사용한것과 같거나 더 나은(CINIC10+ResNet18 0.3 pruned) 결과를 보였습니다. 많은 데이터를 정리했을 때에도, 학습 궤적마다 정보를 얻는 망각점수에 대해 경쟁력이 있습니다. 흥미로운점은, 극히 많은 데이터가 정리된 상황에서 EL2N과 GraNd 다 급격히 성능이 떨어지는것을 관찰했습니다. 많은 데이터 정리시 데이터 분포에 대해 나쁜 커리리지를 지닌다는 가설을 세울 수 있습니다. 이는 가장 높은 오류 예제만 집중하므로써 테스트 데이터에 존재하는 집합이 제외될 가능성이 높습니다. 어려운 문제만 맞추고 테스트 오류가 좋은 학습 모델을 위한 예제의 다양성을 갖추지 못합니다.</p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="데이터가-갖는-자산">데이터가 갖는 자산<a href="#데이터가-갖는-자산" class="hash-link" aria-label="Direct link to 데이터가 갖는 자산" title="Direct link to 데이터가 갖는 자산">​</a></h3><p><strong>A property of the data</strong><br>
<!-- -->두 결과는 EL2N과 GraNd이 데이터셋에 속한 자산이고 네트워크에 특정되지 않음을 보여줍니다. <a href="#d-additional-experiments">Appendix D</a>를 살펴보세요.</p><p>실험결과로, EL2N 점수는 학습 초기에 계산하는 것이 중요한 예제 식별에 더 정확하다는 것을 보입니다.</p><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="노이즈-예제-식별">노이즈 예제 식별<a href="#노이즈-예제-식별" class="hash-link" aria-label="Direct link to 노이즈 예제 식별" title="Direct link to 노이즈 예제 식별">​</a></h2><p><em>선별된 데이터는 여러가지 정보를 담는 모델 학습에 좋은 데이터일수 있지만, 그냥 어려운 문제(노이즈)일 수 있습니다</em>  </p><p>이전 단락에서 살펴본 50%의 데이터로 정확도 감소 없이 학습시킬 수 있었던 이유는 뭘까요?
한 가설은, 높은 점수를 받은 예제가 classifier의 정확도를 달성하기 위해 중요했던 것입니다.
이 단락에선 그 가설을 반박하고, 레이블 노이즈의 역할을 증명합니다.</p><p>높은 점수를 받은 예제가 높은 정확도를 얻기 위해 가장 중요한지 실험을 위해,
먼저 예제를 적은 횟수의 학습(epoch 10)을 한 후 계산된 EL2N 점수로 정렬합니다. (Appendix E.3에서 GraNd로 실험)
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span></span></span></span></span>부터 항상 같은 P%만큼 부분집합을 취하며 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span></span></span></span></span>를 따라 움직이는 윈도우를 만듭니다.
이 윈도우는 최고점으로 갈때를 제외하고 높은 백분위로 올라갈수록 좋은 성능을 냅니다.
최고 성능을 내는 윈도우는 대략 500개의 최고점수를 제외한 것이였습니다.</p><p>레이블 분포에 노이즈 수에 따라 어떤 변화가 있는지 더 다양한 상황을 만듭니다.
무작위 K% 레이블을 다른 무작위 레이블로 교체[<a href="#13-understanding-deep-learning-requires-rethinking-generalization">13</a>]를 포함해 위의 실험을 반복합니다.
이때 최적 윈도우는, 더 많은 높은점수 레이블을 제외하는 쪽으로 이동했습니다.
노이즈가 없을 때 나타나는 효과가 노이즈가 존재할때 강화되는것을 볼 수 있었습니다.</p><p><img loading="lazy" alt="figure2" src="/assets/images/Figure2-e5a1ed6e3b3f2d3ee70b5c83d78004ad.png" width="1168" height="456" class="img_ev3q">
Fig. 2 ResNet18+CVFAR-10 데이터셋에서 40%의 부분집합으로 학습한 결과(좌)와
여기에 10%의 무작위 레이블을 포함한 결과(우)입니다.</p><p>이것은 다양한것을 암시합니다. <strong>높은점수 예제만으로 학습한것은 최적의 방법이 아닐 수 있습니다.</strong>
레이블에 노이즈가 있을 때는 더더욱 그렇습니다.
모집단이 낮은 베이즈 에러가 있다면, 높은점수 예제만으로 학습하는게 최적의 결과일 것입니다.</p><br><br><br><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="appendix">Appendix<a href="#appendix" class="hash-link" aria-label="Direct link to Appendix" title="Direct link to Appendix">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-ethical-and-societal-consequences">A. Ethical and societal consequences<a href="#a-ethical-and-societal-consequences" class="hash-link" aria-label="Direct link to A. Ethical and societal consequences" title="Direct link to A. Ethical and societal consequences">​</a></h3><p>경험적 연구에 따른 많은 노력이 있었습니다. 본질적으로 다른 결과를 숨기려는 경향이 있기 때문에 정확도와 같은 지표에 더 집중했습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="b-implementation-details">B. Implementation Details<a href="#b-implementation-details" class="hash-link" aria-label="Direct link to B. Implementation Details" title="Direct link to B. Implementation Details">​</a></h3><p><a href="https://github.com/mansheej/data_diet" target="_blank" rel="noopener noreferrer">[깃헙]코드</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="c-example-images">C. Example Images<a href="#c-example-images" class="hash-link" aria-label="Direct link to C. Example Images" title="Direct link to C. Example Images">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="d-additional-experiments">D. Additional Experiments<a href="#d-additional-experiments" class="hash-link" aria-label="Direct link to D. Additional Experiments" title="Direct link to D. Additional Experiments">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-sensitivity-analysis-of-grand-and-el2n-scores">1. Sensitivity analysis of GraNd and EL2N scores<a href="#1-sensitivity-analysis-of-grand-and-el2n-scores" class="hash-link" aria-label="Direct link to 1. Sensitivity analysis of GraNd and EL2N scores" title="Direct link to 1. Sensitivity analysis of GraNd and EL2N scores">​</a></h4><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-comparison-between-scores-from-different-architectures-on-the-same-dataset">2. Comparison between scores from different architectures on the same dataset<a href="#2-comparison-between-scores-from-different-architectures-on-the-same-dataset" class="hash-link" aria-label="Direct link to 2. Comparison between scores from different architectures on the same dataset" title="Direct link to 2. Comparison between scores from different architectures on the same dataset">​</a></h4><p>CIFAR-10로 학습된 ResNet18, ResNet50 실험을 다시 수행했습니다.</p><p><img loading="lazy" alt="figure11" src="/assets/images/Figure11-5667e3f9b0747fa6cfc125aa8bf0fb1e.png" width="1712" height="672" class="img_ev3q"></p><p>네트워크 깊이는 데이터를 정리한 결과에 적은 영향을 미칩니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-correlations-between-scores">3. Correlations between scores<a href="#3-correlations-between-scores" class="hash-link" aria-label="Direct link to 3. Correlations between scores" title="Direct link to 3. Correlations between scores">​</a></h4><h3 class="anchor anchorWithStickyNavbar_LWe7" id="e-noise">E. Noise<a href="#e-noise" class="hash-link" aria-label="Direct link to E. Noise" title="Direct link to E. Noise">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="f-comparison-to-memorization-threshold">F. Comparison to memorization threshold<a href="#f-comparison-to-memorization-threshold" class="hash-link" aria-label="Direct link to F. Comparison to memorization threshold" title="Direct link to F. Comparison to memorization threshold">​</a></h3><br><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tldr">TL;DR<a href="#tldr" class="hash-link" aria-label="Direct link to TL;DR" title="Direct link to TL;DR">​</a></h2><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">σ</span></span></span></span></span>는 소프트맥스 함수,
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>w</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>σ</mi><mo stretchy="false">(</mo><mi>f</mi><mo stretchy="false">(</mo><mi>w</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(w,x) = \sigma(f(w,x))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.03588em">σ</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">x</span><span class="mclose">))</span></span></span></span></span>를 신경망 출력의 확률벡터 형태로 가정합니다.</p><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span></span></span>번째 로짓 경사도 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>ψ</mi><mi>t</mi><mrow><mo stretchy="false">(</mo><mi>k</mi><mo stretchy="false">)</mo></mrow></msubsup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi mathvariant="normal">▽</mi><msub><mi>W</mi><mi>t</mi></msub></msub><msubsup><mi>f</mi><mi>t</mi><mrow><mo stretchy="false">(</mo><mi>k</mi><mo stretchy="false">)</mo></mrow></msubsup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\psi^{(k)}_t(x)=\triangledown_{W_t}f^{(k)}_t(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2948em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">ψ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em"><span style="top:-2.4542em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span><span style="top:-3.2198em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2458em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.2949em;vertical-align:-0.2501em"></span><span class="mord"><span class="mord amsrm">▽</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2963em"><span style="top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em"><span style="top:-2.4542em;margin-left:-0.1076em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span><span style="top:-3.2198em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2458em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span>를 가정하고, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><msubsup><mi>ψ</mi><mi>t</mi><mrow><mo stretchy="false">(</mo><mi>k</mi><mo stretchy="false">)</mo></mrow></msubsup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><msub><mo stretchy="false">}</mo><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">\{\psi^{(k)}_t(x)\}_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2948em;vertical-align:-0.25em"></span><span class="mopen">{</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">ψ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em"><span style="top:-2.4542em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span><span style="top:-3.2198em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2458em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mclose"><span class="mclose">}</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> 가 로짓에 대해 대락적으로 직교하고, logit과 예제 x에 대해 비슷한 크기이면 <strong>GraNd를 error vector의 노름으로 추정할 수 있습니다.</strong></p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>E</mi><mi>L</mi><mn>2</mn><mi>N</mi><mo>=</mo><mi mathvariant="double-struck">E</mi><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mi>p</mi><mo stretchy="false">(</mo><msub><mi>W</mi><mi>t</mi></msub><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo><mo>−</mo><mi>y</mi><mi mathvariant="normal">∣</mi><msub><mi mathvariant="normal">∣</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">EL2N = \mathbb E||p(W_t,x)-y||_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.05764em">E</span><span class="mord mathnormal">L</span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.10903em">N</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathbb">E</span><span class="mord">∣∣</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mord">∣</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span></div><p>실험적으로 봤을때, 이는 네트워크와 관계없이 데이터에 종속적인 값입니다. Data driven AI를 더욱 강조하게 되는 것 같습니다.</p><p>GraNd: Gradient Norm distance<br>
<!-- -->EL2N: Error L2 Norm<br>
<!-- -->의 약자로 생각됩니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h2><p><a href="https://arxiv.org/pdf/2107.07075.pdf" target="_blank" rel="noopener noreferrer">[Arxiv]Deep learning on a data diet</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-selection-via-proxy"><a href="https://arxiv.org/pdf/1906.11829.pdf" target="_blank" rel="noopener noreferrer">[1] Selection via proxy</a><a href="#1-selection-via-proxy" class="hash-link" aria-label="Direct link to 1-selection-via-proxy" title="Direct link to 1-selection-via-proxy">​</a></h4><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-data-distribution-search-to-select-core-set-for-machine-learning"><a href="http://manuscriptlink-society-file.s3.amazonaws.com/kism/conference/sma2020/presentation/SMA-2020_paper_50.pdf" target="_blank" rel="noopener noreferrer">[2] Data distribution search to select core-set for machine learning</a><a href="#2-data-distribution-search-to-select-core-set-for-machine-learning" class="hash-link" aria-label="Direct link to 2-data-distribution-search-to-select-core-set-for-machine-learning" title="Direct link to 2-data-distribution-search-to-select-core-set-for-machine-learning">​</a></h4><h4 class="anchor anchorWithStickyNavbar_LWe7" id="8-an-empirical-study-of-example-forgetting-during-deep-neural-network-learning"><a href="https://arxiv.org/pdf/1812.05159.pdf" target="_blank" rel="noopener noreferrer">[8] An empirical study of example forgetting during deep neural network learning</a><a href="#8-an-empirical-study-of-example-forgetting-during-deep-neural-network-learning" class="hash-link" aria-label="Direct link to 8-an-empirical-study-of-example-forgetting-during-deep-neural-network-learning" title="Direct link to 8-an-empirical-study-of-example-forgetting-during-deep-neural-network-learning">​</a></h4><h4 class="anchor anchorWithStickyNavbar_LWe7" id="13-understanding-deep-learning-requires-rethinking-generalization"><a href="https://arxiv.org/abs/1611.03530v2" target="_blank" rel="noopener noreferrer">[13] Understanding deep learning requires rethinking generalization</a><a href="#13-understanding-deep-learning-requires-rethinking-generalization" class="hash-link" aria-label="Direct link to 13-understanding-deep-learning-requires-rethinking-generalization" title="Direct link to 13-understanding-deep-learning-requires-rethinking-generalization">​</a></h4>]]></content:encoded>
            <category>ml</category>
            <category>paper</category>
        </item>
        <item>
            <title><![CDATA[NGRX 반응형 웹을 위한 상태 관리]]></title>
            <link>https://jwher.github.io/posts/ngrx</link>
            <guid>https://jwher.github.io/posts/ngrx</guid>
            <pubDate>Wed, 17 Aug 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[NGRX]]></description>
            <content:encoded><![CDATA[<p><a href="/posts/ngrx"><img loading="lazy" alt="ngrx" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTAwMHB4IiBoZWlnaHQ9IjEwMDBweCIgdmlld0JveD0iMCAwIDEwMDAgMTAwMCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTEuMSAoNTc1MDEpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPmJhZGdlPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9ImJhZGdlIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cG9seWdvbiBpZD0iUGF0aC0yIiBmaWxsPSIjNDEyODQ2IiBwb2ludHM9IjUwMC45NjI1MiAxMSA0NCAxNjkuNjE5NTAzIDEwOS40MTkwMDkgNzc1Ljg2MzYwOSA1MDAuOTYyNTIgOTg5LjE0NzUxOCI+PC9wb2x5Z29uPgogICAgICAgIDxwb2x5Z29uIGlkPSJQYXRoLTIiIGZpbGw9IiM0QjMxNEYiIHBvaW50cz0iNDk5IDExIDk1NS45NjI1MiAxNjkuNjE5NTAzIDg5MC41NDM1MTEgNzc1Ljg2MzYwOSA0OTkgOTg5LjE0NzUxOCI+PC9wb2x5Z29uPgogICAgICAgIDxwYXRoIGQ9Ik03MjcuNzQ4MDQyLDM0NS43MTIzMDYgTDcyNy42NjYzNCwzNDUuNDUyOTQ4IEM3NDguNTMxNDEsMzY4LjY3NTc0MyA3NTkuMjQ4NjU1LDM5Ni4yNTA5NTUgNzU5LjgxODA3Nyw0MjguMTc4NTgzIEM3NjAuMzg3NDk5LDQ2MC4xMDYyMSA3NDkuNjcwMjUzLDQ5My43ODU1NTMgNzI3LjQxOTM2Miw1MjkuMTEzNzAyIEM3NDQuMDQ5MjE2LDUxNi4xODYyMzEgNzYzLjI1NDA0NCw0ODguMjgwNTcyIDc4NC45NzA3NTQsNDQ1LjcyMDk5MyBDNzk0LjM1MjQ4OSw1MzEuOTczNDk3IDc1OS40OTY0MDYsNTk3LjQ4ODgyMiA2ODAuMDc2NzYsNjQyLjM1ODI3NCBDNzA1LjQzMzE3MSw2NDAuMDE5OTg3IDczOS4wOTgyMjEsNjIzLjMyNjEwMiA3ODAuODUyMzczLDU5Mi4yMTgzMDQgQzczNi4yOTUyMDQsNjk5LjQ5MjMxNiA2NTQuMzY4MjQ2LDc1Ni4wOTE0NDggNTM1LjA3MTQ5OSw3NjIuMDE1NyBDNDE5Ljc3OTA2Niw3NjEuOTg0ODI4IDM0NS4wOTA1MDksNjkyLjcwMDYzIDM0NS4xNDkzNDcsNjkyLjc0NDYyMyBDMjk3Ljc0OTAwMyw2NTUuODUzNDIyIDI2NS4xMzYyOTQsNjA5LjM1NjAwNiAyNDcuNDIwNjU3LDU1My40NjExOTQgQzIxOS4wNzEzNTIsNTIyLjUwMTQ2OCAyMTguNzg4Njg3LDUxOS4xODE0MTIgMjE1Ljg2NDM5OSw1MDYuODEwMjEzIEMyMTIuOTQwMTEsNDk0LjQzOTAxNSAyMTcuNzExNTg5LDQ5MC45ODMwMzggMjI2LjAxNjIyNSw0NzguODc3Njg0IEMyMzEuNTUyNjQ5LDQ3MC44MDc0NDggMjMyLjg1NzI4OCw0NTkuMTk4MzM3IDIzMC4wMTI3NTQsNDQ0LjI1NzY1NyBDMjIyLjk1NTAxMyw0MzQuNDcwMDA5IDIxOC44OTA2NDMsNDE5LjE0MDg2NiAyMTcuODE5NjQyLDM5OC4yNzAyMjkgQzIxNy44MTk2NDIsMzg4LjE4NDE0OSAyMjQuNTUwOTM3LDM3Ny41NDIzNjkgMjM4LjAxMzUyNiwzNjYuMzQ0ODg4IEMyNTEuNDc2MTE2LDM1NS4xNDc0MDcgMjU5LjczNTU4NywzNDYuNTM1NzY0IDI2Mi43Mjc4NzcsMzQwLjYwNjcyIEMyNjUuMDEwMTM3LDMzNy4zNzQyODEgMjY1Ljg5MTkxMywzMjMuMzYwODk3IDI2NS4zNzMyMDQsMjk4LjU2NjU3IEMyNjUuMjMzODQxLDI3NC4yMTM2NTkgMjc4Ljc1NTMxNywyNjAuOTY0MzE2IDMwNS45Mzc2MywyNTguODE4NTQzIEMzNDYuNzExMSwyNTUuNTk5ODgzIDM2OS43MDU5ODYsMjI0LjkzNDUyOSAzODIuNTE2MjU2LDIxMC45ODg4NDYgQzM5MS4wNTY0MzYsMjAxLjY5MTcyNCA0MDMuNjk1MTk0LDE5Ny4xNzI5NDEgNDE5LjYzNjcxMSwxOTcuMDg2MDQxIEM0NDIuMDc5Njk2LDE5Ni4wMzQwOTggNDYyLjQ5OTk3NywyMDQuNjM3MTY2IDQ4MC4wOTE0NDUsMjIyLjM5MDk5OSBDNTIzLjkwNjAzMywyMjAuMTI0NzQ2IDU2OC43ODY4NTgsMjMxLjk0MDgxNiA2MTQuMjYyMjYsMjU3LjUzOTA2IEM2NzguODg2NDUzLDI5NS45Mjc1MTkgNzE0LjE1NTE0NCwzMzcuNTAwMDAyIDcyMC4wNjgzMzUsMzgyLjA0Njg2IEM3MTMuMTQxNTE2LDQ0MC42NzIxMjYgNjM0LjM4ODkxMSw0MzkuMTM5NTM5IDQ4NC4xNTgwMDcsMzc3LjQzNDg4OCBDNDA1LjU0MDg1NCwzOTkuNzAzNzQxIDM2Ni44OTA0NjIsNDQ3Ljk1OTkzMyAzNjguMTc0Mzc5LDUyMi4yMDM0NjIgQzM2OC4xMjA2MzgsNTkwLjMzMTY2NiA0MDEuMDkzOTIxLDYzOS44Mzc2MTIgNDY2Ljg2NzQ0OCw2NzAuNjcxMzI1IEM0MzQuODA5NDcxLDYzOS4xOTc2MzQgNDIxLjE1Njg2MSw2MTIuNzQzOTY2IDQyNS43NTQ1NjMsNTkwLjgzNTkxMyBDNDkyLjQzNDA1Nyw2NjkuODAyNTY1IDU2OC4zODcyMzQsNjk5LjMxNzU4MyA2NTMuNDgxMiw2NzkuMzg3MDg1IEM2MTUuOTY0ODg3LDY4MC42OTY5MDggNTg2LjI0ODQ0NSw2NjguNjI1MjAyIDU2My44ODM0MzksNjQyLjk5MDU5IEM2MjEuNDAwNzk2LDY0MS41OTI2OTQgNjc1LjY5Nzg0OCw2MTQuODkyNDYgNzI2LjgyODQ5Nyw1NjIuNjE4MjcgQzY5Ny4zMTI3NDMsNTg2LjEwNTU5OCA2NjYuNDI3MzUyLDU5NC45OTk0NzggNjMzLjcyNjg5NCw1ODkuNDA0OTg3IEM3MjIuMjk0NDIyLDUxOS43NzM4MTEgNzUzLjYzNDgwNCw0MzguNTQyOTE4IDcyNy43NDgwNDIsMzQ1LjcxMjMwNiBaIE01NjcsMzM1IEM1NzQuMTc5NzAyLDMzNSA1ODAsMzI5LjE3OTcwMiA1ODAsMzIyIEM1ODAsMzE0LjgyMDI5OCA1NzQuMTc5NzAyLDMwOSA1NjcsMzA5IEM1NTkuODIwMjk4LDMwOSA1NTQsMzE0LjgyMDI5OCA1NTQsMzIyIEM1NTQsMzI5LjE3OTcwMiA1NTkuODIwMjk4LDMzNSA1NjcsMzM1IFoiIGlkPSJDb21iaW5lZC1TaGFwZSIgZmlsbD0iI0JBMkJEMiI+PC9wYXRoPgogICAgPC9nPgo8L3N2Zz4=" width="1000" height="1000" class="img_ev3q"></a><br>
<em>NGRX 반응형 웹을 위한 상태 관리</em></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ngrx">ngrx<a href="#ngrx" class="hash-link" aria-label="Direct link to ngrx" title="Direct link to ngrx">​</a></h2><p>ngrx는 앵귤러를 위한 반응형 웹을 만들기 위한 프레임워크입니다.
상태(state) 관리, 사이드 이펙트의 격리(isolation), 엔티티 콜렉션 관리, 라우터 바인딩, 코드 생성,
개발자 도구 지원을 통해 많은 다른 타입의 앱을 만들때 개발자 경험을 향상시킵니다.</p><p>핵심 원칙은 다음과 같습니다.</p><ul><li>상태는 하나의 불변하는(immutable) 데이터 구조입니다</li><li>컴포넌트는 격리되어 처리되는 사이드 이펙트에 책임을 위임(delegate)합니다</li><li>타입스크립트를 사용해 타입 안정성을 추구합니다</li><li>액션(actions)과 상태(state)는 직렬화(serializable) 가능해 상태를 저장하고, 압축 해제(rehydrated), 재현가능하게 만듭니다</li><li>반응형 웹을 만들기 위한 함수형 프로그래밍을 추구합니다</li><li>기능(functionality) 검증을 위해 간단한 테스팅 전략을 제공합니다</li></ul><p>포함된 패키지는 다음과 같습니다</p><p>상태(State)</p><ul><li><a href="#store">스토어(Store)</a>: RxJS에서 제공하는 앵귤러 앱을 위한 상태 관리 방법입니다. Redux에서 영감을 얻었습니다<ul><li><a href="#actions">액션(Actions)</a>은 컴포넌트와 서비스에서 전달(dispathed)되는 고유한 이벤트입니다</li><li><a href="#reducers">리듀서(Reducers)</a>는 현재 상태와 가장 마지막에 수행된 액션으로 새로운 상태를 계산하는 순수 함수입니다</li><li><a href="#selectors">셀렉터(Selectors)</a>는 상태의 일부를 선택하고(select), 파생하고(derive), 조합하는(compose) 순수 함수입니다</li></ul></li><li><a href="#effects">이펙트(Effects)</a>: 스토어를 위한 사이드 이펙트 모델입니다</li><li>라우터 스토어: 앵귤러 라우터와 스토어간 바인딩입니다</li><li>엔티티(Entity): 기록된 콜렉션을 관리하기 위한 엔티티 상태입니다</li><li>ComponentStore: local/component 상태를 관리하기 위한 독립 라이브러리 입니다.</li></ul><p>데이터</p><ul><li>Data: 엔티티 데이터 관리를 위해 간소화된 확장입니다.</li></ul><p>개발자 도구  </p><ul><li><a href="#store-devtools">Store Devtools</a></li><li>Schematics: 앵귤러에서 NgRx 라이브러리를 사용하기 위한 비계(Scaffolding)입니다</li><li>ESLint Plugin</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tldr">TL;DR<a href="#tldr" class="hash-link" aria-label="Direct link to TL;DR" title="Direct link to TL;DR">​</a></h3><p><img loading="lazy" alt="ngrx-state-management-lifecycle" src="/assets/images/state-management-lifecycle-21cd35a8817f6c11ee57c5e5e1df02e5.png" width="1920" height="1080" class="img_ev3q"><br>
<!-- -->NgRx는 반응형 웹을 위해서 Redux에서 영감을 받은 <strong>스토어(Store)</strong>를 제공합니다.<br>
<!-- -->크게 <strong>액션(Action)</strong>, <strong>리듀서(Reducer)</strong>, <strong>셀렉터(Selector)</strong> 흐름으로 이루어진 스토어와,
스토어와 외부 상호 작용을 하는(API 호출 등) <strong>이펙트(Effects)</strong>로 이루어집니다.</p><p>이펙트에 책임을 위임하는 격리된 구조로 간단한 상태 관리를 제공합니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="구현">구현<a href="#구현" class="hash-link" aria-label="Direct link to 구현" title="Direct link to 구현">​</a></h2><p><em>여기에서는 큰 규모에 적합한 계층적으로 구조화된 스토어를 설명합니다.</em>
<em>공식 <a href="https://ngrx.io/guide/store/walkthrough" target="_blank" rel="noopener noreferrer">가이드</a>를 따라해 보는것도 좋습니다</em></p><p>설명만으로는 직관적으로 이해가 안되니, 직접 해 봅시다.
대표적으로 다음과 같은 폴더 구조를 가집니다.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">src</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├components</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └store</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └&lt;name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├&lt;name&gt;.actions.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├&lt;name&gt;.effects.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├&lt;name&gt;.model.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├&lt;name&gt;.reducer.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├&lt;name&gt;.selector.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├&lt;name&gt;.store.module.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      └index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    root-store.module.ts</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>components는 사용자에게 보여질 페이지 모음입니다</li><li>service는 실제 api endpoint를 호출하는 코드입니다</li><li>store는 ngrx 스토어 모음입니다</li><li>model은 ngrx에 없지만 store의 type을 지정하기 위해 추가한 인터페이스입니다</li></ul><br><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>취향에 따라</summary><div><div class="collapsibleContent_i85q"><p>규모가 작은 앱에서는 다음 구조를 가지기도 합니다.<br>
<a href="https://stackoverflow.com/a/38560992" target="_blank" rel="noopener noreferrer">What is the best structure for app using ngrx?</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">src</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├components</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └store</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├actions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├effects</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├reducers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └selectors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    index.ts</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><p>여기에서는 상단에 기술된 구조로 작성합니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="store">Store<a href="#store" class="hash-link" aria-label="Direct link to Store" title="Direct link to Store">​</a></h2><p>직접 스토어를 생성해 볼까요?  </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export name='storeName'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># store.module</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ng g m store/${name}/${name}.store --flat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># actions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ng g @ngrx/schematics:action store/${name}/${name} --defaults  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># effects</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ng g @ngrx/schematics:effect store/${name}/${name} --skip-tests --module store/${name}/${name}.store.module.ts --defaults  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># reducer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ng g @ngrx/schematics:reducer store/${name}/${name} --skip-tests --defaults  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># selector</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ng g @ngrx/schematics:selector store/${name}/${name} --skip-tests  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># model은 직접 생성합니다</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>여기에서는 <code>name=user</code> 로 user 정보에 대한 스토어를 만들어 보겠습니다.  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="model">Model<a href="#model" class="hash-link" aria-label="Direct link to Model" title="Direct link to Model">​</a></h3><p><code>src/app/store/user/user.model.ts</code></p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">UserCreate</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">user_id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">user_pw</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">UserUpdate</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">user_id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">user_pw</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">user_id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">user_pw</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">updated</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">created</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>각각 <code>post</code> <code>put</code> <code>read</code>에 필요한 인터페이스를 만들었습니다.
(<code>delete</code>는 따로 만들지 않았습니다.)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="actions">Actions<a href="#actions" class="hash-link" aria-label="Direct link to Actions" title="Direct link to Actions">​</a></h3><p>액션은 스토어에 작용할 수 있는 고유한 이벤트입니다.  </p><p><code>src/app/store/user/user.actions.ts</code> 일부</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> createAction</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> props </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@ngrx/store'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Update</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@ngrx/entity'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">User</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">UserCreate</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">UserUpdate</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'./user.model'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> loadUser </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createAction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">'[User/API] Load User'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    props</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> loadUserSuccess </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createAction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">'[User/API] Load User Success'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    props</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">user</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">User</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> loadUserFailure </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createAction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">'[User/API] Load User Failure'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> 후략 </span><span class="token spread operator" style="color:#393A34">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>user를 불러오는 액션 <code>loadUser</code>를 만듭니다.  </p><p>사이드 이펙트 처리를 위한 success, failure 액션도 만들어 줍시다.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>전체 코드</summary><div><div class="collapsibleContent_i85q"><p>CRUD에 대응하는 액션을 전부 만들어 줍시다.  </p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> createAction</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> props </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@ngrx/store'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Update</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@ngrx/entity'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">User</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">UserCreate</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">UserUpdate</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'./user.model'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> loadUser </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createAction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">'[User/API] Load User'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    props</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> loadUserSuccess </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createAction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">'[User/API] Load User Success'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    props</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">user</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">User</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> loadUserFailure </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createAction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">'[User/API] Load User Failure'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> createUser </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createAction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">'[User/API] Create User'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    props</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">create</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">UserCreate</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> createUserSuccess </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createAction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">'[User/API] Create User Success'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    props</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">user</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">User</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> createUserFailure </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createAction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">'[User/API] Create User Failure'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> updateUser </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createAction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">'[User/API] Update User'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    props</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> update</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">UserUpdate</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> updateUserSuccess </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createAction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">'[User/API] Update User Success'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    props</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">user</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Update</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">User</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> updateUserFailure </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createAction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">'[User/API] Update User Failure'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> deleteUser </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createAction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">'[User/API] Delete User'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    props</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> deleteUserSuccess </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createAction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">'[User/API] Delete User Success'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    props</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">user</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">User</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> deleteUserFailure </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createAction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">'[User/API] Delete User Failure'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reducers">Reducers<a href="#reducers" class="hash-link" aria-label="Direct link to Reducers" title="Direct link to Reducers">​</a></h3><p>현재 상태와 마지막에 실행된 액션으로 새로운 상태를 만들어 줍니다.</p><p><code>src/app/store/user/user.reducer.ts</code> import 부분  </p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> createEntityAdapter</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">EntityAdapter</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">EntityState</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@ngrx/entity'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Action</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> createReducer</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> on </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@ngrx/store'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports operator" style="color:#393A34">*</span><span class="token imports"> </span><span class="token imports keyword module" style="color:#00009f">as</span><span class="token imports"> </span><span class="token imports maybe-class-name">UserActions</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'./user.actions'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">User</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'./user.model'</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>user.actions.ts와 user.model.ts를 가져옵니다.</p><br><p><code>src/app/store/user/user.reducer.ts</code> adapter 부분  </p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> userFeatureKey </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'user'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">State</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">EntityState</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">User</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">adapter</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">EntityAdapter</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">User</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> createEntityAdapter</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">User</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">initialState</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">State</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> adapter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getInitialState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>User</code> 인터페이스에 EntityState를 만들고, 추가적으로 필요한 엔티티를 작성할 수 있는 상태(State)를 만들어 줍니다.
이 엔티티 상태를 변경할 수 있는 <code>User</code>에 대한 EntityAdapter를 만들고,
초기 상태를 가져옵니다.</p><br><p><code>src/app/store/user/user.reducer.ts</code> reducer 부분  </p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> reducer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createReducer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    initialState</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">UserActions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">loadUserSuccess</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        adapter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setOne</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">UserActions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">createUserSuccess</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        adapter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addOne</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">UserActions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">updateUserSuccess</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        adapter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">updateOne</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">UserActions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">deleteUserSuccess</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        adapter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">removeOne</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>리듀서는 initialState와 action 발생시 수행할 작업을 기술합니다.
앞에서 작성한 액션 중 성공했을때만 상태를 바꿀 것이기 때문에 다음과 같이 작성해줍니다.</p><br><p><code>src/app/store/user/user.reducer.ts</code> getSelectors 부분  </p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> selectIds</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> selectEntities</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> selectAll</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> selectTotal </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> adapter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getSelectors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>셀렉터에서 상태를 접근할 수 있게 export 해 줍니다.</p><br><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>전체 코드</summary><div><div class="collapsibleContent_i85q"><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> createEntityAdapter</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">EntityAdapter</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">EntityState</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@ngrx/entity'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Action</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> createReducer</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> on </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@ngrx/store'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports operator" style="color:#393A34">*</span><span class="token imports"> </span><span class="token imports keyword module" style="color:#00009f">as</span><span class="token imports"> </span><span class="token imports maybe-class-name">UserActions</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'./user.actions'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">User</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'./user.model'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> userFeatureKey </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'user'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">State</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">EntityState</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">User</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">adapter</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">EntityAdapter</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">User</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> createEntityAdapter</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">User</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">initialState</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">State</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> adapter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getInitialState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> reducer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createReducer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    initialState</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">UserActions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">loadUsersSuccess</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        adapter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setAll</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">users</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">UserActions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">loadUserSuccess</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        adapter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setOne</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">UserActions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">createUserSuccess</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        adapter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addOne</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">UserActions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">updateUserSuccess</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        adapter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">updateOne</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">UserActions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">deleteUserSuccess</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        adapter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">removeOne</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> selectIds</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> selectEntities</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> selectAll</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> selectTotal </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> adapter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getSelectors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="selectors">Selectors<a href="#selectors" class="hash-link" aria-label="Direct link to Selectors" title="Direct link to Selectors">​</a></h3><p>상태를 선택, 파생, 조합하는 부분입니다. sql query와 비슷한 개념으로 볼 수 있습니다.</p><p><code>src/app/store/user/user.selectors.ts</code>  </p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> createFeatureSelector</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> createSelector </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@ngrx/store'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports operator" style="color:#393A34">*</span><span class="token imports"> </span><span class="token imports keyword module" style="color:#00009f">as</span><span class="token imports"> fromUser</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'./user.reducer'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">UserState</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'.'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> getUserState </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> createFeatureSelector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">UserState</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">State</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fromUser</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">userFeatureKey</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> selectAllUsers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createSelector</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    getUserState</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fromUser</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">selectAll</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> getAdminUsers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createSelector</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    selectAllUsers</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">users</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> users</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">user</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">name</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"admin"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>자바스크립트의 배열 메스드 <code>map</code> <code>filter</code> <code>find</code> <code>reduce</code> 를 사용하거나,
조건문 삽입, 다른 외부 셀럭터와 조합할 수 있습니다.</p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="store-devtools">Store Devtools<a href="#store-devtools" class="hash-link" aria-label="Direct link to Store Devtools" title="Direct link to Store Devtools">​</a></h3><p>파일을 생성했으면 모듈에 등록해 주어야됩니다.  </p><p><code>src/app/store/user/user.store.module.ts</code>  </p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">CommonModule</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@angular/common'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">EffectsModule</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@ngrx/effects'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">NgModule</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@angular/core'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">StoreModule</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@ngrx/store'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports operator" style="color:#393A34">*</span><span class="token imports"> </span><span class="token imports keyword module" style="color:#00009f">as</span><span class="token imports"> fromUser</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'./user.reducer'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">UserEffects</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'./user.effects'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:#d73a49">NgModule</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">declarations</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">imports</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token maybe-class-name">CommonModule</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token maybe-class-name">StoreModule</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">forFeature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fromUser</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">userFeatureKey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fromUser</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">reducer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token maybe-class-name">EffectsModule</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">forFeature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token maybe-class-name">UserEffects</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">UserStoreModule</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>src/app/store/index.ts</code>  </p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">ActionReducerMap</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">MetaReducer</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"@ngrx/store"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">UserState</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"./User"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">RootState</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">Users</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">UserState</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">State</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">reducers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">ActionReducerMap</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">RootState</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">Users</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">UserState</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">reducer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">metaReducers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">MetaReducer</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">RootState</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>src/app/store/root-store.module.ts</code>  </p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">NgModule</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@angular/core'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">CommonModule</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@angular/common'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">EffectsModule</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@ngrx/effects'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">StoreModule</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@ngrx/store'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">StoreDevtoolsModule</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@ngrx/store-devtools'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> reducers</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> metaReducers </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'./index'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">UserStoreModule</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'./user'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">UserEffects</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'./user/user.effects'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:#d73a49">NgModule</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">declarations</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">imports</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token maybe-class-name">CommonModule</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token maybe-class-name">StoreModule</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">forRoot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">reducers</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">metaReducers</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token maybe-class-name">StoreDevtoolsModule</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">instrument</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token maybe-class-name">EffectsModule</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">forRoot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token maybe-class-name">UserEffects</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token maybe-class-name">UserStoreModule</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">RootStoreModule</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>여기에서, StoreDevtoolsModule.instrument()를 import 해주어야 debugging이 가능합니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="effects">Effects<a href="#effects" class="hash-link" aria-label="Direct link to Effects" title="Direct link to Effects">​</a></h2><p>이펙트는 RxJS에서 작동하는 스토어용 사이드 이펙트 모델입니다.
이펙트는 스트림(stream)을 사용하여 네트워크 요청, 웹 소켓 메시지, 시간 기반 이벤트
같은 외부 상호 작용의 상태를 줄이기(reduce) 위한 새로운 액션 소스를 제공합니다.</p><p><code>src/app/store/user/user.effects.ts</code> 일부  </p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Injectable</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@angular/core'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Actions</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> createEffect </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@ngrx/effects'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:#d73a49">Injectable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">UserEffects</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token parameter keyword" style="color:#00009f">private</span><span class="token parameter"> </span><span class="token parameter literal-property property" style="color:#36acaa">actions$</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">Actions</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#393A34"><span class="token parameter">        </span><span class="token parameter keyword" style="color:#00009f">private</span><span class="token parameter"> </span><span class="token parameter literal-property property" style="color:#36acaa">UserService</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">UserService</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    loadUser$ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">actions$</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">ofType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">UserActions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">loadUser</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">mergeMap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> id </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">userService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">loadUser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token maybe-class-name">UserActions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">loadUserSuccess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">user</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> data </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token function" style="color:#d73a49">catchError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token maybe-class-name">UserActions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">loadUserFailure</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> 후략 </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>loadUser</code> 액션이 불리면,
<code>mergeMap</code>으로 userService에서 실제 API endpoint를 호출합니다.
이때 <code>pipe</code>로 성공하는 경우 <code>loadUserSuccess</code> 액션을 부르고,
에러 발생 시 <code>loadUserFailure</code> 액션을 실행시킵니다.</p><p>이런 구현으로, 격리된 이펙트에서 스토어 사이드 이펙트를 처리하는 책임을 지게 됩니다.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>전체 코드</summary><div><div class="collapsibleContent_i85q"><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Injectable</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@angular/core'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Actions</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> createEffect </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@ngrx/effects'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:#d73a49">Injectable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">UserEffects</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token parameter keyword" style="color:#00009f">private</span><span class="token parameter"> </span><span class="token parameter literal-property property" style="color:#36acaa">actions$</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">Actions</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#393A34"><span class="token parameter">        </span><span class="token parameter keyword" style="color:#00009f">private</span><span class="token parameter"> </span><span class="token parameter literal-property property" style="color:#36acaa">UserService</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">UserService</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    loadUser$ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">actions$</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">ofType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">UserActions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">loadUser</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">mergeMap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> id </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">userService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">loadUser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token maybe-class-name">UserActions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">loadUserSuccess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">user</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> data </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token function" style="color:#d73a49">catchError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token maybe-class-name">UserActions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">loadUserFailure</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    createUser$ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">actions$</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">ofType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">UserActions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">createUser</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">mergeMap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> create </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">userService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createUser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">create</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token maybe-class-name">UserActions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createUserSuccess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">user</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> data </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token function" style="color:#d73a49">catchError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token maybe-class-name">UserActions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">createUserFailure</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    updateUser$ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">actions$</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">ofType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">UserActions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">updateUser</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">mergeMap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> id</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> update </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">userService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">updateUser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> update</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token maybe-class-name">UserActions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">updateUserSuccess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">user</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> data </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token function" style="color:#d73a49">catchError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token maybe-class-name">UserActions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">updateUserFailure</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    deleteUser$ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">actions$</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">ofType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">UserActions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">deleteUser</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">mergeMap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> id </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">userService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">deleteUser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token maybe-class-name">UserActions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">deleteUserSuccess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">user</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> data </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token function" style="color:#d73a49">catchError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token maybe-class-name">UserActions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">deleteUserFailure</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><p><a href="https://ngrx.io/docs" target="_blank" rel="noopener noreferrer">[공식]What is NgRx</a><br>
<a href="https://ngrx.io/guide/store/walkthrough" target="_blank" rel="noopener noreferrer">[공식]Tutorial</a></p>]]></content:encoded>
            <category>web</category>
            <category>typescript</category>
        </item>
        <item>
            <title><![CDATA[다양한 급수]]></title>
            <link>https://jwher.github.io/posts/power-series</link>
            <guid>https://jwher.github.io/posts/power-series</guid>
            <pubDate>Mon, 11 Jul 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[다양한 급수]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="power series" src="/assets/images/power-series-formula-05433843c5a24ecea5d7005629574a35.png" width="1662" height="782" class="img_ev3q">
<em>다양한 급수</em></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="급수">급수<a href="#급수" class="hash-link" aria-label="Direct link to 급수" title="Direct link to 급수">​</a></h2><p><strong>급수</strong>(級數)는 수열의 모든 항을 더한 값입니다.
여기에서는 무한한 항의 합인 <strong>무한급수</strong> 에 대해 다룹니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="멱급수">멱급수<a href="#멱급수" class="hash-link" aria-label="Direct link to 멱급수" title="Direct link to 멱급수">​</a></h2><p><strong>멱급수</strong> 또는 <strong>거듭제곱 급수</strong>(Power series)는 주어진 변수를 거듭제곱한 항들의 무한급수이자,
중심이 같은 멱함수를 항으로 하는 무한급수입니다.</p><p>실수체 또는 복소수체 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">K</mi><mo>∈</mo><mo stretchy="false">{</mo><mrow><mi mathvariant="double-struck">R</mi><mo separator="true">,</mo><mi mathvariant="double-struck">C</mi></mrow><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\mathbb{K} \in \{\mathbb{R,C}\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.728em;vertical-align:-0.0391em"></span><span class="mord mathbb">K</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">{</span><span class="mord"><span class="mord mathbb">R</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathbb">C</span></span><span class="mclose">}</span></span></span></span></span>에서 중심 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub><mo>∈</mo><mi mathvariant="double-struck">K</mi></mrow><annotation encoding="application/x-tex">x_0 \in \mathbb{K}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6891em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6889em"></span><span class="mord mathbb">K</span></span></span></span></span>의 멱급수는 다음과 같이 정의됩니다.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mstyle mathsize="2.074em"><munderover><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi mathvariant="normal">∞</mi></munderover><mstyle mathcolor="red"><msub><mi>a</mi><mi>n</mi></msub></mstyle><mo stretchy="false">(</mo><mi>x</mi><mo>−</mo><mstyle mathcolor="blue"><msub><mi>x</mi><mn>0</mn></msub></mstyle><msup><mo stretchy="false">)</mo><mi>n</mi></msup></mstyle></mrow><annotation encoding="application/x-tex">\huge \sum_{n=0}^{\infty}{\color{red}a_n}(x-{\color{blue} x_0})^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:6.0403em;vertical-align:-2.6204em"></span><span class="mop op-limits sizing reset-size6 size10"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6489em"><span style="top:-2.9106em;margin-left:0em"><span class="pstrut" style="height:4.074em"></span><span class="sizing reset-size10 size8 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-4.074em"><span class="pstrut" style="height:4.074em"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-5.324em;margin-left:0em"><span class="pstrut" style="height:4.074em"></span><span class="sizing reset-size10 size8 mtight"><span class="mord mtight"><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2634em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord sizing reset-size6 size10"><span class="mord" style="color:red"><span class="mord mathnormal" style="color:red">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1489em"><span style="top:-3.29em;margin-left:0em;margin-right:0.0241em"><span class="pstrut" style="height:3.44em"></span><span class="sizing reset-size10 size8 mtight" style="color:red"><span class="mord mathnormal mtight" style="color:red">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span><span class="mopen sizing reset-size6 size10">(</span><span class="mord mathnormal sizing reset-size6 size10">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin sizing reset-size6 size10">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.074em;vertical-align:-0.5185em"></span><span class="mord sizing reset-size6 size10"><span class="mord" style="color:blue"><span class="mord mathnormal" style="color:blue">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2974em"><span style="top:-3.29em;margin-left:0em;margin-right:0.0241em"><span class="pstrut" style="height:3.44em"></span><span class="sizing reset-size10 size8 mtight" style="color:blue"><span class="mord mtight" style="color:blue">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span><span class="mclose sizing reset-size6 size10"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7119em"><span style="top:-3.853em;margin-right:0.0241em"><span class="pstrut" style="height:3.44em"></span><span class="sizing reset-size10 size8 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span></div><p>자세히 살펴보면 등차수열<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="red"><msub><mi>a</mi><mi>n</mi></msub></mstyle></mrow><annotation encoding="application/x-tex">\color{red}a_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord" style="color:red"><span class="mord mathnormal" style="color:red">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight" style="color:red"><span class="mord mathnormal mtight" style="color:red">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>과 등비수열<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo>−</mo><mstyle mathcolor="blue"><msub><mi>x</mi><mn>0</mn></msub></mstyle><msup><mo stretchy="false">)</mo><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">(x-{\color{blue} x_0})^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord" style="color:blue"><span class="mord mathnormal" style="color:blue">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight" style="color:blue"><span class="mord mtight" style="color:blue">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span>로 이루어져 있습니다.
이 멱급수가 수렴하게 만드는 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>∈</mo><mi mathvariant="double-struck">K</mi></mrow><annotation encoding="application/x-tex">x \in \mathbb{K}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6889em"></span><span class="mord mathbb">K</span></span></span></span></span>의 집합을 멱급수의 수렴영역(domain of convergence)이라고 합니다.
실수 영역에선 <strong>수렴구간</strong>(interval of convergence)
복소수 영역에선 <strong>수렴원판</strong>(disc of convergence)라고 구분하기도 합니다.</p><br><br><br><br><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="테일러-급수">테일러 급수<a href="#테일러-급수" class="hash-link" aria-label="Direct link to 테일러 급수" title="Direct link to 테일러 급수">​</a></h2><p><strong>테일러 급수</strong>(Taylor series) 또는 <strong>테일러 전개</strong>(Taylor expansion)는 도함수들의 한 점에서 계산된 항의 무한합으로 해석함수를 나타냅니다.
복잡한 함수를 다루기 쉬운 다항함수로 바꿔줌으로써, 정적분의 값을 근사적으로 구할 수 있습니다.</p><p>매끄러운 함수(Smooth function) <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>:</mo><mi mathvariant="double-struck">R</mi><mo>→</mo><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">f:\mathbb{R} \rightarrow \mathbb{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6889em"></span><span class="mord mathbb">R</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6889em"></span><span class="mord mathbb">R</span></span></span></span></span> 및 실수 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>∈</mo><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">a \in \mathbb{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6889em"></span><span class="mord mathbb">R</span></span></span></span></span>
(또는, 복소수계의 정칙함수)이 주어졌을 때,
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span></span></span></span></span>의 테일러 급수는 다음과 같이 정의됩니다.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mstyle mathsize="2.074em"><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><munderover><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi mathvariant="normal">∞</mi></munderover><mstyle mathcolor="red"><mfrac><mrow><msup><mi>f</mi><mrow><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow></msup><mo stretchy="false">(</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><mrow><mi>n</mi><mo stretchy="false">!</mo></mrow></mfrac></mstyle><mo stretchy="false">(</mo><mi>x</mi><mo>−</mo><mstyle mathcolor="blue"><msub><mi>x</mi><mn>0</mn></msub></mstyle><msup><mo stretchy="false">)</mo><mi>n</mi></msup></mstyle></mrow><annotation encoding="application/x-tex">\huge f(x)=\sum_{n=0}^{\infty}{\color{red}{f^{(n)}(x_0) \over n!}}(x-{\color{blue} x_0})^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.074em;vertical-align:-0.5185em"></span><span class="mord mathnormal sizing reset-size6 size10" style="margin-right:0.10764em">f</span><span class="mopen sizing reset-size6 size10">(</span><span class="mord mathnormal sizing reset-size6 size10">x</span><span class="mclose sizing reset-size6 size10">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel sizing reset-size6 size10">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:6.0403em;vertical-align:-2.6204em"></span><span class="mop op-limits sizing reset-size6 size10"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6489em"><span style="top:-2.9106em;margin-left:0em"><span class="pstrut" style="height:4.074em"></span><span class="sizing reset-size10 size8 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-4.074em"><span class="pstrut" style="height:4.074em"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-5.324em;margin-left:0em"><span class="pstrut" style="height:4.074em"></span><span class="sizing reset-size10 size8 mtight"><span class="mord mtight"><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2634em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord sizing reset-size6 size10"><span class="mord" style="color:red"><span class="mord" style="color:red"><span class="mopen nulldelimiter sizing reset-size10 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5607em"><span style="top:-3.388em"><span class="pstrut" style="height:4.074em"></span><span class="mord" style="color:red"><span class="mord mathnormal" style="color:red">n</span><span class="mclose" style="color:red">!</span></span></span><span style="top:-4.304em"><span class="pstrut" style="height:4.074em"></span><span class="frac-line" style="color:red;border-bottom-width:0.04em"></span></span><span style="top:-4.751em"><span class="pstrut" style="height:4.074em"></span><span class="mord" style="color:red"><span class="mord" style="color:red"><span class="mord mathnormal" style="margin-right:0.10764em;color:red">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8837em"><span style="top:-3.803em;margin-right:0.0241em"><span class="pstrut" style="height:3.44em"></span><span class="sizing reset-size10 size8 mtight" style="color:red"><span class="mord mtight" style="color:red"><span class="mopen mtight" style="color:red">(</span><span class="mord mathnormal mtight" style="color:red">n</span><span class="mclose mtight" style="color:red">)</span></span></span></span></span></span></span></span></span><span class="mopen" style="color:red">(</span><span class="mord" style="color:red"><span class="mord mathnormal" style="color:red">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2974em"><span style="top:-3.29em;margin-left:0em;margin-right:0.0241em"><span class="pstrut" style="height:3.44em"></span><span class="sizing reset-size10 size8 mtight" style="color:red"><span class="mord mtight" style="color:red">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose" style="color:red">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size10 size6"></span></span></span></span><span class="mopen sizing reset-size6 size10">(</span><span class="mord mathnormal sizing reset-size6 size10">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin sizing reset-size6 size10">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.074em;vertical-align:-0.5185em"></span><span class="mord sizing reset-size6 size10"><span class="mord" style="color:blue"><span class="mord mathnormal" style="color:blue">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2974em"><span style="top:-3.29em;margin-left:0em;margin-right:0.0241em"><span class="pstrut" style="height:3.44em"></span><span class="sizing reset-size10 size8 mtight" style="color:blue"><span class="mord mtight" style="color:blue">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span><span class="mclose sizing reset-size6 size10"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7119em"><span style="top:-3.853em;margin-right:0.0241em"><span class="pstrut" style="height:3.44em"></span><span class="sizing reset-size10 size8 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span></div><p>여기에서 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="red"><mrow><msup><mi>f</mi><mrow><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow></msup><mo stretchy="false">(</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow></mstyle></mrow><annotation encoding="application/x-tex">\color{red}{f^{(n)}(x_0)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.138em;vertical-align:-0.25em"></span><span class="mord" style="color:red"><span class="mord" style="color:red"><span class="mord mathnormal" style="margin-right:0.10764em;color:red">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight" style="color:red"><span class="mord mtight" style="color:red"><span class="mopen mtight" style="color:red">(</span><span class="mord mathnormal mtight" style="color:red">n</span><span class="mclose mtight" style="color:red">)</span></span></span></span></span></span></span></span></span><span class="mopen" style="color:red">(</span><span class="mord" style="color:red"><span class="mord mathnormal" style="color:red">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight" style="color:red"><span class="mord mtight" style="color:red">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose" style="color:red">)</span></span></span></span></span></span>는 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span></span></span></span></span>의 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>에서 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">n</span></span></span></span></span>계 도함수를 말합니다.
특히 0계 도함수는 원래 함수 자신입니다.</p><p>테일러 급수는 오차를 가지고 있습니다.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mstyle mathsize="2.074em"><munderover><mo>∑</mo><mstyle mathcolor="green"><mi>k</mi><mo>=</mo><mn>0</mn></mstyle><mstyle mathcolor="green"><mi>n</mi></mstyle></munderover><mfrac><mrow><msup><mi>f</mi><mrow><mo stretchy="false">(</mo><mi>k</mi><mo stretchy="false">)</mo></mrow></msup><mo stretchy="false">(</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><mrow><mi>k</mi><mo stretchy="false">!</mo></mrow></mfrac><mo stretchy="false">(</mo><mi>x</mi><mo>−</mo><msub><mi>x</mi><mn>0</mn></msub><msup><mo stretchy="false">)</mo><mi>k</mi></msup><mo>+</mo><mstyle mathcolor="green"><mrow><msub><mi>R</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mstyle></mstyle></mrow><annotation encoding="application/x-tex">\huge \sum_{\color{green}k=0}^{\color{green}n}{f^{(k)}(x_0) \over k!}(x-x_0)^k + \color{green}{R_{n+1}(x)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:6.1123em;vertical-align:-2.6924em"></span><span class="mop op-limits sizing reset-size6 size10"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6489em"><span style="top:-2.8758em;margin-left:0em"><span class="pstrut" style="height:4.074em"></span><span class="sizing reset-size10 size8 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;color:green">k</span><span class="mrel mtight" style="color:green">=</span><span class="mord mtight" style="color:green">0</span></span></span></span><span style="top:-4.074em"><span class="pstrut" style="height:4.074em"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-5.324em;margin-left:0em"><span class="pstrut" style="height:4.074em"></span><span class="sizing reset-size10 size8 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="color:green">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2982em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord sizing reset-size6 size10"><span class="mord"><span class="mopen nulldelimiter sizing reset-size10 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5607em"><span style="top:-3.388em"><span class="pstrut" style="height:4.074em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="mclose">!</span></span></span><span style="top:-4.304em"><span class="pstrut" style="height:4.074em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-4.751em"><span class="pstrut" style="height:4.074em"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8837em"><span style="top:-3.803em;margin-right:0.0241em"><span class="pstrut" style="height:3.44em"></span><span class="sizing reset-size10 size8 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2974em"><span style="top:-3.29em;margin-left:0em;margin-right:0.0241em"><span class="pstrut" style="height:3.44em"></span><span class="sizing reset-size10 size8 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size10 size6"></span></span></span><span class="mopen sizing reset-size6 size10">(</span><span class="mord mathnormal sizing reset-size6 size10">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin sizing reset-size6 size10">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.3751em;vertical-align:-0.5185em"></span><span class="mord sizing reset-size6 size10"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2974em"><span style="top:-3.29em;margin-left:0em;margin-right:0.0241em"><span class="pstrut" style="height:3.44em"></span><span class="sizing reset-size10 size8 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose sizing reset-size6 size10"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8952em"><span style="top:-3.853em;margin-right:0.0241em"><span class="pstrut" style="height:3.44em"></span><span class="sizing reset-size10 size8 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin sizing reset-size6 size10">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.074em;vertical-align:-0.5185em"></span><span class="mord sizing reset-size6 size10" style="color:green"><span class="mord" style="color:green"><span class="mord mathnormal" style="margin-right:0.00773em;color:green">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2974em"><span style="top:-3.29em;margin-left:-0.0077em;margin-right:0.0241em"><span class="pstrut" style="height:3.44em"></span><span class="sizing reset-size10 size8 mtight" style="color:green"><span class="mord mtight" style="color:green"><span class="mord mathnormal mtight" style="color:green">n</span><span class="mbin mtight" style="color:green">+</span><span class="mord mtight" style="color:green">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2079em"><span></span></span></span></span></span></span><span class="mopen" style="color:green">(</span><span class="mord mathnormal" style="color:green">x</span><span class="mclose" style="color:green">)</span></span></span></span></span></span></div><p>마지막 항인 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="green"><mrow><msub><mi>R</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mstyle></mrow><annotation encoding="application/x-tex">\color{green}{R_{n+1}(x)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord" style="color:green"><span class="mord" style="color:green"><span class="mord mathnormal" style="margin-right:0.00773em;color:green">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight" style="color:green"><span class="mord mtight" style="color:green"><span class="mord mathnormal mtight" style="color:green">n</span><span class="mbin mtight" style="color:green">+</span><span class="mord mtight" style="color:green">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em"><span></span></span></span></span></span></span><span class="mopen" style="color:green">(</span><span class="mord mathnormal" style="color:green">x</span><span class="mclose" style="color:green">)</span></span></span></span></span></span>을 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span></span></span></span></span>의 <strong>나머지 항</strong> 또는 <strong>절단오차</strong>라고 합니다.
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><msub><mi>x</mi><mn>0</mn></msub><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[x_0,x]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">x</span><span class="mclose">]</span></span></span></span></span> 또는 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>x</mi><mo separator="true">,</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[x,x_0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span></span>에 속하는 적당한 실수 b에 대해서 다음과 같이 표현됩니다.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mstyle mathsize="2.074em"><mrow><msub><mi>R</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mo>=</mo><mfrac><mrow><msup><mi>f</mi><mstyle mathcolor="green"><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mstyle></msup><mo stretchy="false">(</mo><mstyle mathcolor="green"><mi>b</mi></mstyle><mo stretchy="false">)</mo></mrow><mstyle mathcolor="green"><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">!</mo></mstyle></mfrac><mo stretchy="false">(</mo><mi>x</mi><mo>−</mo><msub><mi>x</mi><mn>0</mn></msub><msup><mo stretchy="false">)</mo><mstyle mathcolor="green"><mi>n</mi><mo>+</mo><mn>1</mn></mstyle></msup></mstyle></mrow><annotation encoding="application/x-tex">\huge {R_{n+1}(x)} = {f^{\color{green}(n+1)}({\color{green}b}) \over \color{green}(n+1)!}(x-x_0)^{\color{green}n+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.074em;vertical-align:-0.5185em"></span><span class="mord sizing reset-size6 size10"><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2974em"><span style="top:-3.29em;margin-left:-0.0077em;margin-right:0.0241em"><span class="pstrut" style="height:3.44em"></span><span class="sizing reset-size10 size8 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2079em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel sizing reset-size6 size10">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:5.1782em;vertical-align:-1.9413em"></span><span class="mord sizing reset-size6 size10"><span class="mord"><span class="mopen nulldelimiter sizing reset-size10 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5607em"><span style="top:-3.388em"><span class="pstrut" style="height:4.074em"></span><span class="mord"><span class="mopen" style="color:green">(</span><span class="mord mathnormal" style="color:green">n</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin" style="color:green">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord" style="color:green">1</span><span class="mclose" style="color:green">)!</span></span></span><span style="top:-4.304em"><span class="pstrut" style="height:4.074em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-4.751em"><span class="pstrut" style="height:4.074em"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8837em"><span style="top:-3.803em;margin-right:0.0241em"><span class="pstrut" style="height:3.44em"></span><span class="sizing reset-size10 size8 mtight"><span class="mord mtight"><span class="mopen mtight" style="color:green">(</span><span class="mord mathnormal mtight" style="color:green">n</span><span class="mbin mtight" style="color:green">+</span><span class="mord mtight" style="color:green">1</span><span class="mclose mtight" style="color:green">)</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="color:green">b</span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size10 size6"></span></span></span><span class="mopen sizing reset-size6 size10">(</span><span class="mord mathnormal sizing reset-size6 size10">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin sizing reset-size6 size10">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.3031em;vertical-align:-0.5185em"></span><span class="mord sizing reset-size6 size10"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2974em"><span style="top:-3.29em;margin-left:0em;margin-right:0.0241em"><span class="pstrut" style="height:3.44em"></span><span class="sizing reset-size10 size8 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose sizing reset-size6 size10"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8604em"><span style="top:-3.853em;margin-right:0.0241em"><span class="pstrut" style="height:3.44em"></span><span class="sizing reset-size10 size8 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="color:green">n</span><span class="mbin mtight" style="color:green">+</span><span class="mord mtight" style="color:green">1</span></span></span></span></span></span></span></span></span></span></span></span></span></div><p>이 오차가 0으로 원래 함수로 수렴하는 경우 <strong>해석 함수</strong>라고 합니다.</p><br><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="테일러-전개">테일러 전개<a href="#테일러-전개" class="hash-link" aria-label="Direct link to 테일러 전개" title="Direct link to 테일러 전개">​</a></h3><p>다항식이 아닌 함수를 테일러 급수로 만들어 봅시다.<br>
<!-- -->예를 들어 <strong>자연상수 e의 거듭제곱</strong></p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msup><mi>e</mi><mi>x</mi></msup></mrow><annotation encoding="application/x-tex">f(x)=e^x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7144em"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span></span></span></span></span></span></span></span></div><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>a</mi><mi>n</mi></msub><mo>=</mo><mfrac><mrow><msup><mi>f</mi><mrow><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow></msup><mo stretchy="false">(</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><mrow><mi>n</mi><mo stretchy="false">!</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">a_n={f^{(n)}(x_0) \over n!}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.251em;vertical-align:-0.686em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.565em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mclose">!</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></div><p>를 살펴봅시다.</p><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="bold">e</mi><mi mathvariant="bold">x</mi></msup></mrow><annotation encoding="application/x-tex">\bold{e^x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6741em"></span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6741em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">x</span></span></span></span></span></span></span></span></span></span></span></span>를 무한개의 항을 가진 <strong>다항식</strong>으로 가정하면,</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>e</mi><mi>x</mi></msup><mo>=</mo><msub><mi>a</mi><mn>0</mn></msub><mo>+</mo><msub><mi>a</mi><mn>1</mn></msub><mi>x</mi><mo>+</mo><msub><mi>a</mi><mn>2</mn></msub><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><msub><mi>a</mi><mn>3</mn></msub><msup><mi>x</mi><mn>3</mn></msup><mo>+</mo><msub><mi>a</mi><mn>4</mn></msub><msup><mi>x</mi><mn>4</mn></msup><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">e^x=a_0+a_1x+a_2x^2+a_3x^3+a_4x^4+...</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7144em"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.0141em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.0141em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.0141em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.1056em"></span><span class="mord">...</span></span></span></span></span></div><p>입니다.</p><br><br><br><br><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="bold">a</mi><mn mathvariant="bold">0</mn></msub></mrow><annotation encoding="application/x-tex">\bold{a_0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5944em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathbf">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>를 계산해 볼까요? <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mn>0</mn></msub><mo>=</mo><mfrac><mrow><mi>f</mi><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mrow><mn>0</mn><mo stretchy="false">!</mo></mrow></mfrac><mo>=</mo><msup><mi>e</mi><mn>0</mn></msup><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">a_0={f(0) \over 0!}=e^0=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span><span class="mclose mtight">!</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em">f</span><span class="mopen mtight">(</span><span class="mord mtight">0</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span></span> 이므로,</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>e</mi><mi>x</mi></msup><mo>=</mo><mn>1</mn><mo>+</mo><msub><mi>a</mi><mn>1</mn></msub><mi>x</mi><mo>+</mo><msub><mi>a</mi><mn>2</mn></msub><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mi>a</mi><mo>+</mo><mn>3</mn><msup><mi>x</mi><mn>3</mn></msup><mo>+</mo><msub><mi>a</mi><mn>4</mn></msub><msup><mi>x</mi><mn>4</mn></msup><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">e^x=1+a_1x+a_2x^2+a+3x^3+a_4x^4+...</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7144em"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.0141em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.9474em;vertical-align:-0.0833em"></span><span class="mord">3</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.0141em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.1056em"></span><span class="mord">...</span></span></span></span></span></div><p>다항식을 미분하면</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>e</mi><mi>x</mi></msup><mo>=</mo><msub><mi>a</mi><mn>1</mn></msub><mo>+</mo><msub><mi>a</mi><mn>2</mn></msub><mn>2</mn><mi>x</mi><mo>+</mo><msub><mi>a</mi><mn>3</mn></msub><mn>3</mn><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><msub><mi>a</mi><mn>4</mn></msub><mn>4</mn><msup><mi>x</mi><mn>3</mn></msup><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">e^x=a_1+a_22x+a_33x^2+a_44x^3+...</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7144em"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7944em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord">2</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.0141em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord">3</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.0141em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord">4</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.1056em"></span><span class="mord">...</span></span></span></span></span></div><p>입니다.</p><br><br><br><br><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="bold">a</mi><mn mathvariant="bold">1</mn></msub></mrow><annotation encoding="application/x-tex">\bold{a_1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5944em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathbf">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>도 계산해 봅시다. <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mn>1</mn></msub><mo>=</mo><mfrac><mrow><msup><mi>f</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mrow><mn>1</mn><mo stretchy="false">!</mo></mrow></mfrac><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">a_1={f'(0) \over 1!}=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.4095em;vertical-align:-0.345em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0645em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mclose mtight">!</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8278em"><span style="top:-2.931em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mtight">0</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span></span> 이므로</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>e</mi><mi>x</mi></msup><mo>=</mo><mn>1</mn><mo>+</mo><mn>2</mn><msub><mi>a</mi><mn>2</mn></msub><mi>x</mi><mo>+</mo><mn>3</mn><msub><mi>a</mi><mn>3</mn></msub><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mn>4</mn><msub><mi>a</mi><mn>4</mn></msub><msup><mi>x</mi><mn>3</mn></msup><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">e^x=1+2a_2x+3a_3x^2+4a_4x^3+...</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7144em"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7944em;vertical-align:-0.15em"></span><span class="mord">2</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.0141em;vertical-align:-0.15em"></span><span class="mord">3</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.0141em;vertical-align:-0.15em"></span><span class="mord">4</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.1056em"></span><span class="mord">...</span></span></span></span></span></div><p>다항식을 미분하면</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>e</mi><mi>x</mi></msup><mo>=</mo><mn>2</mn><mo>∗</mo><msub><mi>a</mi><mn>2</mn></msub><mo>+</mo><mo stretchy="false">(</mo><mn>2</mn><mo>∗</mo><mn>3</mn><mo stretchy="false">)</mo><msub><mi>a</mi><mn>3</mn></msub><mi>x</mi><mo>+</mo><mo stretchy="false">(</mo><mn>4</mn><mo>∗</mo><mn>3</mn><mo stretchy="false">)</mo><msub><mi>a</mi><mn>4</mn></msub><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">e^x=2*a_2+(2*3)a_3x+(4*3)a_4x^2+...</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7144em"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">3</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em"></span><span class="mord">3</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.1056em"></span><span class="mord">...</span></span></span></span></span></div><p>마찬가지로 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mn>2</mn></msub><mo>=</mo><mfrac><mrow><msup><mi>f</mi><mrow><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo></mrow></msup><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mrow><mn>2</mn><mo stretchy="false">!</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">a_2={f''(0) \over 2!}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.4095em;vertical-align:-0.345em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0645em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mclose mtight">!</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8278em"><span style="top:-2.931em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′′</span></span></span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mtight">0</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span>이고 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>n</mi></msub><mo>=</mo><mfrac><mn>1</mn><mrow><mi>n</mi><mo stretchy="false">!</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">a_n={1 \over n!}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mclose mtight">!</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span>임을 알 수 있습니다.</p><br><br><br><br><p>따라서 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>e</mi><mi>x</mi></msup></mrow><annotation encoding="application/x-tex">e^x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span></span></span></span></span></span></span></span>는 처음 식에서</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>e</mi><mi>x</mi></msup><mo>=</mo><mn>1</mn><mo>+</mo><mi>x</mi><mo>+</mo><mfrac><msup><mi>x</mi><mn>2</mn></msup><mrow><mn>2</mn><mo stretchy="false">!</mo></mrow></mfrac><mo>+</mo><mfrac><msup><mi>x</mi><mn>3</mn></msup><mrow><mn>3</mn><mo stretchy="false">!</mo></mrow></mfrac><mo>+</mo><mfrac><msup><mi>x</mi><mn>4</mn></msup><mrow><mn>4</mn><mo stretchy="false">!</mo></mrow></mfrac><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">e^x=1+x+{x^2 \over 2!}+{x^3 \over 3!}+{x^4 \over 4!}+...</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7144em"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.1771em;vertical-align:-0.686em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">2</span><span class="mclose">!</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.1771em;vertical-align:-0.686em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">3</span><span class="mclose">!</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.1771em;vertical-align:-0.686em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">4</span><span class="mclose">!</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.1056em"></span><span class="mord">...</span></span></span></span></span></div><p>로 테일러 전개 되는 것을 알 수 있습니다.</p><br><br><br><br><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="매클로린-급수">매클로린 급수<a href="#매클로린-급수" class="hash-link" aria-label="Direct link to 매클로린 급수" title="Direct link to 매클로린 급수">​</a></h2><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">x_0=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0</span></span></span></span></span>일 때의 테일러 급수를 <strong>매클로린 급수</strong>라고 합니다.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mstyle mathsize="2.074em"><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><munderover><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi mathvariant="normal">∞</mi></munderover><mfrac><mrow><msup><mi>f</mi><mrow><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow></msup><mo stretchy="false">(</mo><mstyle mathcolor="green"><mn>0</mn></mstyle><mo stretchy="false">)</mo></mrow><mrow><mi>n</mi><mo stretchy="false">!</mo></mrow></mfrac><msup><mi>x</mi><mi>n</mi></msup></mstyle></mrow><annotation encoding="application/x-tex">\huge f(x)=\sum_{n=0}^{\infty}{f^{(n)}({\color{green} 0}) \over n!}x^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.074em;vertical-align:-0.5185em"></span><span class="mord mathnormal sizing reset-size6 size10" style="margin-right:0.10764em">f</span><span class="mopen sizing reset-size6 size10">(</span><span class="mord mathnormal sizing reset-size6 size10">x</span><span class="mclose sizing reset-size6 size10">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel sizing reset-size6 size10">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:6.0403em;vertical-align:-2.6204em"></span><span class="mop op-limits sizing reset-size6 size10"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6489em"><span style="top:-2.9106em;margin-left:0em"><span class="pstrut" style="height:4.074em"></span><span class="sizing reset-size10 size8 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-4.074em"><span class="pstrut" style="height:4.074em"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-5.324em;margin-left:0em"><span class="pstrut" style="height:4.074em"></span><span class="sizing reset-size10 size8 mtight"><span class="mord mtight"><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2634em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord sizing reset-size6 size10"><span class="mord"><span class="mopen nulldelimiter sizing reset-size10 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5607em"><span style="top:-3.388em"><span class="pstrut" style="height:4.074em"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mclose">!</span></span></span><span style="top:-4.304em"><span class="pstrut" style="height:4.074em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-4.751em"><span class="pstrut" style="height:4.074em"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8837em"><span style="top:-3.803em;margin-right:0.0241em"><span class="pstrut" style="height:3.44em"></span><span class="sizing reset-size10 size8 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord" style="color:green">0</span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size10 size6"></span></span></span><span class="mord sizing reset-size6 size10"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7119em"><span style="top:-3.853em;margin-right:0.0241em"><span class="pstrut" style="height:3.44em"></span><span class="sizing reset-size10 size8 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span></div><p>모든 다항식에서 매클로린 급수는 다항식 자기 자신이 됩니다.</p><br><br><br><br><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="이항급수">이항급수<a href="#이항급수" class="hash-link" aria-label="Direct link to 이항급수" title="Direct link to 이항급수">​</a></h2><p>복소수 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>∈</mo><mi mathvariant="double-struck">C</mi></mrow><annotation encoding="application/x-tex">a \in \mathbb C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6889em"></span><span class="mord mathbb">C</span></span></span></span></span>가 주어졌을 때, 이항급수는 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>x</mi><msup><mo stretchy="false">)</mo><mi>α</mi></msup></mrow><annotation encoding="application/x-tex">(1+x)^\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.0037em">α</span></span></span></span></span></span></span></span></span></span></span></span>의 매클로린 급수입니다.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mstyle mathsize="2.074em"><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><munderover><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi mathvariant="normal">∞</mi></munderover><mstyle mathcolor="red"><mfrac><mrow><mo stretchy="false">(</mo><mi>α</mi><msub><mo stretchy="false">)</mo><mi>k</mi></msub></mrow><mrow><mi>n</mi><mo stretchy="false">!</mo></mrow></mfrac></mstyle><msup><mi>x</mi><mi>n</mi></msup></mstyle></mrow><annotation encoding="application/x-tex">\huge f(x)=\sum_{n=0}^{\infty}{\color{red}{(\alpha)_k \over n!}}x^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.074em;vertical-align:-0.5185em"></span><span class="mord mathnormal sizing reset-size6 size10" style="margin-right:0.10764em">f</span><span class="mopen sizing reset-size6 size10">(</span><span class="mord mathnormal sizing reset-size6 size10">x</span><span class="mclose sizing reset-size6 size10">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel sizing reset-size6 size10">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:6.0403em;vertical-align:-2.6204em"></span><span class="mop op-limits sizing reset-size6 size10"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6489em"><span style="top:-2.9106em;margin-left:0em"><span class="pstrut" style="height:4.074em"></span><span class="sizing reset-size10 size8 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-4.074em"><span class="pstrut" style="height:4.074em"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-5.324em;margin-left:0em"><span class="pstrut" style="height:4.074em"></span><span class="sizing reset-size10 size8 mtight"><span class="mord mtight"><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2634em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord sizing reset-size6 size10"><span class="mord" style="color:red"><span class="mord" style="color:red"><span class="mopen nulldelimiter sizing reset-size10 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em"><span style="top:-3.388em"><span class="pstrut" style="height:4.074em"></span><span class="mord" style="color:red"><span class="mord mathnormal" style="color:red">n</span><span class="mclose" style="color:red">!</span></span></span><span style="top:-4.304em"><span class="pstrut" style="height:4.074em"></span><span class="frac-line" style="color:red;border-bottom-width:0.04em"></span></span><span style="top:-4.751em"><span class="pstrut" style="height:4.074em"></span><span class="mord" style="color:red"><span class="mopen" style="color:red">(</span><span class="mord mathnormal" style="margin-right:0.0037em;color:red">α</span><span class="mclose" style="color:red"><span class="mclose" style="color:red">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3322em"><span style="top:-3.29em;margin-left:0em;margin-right:0.0241em"><span class="pstrut" style="height:3.44em"></span><span class="sizing reset-size10 size8 mtight" style="color:red"><span class="mord mathnormal mtight" style="margin-right:0.03148em;color:red">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size10 size6"></span></span></span></span><span class="mord sizing reset-size6 size10"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7119em"><span style="top:-3.853em;margin-right:0.0241em"><span class="pstrut" style="height:3.44em"></span><span class="sizing reset-size10 size8 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span></div><p>여기서 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="red"><mo stretchy="false">(</mo><mi>α</mi><msub><mo stretchy="false">)</mo><mi>k</mi></msub></mstyle></mrow><annotation encoding="application/x-tex">\color{red} (\alpha)_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen" style="color:red">(</span><span class="mord mathnormal" style="margin-right:0.0037em;color:red">α</span><span class="mclose" style="color:red"><span class="mclose" style="color:red">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight" style="color:red"><span class="mord mathnormal mtight" style="margin-right:0.03148em;color:red">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>는 조합(combination)에서 하강계승입니다.</p><p>자세한 내용은 <a href="/posts/binomial-theorem#%EC%9D%B4%ED%95%AD%EC%A0%95%EB%A6%AC">이항정리</a>를 참고해 주세요.</p><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><p><a href="https://ko.wikipedia.org/wiki/%EB%A9%B1%EA%B8%89%EC%88%98" target="_blank" rel="noopener noreferrer">[wiki]멱급수</a><br>
<a href="https://ko.wikipedia.org/wiki/%ED%85%8C%EC%9D%BC%EB%9F%AC_%EA%B8%89%EC%88%98" target="_blank" rel="noopener noreferrer">[wiki]테일러 급수</a><br>
<a href="https://ko.wikipedia.org/wiki/%EB%A7%A4%ED%81%B4%EB%A1%9C%EB%A6%B0_%EA%B8%89%EC%88%98" target="_blank" rel="noopener noreferrer">[wiki]매클로린 급수</a><br>
<a href="https://ko.wikipedia.org/wiki/%EC%9D%B4%ED%95%AD_%EA%B8%89%EC%88%98" target="_blank" rel="noopener noreferrer">[wiki]이항 급수</a>  </p>]]></content:encoded>
            <category>math</category>
            <category>calculus</category>
        </item>
        <item>
            <title><![CDATA[Build OpenCV with Java]]></title>
            <link>https://jwher.github.io/posts/build-opencv-with-java</link>
            <guid>https://jwher.github.io/posts/build-opencv-with-java</guid>
            <pubDate>Wed, 29 Jun 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[OpenCV 자바로 빌드하기]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="opencv" src="/assets/images/OpenCV_Logo_with_text-74a0292658708036382da3347ce9a496.png" width="600" height="739" class="img_ev3q"><br>
<em>OpenCV 자바로 빌드하기</em></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="직접-빌드하는-이유">직접 빌드하는 이유<a href="#직접-빌드하는-이유" class="hash-link" aria-label="Direct link to 직접 빌드하는 이유" title="Direct link to 직접 빌드하는 이유">​</a></h2><p>여기에서는 <a href="https://openpnp.org" target="_blank" rel="noopener noreferrer">openpnp</a>에서 제공하는 <a href="https://github.com/opencv/opencv" target="_blank" rel="noopener noreferrer">OpenCV</a>를 사용합니다.
OpenPnP는 오픈소스 소프트웨어 매니지먼트 툴로,
당신이 수정하고 빌드할 수 있도록 준비된 소프트웨어와 하드웨어에서 바로 실행할 수 있는 pick and place 시스템입니다.</p><p>하지만, OpenCV는 저작권 문제로 ffmpeg와 같은 동영상 인코더가 빠져있습니다.
openpnp에서 제공하는 OpenCV는 OpenCV의 softfork로 빌드되었기에, 마찬가지로 ffmpeg가 빠져있습니다.
따라서 직접 빌드해 주어야할 필요가 있습니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="java-환경변수-설정">Java 환경변수 설정<a href="#java-환경변수-설정" class="hash-link" aria-label="Direct link to Java 환경변수 설정" title="Direct link to Java 환경변수 설정">​</a></h2><p>빌드하기전에 Java가 시스템 환경변수에 잘 등록되었는지 확인합니다.(우분투 Debian 기준)</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">JAVA_HOME</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">path of JDK</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># e.g</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">JAVA_HOME</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/usr/local/jdk-11.0.15+10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable environment constant" style="color:#36acaa">PATH</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$JAVA_HOME</span><span class="token plain">/bin:</span><span class="token environment constant" style="color:#36acaa">$PATH</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cmake--build-library-설치">Cmake &amp; build library 설치<a href="#cmake--build-library-설치" class="hash-link" aria-label="Direct link to Cmake &amp; build library 설치" title="Direct link to Cmake &amp; build library 설치">​</a></h2><p>OpenCV를 빌드하기 위한 Cmake와 라이브러리를 설치해 줍니다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> build-essential</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> cmake </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> libgtk2.0-dev pkg-config libavcodec-dev libavformat-dev libswscale-dev</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="apache-ant">Apache ant<a href="#apache-ant" class="hash-link" aria-label="Direct link to Apache ant" title="Direct link to Apache ant">​</a></h2><p><a href="https://ant.apache.org" target="_blank" rel="noopener noreferrer">Apache Ant</a>는 빌드 파일과 확장점간 의존성을 기술하기 위해 만들어진 자바 라이브러리와 CLI 툴입니다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> ant</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ANT_HOME</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">path of ant</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># e.g</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ANT_HOME</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/usr/share/ant/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>/bin/ant: 1: cd: can't cd to ...</summary><div><div class="collapsibleContent_i85q"><p>심볼릭 링크 에러입니다</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">cd</span><span class="token plain"> /bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ll ant</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 존재하지 않는 위치에 연결된 모습</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lrwxrwxrwx </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> root root </span><span class="token number" style="color:#36acaa">20</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain">월 </span><span class="token number" style="color:#36acaa">24</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">2019</span><span class="token plain"> ant -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/share/ant/bin/ant*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">whereis</span><span class="token plain"> ant</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ant: /usr/bin/ant /usr/share/ant /usr/share/ant/bin/ant /usr/share/man/man1/ant.1.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ln</span><span class="token plain"> -snf /usr/share/ant/bin/ant /bin/ant</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 확인</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ll /bin/ant</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lrwxrwxrwx </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> root root </span><span class="token number" style="color:#36acaa">22</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">6</span><span class="token plain">월 </span><span class="token number" style="color:#36acaa">29</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><span class="token plain">:31 /bin/ant -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /usr/share/ant/bin/ant*</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Reference</strong><br>
<a href="https://velog.io/@jodawooooon/ant-%EB%B9%8C%EB%93%9C-%EC%8B%9C-%EC%97%90%EB%9F%AC-%EB%B0%9C%EC%83%9D-binant-1-cd-cant-cd-to-bin..shareantbin" target="_blank" rel="noopener noreferrer">ant 빌드 시 에러 발생</a></p></div></div></details><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="opencv-빌드">OpenCV 빌드<a href="#opencv-빌드" class="hash-link" aria-label="Direct link to OpenCV 빌드" title="Direct link to OpenCV 빌드">​</a></h2><p>소스코드를 다운받습니다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># in your workdir</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># [Option1] use release version(recommended)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># https://github.com/opencv/opencv/releases</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> -O opencv.zip https://github.com/opencv/opencv/archive/refs/tags/4.6.0.zip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">unzip</span><span class="token plain"> opencv.zip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># [Option2] 최신 코드 clone</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/opencv/opencv.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/opencv/opencv_contrib.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>build 폴더를 만들고 cmake를 이용해 makefile을 만들어 줍니다.</p><p><code>-DBUILD_SHARED_LIBS=OFF</code> 옵선을 사용해 OpenCV를 정적 라이브러리 집합으로 빌드하면, 자바 바인딩 동적 라이브러리를 전부 충족시킵니다.
다시 말해, 다른 OpenCV 라이브러리에 종속되지 않지만, 모든 OpenCV 코드를 내부에 가지고 있게 됩니다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">cd</span><span class="token plain"> opencv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">cd</span><span class="token plain"> build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ffmpeg를 사용해 빌드하려면 -DWITH_FFMPEG=1 를 추가합니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ cmake -DCMAKE_BUILD_TYPE</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Release -DBUILD_SHARED_LIBS</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">OFF -DCMAKE_INSTALL_PREFIX</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/usr/local </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ant, JNI 등 설정값을 제대로 찾았는지 확인합니다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--     Java:                          </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--     ant:                         /bin/ant </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ver </span><span class="token number" style="color:#36acaa">1.10</span><span class="token plain">.7</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--     JNI:                         /root/jdk-11.0.12+7/include /root/jdk-11.0.12+7/include/linux /root/jdk-11.0.12+7/include</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--     Java wrappers:               YES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--     Java tests:                  YES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ffmpeg를 함께 빌드했다면 다음도 확인해야 합니다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Video I/O:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DC1394:                      NO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FFMPEG:                      YES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      avcodec:                   YES </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">58.54</span><span class="token plain">.100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      avformat:                  YES </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">58.29</span><span class="token plain">.100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      avutil:                    YES </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">56.31</span><span class="token plain">.100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      swscale:                   YES </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5.5</span><span class="token plain">.100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      avresample:                NO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GStreamer:                   NO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    v4l/v4l2:                    YES </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">linux/videodev2.h</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>OpenCV를 빌드합니다.
저는 멀티코어를 사용해서 빌드하면 에러가 났습니다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># make -j&lt;nums of core&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">make</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 권한 문제가 있었으면 다음 명령어를 한번 더 실행시킵니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>OpenCV 정상 빌드 확인</summary><div><div class="collapsibleContent_i85q"><p>opencv 가 정상설치된건지 확인하기 위해 </p><p>방금까지 사용했던 build 디렉토리에 아래 소스를 받고 </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># in {workdir}/opencv/build</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/opencv/opencv_extra.git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>bin 디렉토리로 이동해서 아래와 같이 실행하면 </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./opencv_test_core </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Java 에서</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">import</span><span class="token plain"> org.opencv.core.Core</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">import</span><span class="token plain"> org.opencv.core.CvType</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">import</span><span class="token plain"> org.opencv.core.Mat</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Hello </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   public static void main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        OpenCV.loadShared</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.loadLibrary</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Core.NATIVE_LIBRARY_NAME</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"{workdir}/opencv/build/lib/libopencv_java460.so"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h2><p><a href="https://docs.opencv.org/4.x/d7/d9f/tutorial_linux_install.html" target="_blank" rel="noopener noreferrer">[공식]Installation in Linux</a><br>
<a href="https://docs.opencv.org/4.x/d9/d52/tutorial_java_dev_intro.html" target="_blank" rel="noopener noreferrer">[공식]Introduction to Java Development</a><br>
<a href="https://cubenuri.tistory.com/197" target="_blank" rel="noopener noreferrer">[Tistory]ubuntu 16 + opencv + java 설치기</a></p>]]></content:encoded>
            <category>tech</category>
        </item>
        <item>
            <title><![CDATA[이항정리 - π값을 구하는 법]]></title>
            <link>https://jwher.github.io/posts/binomial-theorem</link>
            <guid>https://jwher.github.io/posts/binomial-theorem</guid>
            <pubDate>Wed, 22 Jun 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Binomial Theorem]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="pi" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiIGhlaWdodD0iNTY4Ljg4cHgiIHdpZHRoPSI1ODguNDJweCI+Cgo8cGF0aCBzdHlsZT0iZmlsbDpibGFjazsgc3Ryb2tlOm5vbmUiCiAgICAgIGQ9Ik0gMTAuNDk5Njg2LDE3Ny4wMzg0MCBMIDMxLjE3NDkzMSwxNzguNTY5OTAgQyA1Mi42MTU5MjUsMTU0LjMyMTE2IDYxLjAzOTE3MSw4Mi41OTU5MjQgMTg3LjM4Nzg5LDk2LjYzNDY3MSBDIDE4Mi43OTMzOSw0MDMuOTU1NjAgNDguMDIxNDI2LDQzNi4zNzIzNCA1Ni40NDQ2NzUsNDk5LjQxOTA3IEMgNTkuNTA3Njc0LDUzNS4xNTQwNiA4Ny44NDA0MTcsNTU3LjEwNTU2IDExOC40NzA0MSw1NTguMzgxODEgQyAyMTUuMjEwMTQsNTU1LjA2MzU2IDIxMC44NzA4OSw0MjQuNjMwODQgMjQwLjk5MDM4LDk1Ljg2ODkyMSBMIDM2NS44MDc2MCw5NS44Njg5MjEgQyAzNTkuMTcxMTAsMjExLjc1MjM5IDM0MS4wNDgzNiwzMjcuNjM1ODYgMzM5LjAwNjM2LDQ0MS4yMjIwOCBDIDM0MC41Mzc4Niw1MTYuNzc2MDYgMzg2LjQ4Mjg1LDU1Ny4xMDU1NiA0NDYuOTc3MDgsNTU3LjYxNjA2IEMgNTQ2LjUyNDU2LDU2MC45MzQzMSA1NzcuOTIwMzAsNDQ0Ljc5NTU4IDU3Ny45MjAzMCwzOTUuMjc3MDkgTCA1NTYuNDc5MzEsMzk1LjI3NzEwIEMgNTU0LjQzNzMxLDQzNi4xMTcwOSA1MzQuNzgzMDYsNDY1LjQ3MDgzIDQ5Mi45MjIwNyw0NjcuMjU3NTggQyAzNzguODI1MzUsNDY4Ljc4OTA4IDQ0MS42MTY4MywyNjYuNjMxMTMgNDQyLjM4MjU4LDk3LjQwMDQyMSBMIDU3Ny45MjAzMCw5OC4xNjYxNzEgTCA1NzcuMTU0NTUsMTEuNjM2NDM3IEMgMTMuODA3NDkxLDguOTA3NTc5OSA4NS4zMTIyODQsLTIuMTM2NjE1MSAxMC40OTk2ODYsMTc3LjAzODQwIHoiIC8+Cgo8L3N2Zz4K" width="588" height="569" class="img_ev3q"><br>
<em>이항정리 - π값을 구하는 법</em></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pi"><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span></span></span></span></span><a href="#pi" class="hash-link" aria-label="Direct link to pi" title="Direct link to pi">​</a></h2><p>여러분은 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span></span></span></span></span>값을 알고 계신가요?  </p><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span></span></span></span></span>는 원의 반지름과 둘레의 비율을 나타내는 값으로,
3.14 언저리의 값이라는 것을 알고 계실겁니다.</p><br><br><blockquote><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span></span></span></span></span> Day  </p><p><img loading="lazy" alt="pizza-to-pi" src="/assets/images/pizza_to_pi-ffe1457c29f9d0769b8abf5a7ed6ffb8.gif" width="600" height="777" class="img_ev3q"><br>
<a href="https://twitter.com/AlexKontorovich/status/1236008125645434885?ref_src=twsrc%5Etfw" target="_blank" rel="noopener noreferrer">[트위터]파이데이</a></p></blockquote><p>동영상에서 보듯이, 피자의 둘레를 펴 지름에 놓으면 3판보다 조금 더 큰 것을 알 수 있습니다.</p><br><br><p>그렇다면 파이값을 어떻게 구할 수 있을까요?<br>
<!-- -->고대인들도 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">π</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span></span></span></span></span>값을 알고 있었습니다.</p><p><img loading="lazy" alt="hexagon-inscribed-in-circle" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCiA8Zz4KICA8dGl0bGU+TGF5ZXIgMTwvdGl0bGU+CiAgPHBhdGggaWQ9InN2Z180IiBkPSJtMjU2LDQ1NmMtMTEwLjQ5NzI0LDAgLTIwMCwtODkuNTAyNzYgLTIwMCwtMjAwYzAsLTExMC40OTcyNCA4OS41MDI3NiwtMjAwIDIwMCwtMjAwYzExMC40OTcyNCwwIDIwMCw4OS41MDI3NiAyMDAsMjAwYzAsMTEwLjQ5NzI0IC04OS41MDI3NiwyMDAgLTIwMCwyMDB6IiBvcGFjaXR5PSJ1bmRlZmluZWQiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlPSIjMDAwIiBmaWxsPSJub25lIi8+CiAgPHBhdGggaWQ9InN2Z18zIiBkPSJtNTYsNTZsNDAwLDBsMCw0MDBsLTQwMCwwbDAsLTQwMHoiIG9wYWNpdHk9InVuZGVmaW5lZCIgc3Ryb2tlLXdpZHRoPSI1IiBmaWxsPSJub25lIi8+CiAgPHBhdGggaWQ9InN2Z18yMiIgZD0ibTU2LDI1NmMwLC00NC4xOTg5IDg5LjUwMjc2LC04MCAyMDAsLTgwYzExMC40OTcyNCwwIDIwMCwzNS44MDExIDIwMCw4MGwtNDAwLDB6IiBvcGFjaXR5PSJ1bmRlZmluZWQiIHN0cm9rZS1kYXNoYXJyYXk9IjUsNSIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2U9IiMwMDAwZmYiIGZpbGw9Im5vbmUiLz4KICA8bGluZSBpZD0ic3ZnXzUiIHkyPSIyNTYiIHgyPSI0NTYiIHkxPSIyNTYiIHgxPSI1NiIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2U9IiMwMDAiIGZpbGw9Im5vbmUiLz4KICA8bGluZSB0cmFuc2Zvcm09InJvdGF0ZSgxMjAgMjU2IDI1NikiIGlkPSJzdmdfMTkiIHkyPSIyNTYiIHgyPSI0NTYiIHkxPSIyNTYiIHgxPSI1NiIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2U9IiMwMDAiIGZpbGw9Im5vbmUiLz4KICA8bGluZSB0cmFuc2Zvcm09InJvdGF0ZSg2MCAyNTYgMjU2KSIgaWQ9InN2Z18xOCIgeTI9IjI1NiIgeDI9IjQ1NiIgeTE9IjI1NiIgeDE9IjU2IiBzdHJva2Utd2lkdGg9IjMiIHN0cm9rZT0iIzAwMCIgZmlsbD0ibm9uZSIvPgogIDxsaW5lIGlkPSJzdmdfMTMiIHkyPSIyNTYiIHgyPSIyNTYiIHkxPSIyNTYiIHgxPSIyNTYiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlPSIjZmYwMDAwIiBmaWxsPSJub25lIi8+CiAgPGxpbmUgaWQ9InN2Z18xNCIgeTI9IjI1NiIgeDI9IjI1NiIgeTE9IjI1NiIgeDE9IjI1NiIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2U9IiNmZjAwMDAiIGZpbGw9Im5vbmUiLz4KICA8cGF0aCBpZD0ic3ZnXzI2IiBkPSJtMTU2LDgzYzAsLTguMjg3MjkgNDQuNzUxMzgsLTE1IDEwMCwtMTVjNTUuMjQ4NjIsMCAxMDAsNi43MTI3MSAxMDAsMTVsLTIwMCwweiIgb3BhY2l0eT0idW5kZWZpbmVkIiBzdHJva2UtZGFzaGFycmF5PSI1LDUiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlPSIjMDAwMGZmIiBmaWxsPSJub25lIi8+CiAgPGcgaWQ9InN2Z18xNyI+CiAgIDxsaW5lIGlkPSJzdmdfNiIgeTI9IjgyLjgiIHgyPSIxNTYiIHkxPSIyNTYiIHgxPSI1NiIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2U9IiMwMDAiIGZpbGw9Im5vbmUiLz4KICAgPGxpbmUgaWQ9InN2Z183IiB5Mj0iNDI5LjIiIHgyPSIxNTYiIHkxPSIyNTYiIHgxPSI1NiIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2U9IiMwMDAiIGZpbGw9Im5vbmUiLz4KICAgPGxpbmUgaWQ9InN2Z184IiB5Mj0iNDI5LjIiIHgyPSIzNTciIHkxPSI0MjkiIHgxPSIxNTciIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlPSIjMDAwIiBmaWxsPSJub25lIi8+CiAgIDxsaW5lIGlkPSJzdmdfOSIgeTI9IjgzIiB4Mj0iMzU2IiB5MT0iODMiIHgxPSIxNTYiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlPSIjMDAwIiBmaWxsPSJub25lIi8+CiAgIDxsaW5lIGlkPSJzdmdfMTAiIHkyPSIyNTYiIHgyPSI0NTYiIHkxPSI4MyIgeDE9IjM1NiIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2U9IiMwMDAiIGZpbGw9Im5vbmUiLz4KICAgPGxpbmUgaWQ9InN2Z18xMSIgeTI9IjI1NiIgeDI9IjQ1NiIgeTE9IjQyOSIgeDE9IjM1NiIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2U9IiMwMDAiIGZpbGw9Im5vbmUiLz4KICA8L2c+CiAgPHJlY3QgaWQ9InN2Z18xNiIgaGVpZ2h0PSIxIiB3aWR0aD0iMSIgeT0iMjU1LjUiIHg9IjI1NS41IiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZT0iI2ZmMDAwMCIgZmlsbD0ibm9uZSIvPgogIDx0ZXh0IHhtbDpzcGFjZT0icHJlc2VydmUiIHRleHQtYW5jaG9yPSJzdGFydCIgZm9udC1mYW1pbHk9Ik5vdG8gU2FucyBKUCIgZm9udC1zaXplPSIyNCIgaWQ9InN2Z18yMCIgeT0iMTg1IiB4PSIyNDkuMzM5NzIiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlPSIjMDAwIiBmaWxsPSIjMDAwMDAwIj4yPC90ZXh0PgogIDx0ZXh0IHhtbDpzcGFjZT0icHJlc2VydmUiIHRleHQtYW5jaG9yPSJzdGFydCIgZm9udC1mYW1pbHk9Ik5vdG8gU2FucyBKUCIgZm9udC1zaXplPSIyNCIgaWQ9InN2Z18yNSIgeT0iNzcuNzY5ODQiIHg9IjI0OS4zMzk3NSIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2U9IiMwMDAwMDAiIGZpbGw9IiMwMDAwZmYiPjE8L3RleHQ+CiA8L2c+Cjwvc3ZnPg==" width="512" height="512" class="img_ev3q"></p><p>한 변의 길이가 1인 육각형의 둘레는 6입니다.
육각형에 외접원을 그리면, 육각형보다 큰 원을 그릴 수 있습니다.<br>
<!-- -->같은 지름을 공유하는 원의 둘레가 더 크므로, 다음 부등식을 세울 수 있습니다.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><mtext>원의둘레</mtext><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mtext>지름</mtext><mo stretchy="false">)</mo><mo>∗</mo><mi>π</mi><mo>=</mo><mn>2</mn><mi>π</mi><mo>&gt;</mo><mn>6</mn></mrow><annotation encoding="application/x-tex">(원의 둘레)=(지름)*π=2π &gt; 6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord hangul_fallback">원의둘레</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord hangul_fallback">지름</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6835em;vertical-align:-0.0391em"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03588em">π</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">6</span></span></span></span></span></div><p>양변을 2로 나누면,</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>π</mi><mo>&gt;</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">π &gt; 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">3</span></span></span></span></span></div><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span></span></span></span></span> 값은 3보다 크다는걸 알았습니다!</p><br><br><p><img loading="lazy" alt="circumscribed-square" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCiA8Zz4KICA8dGl0bGU+TGF5ZXIgMTwvdGl0bGU+CiAgPHBhdGggaWQ9InN2Z18zIiBkPSJtNTcuNDM4ODQsNTZsNDAwLDBsMCw0MDBsLTQwMCwwbDAsLTQwMHoiIG9wYWNpdHk9InVuZGVmaW5lZCIgc3Ryb2tlLXdpZHRoPSI1IiBmaWxsPSJub25lIi8+CiAgPHBhdGggaWQ9InN2Z180IiBkPSJtMjU2LDQ1NmMtMTEwLjQ5NzI0LDAgLTIwMCwtODkuNTAyNzYgLTIwMCwtMjAwYzAsLTExMC40OTcyNCA4OS41MDI3NiwtMjAwIDIwMCwtMjAwYzExMC40OTcyNCwwIDIwMCw4OS41MDI3NiAyMDAsMjAwYzAsMTEwLjQ5NzI0IC04OS41MDI3NiwyMDAgLTIwMCwyMDB6IiBvcGFjaXR5PSJ1bmRlZmluZWQiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlPSIjMDAwIiBmaWxsPSJub25lIi8+CiAgPHBhdGggaWQ9InN2Z18yMiIgZD0ibTU2LDI1NmMwLC00NC4xOTg5IDg5LjUwMjc2LC04MCAyMDAsLTgwYzExMC40OTcyNCwwIDIwMCwzNS44MDExIDIwMCw4MGwtNDAwLDB6IiBvcGFjaXR5PSJ1bmRlZmluZWQiIHN0cm9rZS1kYXNoYXJyYXk9IjUsNSIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2U9IiMwMDAwZmYiIGZpbGw9Im5vbmUiLz4KICA8bGluZSBpZD0ic3ZnXzUiIHkyPSIyNTYiIHgyPSI0NTYiIHkxPSIyNTYiIHgxPSI1NiIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2U9IiMwMDAiIGZpbGw9Im5vbmUiLz4KICA8bGluZSB0cmFuc2Zvcm09InJvdGF0ZSgxMjAgMjU2IDI1NikiIG9wYWNpdHk9IjAiIGlkPSJzdmdfMTkiIHkyPSIyNTYiIHgyPSI0NTYiIHkxPSIyNTYiIHgxPSI1NiIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2U9IiMwMDAiIGZpbGw9Im5vbmUiLz4KICA8bGluZSB0cmFuc2Zvcm09InJvdGF0ZSg2MCAyNTYgMjU2KSIgb3BhY2l0eT0iMCIgaWQ9InN2Z18xOCIgeTI9IjI1NiIgeDI9IjQ1NiIgeTE9IjI1NiIgeDE9IjU2IiBzdHJva2Utd2lkdGg9IjMiIHN0cm9rZT0iIzAwMCIgZmlsbD0ibm9uZSIvPgogIDxsaW5lIGlkPSJzdmdfMTMiIHkyPSIyNTYiIHgyPSIyNTYiIHkxPSIyNTYiIHgxPSIyNTYiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlPSIjZmYwMDAwIiBmaWxsPSJub25lIi8+CiAgPGxpbmUgaWQ9InN2Z18xNCIgeTI9IjI1NiIgeDI9IjI1NiIgeTE9IjI1NiIgeDE9IjI1NiIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2U9IiNmZjAwMDAiIGZpbGw9Im5vbmUiLz4KICA8ZyBvcGFjaXR5PSIwIiBpZD0ic3ZnXzE3Ij4KICAgPGxpbmUgaWQ9InN2Z182IiB5Mj0iODIuOCIgeDI9IjE1NiIgeTE9IjI1NiIgeDE9IjU2IiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZT0iIzAwMCIgZmlsbD0ibm9uZSIvPgogICA8bGluZSBpZD0ic3ZnXzciIHkyPSI0MjkuMiIgeDI9IjE1NiIgeTE9IjI1NiIgeDE9IjU2IiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZT0iIzAwMCIgZmlsbD0ibm9uZSIvPgogICA8bGluZSBpZD0ic3ZnXzgiIHkyPSI0MjkuMiIgeDI9IjM1NyIgeTE9IjQyOSIgeDE9IjE1NyIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2U9IiMwMDAiIGZpbGw9Im5vbmUiLz4KICAgPGxpbmUgaWQ9InN2Z185IiB5Mj0iODMiIHgyPSIzNTYiIHkxPSI4MyIgeDE9IjE1NiIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2U9IiMwMDAiIGZpbGw9Im5vbmUiLz4KICAgPGxpbmUgaWQ9InN2Z18xMCIgeTI9IjI1NiIgeDI9IjQ1NiIgeTE9IjgzIiB4MT0iMzU2IiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZT0iIzAwMCIgZmlsbD0ibm9uZSIvPgogICA8bGluZSBpZD0ic3ZnXzExIiB5Mj0iMjU2IiB4Mj0iNDU2IiB5MT0iNDI5IiB4MT0iMzU2IiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZT0iIzAwMCIgZmlsbD0ibm9uZSIvPgogIDwvZz4KICA8cmVjdCBpZD0ic3ZnXzE2IiBoZWlnaHQ9IjEiIHdpZHRoPSIxIiB5PSIyNTUuNSIgeD0iMjU1LjUiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlPSIjZmYwMDAwIiBmaWxsPSJub25lIi8+CiAgPHRleHQgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgdGV4dC1hbmNob3I9InN0YXJ0IiBmb250LWZhbWlseT0iTm90byBTYW5zIEpQIiBmb250LXNpemU9IjI0IiBpZD0ic3ZnXzIwIiB5PSIxODUiIHg9IjI0OS4zMzk3MiIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2U9IiMwMDAiIGZpbGw9IiMwMDAwMDAiPjI8L3RleHQ+CiAgPHJlY3Qgc3Ryb2tlPSIjMDAwMDAwIiBpZD0ic3ZnXzI3IiBoZWlnaHQ9IjQwMCIgd2lkdGg9IjQwMCIgeT0iNTYiIHg9IjU2IiBzdHJva2Utd2lkdGg9IjUiIGZpbGw9Im5vbmUiLz4KIDwvZz4KPC9zdmc+" width="512" height="512" class="img_ev3q"></p><p>한 변의 길이가 2인 사각형은 둘레가 8로, 이전에 그렸던 도형보다 큽니다.<br>
<!-- -->사각형의 둘레가 더 크므로, 다음 부등식을 세울 수 있습니다.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mn>2</mn><mi>π</mi><mo>&lt;</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">2π &lt; 8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6835em;vertical-align:-0.0391em"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03588em">π</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">8</span></span></span></span></span></div><p>양변을 2로 나누면,</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>π</mi><mo>&lt;</mo><mn>4</mn></mrow><annotation encoding="application/x-tex">π &lt; 4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">4</span></span></span></span></span></div><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span></span></span></span></span>는 4보다 작은 값임을 알아냈습니다!</p><p>이렇게 다각형을 이용해 근사하는 방법은 2200년전, BC 250년에 아르키메데스가 계산한 방법으로,
내접, 외접한 다각형의 변을 늘려가며 더 정확한 근사치를 구할 수 있습니다.
이 방법은 1000년간 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span></span></span></span></span> 값을 구하는 방법으로 사용되었습니다.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mn>223</mn><mn>71</mn></mfrac><mo>&lt;</mo><mi>π</mi><mo>&lt;</mo><mfrac><mn>22</mn><mn>7</mn></mfrac></mrow><annotation encoding="application/x-tex">{223 \over 71} &lt; \pi &lt; {22 \over 7}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">71</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">223</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">7</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">22</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></div><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mn>3.1408</mn><mo>&lt;</mo><mi>π</mi><mo>&lt;</mo><mn>3.1429</mn></mrow><annotation encoding="application/x-tex">3.1408&lt;π&lt;3.1429</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6835em;vertical-align:-0.0391em"></span><span class="mord">3.1408</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">3.1429</span></span></span></span></span></div><p><em>정구십육각형</em></p><p>사실 이정도만 되어도 실용적인 정확도를 넘어섭니다.<br>
<!-- -->1850년, William Shanks는 15년간 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span></span></span></span></span>값을 계산해 707자리까지 계산합니다.
하지만 527자리부터 오류가 있었죠. 이걸 계산하는데 사용한 사간은 아무것도 아닌 것에 낭비된 것 처럼 보입니다.</p><p>이 외에도 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span></span></span></span></span>값을 구하는 방법은 <a href="https://en.wikipedia.org/wiki/Monte_Carlo_method" target="_blank" rel="noopener noreferrer">Monte Carlo Simulation</a>,
<a href="https://en.wikipedia.org/wiki/Buffon%27s_needle_problem" target="_blank" rel="noopener noreferrer">Buffon’s Needles</a> 등 방법이 있지만,
지금 다룰 진짜 주제는 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">π</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span></span></span></span></span>가 아니니 넘어가겠습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="적분의-등장">적분의 등장<a href="#적분의-등장" class="hash-link" aria-label="Direct link to 적분의 등장" title="Direct link to 적분의 등장">​</a></h2><p>뉴턴과 라이프니츠는 17세기 미적분학의 기본정리를 완성합니다.</p><ul><li><p>미분과 적분이 서로 역연산관계에 있습니다.</p></li><li><p>정적분은 부정적분의 차로 구할 수 있습니다.</p></li></ul><p>정적분 값을 계산할수 있게 되면서 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span></span></span></span></span> 값을 구하는 방법은 변하게 됩니다.<br>
<!-- -->이전까지는 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mtext>원의둘레</mtext><mo stretchy="false">)</mo><mo>=</mo><mn>2</mn><mo>∗</mo><mi>π</mi></mrow><annotation encoding="application/x-tex">(원의 둘레)=2*\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord hangul_fallback">원의둘레</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span></span></span></span></span>를 이용했다면,
이제부터는 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mtext>원의넓이</mtext><mo stretchy="false">)</mo><mo>=</mo><msup><mi>r</mi><mn>2</mn></msup><mo>∗</mo><mi>π</mi></mrow><annotation encoding="application/x-tex">(원의 넓이)=r^2*\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord hangul_fallback">원의넓이</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span></span></span></span></span>을 이용하게 됩니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="원의-넓이1">원의 넓이1<a href="#원의-넓이1" class="hash-link" aria-label="Direct link to 원의 넓이1" title="Direct link to 원의 넓이1">​</a></h2><p>좌표계에서 단위원의 방정식 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><msup><mi>y</mi><mn>2</mn></msup><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">x^2+y^2=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.0085em;vertical-align:-0.1944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span></span>을 나타내면 다음과 같습니다</p><p><img loading="lazy" alt="circle" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCiA8Zz4KICA8dGl0bGU+TGF5ZXIgMTwvdGl0bGU+CiAgPHBhdGggaWQ9InN2Z180IiBkPSJtMjU2LDQ1NmMtMTEwLjQ5NzI0LDAgLTIwMCwtODkuNTAyNzYgLTIwMCwtMjAwYzAsLTExMC40OTcyNCA4OS41MDI3NiwtMjAwIDIwMCwtMjAwYzExMC40OTcyNCwwIDIwMCw4OS41MDI3NiAyMDAsMjAwYzAsMTEwLjQ5NzI0IC04OS41MDI3NiwyMDAgLTIwMCwyMDB6IiBvcGFjaXR5PSJ1bmRlZmluZWQiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlPSIjMDAwIiBmaWxsPSJub25lIi8+CiAgPGxpbmUgaWQ9InN2Z181IiB5Mj0iMjU2IiB4Mj0iNTEyIiB5MT0iMjU2IiB4MT0iMCIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2U9IiMwMDAwYmYiIGZpbGw9Im5vbmUiLz4KICA8bGluZSB0cmFuc2Zvcm09InJvdGF0ZSgxMjAgMjU2IDI1NikiIG9wYWNpdHk9IjAiIGlkPSJzdmdfMTkiIHkyPSIyNTYiIHgyPSI0NTYiIHkxPSIyNTYiIHgxPSI1NiIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2U9IiMwMDAiIGZpbGw9Im5vbmUiLz4KICA8bGluZSB0cmFuc2Zvcm09InJvdGF0ZSg2MCAyNTYgMjU2KSIgb3BhY2l0eT0iMCIgaWQ9InN2Z18xOCIgeTI9IjI1NiIgeDI9IjQ1NiIgeTE9IjI1NiIgeDE9IjU2IiBzdHJva2Utd2lkdGg9IjMiIHN0cm9rZT0iIzAwMCIgZmlsbD0ibm9uZSIvPgogIDxsaW5lIGlkPSJzdmdfMTMiIHkyPSIyNTYiIHgyPSIyNTYiIHkxPSIyNTYiIHgxPSIyNTYiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlPSIjZmYwMDAwIiBmaWxsPSJub25lIi8+CiAgPGxpbmUgaWQ9InN2Z18xNCIgeTI9IjI1NiIgeDI9IjI1NiIgeTE9IjI1NiIgeDE9IjI1NiIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2U9IiNmZjAwMDAiIGZpbGw9Im5vbmUiLz4KICA8ZyBvcGFjaXR5PSIwIiBpZD0ic3ZnXzE3Ij4KICAgPGxpbmUgaWQ9InN2Z182IiB5Mj0iODIuOCIgeDI9IjE1NiIgeTE9IjI1NiIgeDE9IjU2IiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZT0iIzAwMCIgZmlsbD0ibm9uZSIvPgogICA8bGluZSBpZD0ic3ZnXzciIHkyPSI0MjkuMiIgeDI9IjE1NiIgeTE9IjI1NiIgeDE9IjU2IiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZT0iIzAwMCIgZmlsbD0ibm9uZSIvPgogICA8bGluZSBpZD0ic3ZnXzgiIHkyPSI0MjkuMiIgeDI9IjM1NyIgeTE9IjQyOSIgeDE9IjE1NyIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2U9IiMwMDAiIGZpbGw9Im5vbmUiLz4KICAgPGxpbmUgaWQ9InN2Z185IiB5Mj0iODMiIHgyPSIzNTYiIHkxPSI4MyIgeDE9IjE1NiIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2U9IiMwMDAiIGZpbGw9Im5vbmUiLz4KICAgPGxpbmUgaWQ9InN2Z18xMCIgeTI9IjI1NiIgeDI9IjQ1NiIgeTE9IjgzIiB4MT0iMzU2IiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZT0iIzAwMCIgZmlsbD0ibm9uZSIvPgogICA8bGluZSBpZD0ic3ZnXzExIiB5Mj0iMjU2IiB4Mj0iNDU2IiB5MT0iNDI5IiB4MT0iMzU2IiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZT0iIzAwMCIgZmlsbD0ibm9uZSIvPgogIDwvZz4KICA8bGluZSBpZD0ic3ZnXzI4IiB5Mj0iNTEyIiB4Mj0iMjU2IiB5MT0iMCIgeDE9IjI1NiIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2U9IiMwMDAwYmYiIGZpbGw9Im5vbmUiLz4KICA8cmVjdCBpZD0ic3ZnXzE2IiBoZWlnaHQ9IjEiIHdpZHRoPSIxIiB5PSIyNTUuNSIgeD0iMjU1LjUiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlPSIjZmYwMDAwIiBmaWxsPSJub25lIi8+CiAgPHRleHQgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgdGV4dC1hbmNob3I9InN0YXJ0IiBmb250LWZhbWlseT0iTm90byBTYW5zIEpQIiBmb250LXNpemU9IjI0IiBpZD0ic3ZnXzI5IiB5PSIyNDAiIHg9IjQ3MiIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2U9IiMwMDAwMDAiIGZpbGw9Im5vbmUiPjE8L3RleHQ+CiAgPHRleHQgc3R5bGU9ImN1cnNvcjogbW92ZTsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHRleHQtYW5jaG9yPSJzdGFydCIgZm9udC1mYW1pbHk9Ik5vdG8gU2FucyBKUCIgZm9udC1zaXplPSIyNCIgaWQ9InN2Z18zMCIgeT0iMjQwIiB4PSIyMiIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2U9IiMwMDAwMDAiIGZpbGw9Im5vbmUiPi0xPC90ZXh0PgogPC9nPgo8L3N2Zz4=" width="512" height="512" class="img_ev3q"></p><p>적분가능한 함수 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msup><mi>x</mi><mn>2</mn></msup><msup><mo stretchy="false">)</mo><mfrac><mn>1</mn><mn>2</mn></mfrac></msup></mrow><annotation encoding="application/x-tex">y=(1-x^2)^{1 \over 2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.204em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.954em"><span style="top:-3.363em;margin-right:0.05em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em"><span style="top:-2.656em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255em"><span class="pstrut" style="height:3em"></span><span class="frac-line mtight" style="border-bottom-width:0.049em"></span></span><span style="top:-3.384em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span></span></span></span></span>로 나타내면</p><p><img loading="lazy" alt="circle-transpos" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjM1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCiA8Zz4KICA8dGl0bGU+TGF5ZXIgMTwvdGl0bGU+CiAgPHBhdGggaWQ9InN2Z180IiBkPSJtNTYsMjU2YzAsLTExMC40OTcyNCA4OS41MDI3NiwtMjAwIDIwMCwtMjAwYzExMC40OTcyNCwwIDIwMCw4OS41MDI3NiAyMDAsMjAwIiBvcGFjaXR5PSJ1bmRlZmluZWQiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlPSIjMDAwIiBmaWxsPSJub25lIi8+CiAgPGxpbmUgaWQ9InN2Z181IiB5Mj0iMjU2IiB4Mj0iNTEyIiB5MT0iMjU2IiB4MT0iMCIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2U9IiMwMDAwYmYiIGZpbGw9Im5vbmUiLz4KICA8bGluZSB0cmFuc2Zvcm09InJvdGF0ZSgxMjAgMjU2IDI1NikiIG9wYWNpdHk9IjAiIGlkPSJzdmdfMTkiIHkyPSIyNTYiIHgyPSI0NTYiIHkxPSIyNTYiIHgxPSI1NiIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2U9IiMwMDAiIGZpbGw9Im5vbmUiLz4KICA8bGluZSB0cmFuc2Zvcm09InJvdGF0ZSg2MCAyNTYgMjU2KSIgb3BhY2l0eT0iMCIgaWQ9InN2Z18xOCIgeTI9IjI1NiIgeDI9IjQ1NiIgeTE9IjI1NiIgeDE9IjU2IiBzdHJva2Utd2lkdGg9IjMiIHN0cm9rZT0iIzAwMCIgZmlsbD0ibm9uZSIvPgogIDxsaW5lIGlkPSJzdmdfMTMiIHkyPSIyNTYiIHgyPSIyNTYiIHkxPSIyNTYiIHgxPSIyNTYiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlPSIjZmYwMDAwIiBmaWxsPSJub25lIi8+CiAgPGxpbmUgaWQ9InN2Z18xNCIgeTI9IjI1NiIgeDI9IjI1NiIgeTE9IjI1NiIgeDE9IjI1NiIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2U9IiNmZjAwMDAiIGZpbGw9Im5vbmUiLz4KICA8ZyBvcGFjaXR5PSIwIiBpZD0ic3ZnXzE3Ij4KICAgPGxpbmUgaWQ9InN2Z182IiB5Mj0iODIuOCIgeDI9IjE1NiIgeTE9IjI1NiIgeDE9IjU2IiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZT0iIzAwMCIgZmlsbD0ibm9uZSIvPgogICA8bGluZSBpZD0ic3ZnXzciIHkyPSI0MjkuMiIgeDI9IjE1NiIgeTE9IjI1NiIgeDE9IjU2IiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZT0iIzAwMCIgZmlsbD0ibm9uZSIvPgogICA8bGluZSBpZD0ic3ZnXzgiIHkyPSI0MjkuMiIgeDI9IjM1NyIgeTE9IjQyOSIgeDE9IjE1NyIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2U9IiMwMDAiIGZpbGw9Im5vbmUiLz4KICAgPGxpbmUgaWQ9InN2Z185IiB5Mj0iODMiIHgyPSIzNTYiIHkxPSI4MyIgeDE9IjE1NiIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2U9IiMwMDAiIGZpbGw9Im5vbmUiLz4KICAgPGxpbmUgaWQ9InN2Z18xMCIgeTI9IjI1NiIgeDI9IjQ1NiIgeTE9IjgzIiB4MT0iMzU2IiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZT0iIzAwMCIgZmlsbD0ibm9uZSIvPgogICA8bGluZSBpZD0ic3ZnXzExIiB5Mj0iMjU2IiB4Mj0iNDU2IiB5MT0iNDI5IiB4MT0iMzU2IiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZT0iIzAwMCIgZmlsbD0ibm9uZSIvPgogIDwvZz4KICA8bGluZSBpZD0ic3ZnXzI4IiB5Mj0iMzAwIiB4Mj0iMjU2IiB5MT0iMCIgeDE9IjI1NiIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2U9IiMwMDAwYmYiIGZpbGw9Im5vbmUiLz4KICA8cmVjdCBpZD0ic3ZnXzE2IiBoZWlnaHQ9IjEiIHdpZHRoPSIxIiB5PSIyNTUuNSIgeD0iMjU1LjUiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlPSIjZmYwMDAwIiBmaWxsPSJub25lIi8+CiAgPHRleHQgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgdGV4dC1hbmNob3I9InN0YXJ0IiBmb250LWZhbWlseT0iTm90byBTYW5zIEpQIiBmb250LXNpemU9IjI0IiBpZD0ic3ZnXzI5IiB5PSIyNDAiIHg9IjQ3MiIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2U9IiMwMDAwMDAiIGZpbGw9Im5vbmUiPjE8L3RleHQ+CiAgPHRleHQgc3R5bGU9ImN1cnNvcjogbW92ZTsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHRleHQtYW5jaG9yPSJzdGFydCIgZm9udC1mYW1pbHk9Ik5vdG8gU2FucyBKUCIgZm9udC1zaXplPSIyNCIgaWQ9InN2Z18zMCIgeT0iMjQwIiB4PSIyMiIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2U9IiMwMDAwMDAiIGZpbGw9Im5vbmUiPi0xPC90ZXh0PgogPC9nPgo8L3N2Zz4=" width="512" height="350" class="img_ev3q"></p><p>어떻게 적분할 수 있을까요?
안타깝게도, 지금 알고있는 지식으로는 적분할수 없습니다.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>그래도 궁금하신 분을 위해</summary><div><div class="collapsibleContent_i85q">이 식의 부정적분은 다음과 같습니다.<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo>∫</mo><msqrt><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msup><mi>x</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow></msqrt><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msup><mi>x</mi><mn>2</mn></msup><msup><mo stretchy="false">)</mo><mfrac><mn>1</mn><mn>2</mn></mfrac></msup><mi>x</mi><mo>+</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>x</mi><msup><mo stretchy="false">)</mo><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo>+</mo><mi>c</mi></mrow><annotation encoding="application/x-tex">\int \sqrt{(1-x^2)} = {1\over2}(1-x^2)^{1\over2}x+sin(x)^{-1}+c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.2222em;vertical-align:-0.8622em"></span><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011em">∫</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9839em"><span class="svg-align" style="top:-3.2em"><span class="pstrut" style="height:3.2em"></span><span class="mord" style="padding-left:1em"><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em"><span style="top:-2.989em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-2.9439em"><span class="pstrut" style="height:3.2em"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.28em" viewBox="0 0 400000 1296" preserveAspectRatio="xMinYMin slice"><path d="M263,681c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l0 -0
c4.7,-7.3,11,-11,19,-11
H40000v40H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M1001 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2561em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.254em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.004em"><span style="top:-3.413em;margin-right:0.05em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em"><span style="top:-2.656em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255em"><span class="pstrut" style="height:3em"></span><span class="frac-line mtight" style="border-bottom-width:0.049em"></span></span><span style="top:-3.384em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">in</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">c</span></span></span></span></span></div></div></div></details><h2 class="anchor anchorWithStickyNavbar_LWe7" id="이항정리">이항정리<a href="#이항정리" class="hash-link" aria-label="Direct link to 이항정리" title="Direct link to 이항정리">​</a></h2><p>위의 식을 적분하려면, <strong>이항정리</strong>와 <strong>이항계수</strong>를 알아야 합니다.</p><p><strong>이항식</strong>은, 두 단항식의 합인 다항식을 말합니다.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>a</mi><msup><mi>x</mi><mi>m</mi></msup><mo>−</mo><mi>b</mi><msup><mi>x</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">ax^m-bx^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7977em;vertical-align:-0.0833em"></span><span class="mord mathnormal">a</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7144em"></span><span class="mord mathnormal">b</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span></div><p><strong>이항정리</strong>는, 이항식의 거듭제곱 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>y</mi><msup><mo stretchy="false">)</mo><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">(x+y)^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span>을 단항식<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><msup><mi>x</mi><mi>b</mi></msup><msup><mi>y</mi><mi>c</mi></msup></mrow><annotation encoding="application/x-tex">ax^by^c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0435em;vertical-align:-0.1944em"></span><span class="mord mathnormal">a</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span></span></span></span></span></span></span></span></span></span>들의 합으로 전개하는 정리입니다.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>y</mi><msup><mo stretchy="false">)</mo><mi>n</mi></msup><mo>=</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></munderover><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>n</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>k</mi></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><msup><mi>x</mi><mrow><mi>n</mi><mo>−</mo><mi>k</mi></mrow></msup><msup><mi>y</mi><mi>k</mi></msup><mo>=</mo><msup><mi>x</mi><mi>n</mi></msup><mo>+</mo><mi>n</mi><msup><mi>x</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup><mi>y</mi><mo>+</mo><mfrac><mrow><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac><msup><mi>x</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup><msup><mi>y</mi><mn>2</mn></msup><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo>+</mo><mi>a</mi><msup><mi>x</mi><mi>b</mi></msup><msup><mi>y</mi><mi>c</mi></msup><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo>+</mo><msup><mi>y</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">(x+y)^n=\sum_{k=0}^n{\begin{pmatrix} n \\ k \end{pmatrix}}x^{n-k}y^k=x^n+nx^{n-1}y+{n(n-1) \over 2}x^{n-1}y^2+ ... + ax^by^c + ... + y^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.9535em;vertical-align:-1.3021em"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em"><span style="top:-1.8479em;margin-left:0em"><span class="pstrut" style="height:3.05em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em"><span class="pstrut" style="height:3.05em"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em"><span class="pstrut" style="height:3.05em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3021em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">n</span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">)</span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7977em;vertical-align:-0.0833em"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.0585em;vertical-align:-0.1944em"></span><span class="mord mathnormal">n</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.113em;vertical-align:-0.686em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord">...</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.0935em;vertical-align:-0.1944em"></span><span class="mord mathnormal">a</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord">...</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.9088em;vertical-align:-0.1944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span></div><p>여기에서 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mo>+</mo><mi>c</mi><mo>=</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">b+c=n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">n</span></span></span></span></span>이고, 단항식의 계수<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">a</span></span></span></span></span>는 <strong>이항계수</strong>라고 불리고
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>=</mo><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>n</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>b</mi></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mo>=</mo><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>n</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>c</mi></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">a={\begin{pmatrix} n\\b \end{pmatrix}}={\begin{pmatrix} n\\c \end{pmatrix}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">n</span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">)</span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">n</span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">)</span></span></span></span></span></span></span></span>입니다.<br>
<em>n choose b 또는 n개에서 b개를 고르는 조합으로 읽습니다</em></p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="이항계수binomial-coefficient">이항계수(binomial coefficient)<a href="#이항계수binomial-coefficient" class="hash-link" aria-label="Direct link to 이항계수(binomial coefficient)" title="Direct link to 이항계수(binomial coefficient)">​</a></h3><p>직접 <strong>이항식</strong> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x+1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>의 거듭제곱을 계산해 볼까요?  </p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>x</mi><msup><mo stretchy="false">)</mo><mn>0</mn></msup><mo>=</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>x</mi><msup><mo stretchy="false">)</mo><mn>1</mn></msup><mo>=</mo><mn>1</mn><mo>+</mo><mi>x</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>x</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>=</mo><mn>1</mn><mo>+</mo><mn>2</mn><mi>x</mi><mo>+</mo><msup><mi>x</mi><mn>2</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>x</mi><msup><mo stretchy="false">)</mo><mn>3</mn></msup><mo>=</mo><mn>1</mn><mo>+</mo><mn>3</mn><mi>x</mi><mo>+</mo><mn>3</mn><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><msup><mi>x</mi><mn>3</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>x</mi><msup><mo stretchy="false">)</mo><mn>4</mn></msup><mo>=</mo><mn>1</mn><mo>+</mo><mn>4</mn><mi>x</mi><mo>+</mo><mn>6</mn><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mn>4</mn><msup><mi>x</mi><mn>3</mn></msup><mo>+</mo><msup><mi>x</mi><mn>4</mn></msup></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned} &amp;(1+x)^0 = 1 \\ &amp;(1+x)^1 = 1+x \\ &amp;(1+x)^2 = 1+2x+x^2 \\ &amp;(1+x)^3 = 1+3x+3x^2+x^3 \\ &amp;(1+x)^4 = 1+4x+6x^2+4x^3+x^4 \\ \end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:7.6205em;vertical-align:-3.5603em"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.0603em"><span style="top:-6.0603em"><span class="pstrut" style="height:2.8641em"></span><span class="mord"></span></span><span style="top:-4.5362em"><span class="pstrut" style="height:2.8641em"></span><span class="mord"></span></span><span style="top:-3.0121em"><span class="pstrut" style="height:2.8641em"></span><span class="mord"></span></span><span style="top:-1.4879em"><span class="pstrut" style="height:2.8641em"></span><span class="mord"></span></span><span style="top:0.0362em"><span class="pstrut" style="height:2.8641em"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.5603em"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.0603em"><span style="top:-6.1962em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord mathnormal">x</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">1</span></span></span><span style="top:-4.6721em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord mathnormal">x</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord mathnormal">x</span></span></span><span style="top:-3.1479em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord mathnormal">x</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">2</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-1.6238em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord mathnormal">x</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">3</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">3</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span><span style="top:-0.0997em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord mathnormal">x</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">4</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">6</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">4</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.5603em"><span></span></span></span></span></span></span></span></span></span></span></span></div><p>눈치 빠르신 분이라면 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>x</mi><msup><mo stretchy="false">)</mo><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">(1+x)^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span>이 어떤 형태인지 추측하셨을 겁니다.</p><p>위에서 설명했듯이, n항식의 k항의 계수는 조합 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>n</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>k</mi></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mo>=</mo><mfrac><mrow><mi>n</mi><mo stretchy="false">!</mo></mrow><mrow><mi>k</mi><mo stretchy="false">!</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mi>k</mi><mo stretchy="false">)</mo><mo stretchy="false">!</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">{\begin{pmatrix} n\\k \end{pmatrix}} = {n! \over k!(n-k)!}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">n</span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">)</span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.4001em;vertical-align:-0.52em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span><span class="mclose mtight">!</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span><span class="mclose mtight">)!</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mclose mtight">!</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span>
또는, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><msubsup><mi mathvariant="normal">Π</mi><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msubsup><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mi>i</mi><mo stretchy="false">)</mo></mrow><mrow><mi>k</mi><mo stretchy="false">!</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">{Π_{i=0}^{k-1}(n-i) \over k!}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.5108em;vertical-align:-0.345em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1658em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span><span class="mclose mtight">!</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.5169em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.927em"><span style="top:-2.2044em;margin-left:0em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-2.931em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2956em"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span>와 같습니다.</p><br><p>조합수는 pascal's triangle에서 찾을 수 있습니다.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>n</mi><mo>=</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn><mspace width="1em"></mspace><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>n</mi><mo>=</mo><mn>2</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn><mspace width="1em"></mspace><mn>2</mn><mspace width="1em"></mspace><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>n</mi><mo>=</mo><mn>3</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn><mspace width="1em"></mspace><mn>3</mn><mspace width="1em"></mspace><mn>3</mn><mspace width="1em"></mspace><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>n</mi><mo>=</mo><mn>4</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn><mspace width="1em"></mspace><mn>4</mn><mspace width="1em"></mspace><mn>6</mn><mspace width="1em"></mspace><mn>4</mn><mspace width="1em"></mspace><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{array}{c} n=0 &amp;1 \\ n=1 &amp;1 \quad 1 \\ n=2 &amp;1 \quad 2 \quad 1 \\ n=3 &amp;1 \quad 3 \quad 3 \quad 1 \\ n=4 &amp;1 \quad 4 \quad 6 \quad 4 \quad 1 \\ \end{array}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:6em;vertical-align:-2.75em"></span><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.25em"><span style="top:-5.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">0</span></span></span><span style="top:-4.21em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">1</span></span></span><span style="top:-3.01em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">2</span></span></span><span style="top:-1.81em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">3</span></span></span><span style="top:-0.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.75em"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em"></span><span class="arraycolsep" style="width:0.5em"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.25em"><span style="top:-5.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-4.21em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:1em"></span><span class="mord">1</span></span></span><span style="top:-3.01em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:1em"></span><span class="mord">2</span><span class="mspace" style="margin-right:1em"></span><span class="mord">1</span></span></span><span style="top:-1.81em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:1em"></span><span class="mord">3</span><span class="mspace" style="margin-right:1em"></span><span class="mord">3</span><span class="mspace" style="margin-right:1em"></span><span class="mord">1</span></span></span><span style="top:-0.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:1em"></span><span class="mord">4</span><span class="mspace" style="margin-right:1em"></span><span class="mord">6</span><span class="mspace" style="margin-right:1em"></span><span class="mord">4</span><span class="mspace" style="margin-right:1em"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.75em"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em"></span></span></span></span></span></span></span></div><p><strong>이항계수</strong>를 구할때, 대수학으로 계산하는 대신 조합수를 사용해 편리하게 계산할 수 있습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="일반화된-이항정리">일반화된 이항정리<a href="#일반화된-이항정리" class="hash-link" aria-label="Direct link to 일반화된 이항정리" title="Direct link to 일반화된 이항정리">​</a></h2><p>이항식을 거듭제곱하는 지수를 임의의 복소수 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi><mo>∈</mo><mi mathvariant="double-struck">C</mi></mrow><annotation encoding="application/x-tex">\alpha \in \mathbb{C}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em"></span><span class="mord mathnormal" style="margin-right:0.0037em">α</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6889em"></span><span class="mord mathbb">C</span></span></span></span></span> 까지 확장할 수 있습니다. 일반화된 이항 정리에선 전개가 <a href="/posts/power-series">무한급수</a>가 됩니다.</p><p><em>natural numbers(<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">N</mi></mrow><annotation encoding="application/x-tex">\mathbb N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em"></span><span class="mord mathbb">N</span></span></span></span></span>) - integers(<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">\mathbb Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em"></span><span class="mord mathbb">Z</span></span></span></span></span>) - rational(<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Q</mi></mrow><annotation encoding="application/x-tex">\mathbb Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8556em;vertical-align:-0.1667em"></span><span class="mord mathbb">Q</span></span></span></span></span>) - real(<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">\mathbb R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em"></span><span class="mord mathbb">R</span></span></span></span></span>) - complex(<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">C</mi></mrow><annotation encoding="application/x-tex">\mathbb C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em"></span><span class="mord mathbb">C</span></span></span></span></span>)</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="음이향계수">음이향계수<a href="#음이향계수" class="hash-link" aria-label="Direct link to 음이향계수" title="Direct link to 음이향계수">​</a></h3><p>음수일때 계승! 은 정의되지 않지만, 다음과 같이 계산합시다.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>−</mo><mn>1</mn><mo stretchy="false">!</mo><mo>=</mo><mo>−</mo><mn>1</mn><mo>×</mo><mo>−</mo><mn>2</mn><mo>×</mo><mo>−</mo><mn>3</mn><mo>×</mo><mo>−</mo><mn>4...</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>−</mo><mn>2</mn><mo stretchy="false">!</mo><mo>=</mo><mspace width="1em"></mspace><mspace width="1em"></mspace><mo>−</mo><mn>2</mn><mo>×</mo><mo>−</mo><mn>3</mn><mo>×</mo><mo>−</mo><mn>4...</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>−</mo><mn>3</mn><mo stretchy="false">!</mo><mo>=</mo><mspace width="1em"></mspace><mspace width="1em"></mspace><mspace width="1em"></mspace><mspace width="1em"></mspace><mo>−</mo><mn>3</mn><mo>×</mo><mo>−</mo><mn>4...</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned} &amp;-1! = -1\times-2\times-3\times-4...\\ &amp;-2! = \quad\quad-2\times-3\times-4...\\ &amp;-3! = \quad\quad\quad\quad-3\times-4...\\ \end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.5em;vertical-align:-2em"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5em"><span style="top:-4.5em"><span class="pstrut" style="height:2.84em"></span><span class="mord"></span></span><span style="top:-3em"><span class="pstrut" style="height:2.84em"></span><span class="mord"></span></span><span style="top:-1.5em"><span class="pstrut" style="height:2.84em"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2em"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5em"><span style="top:-4.66em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">1</span><span class="mclose">!</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">−</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">−</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">−</span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">−</span><span class="mord">4...</span></span></span><span style="top:-3.16em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">2</span><span class="mclose">!</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:1em"></span><span class="mspace" style="margin-right:1em"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">−</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">−</span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">−</span><span class="mord">4...</span></span></span><span style="top:-1.66em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">3</span><span class="mclose">!</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:1em"></span><span class="mspace" style="margin-right:1em"></span><span class="mspace" style="margin-right:1em"></span><span class="mspace" style="margin-right:1em"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">−</span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">−</span><span class="mord">4...</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2em"><span></span></span></span></span></span></span></span></span></span></span></span></div><p>-1차식의 0항의 계수는
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mo>=</mo><mfrac><mrow><mo>−</mo><mn>1</mn><mo stretchy="false">!</mo></mrow><mrow><mn>0</mn><mo stretchy="false">!</mo><mo>−</mo><mn>1</mn><mo stretchy="false">!</mo></mrow></mfrac><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">{\begin{pmatrix} -1 \\ 0 \end{pmatrix}} = {-1! \over 0!-1!} = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">)</span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.2834em;vertical-align:-0.4033em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span><span class="mclose mtight">!</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">!</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">!</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span></span><br>
<!-- -->-1차식의 1항의 계수는
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mo>=</mo><mfrac><mrow><mo>−</mo><mn>1</mn><mo stretchy="false">!</mo></mrow><mrow><mn>1</mn><mo stretchy="false">!</mo><mo>−</mo><mn>2</mn><mo stretchy="false">!</mo></mrow></mfrac><mo>=</mo><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">{\begin{pmatrix} -1 \\ 1 \end{pmatrix}} = {-1! \over 1!-2!} = -1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">)</span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.2834em;vertical-align:-0.4033em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mclose mtight">!</span><span class="mbin mtight">−</span><span class="mord mtight">2</span><span class="mclose mtight">!</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">!</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">−</span><span class="mord">1</span></span></span></span></span><br>
<!-- -->-1차식의 2항의 계수는
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mo>=</mo><mfrac><mrow><mo>−</mo><mn>1</mn><mo stretchy="false">!</mo></mrow><mrow><mn>2</mn><mo stretchy="false">!</mo><mo>−</mo><mn>3</mn><mo stretchy="false">!</mo></mrow></mfrac><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">{\begin{pmatrix} -1 \\ 2 \end{pmatrix}} = {-1! \over 2!-3!} = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">)</span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.2834em;vertical-align:-0.4033em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mclose mtight">!</span><span class="mbin mtight">−</span><span class="mord mtight">3</span><span class="mclose mtight">!</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">!</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span></span><br>
<!-- -->...</p><br><p>-2차식의 0항의 계수는
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>2</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mo>=</mo><mfrac><mrow><mo>−</mo><mn>2</mn><mo stretchy="false">!</mo></mrow><mrow><mn>0</mn><mo stretchy="false">!</mo><mo>−</mo><mn>2</mn><mo stretchy="false">!</mo></mrow></mfrac><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">{\begin{pmatrix} -2 \\ 0 \end{pmatrix}} = {-2! \over 0!-2!} = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">−</span><span class="mord">2</span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">)</span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.2834em;vertical-align:-0.4033em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span><span class="mclose mtight">!</span><span class="mbin mtight">−</span><span class="mord mtight">2</span><span class="mclose mtight">!</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">2</span><span class="mclose mtight">!</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span></span><br>
<!-- -->-2차식의 1항의 계수는
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>2</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mo>=</mo><mfrac><mrow><mo>−</mo><mn>2</mn><mo stretchy="false">!</mo></mrow><mrow><mn>1</mn><mo stretchy="false">!</mo><mo>−</mo><mn>3</mn><mo stretchy="false">!</mo></mrow></mfrac><mo>=</mo><mo>−</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">{\begin{pmatrix} -2 \\ 1 \end{pmatrix}} = {-2! \over 1!-3!} = -2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">−</span><span class="mord">2</span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">)</span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.2834em;vertical-align:-0.4033em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mclose mtight">!</span><span class="mbin mtight">−</span><span class="mord mtight">3</span><span class="mclose mtight">!</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">2</span><span class="mclose mtight">!</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">−</span><span class="mord">2</span></span></span></span></span><br>
<!-- -->-2차식의 2항의 계수는
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>2</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mo>=</mo><mfrac><mrow><mo>−</mo><mn>2</mn><mo stretchy="false">!</mo></mrow><mrow><mn>2</mn><mo stretchy="false">!</mo><mo>−</mo><mn>4</mn><mo stretchy="false">!</mo></mrow></mfrac><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">{\begin{pmatrix} -2 \\ 2 \end{pmatrix}} = {-2! \over 2!-4!} = 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">−</span><span class="mord">2</span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">)</span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.2834em;vertical-align:-0.4033em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mclose mtight">!</span><span class="mbin mtight">−</span><span class="mord mtight">4</span><span class="mclose mtight">!</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">2</span><span class="mclose mtight">!</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">3</span></span></span></span></span><br>
<!-- -->...</p><br><p>위의 계산을 일반화하면</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mi>r</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>k</mi></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mrow><mo stretchy="false">(</mo><mo>−</mo><mi>r</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mo>−</mo><mi>r</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo stretchy="false">(</mo><mo>−</mo><mi>r</mi><mo>−</mo><mi>k</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mrow><mi>k</mi><mo stretchy="false">!</mo></mrow></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">(</mo><mo>−</mo><mn>1</mn><msup><mo stretchy="false">)</mo><mi>k</mi></msup><mfrac><mrow><mo stretchy="false">(</mo><mi>r</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>r</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo stretchy="false">(</mo><mi>r</mi><mo>+</mo><mi>k</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mrow><mi>k</mi><mo stretchy="false">!</mo></mrow></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">(</mo><mo>−</mo><mn>1</mn><msup><mo stretchy="false">)</mo><mi>k</mi></msup><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>r</mi><mo>+</mo><mi>k</mi><mo>−</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>k</mi></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned} {\begin{pmatrix} -r \\ k \end{pmatrix}}&amp;={(-r)(-r-1)...(-r-k+1) \over k!} \\ &amp;=(-1)^k{(r)(r+1)...(r+k-1) \over k!} \\ &amp;=(-1)^k{\begin{pmatrix} r+k-1 \\ k \end{pmatrix}} \end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:7.8131em;vertical-align:-3.6565em"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.1565em"><span style="top:-6.1565em"><span class="pstrut" style="height:3.45em"></span><span class="mord"><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">−</span><span class="mord mathnormal" style="margin-right:0.02778em">r</span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">)</span></span></span></span></span></span><span style="top:-3.4795em"><span class="pstrut" style="height:3.45em"></span><span class="mord"></span></span><span style="top:-1.0435em"><span class="pstrut" style="height:3.45em"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.6565em"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.1565em"><span style="top:-6.1565em"><span class="pstrut" style="height:3.45em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="mclose">!</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mopen">(</span><span class="mord">−</span><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord">−</span><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">1</span><span class="mclose">)</span><span class="mord">...</span><span class="mopen">(</span><span class="mord">−</span><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span style="top:-3.4795em"><span class="pstrut" style="height:3.45em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mopen">(</span><span class="mord">−</span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="mclose">!</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">1</span><span class="mclose">)</span><span class="mord">...</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span style="top:-1.0435em"><span class="pstrut" style="height:3.45em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mopen">(</span><span class="mord">−</span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span></span></span></span></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">1</span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">)</span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.6565em"><span></span></span></span></span></span></span></span></span></span></span></span></div><p>음이항계수를 파스칼의 삼각형에 이어서 그려볼까요?  </p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>n</mi><mo>=</mo><mo>−</mo><mn>4</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mn>1</mn><mspace width="1em"></mspace><mo>−</mo><mn>4...</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>n</mi><mo>=</mo><mo>−</mo><mn>3</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mn>1</mn><mspace width="1em"></mspace><mo>−</mo><mn>3</mn><mspace width="1em"></mspace><mspace width="1em"></mspace><mn>6...</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>n</mi><mo>=</mo><mo>−</mo><mn>2</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mn>1</mn><mspace width="1em"></mspace><mo>−</mo><mn>2</mn><mspace width="1em"></mspace><mspace width="1em"></mspace><mn>3</mn><mspace width="1em"></mspace><mo>−</mo><mn>4...</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>n</mi><mo>=</mo><mo>−</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="1em"></mspace><mn>1</mn><mspace width="1em"></mspace><mo>−</mo><mn>1</mn><mspace width="1em"></mspace><mspace width="1em"></mspace><mn>1</mn><mspace width="1em"></mspace><mo>−</mo><mn>1</mn><mspace width="1em"></mspace><mspace width="1em"></mspace><mn>1...</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>n</mi><mo>=</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn><mspace width="2em"></mspace><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>n</mi><mo>=</mo><mn>2</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn><mspace width="2em"></mspace><mn>2</mn><mspace width="2em"></mspace><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>n</mi><mo>=</mo><mn>3</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn><mspace width="2em"></mspace><mn>3</mn><mspace width="2em"></mspace><mn>3</mn><mspace width="2em"></mspace><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>n</mi><mo>=</mo><mn>4</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn><mspace width="2em"></mspace><mn>4</mn><mspace width="2em"></mspace><mn>6</mn><mspace width="2em"></mspace><mn>4</mn><mspace width="2em"></mspace><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{array}{c} n=-4&amp;\qquad\qquad\qquad\qquad\qquad\qquad\qquad 1 \quad -4 ...\\ n=-3&amp;\qquad\qquad\qquad\qquad\qquad\qquad\qquad 1 \quad -3 \quad\quad 6 ...\\ n=-2&amp;\qquad\qquad\qquad\qquad\qquad\qquad\qquad 1 \quad -2 \quad\quad 3 \quad -4 ...\\ n=-1&amp;\qquad\qquad\qquad\qquad\qquad\qquad\quad 1 \quad -1 \quad\quad 1 \quad -1 \quad\quad 1 ...\\ n=0 &amp;1 \\ n=1 &amp;1 \qquad 1 \\ n=2 &amp;1 \qquad 2 \qquad 1 \\ n=3 &amp;1 \qquad 3 \qquad 3 \qquad 1 \\ n=4 &amp;1 \qquad 4 \qquad 6 \qquad 4 \qquad 1 \\ \end{array}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:10.8em;vertical-align:-5.15em"></span><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:5.65em"><span style="top:-7.81em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">−</span><span class="mord">4</span></span></span><span style="top:-6.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">−</span><span class="mord">3</span></span></span><span style="top:-5.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">−</span><span class="mord">2</span></span></span><span style="top:-4.21em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">−</span><span class="mord">1</span></span></span><span style="top:-3.01em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">0</span></span></span><span style="top:-1.81em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">1</span></span></span><span style="top:-0.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">2</span></span></span><span style="top:0.59em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">3</span></span></span><span style="top:1.79em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:5.15em"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em"></span><span class="arraycolsep" style="width:0.5em"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:5.65em"><span style="top:-7.81em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mspace" style="margin-right:2em"></span><span class="mspace" style="margin-right:2em"></span><span class="mspace" style="margin-right:2em"></span><span class="mspace" style="margin-right:2em"></span><span class="mspace" style="margin-right:2em"></span><span class="mspace" style="margin-right:2em"></span><span class="mspace" style="margin-right:2em"></span><span class="mord">1</span><span class="mspace" style="margin-right:1em"></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">4...</span></span></span><span style="top:-6.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mspace" style="margin-right:2em"></span><span class="mspace" style="margin-right:2em"></span><span class="mspace" style="margin-right:2em"></span><span class="mspace" style="margin-right:2em"></span><span class="mspace" style="margin-right:2em"></span><span class="mspace" style="margin-right:2em"></span><span class="mspace" style="margin-right:2em"></span><span class="mord">1</span><span class="mspace" style="margin-right:1em"></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">3</span><span class="mspace" style="margin-right:1em"></span><span class="mspace" style="margin-right:1em"></span><span class="mord">6...</span></span></span><span style="top:-5.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mspace" style="margin-right:2em"></span><span class="mspace" style="margin-right:2em"></span><span class="mspace" style="margin-right:2em"></span><span class="mspace" style="margin-right:2em"></span><span class="mspace" style="margin-right:2em"></span><span class="mspace" style="margin-right:2em"></span><span class="mspace" style="margin-right:2em"></span><span class="mord">1</span><span class="mspace" style="margin-right:1em"></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">2</span><span class="mspace" style="margin-right:1em"></span><span class="mspace" style="margin-right:1em"></span><span class="mord">3</span><span class="mspace" style="margin-right:1em"></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">4...</span></span></span><span style="top:-4.21em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mspace" style="margin-right:2em"></span><span class="mspace" style="margin-right:2em"></span><span class="mspace" style="margin-right:2em"></span><span class="mspace" style="margin-right:2em"></span><span class="mspace" style="margin-right:2em"></span><span class="mspace" style="margin-right:2em"></span><span class="mspace" style="margin-right:1em"></span><span class="mord">1</span><span class="mspace" style="margin-right:1em"></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">1</span><span class="mspace" style="margin-right:1em"></span><span class="mspace" style="margin-right:1em"></span><span class="mord">1</span><span class="mspace" style="margin-right:1em"></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">1</span><span class="mspace" style="margin-right:1em"></span><span class="mspace" style="margin-right:1em"></span><span class="mord">1...</span></span></span><span style="top:-3.01em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.81em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:2em"></span><span class="mord">1</span></span></span><span style="top:-0.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:2em"></span><span class="mord">2</span><span class="mspace" style="margin-right:2em"></span><span class="mord">1</span></span></span><span style="top:0.59em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:2em"></span><span class="mord">3</span><span class="mspace" style="margin-right:2em"></span><span class="mord">3</span><span class="mspace" style="margin-right:2em"></span><span class="mord">1</span></span></span><span style="top:1.79em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:2em"></span><span class="mord">4</span><span class="mspace" style="margin-right:2em"></span><span class="mord">6</span><span class="mspace" style="margin-right:2em"></span><span class="mord">4</span><span class="mspace" style="margin-right:2em"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:5.15em"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em"></span></span></span></span></span></span></span></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="분수계수">분수계수<a href="#분수계수" class="hash-link" aria-label="Direct link to 분수계수" title="Direct link to 분수계수">​</a></h3><p>이항계수는 분수일 때도 정의할 수 있습니다.</p><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">1\over2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>에서 이항계수를 살펴봅시다.</p><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">1\over2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>차식의 0항의 계수는
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mfrac><mn>1</mn><mn>2</mn></mfrac></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mo>=</mo><mfrac><mrow><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy="false">!</mo></mrow><mrow><mn>0</mn><mo stretchy="false">!</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy="false">!</mo></mrow></mfrac><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">{\begin{pmatrix} 1\over2 \\ 0 \end{pmatrix}} = {{1\over2}! \over 0!{1\over2}!} = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4051em;vertical-align:-0.9526em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4526em"><span style="top:-3.6074em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-2.4074em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9526em"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">)</span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.7836em;vertical-align:-0.6418em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1418em"><span style="top:-2.599em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span><span class="mclose mtight">!</span><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em"><span style="top:-2.656em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255em"><span class="pstrut" style="height:3em"></span><span class="frac-line mtight" style="border-bottom-width:0.049em"></span></span><span style="top:-3.384em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span><span class="mclose mtight">!</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.5508em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em"><span style="top:-2.656em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255em"><span class="pstrut" style="height:3em"></span><span class="frac-line mtight" style="border-bottom-width:0.049em"></span></span><span style="top:-3.384em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span><span class="mclose mtight">!</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.6418em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span></span><br>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">1\over2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>차식의 1항의 계수는
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mfrac><mn>1</mn><mn>2</mn></mfrac></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mo>=</mo><mfrac><mrow><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy="false">!</mo></mrow><mrow><mn>1</mn><mo stretchy="false">!</mo><mo>−</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy="false">!</mo></mrow></mfrac><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">{\begin{pmatrix} 1\over2 \\ 1 \end{pmatrix}} = {{1\over2}! \over 1!-{1\over2}!} = {1\over2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4051em;vertical-align:-0.9526em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4526em"><span style="top:-3.6074em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-2.4074em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9526em"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">)</span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.7836em;vertical-align:-0.6418em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1418em"><span style="top:-2.599em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mclose mtight">!</span><span class="mbin mtight">−</span><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em"><span style="top:-2.656em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255em"><span class="pstrut" style="height:3em"></span><span class="frac-line mtight" style="border-bottom-width:0.049em"></span></span><span style="top:-3.384em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span><span class="mclose mtight">!</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.5508em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em"><span style="top:-2.656em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255em"><span class="pstrut" style="height:3em"></span><span class="frac-line mtight" style="border-bottom-width:0.049em"></span></span><span style="top:-3.384em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span><span class="mclose mtight">!</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.6418em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><br>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">1\over2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>차식의 2항의 계수는
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mfrac><mn>1</mn><mn>2</mn></mfrac></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mo>=</mo><mfrac><mrow><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy="false">!</mo></mrow><mrow><mn>2</mn><mo stretchy="false">!</mo><mo>−</mo><mfrac><mn>3</mn><mn>2</mn></mfrac><mo stretchy="false">!</mo></mrow></mfrac><mo>=</mo><mfrac><mrow><mo>−</mo><mfrac><mn>1</mn><mn>4</mn></mfrac></mrow><mrow><mn>2</mn><mo stretchy="false">!</mo></mrow></mfrac><mo>=</mo><mo>−</mo><mfrac><mn>1</mn><mn>8</mn></mfrac></mrow><annotation encoding="application/x-tex">{\begin{pmatrix} 1\over2 \\ 2 \end{pmatrix}} = {{1\over2}! \over 2!-{3\over2}!} = {-{1\over4} \over 2!} = -{1\over8}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4051em;vertical-align:-0.9526em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4526em"><span style="top:-3.6074em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-2.4074em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9526em"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">)</span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.7836em;vertical-align:-0.6418em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1418em"><span style="top:-2.599em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mclose mtight">!</span><span class="mbin mtight">−</span><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em"><span style="top:-2.656em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255em"><span class="pstrut" style="height:3em"></span><span class="frac-line mtight" style="border-bottom-width:0.049em"></span></span><span style="top:-3.384em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span><span class="mclose mtight">!</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.5508em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em"><span style="top:-2.656em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255em"><span class="pstrut" style="height:3em"></span><span class="frac-line mtight" style="border-bottom-width:0.049em"></span></span><span style="top:-3.384em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span><span class="mclose mtight">!</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.6418em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.4868em;vertical-align:-0.345em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1418em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mclose mtight">!</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.5508em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em"><span style="top:-2.656em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.2255em"><span class="pstrut" style="height:3em"></span><span class="frac-line mtight" style="border-bottom-width:0.049em"></span></span><span style="top:-3.384em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em"></span><span class="mord">−</span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">8</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><br>
<!-- -->...</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="원의-넓이2">원의 넓이2<a href="#원의-넓이2" class="hash-link" aria-label="Direct link to 원의 넓이2" title="Direct link to 원의 넓이2">​</a></h2><p>이항식의 분수 거듭제곱에서 이항계수를 구하는 법을 알았으니,
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msup><mi>x</mi><mn>2</mn></msup><msup><mo stretchy="false">)</mo><mfrac><mn>1</mn><mn>2</mn></mfrac></msup></mrow><annotation encoding="application/x-tex">(1-x^2)^{1 \over 2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.204em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.954em"><span style="top:-3.363em;margin-right:0.05em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em"><span style="top:-2.656em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255em"><span class="pstrut" style="height:3em"></span><span class="frac-line mtight" style="border-bottom-width:0.049em"></span></span><span style="top:-3.384em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span></span></span></span></span>식을 전개할 수 있습니다!</p><p>편의를 위해 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><msup><mi>x</mi><mn>2</mn></msup><mo>=</mo><mi>t</mi></mrow><annotation encoding="application/x-tex">-x^2=t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em"></span><span class="mord">−</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6151em"></span><span class="mord mathnormal">t</span></span></span></span></span>로 놓으면,</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>t</mi><msup><mo stretchy="false">)</mo><mfrac><mn>1</mn><mn>2</mn></mfrac></msup><mo>=</mo><mn>1</mn><mo>+</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mi>t</mi><mo>−</mo><mfrac><mn>1</mn><mn>8</mn></mfrac><msup><mi>t</mi><mn>2</mn></msup><mo>+</mo><mfrac><mn>1</mn><mn>16</mn></mfrac><msup><mi>t</mi><mn>3</mn></msup><mo>−</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">(1+t)^{1 \over 2}=1+{1\over 2}t-{1\over 8}t^2+{1\over 16}t^3 - ...</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.254em;vertical-align:-0.25em"></span><span class="mord mathnormal">t</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.004em"><span style="top:-3.413em;margin-right:0.05em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em"><span style="top:-2.656em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255em"><span class="pstrut" style="height:3em"></span><span class="frac-line mtight" style="border-bottom-width:0.049em"></span></span><span style="top:-3.384em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">8</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">16</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.1056em"></span><span class="mord">...</span></span></span></span></span></div><p>다시 x에 대해서로 바꿔줍시다</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msup><mi>x</mi><mn>2</mn></msup><msup><mo stretchy="false">)</mo><mfrac><mn>1</mn><mn>2</mn></mfrac></msup><mo>=</mo><mn>1</mn><mo>−</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><msup><mi>x</mi><mn>2</mn></msup><mo>−</mo><mfrac><mn>1</mn><mn>8</mn></mfrac><msup><mi>x</mi><mn>4</mn></msup><mo>−</mo><mfrac><mn>1</mn><mn>16</mn></mfrac><msup><mi>x</mi><mn>6</mn></msup><mo>−</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">(1-x^2)^{1 \over 2}=1-{1\over 2}x^2-{1\over 8}x^4-{1\over 16}x^6 - ...</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.254em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.004em"><span style="top:-3.413em;margin-right:0.05em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em"><span style="top:-2.656em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255em"><span class="pstrut" style="height:3em"></span><span class="frac-line mtight" style="border-bottom-width:0.049em"></span></span><span style="top:-3.384em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">8</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">16</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.1056em"></span><span class="mord">...</span></span></span></span></span></div><p>[0,1]<!-- --> 구간의 정적분을 구하면</p><p><img loading="lazy" alt="circle-transpos-polynomial-integral" src="/assets/images/circle-transpos-polynomial-integral-9a40c6040ee5f9138196783b2f480b01.png" width="2438" height="634" class="img_ev3q"></p><p>이 값은 무한히 전개되므로 전부 계산할 수 없습니다.
하지만 원의 넓이 π의 1/4, π/4를 나타낸다는 것을 알고 있습니다.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mfrac><mi>π</mi><mn>4</mn></mfrac></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msubsup><mo>∫</mo><mn>0</mn><mn>1</mn></msubsup><mo stretchy="false">[</mo><mn>1</mn><mo>−</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><msup><mi>x</mi><mn>2</mn></msup><mo>−</mo><mfrac><mn>1</mn><mn>8</mn></mfrac><msup><mi>x</mi><mn>4</mn></msup><mo>−</mo><mfrac><mn>1</mn><mn>16</mn></mfrac><msup><mi>x</mi><mn>6</mn></msup><mo>−</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo stretchy="false">]</mo><mi>d</mi><mi>x</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">[</mo><mi>x</mi><mo>−</mo><mfrac><mn>1</mn><mn>6</mn></mfrac><msup><mi>x</mi><mn>3</mn></msup><mo>−</mo><mfrac><mn>1</mn><mn>40</mn></mfrac><msup><mi>x</mi><mn>5</mn></msup><mo>−</mo><mfrac><mn>1</mn><mn>112</mn></mfrac><msup><mi>x</mi><mn>7</mn></msup><mo>−</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msubsup><mo stretchy="false">]</mo><mn>0</mn><mn>1</mn></msubsup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>533</mn><mn>672</mn></mfrac><mo>=</mo><mn>0.79315476190</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned} {\pi \over 4} &amp;= \int_0^1[1-{1\over2}x^2-{1\over8}x^4-{1\over16}x^6-...]dx\\ &amp;=[x-{1\over6}x^3-{1\over40}x^5-{1\over112}x^7-...]^1_0 \\ &amp;={533\over672}=0.79315476190 \end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:7.3908em;vertical-align:-3.4454em"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.9454em"><span style="top:-5.9454em"><span class="pstrut" style="height:3.564em"></span><span class="mord"><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">π</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span style="top:-3.412em"><span class="pstrut" style="height:3.564em"></span><span class="mord"></span></span><span style="top:-1.1046em"><span class="pstrut" style="height:3.564em"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.4454em"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.9454em"><span style="top:-5.9454em"><span class="pstrut" style="height:3.564em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011em">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.564em"><span style="top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span><span style="top:-3.8129em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119em"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">8</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">16</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">...</span><span class="mclose">]</span><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span></span></span><span style="top:-3.412em"><span class="pstrut" style="height:3.564em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">6</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">40</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">112</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">7</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">...</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em"><span></span></span></span></span></span></span></span></span><span style="top:-1.1046em"><span class="pstrut" style="height:3.564em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">672</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">533</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">0.79315476190</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.4454em"><span></span></span></span></span></span></span></span></span></span></span></span></div><p>위 식을 네번째 항까지 계산한 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span></span></span></span></span> 값은 3.172619047 입니다!  </p><p><em>다섯째 항까지 계산하면 4x(6361/8064)=3.15525793650로 점점 정확해짐을 알 수 있습니다</em></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="원의-넓이3">원의 넓이3<a href="#원의-넓이3" class="hash-link" aria-label="Direct link to 원의 넓이3" title="Direct link to 원의 넓이3">​</a></h2><p>정적분의 범위를 <!-- -->[0, 1/2]<!-- -->로 설정하면 정적분의 값을 더 빠르게 구할 수 있습니다.</p><p><img loading="lazy" alt="half-of-quater" src="/assets/images/half-of-quarter-f182202eef847ed88dfafd16ef47cd51.png" width="1806" height="1036" class="img_ev3q"></p><p>피타고라스와 삼각함수 덕에 이 넓이는 쉽게 알 수 있습니다.</p><p>밑변의 길이가 1/2이고 빗변이 1인 삼각형은 사이각이 60도 입니다.
따라서, 이 부분의 넓이는 원의 넓이 π의 12분의 1인 원뿔과
밑변이 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">1\over2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>, 높이가 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><msqrt><mn>3</mn></msqrt><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\sqrt{3}\over2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.383em;vertical-align:-0.345em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.038em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.399em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9128em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mtight" style="padding-left:0.833em"><span class="mord mtight">3</span></span></span><span style="top:-2.8728em"><span class="pstrut" style="height:3em"></span><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1272em"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>인 삼격형 넓이의 합입니다.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mi>π</mi><mn>12</mn></mfrac><mo>+</mo><mfrac><msqrt><mn>3</mn></msqrt><mn>8</mn></mfrac></mrow><annotation encoding="application/x-tex">{π\over12} + {\sqrt{3}\over8}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.7936em;vertical-align:-0.686em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">12</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">π</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.2702em;vertical-align:-0.686em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5842em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">8</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9072em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord" style="padding-left:0.833em"><span class="mord">3</span></span></span><span style="top:-2.8672em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1328em"><span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></div><p>정적분과 이항정리를 통한 다항식의 전개로 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span></span></span></span></span>를 계산하는 방법은 뉴턴이 제안했습니다.
아르키메데스의 방법과 정확도를 비교해보면,
4천조(兆)각형을 계산할 때와 뉴턴 급수의 50개의 항을 계산했을때가 같습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><p><a href="https://ko.wikipedia.org/wiki/%EC%9B%90%EC%A3%BC%EC%9C%A8" target="_blank" rel="noopener noreferrer">[위키]원주율</a><br>
<a href="https://ko.wikipedia.org/wiki/%EC%9D%B4%ED%95%AD%EC%A0%95%EB%A6%AC" target="_blank" rel="noopener noreferrer">[위키]이항정리</a><br>
<a href="https://medium.com/swlh/calculating-pi-73ece2d3c9a9" target="_blank" rel="noopener noreferrer">Calculating Pi</a><br>
<a href="https://www.youtube.com/watch?v=ZWwdAidVsZ8" target="_blank" rel="noopener noreferrer">π를 계산하는 특별한 방법</a></p>]]></content:encoded>
            <category>math</category>
        </item>
        <item>
            <title><![CDATA[Nvidia GPU 아키텍처]]></title>
            <link>https://jwher.github.io/posts/nvidia-gpu-architectures</link>
            <guid>https://jwher.github.io/posts/nvidia-gpu-architectures</guid>
            <pubDate>Wed, 22 Jun 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Nvidia GPU Architectures]]></description>
            <content:encoded><![CDATA[<p><a href="/posts/nvidia-gpu-architectures"><img loading="lazy" alt="gpu" src="/assets/images/gpu-d6ed0bcad033de47ded4f4aa6fd18eed.jpeg" width="1000" height="615" class="img_ev3q"></a><br>
<em>Graphic Processing Unit</em>  </p><p>아직 작성중입니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="nvidia-architectures---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------">Nvidia Architectures                                                                                                                                                                                 |<a href="#nvidia-architectures---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------" class="hash-link" aria-label="Direct link to Nvidia Architectures                                                                                                                                                                                 |" title="Direct link to Nvidia Architectures                                                                                                                                                                                 |">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="streaming-multiprocessor">Streaming Multiprocessor<a href="#streaming-multiprocessor" class="hash-link" aria-label="Direct link to Streaming Multiprocessor" title="Direct link to Streaming Multiprocessor">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="streaming-processor">Streaming Processor<a href="#streaming-processor" class="hash-link" aria-label="Direct link to Streaming Processor" title="Direct link to Streaming Processor">​</a></h3><p>Compute Unified Device Architecture. CUDA Core
논리 수학 연산(Multiply add Divide)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="special-function-unit">Special Function Unit<a href="#special-function-unit" class="hash-link" aria-label="Direct link to Special Function Unit" title="Direct link to Special Function Unit">​</a></h3><p>초월함수, 부동소수점 곱셈기</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="shared-memory">Shared Memory<a href="#shared-memory" class="hash-link" aria-label="Direct link to Shared Memory" title="Direct link to Shared Memory">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tensor-core">Tensor Core<a href="#tensor-core" class="hash-link" aria-label="Direct link to Tensor Core" title="Direct link to Tensor Core">​</a></h3><p>V100</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="single-instruction-multiple-threading">Single Instruction Multiple Threading<a href="#single-instruction-multiple-threading" class="hash-link" aria-label="Direct link to Single Instruction Multiple Threading" title="Direct link to Single Instruction Multiple Threading">​</a></h3><p>Single Instruction Multiple Data</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="float-point-operations-per-seconds">FLoat point Operations Per Seconds<a href="#float-point-operations-per-seconds" class="hash-link" aria-label="Direct link to FLoat point Operations Per Seconds" title="Direct link to FLoat point Operations Per Seconds">​</a></h3><p>FLOPS</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="compute-capability">Compute Capability<a href="#compute-capability" class="hash-link" aria-label="Direct link to Compute Capability" title="Direct link to Compute Capability">​</a></h2><p>장치의 <em>Compute Capability</em>는 버전 넘버로 표현됩니다.
이 버전 넘버는 GPU 하드웨어가 어떤 기능을 지원하는지 식별하고,
애플리케이션이 어떤 하드웨어 기능과 명령어가 현재 GPU에서 가능한지 런타임에 결정할 수 있게 합니다.</p><p>Compute Capability는 major 리버전 번호와 minor 리비전 번호를 붙여 표시합니다.
장치는 같은 코어 아키텍처끼리 같은 major 리비전 번호를 공유합니다.
예를들어, major 리비전 번호 9는 NVIDIA Hopper GPU를 나타냅니다.</p><p>minor 리비전 번호는 새 기능이 포함되어있을 코어 아키텍처에 기능 업데이트에 대응합니다.
<em>Turing</em>은 Compute Capability 7.5에 대응합니다. 이는 볼타 이키텍처의 업데이트를 기반으로 한 것입니다.</p><table><thead><tr><th></th><th>Kepler cards (CUDA 5 until CUDA 10)</th></tr></thead><tbody><tr><td>compute 30</td><td>generic Kepler, GeForce 700, GT-730</td></tr><tr><td>compute 35</td><td>Tesla K40</td></tr><tr><td>compute_37</td><td>Tesla K80</td></tr></tbody></table><table><thead><tr><th></th><th>Maxwell cards (CUDA 6 until CUDA 11)</th></tr></thead><tbody><tr><td>compute_50</td><td>Quadro RTX 4000</td></tr><tr><td>compute_52</td><td>Quadro M6000 , GeForce 900, GTX-970, GTX-980, GTX Titan X</td></tr><tr><td>compute_53</td><td>Tegra (Jetson) TX1 / Tegra X1, Drive CX, Drive PX, Jetson Nano</td></tr></tbody></table><table><thead><tr><th></th><th>Pascal (CUDA 8 and later)</th></tr></thead><tbody><tr><td>compute_60</td><td>Quadro GP100, Tesla P100, DGX-1</td></tr><tr><td>compute_61</td><td>GTX 1080, GTX 1070, GTX 1060, GTX 1050, GTX 1030 (GP108), GT 1010 (GP108) Titan Xp, Tesla P40, Tesla P4, Discrete GPU on the NVIDIA Drive PX2</td></tr><tr><td>compute_62</td><td>Integrated GPU on the NVIDIA Drive PX2, Tegra (Jetson) TX2</td></tr></tbody></table><table><thead><tr><th></th><th>Volta (CUDA 9 and later)</th></tr></thead><tbody><tr><td>compute_70</td><td>DGX-1 with Volta, Tesla V100, GTX 1180 (GV104), Titan V, Quadro GV100</td></tr><tr><td>compute_72</td><td>Jetson AGX Xavier, Drive AGX Pegasus, Xavier NX</td></tr></tbody></table><table><thead><tr><th></th><th>Turing (CUDA 10 and later)</th></tr></thead><tbody><tr><td>compute_75</td><td>GTX/RTX Turing – GTX 1660 Ti, RTX 2060, RTX 2070, RTX 2080, Titan RTX, Quadro RTX 4000, Quadro RTX 5000, Quadro RTX 6000, Quadro RTX 8000, Quadro T1000/T2000, Tesla T4</td></tr></tbody></table><table><thead><tr><th></th><th>Ampere (CUDA 11.1 and later)</th></tr></thead><tbody><tr><td>compute_80</td><td>NVIDIA A100 (the name “Tesla” has been dropped – GA100), NVIDIA DGX-A100</td></tr><tr><td>compute_86</td><td>Tesla GA10x cards, RTX Ampere – RTX 3080, GA102 – RTX 3090, RTX A2000, A3000, A4000, A5000, A6000, NVIDIA A40, GA106 – RTX 3060, GA104 – RTX 3070, GA107 – RTX 3050, Quadro A10, Quadro A16, Quadro A40</td></tr></tbody></table><table><thead><tr><th></th><th>Hopper (CUDA 12 <!-- -->[planned]<!-- --> and later)</th></tr></thead><tbody><tr><td>compute_90</td><td>NVIDIA H100 (GH100)</td></tr></tbody></table><blockquote><p>Compute Capability 버전과 CUDA 버전을 헷갈리지 맙시다. CUDA 버전은 소프트웨어 플랫폼입니다.
애플리케이션 개발자는 개발되지 않은 아키텍처를 포함해 여러 세대의 GPU 아키텍처를 실행시키기 위해 CUDA 플랫폼을 사용합니다.
새 버전의 CUDA는 새 GPU 아키텍처에 기본 지원을 포함하는 경우가 많지만, 일반적으로 하드웨어 세대와 독립적인 소프트웨어 기능을 제공합니다.</p></blockquote><p><em>Tesla</em>와 <em>Fermi</em> 아키텍처는 각 CUDA 7.0, CUDA 9.0에서 지원하지 않습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><p><a href="https://89douner.tistory.com/159" target="_blank" rel="noopener noreferrer">NVIDIA GPU 아키텍처</a>
<a href="https://developer.nvidia.com/cuda-gpus" target="_blank" rel="noopener noreferrer">[NVIDIA]Cuda GPUS</a>
<a href="https://developer.nvidia.com/cuda-legacy-gpus" target="_blank" rel="noopener noreferrer">[NVIDIA]Cuda Legacy GPUS</a>
<a href="https://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#compute-capability" target="_blank" rel="noopener noreferrer">[NVIDIA]Compute Capabitity</a>
<a href="https://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#compute-capabilities" target="_blank" rel="noopener noreferrer">[NVIDIA]Compute Capabitities</a></p>]]></content:encoded>
            <category>tech</category>
            <category>hardware</category>
        </item>
        <item>
            <title><![CDATA[Pytorch in M1]]></title>
            <link>https://jwher.github.io/posts/pytorch-in-m1</link>
            <guid>https://jwher.github.io/posts/pytorch-in-m1</guid>
            <pubDate>Sun, 12 Jun 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[M1 맥에서 pytorch GPU 가속 사용해보기]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="m1" src="/assets/images/apple_new-m1-chip-graphic-99b5e5db35c2079b99a595dfaa759768.jpg" width="1960" height="1320" class="img_ev3q">
<em>Pytorch on Mac!</em></p><p>설치와 사용방법만 보시고 싶은 분은 <a href="#%EA%B3%B5%EC%8B%9D-%EB%B0%9C%ED%91%9C">공식 발표</a> 단락을 봐주세요!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pytorch">Pytorch<a href="#pytorch" class="hash-link" aria-label="Direct link to Pytorch" title="Direct link to Pytorch">​</a></h2><blockquote><p>이 글을 읽는 분이라면, pytorch가 뭔지 모르시는 분은 없을 것이라 생각합니다만 🤣</p></blockquote><p>파이토치는 오픈소스 머신 러닝 프레임워크로
제품 개발 연구를 빠르게 하기 위한 방법입니다.</p><p>머신 러닝 특성상 많은 행렬 연산을 하게 됩니다.
python에서는 Numpy가 대표적인 행렬 계산 라이브러리죠.
pytorch에서는 Numpy의 <a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html" target="_blank" rel="noopener noreferrer">ndarrays</a>와 비슷하며 GPU 가속을 사용할 수 있는 <a href="https://pytorch.org/docs/stable/tensors.html" target="_blank" rel="noopener noreferrer">tensor</a>를 제공합니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="gpu-가속">GPU 가속<a href="#gpu-가속" class="hash-link" aria-label="Direct link to GPU 가속" title="Direct link to GPU 가속">​</a></h2><p>그렇다면 왜 GPU 가속을 해야할까요?  </p><p>하드웨어 가속(Hardware Accelation)이란 특정한 소프트웨어 작업을 general-purpose CPU 보다 빠르게 작업하기 위해 만들어 졌습니다.</p><p>GPU가 그렇죠, 근데 GPU에서 그래픽 작업만 하드웨어 가속을 할 수 있는 게 아닙니다.
역으로 General-purpose on GPU, <a href="https://en.wikipedia.org/wiki/General-purpose_computing_on_graphics_processing_units" target="_blank" rel="noopener noreferrer">GPGPU</a> 기술이 있습니다.</p><p>대표적인 GPU hardware 제조사 nvidia는 Compute Unified Device Architecture, <a href="https://developer.nvidia.com/cuda-toolkit" target="_blank" rel="noopener noreferrer">CUDA</a>를 지원합니다.
이 가속은 AI와 딥러닝을 빠르게 해 주었습니다. GPU 가격을 폭등시킬 정도로요!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="m1">M1<a href="#m1" class="hash-link" aria-label="Direct link to M1" title="Direct link to M1">​</a></h2><p>그렇다면 맥북은 Nvidia GPU를 쓸까요?
답은 이젠 <strong>아니요</strong> 입니다.</p><p>애플은 Mac을 Apple silicon으로 전환한다는 계획을 발표합니다.</p><p><a href="https://www.apple.com/newsroom/2020/06/apple-announces-mac-transition-to-apple-silicon/" target="_blank" rel="noopener noreferrer">Apple announces Mac transition to Apple silicon</a><br>
<a href="https://www.apple.com/newsroom/2020/11/apple-unleashes-m1/" target="_blank" rel="noopener noreferrer">Apple unleashes M1</a></p><p>M1은 <a href="https://en.wikipedia.org/wiki/ARM_architecture_family#ARMv8-A" target="_blank" rel="noopener noreferrer">ARMv8.5-A</a> <a href="https://github.com/llvm/llvm-project/blob/main/llvm/include/llvm/Support/AArch64TargetParser.def" target="_blank" rel="noopener noreferrer">명령어 집합</a>을 가진 Advanced RISC Machine(ARM)으로 설계되었습니다.
<a href="https://en.wikipedia.org/wiki/Reduced_instruction_set_computer" target="_blank" rel="noopener noreferrer">RISC</a>, Reduced Instruction Set Computer는 적은 명령어 수를 사용하여 실행속도를 높인 마이크로프로세서 입니다.
고정 길이의 명령어를 사용해 빠르게 해석되고 명령어 파이프라인 대기가 없습니다.</p><p>이는 Intel과 같은 전통적인 하나의 특정한 연산을 위한 복잡한 명령어를 제공하는 <a href="https://en.wikipedia.org/wiki/Complex_instruction_set_computer" target="_blank" rel="noopener noreferrer">CISC</a>, Complex Instruction Set Computer와 비교할 수 있습니다.
CISC에 비해 RISC가 갖는 대표적인 장점으로 <strong>전력 소모가 적다</strong>는 것입니다.
따라서, 저전력으로 작동해야 하는 많은 모바일 기기와 임베디드 프로세서에서 채택하고 있습니다.</p><p><img loading="lazy" alt="apple_m1-chip-cpu-power-chart" src="/assets/images/apple_m1-chip-cpu-power-chart-de711acad5602c633ab8465e13bb63aa.jpg" width="1960" height="1104" class="img_ev3q"></p><p>M1 칩은 GPU와 Neural Engine이 포함되어 있습니다.
그렇다면, Mac에서 GPU 가속을 사용해 머신러닝을 하는건 불가능 할까요?</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="공식-발표">공식 발표<a href="#공식-발표" class="hash-link" aria-label="Direct link to 공식 발표" title="Direct link to 공식 발표">​</a></h2><p><a href="https://pytorch.org/blog/introducing-accelerated-pytorch-training-on-mac/" target="_blank" rel="noopener noreferrer">Official Blog</a>
에 따르면, pytorch 개발팀은 애플 Metal engineering 팀과 함께 Mac GPU 가속 파이토치 학습을 도입했습니다.
이는 apple의 <a href="https://developer.apple.com/videos/play/wwdc2021/10152/" target="_blank" rel="noopener noreferrer">Metal Performance Shaders</a> 를 backend로 해 구현되었습니다.</p><p>이는 CPU로 연산을 할 때 보다 최소 5%에서 20% 정도의 성능 향상을 보인다고 보고되었습니다.</p><p><img loading="lazy" alt="pytorch-m1" src="/assets/images/pytorch-m1-8ceb8f70267b90afaf17138acffe81b8.gif" width="3840" height="2160" class="img_ev3q"></p><ul><li>Testing conducted by Apple in April 2022 using production Mac Studio systems with Apple M1 Ultra, 20-core CPU, 64-core GPU 128GB of RAM, and 2TB SSD. Tested with macOS Monterey 12.3, prerelease PyTorch 1.12, ResNet50 (batch size=128), HuggingFace BERT (batch size=64), and VGG16 (batch size=64). Performance tests are conducted using specific computer systems and reflect the approximate performance of Mac Studio.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="설치해보기">설치해보기<a href="#설치해보기" class="hash-link" aria-label="Direct link to 설치해보기" title="Direct link to 설치해보기">​</a></h2><p>하지만 진짜 그런지 확인해 봐야겠죠?</p><p>설치한 Library 입니다. (Conda나 Venv를 사용하시길 추천합니다)</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>requirements.txt</summary><div><div class="collapsibleContent_i85q"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">certifi==2022.5.18.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">charset-normalizer==2.0.12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cycler==0.11.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fonttools==4.33.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">idna==3.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">joblib==1.1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kiwisolver==1.4.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">matplotlib==3.5.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">numpy==1.23.0rc3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">packaging==21.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Pillow==9.1.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pyparsing==3.0.9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">python-dateutil==2.8.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pytz==2022.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">requests==2.28.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scikit-learn==1.1.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scipy==1.8.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">six==1.16.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sklearn==0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">threadpoolctl==3.1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">torch==1.13.0.dev20220611</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">torchaudio==0.14.0.dev20220603</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">torchvision==0.14.0.dev20220609</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tqdm==4.64.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">typing_extensions==4.2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">urllib3==1.26.9</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><br><blockquote><p><strong>주의</strong></p><p>안타깝게도 12.3+ 이상의 Mac OS 에서 동작합니다. 이전 버전의 OS에서 <code>torch.device("mps")</code> 를 사용하면 다음 오류가 발생합니다.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">The MPS backend is supported on MacOS 12.3+.Current OS version can be queried using `sw_vers`</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br></blockquote><p>설치 전에 OS Version을 확인합시다.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Bad</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jwher@jwher-MacBookPro ~ % sw_vers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ProductName:    macOS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ProductVersion: 12.2.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BuildVersion:   21D62</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Good (12.3+)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jwher@jwher-MacBookPro ~ % sw_vers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ProductName:    macOS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ProductVersion: 12.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BuildVersion:   21F79</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="테스트">테스트<a href="#테스트" class="hash-link" aria-label="Direct link to 테스트" title="Direct link to 테스트">​</a></h2><p>torchvision에서 제공하는 pre-trained weight로 Mnist를 학습해 봅시다.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Full Script</summary><div><div class="collapsibleContent_i85q"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># main thread에서만 실행가능한 함수가 있습니다</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if __name__ == "__main__":</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    import platform, torch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(platform.platform())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CPU= False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    device = "cpu" if CPU else torch.device("mps")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print("Device is : {}".format(device))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    class CFG:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lr = 0.001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        train_batch_size = 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        total_epochs = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        num_classes = 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        input_shape = (224,224)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Important to fix random seed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    torch.manual_seed(1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    np.random.seed(1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    from torch.utils.data import TensorDataset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    from torch.utils.data import DataLoader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    import torchvision</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    from torchvision import datasets, transforms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    from torchvision.transforms import ToTensor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image_path = "./data/"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mnist_dataset = torchvision.datasets.MNIST(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image_path, 'train', download=False,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        transform=transforms.Compose(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [transforms.Resize(CFG.input_shape), transforms.Grayscale(3),ToTensor()]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    trainset_1 = torch.utils.data.Subset(mnist_dataset, list(range(1000)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mnist_loader  = DataLoader(trainset_1,batch_size=CFG.train_batch_size,shuffle=True,num_workers=4)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x_batch, y_batch = (next(iter(mnist_loader)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    import torchvision.models as models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    import torch.nn as nn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    import time, numpy as np</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    from tqdm import tqdm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    class MODELS:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        vgg16_model = models.vgg16(pretrained=True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        alexnet = models.alexnet(pretrained=True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        resnet_18 = models.resnet18(pretrained=True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mobilenet_v2 = models.mobilenet_v2(pretrained=True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        efficientnet_b0 = models.efficientnet_b0(pretrained=True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        squeezenet = models.squeezenet1_0(pretrained=True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        vgg16_model.classifier[6] = nn.Linear(vgg16_model.classifier[6].in_features,CFG.num_classes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        alexnet.classifier[6] = nn.Linear(alexnet.classifier[6].in_features,CFG.num_classes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        resnet_18.fc = nn.Linear(resnet_18.fc.in_features,CFG.num_classes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mobilenet_v2.classifier[1] = nn.Linear(mobilenet_v2.classifier[1].in_features,CFG.num_classes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        efficientnet_b0.classifier[1] = nn.Linear(efficientnet_b0.classifier[1].in_features,CFG.num_classes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        squeezenet.classifier[1] = nn.Linear(squeezenet.classifier[1].in_channels,CFG.num_classes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def train(model_name,model,train_dl,n_epochs=CFG.total_epochs):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        '''</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        call train_one_epoch:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        we will take average time taken to train per epoch for a max of 5 epochs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        '''</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        loss_fn = nn.CrossEntropyLoss()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        optimizer = torch.optim.Adam(model.parameters(),lr=CFG.lr)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        average_time = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for epoch in range(n_epochs):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            start_time = time.time()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            print(f"Epoch {epoch} --&gt;")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pbar = tqdm(enumerate(train_dl), total=len(train_dl), desc='Train : '+model_name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for step, (x_batch, y_batch) in pbar:   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                x_batch = x_batch.to(device)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                y_batch = y_batch.to(device)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                pred = model(x_batch)[:,0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                loss = loss_fn(pred,y_batch.float())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                loss.backward()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                optimizer.step()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                optimizer.zero_grad()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            end_time = time.time() - start_time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            average_time.append(end_time)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return np.mean(average_time)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    model_dict = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        'vgg16_model' : MODELS.vgg16_model, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        'alexnet' : MODELS.alexnet, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        'resnet_18' : MODELS.resnet_18, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        'mobilenet_v2' : MODELS.mobilenet_v2, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        'efficientnet_b0' : MODELS.efficientnet_b0, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # 'squeezenet' : MODELS.squeezenet, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    time_calc = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for model_name,model in model_dict.items():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        print("Model name is : {}".format(model_name))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        print("-----------------------------------------")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        model_epoch_avg_time = train(model_name,model.to(device),mnist_loader)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        time_calc[model_name] = model_epoch_avg_time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print("Time result with device={}".format(device))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for key, value in time_calc.items():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        print(f"{key}: {value}")</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cpu-결과">CPU 결과<a href="#cpu-결과" class="hash-link" aria-label="Direct link to CPU 결과" title="Direct link to CPU 결과">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Time result with device=cpu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vgg16_model: 188.27877402305603</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alexnet: 35.99792671203613</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resnet_18: 42.05255889892578</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mobilenet_v2: 223.11423015594482</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">efficientnet_b0: 256.45679998397827</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mps-결과">MPS 결과<a href="#mps-결과" class="hash-link" aria-label="Direct link to MPS 결과" title="Direct link to MPS 결과">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Time result with device=mps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vgg16_model: 36.275963306427</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alexnet: 10.713558197021484</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resnet_18: 18.608237743377686</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mobilenet_v2: 45.10530471801758</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">efficientnet_b0: 75.51856923103333</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>속도 개선률을 계산해보면,</p><table><thead><tr><th>Model</th><th>Speed Up</th></tr></thead><tbody><tr><td>vgg16</td><td>519.02%</td></tr><tr><td>alexnet</td><td>336.00%</td></tr><tr><td>resnet18</td><td>224.99%</td></tr><tr><td>mobilenet v2</td><td>494.65%</td></tr><tr><td>efficientnet</td><td>339.59%</td></tr></tbody></table><ul><li>2022년 6월 Mac Book Pro M1 Max, 10-core CPU, 32-core GPU 64GB of RAM, 1TB SSD를 사용했습니다. macOS Monterey 12.4, prerelease PyTorch 1.13 환경, batch size=4로 테스트 했습니다.성능 테스트는 특정 컴퓨터 시스템으로 수행되었고 Mac Book Pro의 대략적인 성능을 반영합니다.</li></ul><p><strong>놀랍습니다!</strong></p><p>공식 발표보다 속도 개선이 굉장히 높습니다. 이는 배치 크기가 작아서 생긴 결과 같습니다. 추후에 64 배치로 다시 테스트하여 비교해보겠습니다.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>64 배치로 테스트 해봤는데...</summary><div><div class="collapsibleContent_i85q"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 64 batch CPU</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Time result with device=cpu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vgg16_model: 217.3836727142334</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alexnet: 18.045451164245605</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resnet_18: 63.90257787704468</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mobilenet_v2: 436.72195410728455</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">efficientnet_b0: 497.7381250858307</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 64 batch MPS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Time result with device=mps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vgg16_model: 35.657764196395874</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alexnet: 4.972366094589233</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resnet_18: 10.434533834457397</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mobilenet_v2: 17.130388975143433</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">efficientnet_b0: 25.93315291404724</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>어떤 모델에선 성능이 더 좋습니다..?! 단순히 pytorch 공식 벤치마크보다 성능이 뛰어난걸까요,
아니면 실험이 잘못된 걸까요. 이유를 아시는 분이 나타나시길 🙏🏻</p></div></div></details><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><p><a href="https://abhishekbose550.medium.com/pytorch-training-on-m1-air-gpu-c534558acf1e" target="_blank" rel="noopener noreferrer">Pytorch training on m1 air gpu</a></p>]]></content:encoded>
            <category>tech</category>
        </item>
        <item>
            <title><![CDATA[Agile]]></title>
            <link>https://jwher.github.io/posts/agile</link>
            <guid>https://jwher.github.io/posts/agile</guid>
            <pubDate>Tue, 07 Jun 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[애자일]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="agile" src="/assets/images/agile-c701035656bf728b4f8cec2e621c5e62.png" width="1200" height="825" class="img_ev3q">
<em>애자일이란 무엇인가?</em></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="애자일이란">애자일이란?<a href="#애자일이란" class="hash-link" aria-label="Direct link to 애자일이란?" title="Direct link to 애자일이란?">​</a></h2><p>소프트웨어 공학 수업에서도, 회사에서도 애자일은 참 핫합니다.
무려 20년이 넘게.. 요</p><p>애자일이 등장한 배경은 <strong>소프트웨어 위기</strong>와 관련이 깊습니다.
대표적인 예로</p><ul><li>프로젝트 일정이 지연되었다.</li><li>소프트웨어 품질이 낮았다.</li><li>소프트웨어가 요구 사항을 만족시키지 못하는 일이 빈번히 일어났다.</li><li>프로젝트는 관리 불가능했고 코드 관리는 힘들었다.</li></ul><p>이런 문제 속에서 애자일은 <strong>제한된 시간과 비용 안에서 정보는 불완전하고 예측은 불가능하다</strong>는 전제를 가지고 등장합니다.</p><p><del>쉽게 말해서 고객이 뭘 원하는지 고객도 모릅니다!</del></p><p>하지만 애자일이 무엇인지 아직도 실체가 명확하지 않습니다.
함꼐 애자일 선언(menifesto)를 볼까요?</p><ul><li>공정과 도구보다 개인과 상호작용을</li><li>포괄적인 문서보다 작동하는 소프트웨어를</li><li>계약 협상보다 고객과의 협력을</li><li>계획을 따르기보다 변화에 대응하기를</li></ul><p>흠, 아직도 모호하네요:(
실제 사례를 살펴봅시다.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>TL;DR</summary><div><div class="collapsibleContent_i85q"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Manifesto for Agile Software Development</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">We are uncovering better ways of developing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">software by doing it and helping others do it.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Through this work we have come to value:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Individuals and interactions over processes and tools</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Working software over comprehensive documentation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Customer collaboration over contract negotiation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Responding to change over following a plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">That is, while there is value in the items on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">the right, we value the items on the left more.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Kent Beck</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Mike Beedle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Arie van Bennekum</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alistair Cockburn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ward Cunningham</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Martin Fowler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">James Grenning</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Jim Highsmith</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Andrew Hunt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ron Jeffries</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Jon Kern</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Brian Marick</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Robert C. Martin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Steve Mellor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ken Schwaber</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Jeff Sutherland</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Dave Thomas</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">© 2001, the above authors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">this declaration may be freely copied in any form,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">but only in its entirety through this notice.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://agilemanifesto.org/" target="_blank" rel="noopener noreferrer">Agile menifesto</a></p></div></div></details><h2 class="anchor anchorWithStickyNavbar_LWe7" id="방법론으로써-애자일">방법론으로써 애자일<a href="#방법론으로써-애자일" class="hash-link" aria-label="Direct link to 방법론으로써 애자일" title="Direct link to 방법론으로써 애자일">​</a></h2><p>애자일의 실현은 팀과 조직에 따라 다른데요, 대표적으로 다음 방식으로 이루어 집니다.</p><ul><li>익스트림 프로그래밍(Extreme Programming, XP)</li></ul><p>고객과 함께 2주 정도의 반복개발을 하고, 테스트우선 개발(TDD)을 특징으로 합니다.
XP는 위와 같이 명시적인 기술과 방법이 있는데요, 그 때문인지 애자일 개발 프로세스의 대표적인 예입니다.</p><ul><li>스크럼</li></ul><p>30일마다 동작 가능한 제품을 제공하는 스프린트(Sprint)를 중심으로 하고 있습니다.
동작 가능한 제품을 만들기 위해 많은 회의가 필요해 매일 정해진 시간에 정해진 장소에서 개발을 하는 팀에게 적합합니다.</p><ul><li>Feature-Driven Development</li></ul><p>feature마다 2주정도의 반복 개발을 수행합니다.
Peter Coad가 제창하는 방법론으로써, UML을 이용한 설계 기법과 밀접한 관련을 가집니다.</p><ul><li>익스트림 모델링</li></ul><p>익스트림 모델링은 UML을 이용한 모델링 중심 방법론입니다.
다만, 여타 모델링 방법들과는 달리, 언제나 실행할 수 있고 검증할 수 있는 모델을 작성하는 공정을 반복해서 최종적으로는 모델로부터 자동적으로 제품을 생성합니다.</p><p>간단하게 칸반과 번인차트를 통한 개발도 애자일 기법이라 볼 수 있습니다.</p><p><del>사실 이 외에도 많은 방법이 있지만, 직접 경험? 해본 방법만 기록했습니다.</del></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="문화로써-애자일">문화로써 애자일<a href="#문화로써-애자일" class="hash-link" aria-label="Direct link to 문화로써 애자일" title="Direct link to 문화로써 애자일">​</a></h2><p>애자일은 다양한 덕목을 담고 있습니다.
대표적으로 XP는 다음 가치를 따릅니다.</p><ul><li>Communication</li><li>Simplicity</li><li>Feedback</li><li>Courage</li><li>Respect</li></ul><p>이런 문화를 가진 개발 그룹을 애자일 방법론을 사용한다고 할 수 있습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="마케팅으로써-애자일">마케팅으로써 애자일<a href="#마케팅으로써-애자일" class="hash-link" aria-label="Direct link to 마케팅으로써 애자일" title="Direct link to 마케팅으로써 애자일">​</a></h2><p>많은 한국 기업은 애자일 방법 도입을 실패했다고 봅니다.
하지만 제품과 고객 중심이라는 애자일 덕목은 마케팅에서 살아남아 유지되고 있습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="한국에선-왜-실패했을까">한국에선 왜 실패했을까?<a href="#한국에선-왜-실패했을까" class="hash-link" aria-label="Direct link to 한국에선 왜 실패했을까?" title="Direct link to 한국에선 왜 실패했을까?">​</a></h2><p><img loading="lazy" alt="agile-team" src="/assets/images/agile-team-da55892c5c570280f1d652d584294628.jpeg" width="960" height="528" class="img_ev3q"></p><p>사실 본 글을 쓰게 된 이유는 이 단락 때문인데요,<br>
<!-- -->애자일 방법론이 한국에서 실패한 대표적인 이유입니다.</p><ul><li>계획 세우기에 과도한 시간을 투입하지 않는다 → 팀내에서 같은 비전을 공유하는가?</li><li>지방분권식(distributed) → 무책임</li><li>모든 정보를 구성원 모두와 공유한다 → 수직적인 대규모 조직</li><li>개개인이 아닌 팀으로 움직인다 → 다른 환경에서 팀으로 모여 생긴 신뢰 부족</li><li>디테일한 모습에 대한 정의는 없다 → 개인의 역량에 의존</li></ul><p>너무 부정적이였나요?
하지만 2022년 현재 한국도 다양한 팀단위 IT 회사, 개발그룹이 생겨나며
애자일 방법론으로 가는 과도기에 있다고 생각합니다:)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://ko.wikipedia.org/wiki/%EC%95%A0%EC%9E%90%EC%9D%BC_%EC%86%8C%ED%94%84%ED%8A%B8%EC%9B%A8%EC%96%B4_%EA%B0%9C%EB%B0%9C" target="_blank" rel="noopener noreferrer">[위키]애자일 소프트웨어 개발</a><br>
<a href="https://ko.wikipedia.org/wiki/%EC%86%8C%ED%94%84%ED%8A%B8%EC%9B%A8%EC%96%B4_%EC%9C%84%EA%B8%B0" target="_blank" rel="noopener noreferrer">[위키]소프트웨어 위기</a></p>]]></content:encoded>
            <category>tech</category>
        </item>
        <item>
            <title><![CDATA[First post with docusaurus]]></title>
            <link>https://jwher.github.io/posts/first-post-with-docusaurus</link>
            <guid>https://jwher.github.io/posts/first-post-with-docusaurus</guid>
            <pubDate>Mon, 30 May 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Docusaurus Plushie]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="Docusaurus Plushie" src="/assets/images/docusaurus-plushie-banner-a60f7593abca1e3eef26a9afa244e4fb.jpeg" width="1500" height="500" class="img_ev3q"></p><p><em>다큐멘테이션의 공룡</em></p><p>유지보수가 어려웠던 블로그가 다큐사우루스로 돌아왔습니다!</p><p>다큐사우루스는 쉬운 문서화를 위해 페이스북에서 만든 프레임워크 입니다.</p><p>페이스북에서 만든 만큼, react 기반으로 작성되었습니다.</p><p>더 자세한 특징은 아래 링크를 참고해 주세요!</p><p><a href="https://docusaurus.io/docs/blog" target="_blank" rel="noopener noreferrer">Docusaurus blogging features</a> are powered by the <a href="https://docusaurus.io/docs/api/plugins/@docusaurus/plugin-content-blog" target="_blank" rel="noopener noreferrer">blog plugin</a>.</p><p>많은 글들을 업데이트하고 마이그레이션 중에 있습니다. 빨리 정상화 되도록 노력하겠습니다!</p>]]></content:encoded>
            <category>blog</category>
            <category>docusaurus</category>
        </item>
        <item>
            <title><![CDATA[Ensemble Methods]]></title>
            <link>https://jwher.github.io/posts/ensemble-methods</link>
            <guid>https://jwher.github.io/posts/ensemble-methods</guid>
            <pubDate>Sun, 13 Feb 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Ensemble Methods]]></description>
            <content:encoded><![CDATA[<p><em>Ensemble Methods</em></p><h1>목차</h1><ul><li><a href="#deep-ensemble">Deep Ensemble</a></li><li><a href="#monte-carlo-drop-out">Monte Carlo Drop out</a></li><li><a href="#batch-ensemble">Batch Ensemble</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="deep-ensemble">Deep Ensemble<a href="#deep-ensemble" class="hash-link" aria-label="Direct link to Deep Ensemble" title="Direct link to Deep Ensemble">​</a></h2><p>동일한 모델을 여럿 학습
장점: 성능이 거의 보장됨
단점: N배의 학습, 추론 비용</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="monte-carlo-drop-out">Monte Carlo Drop out<a href="#monte-carlo-drop-out" class="hash-link" aria-label="Direct link to Monte Carlo Drop out" title="Direct link to Monte Carlo Drop out">​</a></h2><p>test시 stochastic한 drop out을 사용해 ensemble
장점: 1번의 학습
단점: N배의 추론 비용</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="batch-ensemble">Batch Ensemble<a href="#batch-ensemble" class="hash-link" aria-label="Direct link to Batch Ensemble" title="Direct link to Batch Ensemble">​</a></h2><p>ensemble member간 대부분의 weights를 공유합니다.
여기에 rank-1 matrix로 independency를 강화합니다.
장점: Monte carlo drop out 보다 좋은 성능
단점: N배의 추론 비용</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p>2021 MIPAL</p>]]></content:encoded>
            <category>math</category>
            <category>ml</category>
        </item>
        <item>
            <title><![CDATA[Uncertainty Estimation]]></title>
            <link>https://jwher.github.io/posts/uncertainty-estimation</link>
            <guid>https://jwher.github.io/posts/uncertainty-estimation</guid>
            <pubDate>Sun, 13 Feb 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Uncertainty Estimation]]></description>
            <content:encoded><![CDATA[<p><em>Uncertainty Estimation</em>  </p><h1>목차</h1><ul><li><a href="#expected-calibration-error">Expected Calibration Error</a></li><li>목차에 링크를 걸면 좋다</li><li>반드시 소문자</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="expected-calibration-error">Expected Calibration Error<a href="#expected-calibration-error" class="hash-link" aria-label="Direct link to Expected Calibration Error" title="Direct link to Expected Calibration Error">​</a></h2><h4 class="anchor anchorWithStickyNavbar_LWe7" id="모델이-예측한-결과를-얼마나-신뢰할-수-있는가">모델이 예측한 결과를 얼마나 신뢰할 수 있는가?<a href="#모델이-예측한-결과를-얼마나-신뢰할-수-있는가" class="hash-link" aria-label="Direct link to 모델이 예측한 결과를 얼마나 신뢰할 수 있는가?" title="Direct link to 모델이 예측한 결과를 얼마나 신뢰할 수 있는가?">​</a></h4><p>학습에 사용하지 않은(모르는) 이미지를 모델에 추론할 때, 신뢰도는 낮아야 합니다.
하지만, Expected Calibration Error(ECE)를 계산했을 때, 신뢰도가 높은 괴리가 생기기도 합니다.</p><p>예상되는 정확도와 측정된 신뢰도를 binning 한 히스토그램<br>
<!-- -->$ ECE=\sum<em>{m=1}^{M} {B</em>{m} \over n} |acc(B<em>{m}) - conf(B</em>{m})|$</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="구간화binning">구간화(Binning)<a href="#구간화binning" class="hash-link" aria-label="Direct link to 구간화(Binning)" title="Direct link to 구간화(Binning)">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="정확도와-신뢰도">정확도와 신뢰도<a href="#정확도와-신뢰도" class="hash-link" aria-label="Direct link to 정확도와 신뢰도" title="Direct link to 정확도와 신뢰도">​</a></h2><p>분류 모델의 정확도는  </p><blockquote><p>accuracy = correct predictions / total predictions * 100</p></blockquote><p>신뢰구간은 하나의 오차값만 아니라 더 많은 모델값을 기술합니다.</p><ul><li>범위: 모델에서 최소와 최대 한계</li><li>확률: 이 범위에 포함될 확률</li></ul><blockquote><p>error ± z <em> sqrt( error </em> (1-error) / n )</p></blockquote><p>z값은 다음과 같다.</p><ul><li>1.64 (90%)</li><li>1.96 (95%)</li><li>2.33 (98%)</li><li>2.58 (99%)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="정확도-신뢰도간-괴리의-발생-이유">정확도-신뢰도간 괴리의 발생 이유<a href="#정확도-신뢰도간-괴리의-발생-이유" class="hash-link" aria-label="Direct link to 정확도-신뢰도간 괴리의 발생 이유" title="Direct link to 정확도-신뢰도간 괴리의 발생 이유">​</a></h2><p>Classification(분류)의 loss function으로 주로 사용되는
Cross-entropy loss가 overfit을 만드는 특징이 있습니다. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="negative-log-likelihood">Negative Log Likelihood<a href="#negative-log-likelihood" class="hash-link" aria-label="Direct link to Negative Log Likelihood" title="Direct link to Negative Log Likelihood">​</a></h2><p>NLL = cross-entropy loss
어떤 확률사건 p의 정보량
$ I(p) = log({1 \over p}) = -log(p) $</p><p>전체 집합이 가지는 엔트로피
$ H = \sum(p<em>I(p)) = \sum(-p</em>log(p)) $</p><p>Cross-Entropy는 실제 분포 q에 대해 모델링에 대한 분포 p를 통해 예측한 결과입니다.
$ H(p,q) = - \sum p(x_i)log(q(x_i)) $</p><p>이는 KL Divergence로도 표현할 수 있습니다.
$ H(p,q) = H(p) + D_{KL}(p||q) $</p><p><a href="https://jwher.github.io/information-theory" target="_blank" rel="noopener noreferrer">정보이론</a></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p>해결하는 방법은 다음과 같습니다</p><ul><li>Mixture Gaussian Ensemble</li><li><a href="https://jwher.github.io/ensemble-methods" target="_blank" rel="noopener noreferrer">Model Ensemble</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://arxiv.org/pdf/1706.04599.pdf" target="_blank" rel="noopener noreferrer">On Calibration of Modern Neural Networks</a>
<a href="https://en.wikipedia.org/wiki/Binomial_proportion_confidence_interval" target="_blank" rel="noopener noreferrer">[wiki]Binomial proportion confidence interval</a>
<a href="https://ko.wikipedia.org/wiki/%ED%97%88%EC%9A%A9_%EC%98%A4%EC%B0%A8" target="_blank" rel="noopener noreferrer">[wiki]허용 오차</a></p>]]></content:encoded>
            <category>math</category>
            <category>ml</category>
        </item>
        <item>
            <title><![CDATA[Intelligent Computer Vision 1]]></title>
            <link>https://jwher.github.io/posts/Intelligent-Computer-Vision-1</link>
            <guid>https://jwher.github.io/posts/Intelligent-Computer-Vision-1</guid>
            <pubDate>Mon, 18 Oct 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Intelligent Computer Vision 1(개요)]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="computer-vision" src="/assets/images/computer-vision-dd8217c547b9b85b115a058aa9924df8.svg" width="1000" height="1080" class="img_ev3q">
<em>Intelligent Computer Vision 1(개요)</em>  </p><h1>목차</h1><ul><li><a href="#%EC%88%98%EC%97%85%EA%B5%90%EC%9E%AC">수업교재</a></li><li><a href="#computer-vision">Computer Vision</a></li><li><a href="#image-formation">Image formation</a></li><li><a href="#degital-image-formation">Digital Image Formation</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="수업교재">수업교재<a href="#수업교재" class="hash-link" aria-label="Direct link to 수업교재" title="Direct link to 수업교재">​</a></h2><p><em>Class Materials</em></p><ul><li>Multiple view geometry in computer vision (2nd)</li><li><a href="http://szeliski.org/Book/drafts/SzeliskiBook_20100903_draft.pdf" target="_blank" rel="noopener noreferrer">Computer Vision: Algorithms and Applications (2010)</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="computer-vision">Computer Vision<a href="#computer-vision" class="hash-link" aria-label="Direct link to Computer Vision" title="Direct link to Computer Vision">​</a></h2><p><em>Szeliski p.1~28</em></p><p>A theme in the development of this field has been to
<strong>duplicate the abilites of human vision</strong> by electronically
perceiving and understanding an image.</p><p>Goal of computer vision<br>
<strong>=&gt; Write computer programs that can interpret images.</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="can-computers-match-human-vision">Can computers match human vision<a href="#can-computers-match-human-vision" class="hash-link" aria-label="Direct link to Can computers match human vision" title="Direct link to Can computers match human vision">​</a></h3><p>=&gt; Mostly no</p><ul><li>humans are much better at "hard" things</li><li>computers can be better at "easy" things</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="current-state-of-the-art-application-area">Current state of the art (Application Area)<a href="#current-state-of-the-art-application-area" class="hash-link" aria-label="Direct link to Current state of the art (Application Area)" title="Direct link to Current state of the art (Application Area)">​</a></h3><p><em>Univ. Washington cse455 2012</em></p><ul><li>Earth Viewers (3D modeling)</li><li>Motion Capture</li><li>Optical Character Recognition (OCR)</li><li>Face detection</li><li>Smile detection</li><li>Object recognition</li><li>Face recognition</li><li>Motion capture</li><li>Sports</li><li>Smart cars</li><li>Self-driving cars</li><li>Robotics</li><li>Vision in space</li><li>Medical imaging</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="image-formation">Image Formation<a href="#image-formation" class="hash-link" aria-label="Direct link to Image Formation" title="Direct link to Image Formation">​</a></h2><p>E(x, y, z, lambda)
※ 좌표 + 빛의 파장</p><p>Camera(x, y, z, lambda) = E * R</p><p><em>E: Incident light
</em>R: Reflectivity function</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="projection">Projection<a href="#projection" class="hash-link" aria-label="Direct link to Projection" title="Direct link to Projection">​</a></h3><p>Camera_projection(x', y', lambda) = Projection(Camera)</p><ul><li><p>Perspective: Pinhole<br>
<!-- -->=&gt;  Pinhole effect<br>
<!-- -->big: blurring<br>
<!-- -->small: diffraction</p></li><li><p>Orthogonal</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sensitivity">Sensitivity<a href="#sensitivity" class="hash-link" aria-label="Direct link to Sensitivity" title="Direct link to Sensitivity">​</a></h3><p>V_2(lambda) - lambda</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h3><p>The Image function f_c(x', y') (C = R, G, B) is formed as:<br>
<!-- -->f_c(x', y') = Int{ Camera_projection * V_c(lambda) } delta lambda</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="degital-image-formation">Degital Image Formation<a href="#degital-image-formation" class="hash-link" aria-label="Direct link to Degital Image Formation" title="Direct link to Degital Image Formation">​</a></h2><p>We have to discretize:</p><ol><li>x', y' =&gt; x'_i, y'_j =&gt; Sampling</li><li>f_c(x'_i, y'_j) ∈ Range =&gt; Quantization</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="quantization-to-p-levels">Quantization to P levels<a href="#quantization-to-p-levels" class="hash-link" aria-label="Direct link to Quantization to P levels" title="Direct link to Quantization to P levels">​</a></h3><p>Typically P = 2^8 = 256 (8bit quantization)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="color-depth">Color Depth<a href="#color-depth" class="hash-link" aria-label="Direct link to Color Depth" title="Direct link to Color Depth">​</a></h3><ul><li>Monochrome (1bit)</li><li>Gray-scale (8bits)</li><li>Color (8 or 16 bits)</li><li>Ture color (24 or 32 bits)<br>RGB (24 bits)<br>RGB + Alpha (32bits)</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="color-space">Color Space<a href="#color-space" class="hash-link" aria-label="Direct link to Color Space" title="Direct link to Color Space">​</a></h3><ul><li>Humans (Hue Saturation Lightness/Brightness, HSL or HSB)</li><li>CRT monitors (RGB) *additive</li><li>Printers (Cyan Magenta Yellow Black, CMYK) *subtractive</li><li>Compression (Luminance and Chrominance, YIQ YUV YChCr)<br>Y = 0.3R + 0.59G + 0.11B<br>U = (B-Y) <em> 0.493<br>V = (R-Y) </em> 0.877</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="visible-spectrum">Visible Spectrum<a href="#visible-spectrum" class="hash-link" aria-label="Direct link to Visible Spectrum" title="Direct link to Visible Spectrum">​</a></h3><p>UV(400nm) ~ IR (700nm)</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p>   == Classical Vision ==</p><ol><li>Overview</li><li>Filtering (Edge detection)</li><li>Keypoint detection (Corner detection, SIFT ..)</li><li>Hough transform<br>== Multiple View Geometry ==</li><li>2D geometry</li><li>3D geometry</li><li>Camera Models and Calibration<br>== Deep Learnings ==   </li><li>Image Classification (BoW)</li><li>Object detection (VJ)</li><li>Image Segmentation (Graph-cuts)</li><li>Optical flow (Lukas-Kanade)</li><li>Pose estimation (DPM)</li><li>3D Point cloud</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p>2021 MIPAL, Gwak Nojun</p>]]></content:encoded>
            <category>lecture</category>
            <category>ml</category>
        </item>
        <item>
            <title><![CDATA[쿠버네티스 아키텍처]]></title>
            <link>https://jwher.github.io/posts/kubernetes-architecture</link>
            <guid>https://jwher.github.io/posts/kubernetes-architecture</guid>
            <pubDate>Wed, 01 Sep 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Kubernetes Architecture]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="kubernetes" src="/assets/images/kubernetes-f91022b1deed067a9393dd3c42381ab7.svg" width="723" height="702" class="img_ev3q">
<em>쿠버네티스 아키텍처</em><br>
<em>이 글은 쿠버네티스의 창시자 중 한명인 브렌던 번스의 매니징 쿠버네티스를 참고해 작성했습니다.</em></p><h1>기본 개념</h1><p>이 단락에서는 쿠버네티스의 기본 구성 요소인 노드(node), 파드(pod), 서비스(Service), 퍼시스턴트 볼륨(Persistent Volume), 컨피그맵(ConfigMap), 시크릿(Secret)을 설명합니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="노드">노드<a href="#노드" class="hash-link" aria-label="Direct link to 노드" title="Direct link to 노드">​</a></h2><p><em>Node</em><br>
<!-- -->Docker 데몬이 동작하는 호스트로 가상(virtual) 또는 물리(physical) 머신을 말합니다.
쿠버네티스는 하나 이상의 마스터와 워커(슬레이브, 미니언) 노드로 구성됩니다.
이중 클러스터 제어용 프로그램이 동작(API)하는 노드가 마스터 노드입니다.</p><p>노드 taint를 제거해 마스터/워커(미니언)을 겸용 가능하나 일반적으로 그렇게 사용하지 않습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="파드">파드<a href="#파드" class="hash-link" aria-label="Direct link to 파드" title="Direct link to 파드">​</a></h2><p><em>pod는 고래 떼를 말합니다</em><br>
<!-- -->파드는 쿠버네티스의 가장 작은 단위이자 컨테이너의 추성으로 <strong>하나</strong> 또는 긴밀하게 연계되는 <strong>컨테이너 세트</strong>를 생성할 수 있습니다.
파드는 각각 하나의 사설 ip를 할당받고, 같은 파드 안의 컨테이너는 루프백 네트워크(localhost)로 통신할 수 있습니다.
또한 프로세스, IPC와 네임스페이스를 공유하고 있어 공유 메모리나 시그널링 툴을 사용해
파드의 여러 프로세스를 제어할 수 있습니다.</p><p>파드는 하나의 컨테이너일 수도, 한 시스템일 수도 있어 헷갈릴 수 있습니다
(일반적으로 하나의 애플리케이션만 사용합니다).
쿠버네티스에서 파드는 스케일링과 복제의 단위입니다.
파드는 디플로이먼트에 기술해 상태와 레플리카를 관리할 수 있습니다.</p><p>주의해야할 점은, 파드는 단명(ephemeral) 하는 특징을 지녔다는 것입니다.
이는 노드에 문제가 생기거나, 자원이 모자라면 쿠버네티스가 파드를 다른 곳에 할당할 수 있다는 뜻입니다.
이때 사용하던 데이터와 할당된 사설 IP가 바뀌고 파드간 통신에 문제가 생길 수 있습니다.
다음 단락에서 이 문제를 어떻게 해결하는지 확인해 봅시다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="서비스">서비스<a href="#서비스" class="hash-link" aria-label="Direct link to 서비스" title="Direct link to 서비스">​</a></h2><p><em>Service</em><br>
<!-- -->서비스는 각 파드에 고정 IP 주소를 붙일 수 있는 요소입니다.
파드와 서비스의 생명주기는 연결되지 않기때문에, 파드의 변경에도 서비스는 고정된 주소를 제공합니다.
정확히는 <a href="#%EB%A0%88%ED%94%8C%EB%A6%AC%EC%B9%B4%EC%85%8B"><em>레플리카셋</em></a>으로 생성된 로드밸런서의 엔드포인트를 제공합니다.</p><p>또한, 서비스는 TCP/UDP에 없는 다음 세가지를 제공합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="자체-ip-주소">자체 IP 주소<a href="#자체-ip-주소" class="hash-link" aria-label="Direct link to 자체 IP 주소" title="Direct link to 자체 IP 주소">​</a></h3><p>가상 IP 주소로 네트워크 인터페이스와 일치하지는 않습니다.
대신 로드 밸런싱될 IP 주소로 네트워크 패브릭에 프로그래밍 됩니다.
네트워크 패브릭은 레플리카셋에 따라 동적으로 재프로그래밍 됩니다.
즉, Service IP 주소 연결은 신뢰할 수 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="쿠버네티스-클러스터-dns">쿠버네티스 클러스터 DNS<a href="#쿠버네티스-클러스터-dns" class="hash-link" aria-label="Direct link to 쿠버네티스 클러스터 DNS" title="Direct link to 쿠버네티스 클러스터 DNS">​</a></h3><p>클러스터의 다른 컨테이너가 <code>name.namespace.svc</code>로 DNS를 이용할 수 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="로드-밸런싱-규칙">로드 밸런싱 규칙<a href="#로드-밸런싱-규칙" class="hash-link" aria-label="Direct link to 로드 밸런싱 규칙" title="Direct link to 로드 밸런싱 규칙">​</a></h3><p>규칙을 정하지 않으면 라운드 로빈이나 대상 IP 주소 튜플에 기반해 결정합니다.</p><p><img loading="lazy" alt="overview" src="/assets/images/overview-af5bdb4d3f81aad895422e6e8818e3fa.png" width="896" height="856" class="img_ev3q">
<em>쿠버네티스 구성 요소 묘사</em>  </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="스토리지">스토리지<a href="#스토리지" class="hash-link" aria-label="Direct link to 스토리지" title="Direct link to 스토리지">​</a></h2><p>초기 볼륨 인터페이스는 코드를 작성해 확장이 가능했습니다.
이제는 쿠버네티스 외부에서 개발해 컨테이너 스토리지 인터페이스(CSI)를 사용합니다.
이는 이식성과 자동 볼륨 생성을 모두 가능하게 합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="퍼시스턴트-볼륨">퍼시스턴트 볼륨<a href="#퍼시스턴트-볼륨" class="hash-link" aria-label="Direct link to 퍼시스턴트 볼륨" title="Direct link to 퍼시스턴트 볼륨">​</a></h3><p><em>persistent volume</em><br>
<!-- -->구체적인 제공자를 지정하지 않고 일반적인 스토리지를 요청하는 경우,
파드 정의가 필요합니다. 이를 위해 pv와 pvc(persistent volume claim)을 제공합니다.</p><p>스토리지는 같은 환경(local) 뿐만 아니라, 클러스터 밖의 외부 스토리지도 사용할 수 있습니다.
주의할점은, 쿠버네티스는 이들을 관리하지 않는다는 것입니다. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="컨피그맵"><a href="/posts/k8s-tip-configmap">컨피그맵</a><a href="#컨피그맵" class="hash-link" aria-label="Direct link to 컨피그맵" title="Direct link to 컨피그맵">​</a></h3><p><em>ConfigMap</em><br>
<!-- -->컨피그맵은 외부 설정(External Configuration)의 모음을 나타냅니다.
파드에 컨피그맵 기반 볼륨을 추가하면 실행중인 컨테이너의 지정된 디렉터리에 나타납니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="시크릿">시크릿<a href="#시크릿" class="hash-link" aria-label="Direct link to 시크릿" title="Direct link to 시크릿">​</a></h3><p><em>Secret</em><br>
<!-- -->시크릿은 볼륨 컨텍스트 안에서 컨피그맵과 동일합니다.
데이터베이스 암호 및 인증서와 같은 보안 데이터를 저장합니다.</p><hr><br><br><br><h1>고급 개념</h1><p>이 단락에서는 인그레스(Ingress), 레플리카셋(Replicaset), 디플로이먼트(Deployment), 스테이트풀셋(StatefulSet)을 설명합니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="인그레스">인그레스<a href="#인그레스" class="hash-link" aria-label="Direct link to 인그레스" title="Direct link to 인그레스">​</a></h2><p><em>Ingress</em><br>
<!-- -->서비스로 간단한 TCP 수준의 로드 밸런싱과 노드 포트를 지정해 애플리케이션을 노출시킬 수 있습니다.
이는 내부 서비스에서 확인하기 유용할 수 있지만,
각 노드의 IP 주소와 포트를 사용하는것은 외부 서비스에 부적합합니다.</p><p>대부분 애플리케이션은 HTTP 웹 기반이기 때문에 HTTP 로드 밸런서가 필요합니다.
인그레스는 가상 IP 주소를 받아 HTTP 요청 내용을 확인해 서비스로 라우팅 해주는 역할을 합니다.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>example-ingress.yaml</summary><div><div class="collapsibleContent_i85q"><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> extensions/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ingress.kubernetes.io/proxy-body-size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ingress.kubernetes.io/ssl-redirect</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"true"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">meta.helm.sh/release-name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> harbor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">meta.helm.sh/release-namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> harbor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nginx.ingress.kubernetes.io/proxy-body-size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nginx.ingress.kubernetes.io/ssl-redirect</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"true"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">generation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> harbor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/managed-by</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Helm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">chart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> harbor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">heritage</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Helm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">release</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> harbor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> harbor</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> harbor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resourceVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"9589535"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selfLink</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /apis/extensions/v1beta1/namespaces/harbor/ingresses/harbor</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">uid</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 02d7bb0c</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">12e0</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">44fc</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">9a38</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">1ec2f921b675</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">rules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> core.harbor.192.168.1.161.nip.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">serviceName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> harbor</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">portal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">servicePort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">serviceName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> harbor</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">servicePort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /api/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">serviceName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> harbor</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">servicePort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /service/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">serviceName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> harbor</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">servicePort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">serviceName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> harbor</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">servicePort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /chartrepo/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">serviceName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> harbor</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">servicePort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /c/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">loadBalancer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ingress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">ip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 192.168.1.161</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><h2 class="anchor anchorWithStickyNavbar_LWe7" id="레플리카셋">레플리카셋<a href="#레플리카셋" class="hash-link" aria-label="Direct link to 레플리카셋" title="Direct link to 레플리카셋">​</a></h2><p>수평적 확장(스케일 아웃)을 제공합니다.
과거 버전은 <code>Replication Controller</code>를 사용하였고 하위 호환성을 위해 존재하나,
현재는 <code>Replica Set</code>을 사용합니다.
레플리카는 다른 레플리카와 구별되는 고유한 ID가 없습니다.
레플리카셋은 복제된 애플리케이션을 구분하는 방법을 제공합니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="디플로이먼트">디플로이먼트<a href="#디플로이먼트" class="hash-link" aria-label="Direct link to 디플로이먼트" title="Direct link to 디플로이먼트">​</a></h2><p><em>Deployment</em><br>
<!-- -->파드와 같은 구성요소 배포 내용에 대한 청사진을 제공합니다.
디플로이먼트를 통해 사용불가능한 파드는 다른 노드에 스케줄링 될 수 있습니다.
또한 여러 노드에 레플리카를 생성해 스케일 다운과 업을 할 수 있습니다.</p><p>레플리카셋 버전의 안전한 롤아웃을 지원하기 위해 추가되었습니다.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>example-deployment.yaml</summary><div><div class="collapsibleContent_i85q"><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> myapp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> myapp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mynamespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> myapp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> myapp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jwher/myapp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">imagePullPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> IfNotPresent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><h2 class="anchor anchorWithStickyNavbar_LWe7" id="스테이트풀셋">스테이트풀셋<a href="#스테이트풀셋" class="hash-link" aria-label="Direct link to 스테이트풀셋" title="Direct link to 스테이트풀셋">​</a></h2><p><em>Stateful Set</em><br>
<!-- -->하지만, 데이터베이스와 같이 저장된 데이터 <strong>상태</strong>가 필요한 파드가 있습니다.
이때 데이터 부정합을 방지하기 위해 스토리지에 어떤 파드가 쓰기가 가능한지 결정해줘야 합니다.</p><p>레플리카셋으로 표현할 수 있지만, 최종 사용자에게 복잡하고, 오류가 나기 쉬우며, 반복적입니다.
스테이트풀 셋은 컨테이너를 만들고 삭제하는 방식이 더 확실합니다.</p><hr><br><br><br><h1>관리 개념</h1><p><em>컴포넌트를 위한 컴포넌트</em><br>
<!-- -->이 단락에서는 네임스페이스(namespace), 레이블(label), 어노테이션(annotation)을 설명합니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="네임스페이스">네임스페이스<a href="#네임스페이스" class="hash-link" aria-label="Direct link to 네임스페이스" title="Direct link to 네임스페이스">​</a></h2><p><em>Namespace</em><br>
<!-- -->쿠버네티스 API 오브젝트를 구분하기 위한 개념입니다.
RBAC 규칙 범위를 제공합니다.
삭제시 하위 오브젝트가 준부 삭제됩니다.
네임스페이스를 지정하지 않은 오브젝트는 <code>default</code> 네임스페이스가 사용됩니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="레이블">레이블<a href="#레이블" class="hash-link" aria-label="Direct link to 레이블" title="Direct link to 레이블">​</a></h2><p><em>Label</em><br>
<!-- -->쿠버네티스의 모든 오브젝트는 연관된 임의의 레이블 집합을 가질 수 있습니다.
API 서버에 <strong>레이블 쿼리</strong>, <strong>레이블 설렉터</strong>를 보내 조회할 수 있습니다.
많은 오브젝트는 레이블 설렉터를 사용해 다른 오브젝트 집합을 식별합니다.
예를들어 파드의 <a href="https://jwher.github.io/k8s-tip-nodeselector" target="_blank" rel="noopener noreferrer">노드 셀렉터</a> ,
서비스의 파드 설렉터가 있습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="어노테이션">어노테이션<a href="#어노테이션" class="hash-link" aria-label="Direct link to 어노테이션" title="Direct link to 어노테이션">​</a></h2><p><em>Annotation</em><br>
<!-- -->API 오브젝트가 전부 정보 식별용은 아닙니다.
일부는 단순 <strong>주석</strong>(어노테이션)입니다.</p><hr><br><br><br><h1>아키텍처 구성요소</h1><ul><li>Docker</li><li>kubelet</li><li>etcd</li><li>kube-proxy</li><li>kube-apiserver</li><li>kube-controller-manager</li><li>kube-scheduler</li><li>kube-proxy</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="etcd">etcd<a href="#etcd" class="hash-link" aria-label="Direct link to etcd" title="Direct link to etcd">​</a></h2><p>키/값 저장소로 쿠버네티스 클러스터의 핵심입니다.
etcd 서버는 분산된 합의 알고리즘인 래프트를 구현해, 장애 극복과 데이터 복구가 가능합니다.
(낙관적 동시성, 비교 후 교환(CAS, compare and swap), 워치 프로토콜)</p><p>네임스페이스의 모든 오브젝트는 etcd 디렉터리에 저장됩니다.
워치 프로토콜을 사용해 전체 키/값 저장소의 변경사항을 효율적으로 감시합니다.
클라이언트가 지속적으로 폴링하지 않아도 됩니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="api-서버">api 서버<a href="#api-서버" class="hash-link" aria-label="Direct link to api 서버" title="Direct link to api 서버">​</a></h2><p>중요!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="스케줄러">스케줄러<a href="#스케줄러" class="hash-link" aria-label="Direct link to 스케줄러" title="Direct link to 스케줄러">​</a></h2><p>파드가 실행될 위치를 찾아줍니다.  </p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">schedule</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pod</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">nodes</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getAllHealthyNodes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">viableNodes</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> node </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">nodes</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> predicate </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">predicates</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">predicate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pod</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                viableNodes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">scoredNodes</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">PriorityQueue</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">score</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Node</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">priorities</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">GetPriorityFunctions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> node </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">viableNodes</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        score </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">CalculateCombinedPriority</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pod</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> priorities</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        scoredNodes</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">score</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">bestScore</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> scoredNodes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">top</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">score</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    selectedNodes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scoredNodes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">node</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">selectAtRandom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">selectedNodes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Name</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>현재는 로직이 바뀌었습니다.</em></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="컨트롤러-관리자">컨트롤러 관리자<a href="#컨트롤러-관리자" class="hash-link" aria-label="Direct link to 컨트롤러 관리자" title="Direct link to 컨트롤러 관리자">​</a></h2><p>스케줄러 명령을 실제 실행하는 조정 제어 루프를 관리합니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="쿠블렛">쿠블렛<a href="#쿠블렛" class="hash-link" aria-label="Direct link to 쿠블렛" title="Direct link to 쿠블렛">​</a></h2><p>쿠버네티스 클러스터에 포함되는 모든 시스템의 노드 데몬입니다.
사용가능한 cpu, 디스크, 노드를 쿠버네티스 클러스터에 연결하는 다리입니다.
이런 상태를 API 서버에 전달해 다른 조정 제어 루프가 컨테이너 상태를 볼 수 있습니다.</p><p>또한, 실행될 것으로 예상되는 컨테이너의 상태를 확인하고 다시 시작합니다.
하지만 모든 상태 정보를 API 서버에 전달하는 것은 비효율적이기 때문에
조정 루프를 재실행하고, 상태와 재시작 정보만 API 서버에 전달합니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kube-proxy">kube-proxy<a href="#kube-proxy" class="hash-link" aria-label="Direct link to kube-proxy" title="Direct link to kube-proxy">​</a></h2><p>서비스의 로드 밸런서 네트워킹 모델을 담담합니다.</p><hr><br><br><br># 노드간 통신<p>서비스 디스커버리(flannel)</p><br><h1>기능 범위</h1><p>공식문서에서 쿠버네티스가 제공하는것/쿠버네티스가 아닌 것을 다음과 같이 설명하고 있습니다.  </p><p>제공하는것</p><ul><li>서비스 디스커버리와 로드 밸런싱</li><li>스토리지 오케스트레이션</li><li>자동화된 롤아웃과 롤백</li><li>자동화된 빈 패킹</li><li>자동화된 복구</li><li>시크릿과 구성 관리</li></ul><p>쿠버네티스가 아닌 것</p><ul><li>애플리케이션 유형 제약</li><li>소스 코드 빌드/배포</li><li>애플리케이션 레벨의 서비스</li><li>로깅/모니터링(일부 메트릭 수집 제공)</li><li>기본 설정 언어(PL) 제약<br>⇒선언적 API를 사용합니다</li></ul><p>세부적인 내용을 살펴보면 다음과 같습니다.</p><table><thead><tr><th>기능</th><th>제공여부</th><th>비고</th></tr></thead><tbody><tr><td>컨테이너가 정지시 재실행</td><td>○</td><td></td></tr><tr><td>노드 정지시 재실행</td><td>×</td><td></td></tr><tr><td>노드 정지시, 다른 노드에서 부족한 만큼 컨테이너 실행</td><td>×</td><td>쿠버네티스만으로 불가능합니다</td></tr><tr><td>노드 부하에 따라 컨테이너수 증가</td><td>×</td><td></td></tr><tr><td>노드 부하에 따라 노드수(?!) 증가</td><td>×</td><td></td></tr><tr><td>관리자가 지정한 수의 컨테이너 실행</td><td>○</td><td></td></tr><tr><td>영구 스토리지를 제공</td><td>△</td><td>NFS, EBS, GCP 등을 추상화해 제공합니다</td></tr><tr><td>오브젝트 스토리지를 제공</td><td>×</td><td>S3, Cloud Storage 사용합니다</td></tr><tr><td>노드간 도커 네트워크 접속</td><td>×</td><td>flannel, calico 등을 사용합니다</td></tr><tr><td>엔드포인트에서 컨테이너로 부하분산</td><td>○</td><td></td></tr><tr><td>각 노드로 트래픽 분산</td><td>×</td><td></td></tr></tbody></table><hr><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p>상당히 많은 글과 운영 검혐으로 작성했습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><p><a href="https://kubernetes.io/ko/docs/concepts/overview/what-is-kubernetes/" target="_blank" rel="noopener noreferrer">[공식]What is kubernetes</a><br>
<a href="https://kubernetes.io/docs/concepts/overview/components/" target="_blank" rel="noopener noreferrer">[공식]Kubernetes Components</a></p>]]></content:encoded>
            <category>tech</category>
            <category>kubernetes</category>
            <category>linux</category>
        </item>
        <item>
            <title><![CDATA[Kubeflow Guide]]></title>
            <link>https://jwher.github.io/posts/kubeflow-guide</link>
            <guid>https://jwher.github.io/posts/kubeflow-guide</guid>
            <pubDate>Tue, 31 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[쿠브플로우 가이드]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="kubeflow" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNzYuOTMgMjc0LjU1Ij48dGl0bGU+bG9nbzwvdGl0bGU+PGcgaWQ9IkxheWVyXzIiIGRhdGEtbmFtZT0iTGF5ZXIgMiI+PGcgaWQ9IkxheWVyXzEtMiIgZGF0YS1uYW1lPSJMYXllciAxIj48cGF0aCBkPSJNOTUuOSw2Mi4xNSwxMDAsMTY0LjI1bDczLjc1LTk0LjEyYTYuNzksNi43OSwwLDAsMSw5LjYtMS4xMWw0NiwzNi45Mi0xNS02NS42MVoiIGZpbGw9IiM0Mjc5ZjQiLz48cG9seWdvbiBwb2ludHM9IjEwMi41NSAxODIuOTggMTY3Ljk3IDE4Mi45OCAxMjcuOCAxNTAuNzUgMTAyLjU1IDE4Mi45OCIgZmlsbD0iIzAwMjhhYSIvPjxwb2x5Z29uIHBvaW50cz0iMTgwLjE4IDgzLjkyIDEzNi4xOCAxNDAuMDYgMTgzLjA2IDE3Ny42NyAyMjcuNTMgMTIxLjkxIDE4MC4xOCA4My45MiIgZmlsbD0iIzAxNGJkMSIvPjxwb2x5Z29uIHBvaW50cz0iODMuNTYgNTIuMyA4My41NyA1Mi4yOSAxMjIuMjYgMy43NyA1OS44NyAzMy44MiA0NC40NiAxMDEuMzMgODMuNTYgNTIuMyIgZmlsbD0iI2JlZGNmZiIvPjxwb2x5Z29uIHBvaW50cz0iNDUuMzIgMTIyLjA1IDg2Ljc2IDE3NC4wMSA4Mi44MSA3NS4wMyA0NS4zMiAxMjIuMDUiIGZpbGw9IiM2Y2ExZmYiLz48cG9seWdvbiBwb2ludHM9IjIwMi4zMSAyOC43MyAxNDIuNjUgMCAxMDUuNTIgNDYuNTYgMjAyLjMxIDI4LjczIiBmaWxsPSIjYTFjM2ZmIi8+PHBhdGggZD0iTTEuNiwyNzJWMjI3LjIySDcuMzR2MjMuNDFsMjAuNDgtMjMuNDFoNi40bC0xNy4zOSwxOS43LDE5LDI1LjA3SDI5LjFsLTE1LjkyLTIwLjgtNS44NCw2LjY1VjI3MloiIGZpbGw9IiM0Mjc5ZjQiIHN0cm9rZT0iIzQyNzlmNCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjMuMiIvPjxwYXRoIGQ9Ik00MS42MiwyNjIuMjFWMjQwaDUuNDN2MjIuMzlhNC42Nyw0LjY3LDAsMCwwLDIuMzUsNC4xOSwxMSwxMSwwLDAsMCwxMSwwLDQuNjksNC42OSwwLDAsMCwyLjMzLTQuMTlWMjQwaDUuNDN2MjIuMTlhOS4wOCw5LjA4LDAsMCwxLTQuMSw3Ljg3LDE2LjIsMTYuMiwwLDAsMS0xOC4zNywwQTkuMDcsOS4wNywwLDAsMSw0MS42MiwyNjIuMjFaIiBmaWxsPSIjNDI3OWY0IiBzdHJva2U9IiM0Mjc5ZjQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIzLjIiLz48cGF0aCBkPSJNNzcuNDYsMjcyVjIyNGg1LjQzdjE2LjgxYTI5LjI5LDI5LjI5LDAsMCwxLDkuMzItMS43MywxMy4xLDEzLjEsMCwwLDEsNi4yLDEuNDEsMTAuNzEsMTAuNzEsMCwwLDEsNC4xOCwzLjc0LDE4LjA3LDE4LjA3LDAsMCwxLDIuMjMsNS4wNiwyMS4yNiwyMS4yNiwwLDAsMSwuNzMsNS41OHEwLDguNDMtNC4zOCwxMi43OVQ4Ny4zNSwyNzJabTUuNDMtNC44N2g0LjU1cTYuNzcsMCw5LjcyLTIuOTV0My05LjUxYTE0LjIxLDE0LjIxLDAsMCwwLTItNy41Miw2LjU1LDYuNTUsMCwwLDAtNi0zLjIyLDI0LjczLDI0LjczLDAsMCwwLTkuMjUsMS41NFoiIGZpbGw9IiM0Mjc5ZjQiIHN0cm9rZT0iIzQyNzlmNCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjMuMiIvPjxwYXRoIGQ9Ik0xMTIuMzYsMjU1Ljk0cTAtNy43MSw0LjA5LTEyLjNhMTMuNzUsMTMuNzUsMCwwLDEsMTAuOC00LjU5cTEzLjM1LDAsMTMuMzYsMTguODZIMTE3Ljc5YTEyLjMsMTIuMywwLDAsMCwyLjksNy4wN3EyLjU5LDMuMTEsNy45LDMuMWEyNC45MiwyNC45MiwwLDAsMCwxMC41NS0ydjVhMjcuNzQsMjcuNzQsMCwwLDEtOS44NiwxLjg3LDE5LjgzLDE5LjgzLDAsMCwxLTcuNy0xLjM3LDEzLjMxLDEzLjMxLDAsMCwxLTUuMjgtMy43NiwxNi4yMSwxNi4yMSwwLDAsMS0zLTUuMzhBMjAuODQsMjAuODQsMCwwLDEsMTEyLjM2LDI1NS45NFptNS42Mi0yLjEyaDE3LjI2YTE0LjkxLDE0LjkxLDAsMCwwLTIuMzctNy4xMiw2LjQ0LDYuNDQsMCwwLDAtNS42Mi0yLjc4LDguMiw4LjIsMCwwLDAtNi4yMSwyLjcyQTEyLjA3LDEyLjA3LDAsMCwwLDExOCwyNTMuODJaIiBmaWxsPSIjNDI3OWY0IiBzdHJva2U9IiM0Mjc5ZjQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIzLjIiLz48cGF0aCBkPSJNMTQ3LjMyLDI0NC44OVYyNDBoNXYtNy41OWE4LjE0LDguMTQsMCwwLDEsMi4zMS02LjA1LDcuNzksNy43OSwwLDAsMSw1LjY5LTIuMjhoNy44NlYyMjloLTVjLTIuMjEsMC0zLjY3LjQ1LTQuMzcsMS4zNHMtMS4wNiwyLjU1LTEuMDYsNVYyNDBoOC40NnY0Ljg3aC04LjQ2VjI3MmgtNS40NHYtMjcuMVoiIGZpbGw9IiMwMDI4YWEiIHN0cm9rZT0iIzAwMjhhYSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjMuMiIvPjxwYXRoIGQ9Ik0xNzUuMjYsMjcyVjIyNGg1LjQzdjQ4WiIgZmlsbD0iIzAwMjhhYSIgc3Ryb2tlPSIjMDAyOGFhIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMy4yIi8+PHBhdGggZD0iTTE5NC40MSwyNjguMDVhMTcuODYsMTcuODYsMCwxLDEsMTIuMzMsNC45QTE2LjU3LDE2LjU3LDAsMCwxLDE5NC40MSwyNjguMDVabTMuODQtMjAuNjVhMTMuMTYsMTMuMTYsMCwwLDAsMCwxNy4yLDEyLjA3LDEyLjA3LDAsMCwwLDE3LDAsMTMuMDksMTMuMDksMCwwLDAsMC0xNy4yLDEyLjA3LDEyLjA3LDAsMCwwLTE3LDBaIiBmaWxsPSIjMDAyOGFhIiBzdHJva2U9IiMwMDI4YWEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIzLjIiLz48cGF0aCBkPSJNMjI4LjQ1LDI0MGg1Ljc1bDcuMywyNS4zMkwyNDguOTMsMjQwaDUuMzZsNy4zNCwyNS4zNEwyNjksMjQwaDUuNzRMMjY0LjcsMjcyaC02LjEybC02LjgzLTI0LjU4TDI0NSwyNzJoLTYuNDdaIiBmaWxsPSIjMDAyOGFhIiBzdHJva2U9IiMwMDI4YWEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIzLjIiLz48L2c+PC9nPjwvc3ZnPg==" width="277" height="275" class="img_ev3q">
<em>쿠브플로우 파이프라인 사용 가이드</em>  </p><h1>목차</h1><ul><li><a href="#%EC%9B%B9-ui">웹 UI</a></li><li><a href="#%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8-%EB%A7%8C%EB%93%A4%EA%B8%B0">파이프라인 만들기</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="웹-ui">웹 UI<a href="#웹-ui" class="hash-link" aria-label="Direct link to 웹 UI" title="Direct link to 웹 UI">​</a></h2><p>쿠브플로우가 없으면 <a href="https://jwher.github.io/install-kubeflow" target="_blank" rel="noopener noreferrer">이글</a>
을 보고 설치할 수 있습니다. 😄</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="컴포넌트">컴포넌트<a href="#컴포넌트" class="hash-link" aria-label="Direct link to 컴포넌트" title="Direct link to 컴포넌트">​</a></h3><p><em>쿠브플로우를 구성하는 논리 요소</em></p><p><a href="https://www.kubeflow.org/docs/components/" target="_blank" rel="noopener noreferrer">[공식]Components</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사용하기">사용하기<a href="#사용하기" class="hash-link" aria-label="Direct link to 사용하기" title="Direct link to 사용하기">​</a></h3><p><em>UI는 버전에 따라 다를 수 있습니다.</em></p><p>쿠브플로우는 빠르게 사용해 볼 수 있는 샘플을 제공합니다.
이번 샘플은 파이썬 연산을 포함하지만, ML 워크로드는 제공하지 않습니다.</p><ol><li>좌측 탭의 <code>Pipelines</code>에서 <code>[Tutorial] Data passing in python components</code>를 클릭합니다.<br><em><code>[Demo] XGBoost - Iterative model training</code>으로 ML 컴포넌트 샘플을 사용해 볼 수 있습니다.</em></li></ol><ol start="2"><li><code>experiment</code>를 한번도 생성한 적이 없다면, <code>Create experiment</code>를 클릭해 만듭니다.
생성한 적이 있다면, <code>Create run</code>을 클릭합니다.
</li></ol><ol start="3"><li>파이프라인 생성에 필요한 값을 입력합니다. 이 샘플은 필요한 모든 값을 기본으로 제공합니다.
입력을 완료했다면 <code>start</code>를 눌러 파이프라인을 실행합니다.<br><em>사진은 <code>Default</code>라는 이름의 <code>experiment</code>를 사용했습니다.</em><br></li></ol><ol start="4"><li>좌측 탭의 <code>Experiments</code>을 누릅니다. 지정한 <code>experiment</code>이름을 클릭하면 <code>Runs</code> 목록이 나옵니다.
입력한 <code>Run</code> 이름을 클릭합니다.<br><em>구버전은 좌측 탭의 <code>Runs</code>가 존재하기도 합니다</em></li></ol><ol start="5"><li>그래프를 확인할 수 있습니다. 그래프의 각 컴포넌트를 클릭해 실행결과를 확인합니다.</li></ol><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="파이프라인-만들기">파이프라인 만들기<a href="#파이프라인-만들기" class="hash-link" aria-label="Direct link to 파이프라인 만들기" title="Direct link to 파이프라인 만들기">​</a></h2><p><a href="https://www.kubeflow.org/docs/components/pipelines/sdk/sdk-overview/" target="_blank" rel="noopener noreferrer">[공식]Introduction to the Pipelines SDK</a>  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kfp-설치">kfp 설치<a href="#kfp-설치" class="hash-link" aria-label="Direct link to kfp 설치" title="Direct link to kfp 설치">​</a></h3><ul><li>파이썬 3.5 이상</li><li>가상환경(conda) 권장</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ pip3 </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> kfp --upgrade</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>가상환경이 아니라면 권한 오류가 발생할 수 있습니다. <code>--user</code> 플래그를 사용합니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ pip3 </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> kfp --upgrade --user</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이 명령어는 <code>~/.local/bin</code>에 인스톨하는 명령어입니다.
이는 몇 리눅스 배포(우분투)에서 <code>PATH</code> 환경변수로 등록하지 않습니다.
따라서 <code>~/.local/bin</code> 경로를 <code>.bashrc</code> 파일에 등록해주어야 합니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable environment constant" style="color:#36acaa">PATH</span><span class="token operator" style="color:#393A34">=</span><span class="token environment constant" style="color:#36acaa">$PATH</span><span class="token plain">:~/.local/bin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="생성과정">생성과정<a href="#생성과정" class="hash-link" aria-label="Direct link to 생성과정" title="Direct link to 생성과정">​</a></h3><ol><li>존재하는 코드</li><li>도커 이미지</li><li><code>kfp.dsl.ContainerOP</code></li><li><code>kfp.dsl.pipeline</code></li><li><code>.yaml</code></li><li>웹 UI 또는 <code>kfp.Client.run_pipeline</code>로 실행</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="예제">예제<a href="#예제" class="hash-link" aria-label="Direct link to 예제" title="Direct link to 예제">​</a></h3><p><em>시간이 부족해 요청하시면 설명하겠습니다.</em>  </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> kfp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> kfp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">components </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> comp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> kfp </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> dsl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">print_op</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""Print a message"""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> dsl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ContainerOp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'alpine:3.6'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        command</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'echo'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> msg</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@dsl</span><span class="token decorator annotation punctuation" style="color:#393A34">.</span><span class="token decorator annotation punctuation" style="color:#393A34">pipeline</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'Pipeline v1'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    description</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""execute whatever you want</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    """</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">pipeline</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">**</span><span class="token plain">kwargs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 메타데이터는 중괄호로 가져옵니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 예) {{pod.name}}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> print_op</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"print"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"hello world!"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pr2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> print_op</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"print2"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"have a nice day!"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pr2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">after</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'__main__'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    saveName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'test.yaml'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kfp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">compiler</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Compiler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">compile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pipeline</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> saveName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"done"</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://kubeflow-pipelines.readthedocs.io/en/latest/source/kfp.html" target="_blank" rel="noopener noreferrer">[공식]kfp package</a>  </p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p>Jupyter notebook과 연동해 쉽게(?) 사용할 수 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://www.kubeflow.org/docs/" target="_blank" rel="noopener noreferrer">[공식]Documentation</a><br>
<a href="https://www.kubeflow.org/docs/components/pipelines/sdk/install-sdk/" target="_blank" rel="noopener noreferrer">[공식]Install the Kubeflow Pipelines SDK</a>  </p>]]></content:encoded>
            <category>tech</category>
            <category>kubeflow</category>
        </item>
        <item>
            <title><![CDATA[Sagemaker]]></title>
            <link>https://jwher.github.io/posts/sagemaker</link>
            <guid>https://jwher.github.io/posts/sagemaker</guid>
            <pubDate>Sun, 29 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[아마존 세이지메이커: 머신러닝 자동화]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="sagemaker" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iODBweCIgaGVpZ2h0PSI4MHB4IiB2aWV3Qm94PSIwIDAgODAgODAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDY0ICg5MzUzNykgLSBodHRwczovL3NrZXRjaC5jb20gLS0+CiAgICA8dGl0bGU+SWNvbi1BcmNoaXRlY3R1cmUvNjQvQXJjaF9BV1MtU2FnZU1ha2VyXzY0PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+CiAgICAgICAgPGxpbmVhckdyYWRpZW50IHgxPSIwJSIgeTE9IjEwMCUiIHgyPSIxMDAlIiB5Mj0iMCUiIGlkPSJsaW5lYXJHcmFkaWVudC0xIj4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzA1NUY0RSIgb2Zmc2V0PSIwJSI+PC9zdG9wPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjNTZDMEE3IiBvZmZzZXQ9IjEwMCUiPjwvc3RvcD4KICAgICAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPC9kZWZzPgogICAgPGcgaWQ9Ikljb24tQXJjaGl0ZWN0dXJlLzY0L0FyY2hfQVdTLVNhZ2VNYWtlcl82NCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Ikljb24tQXJjaGl0ZWN0dXJlLUJHLzY0L01hY2hpbmUtTGVhcm5pbmciIGZpbGw9InVybCgjbGluZWFyR3JhZGllbnQtMSkiPgogICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlIiB4PSIwIiB5PSIwIiB3aWR0aD0iODAiIGhlaWdodD0iODAiPjwvcmVjdD4KICAgICAgICA8L2c+CiAgICAgICAgPHBhdGggZD0iTTU0LjAzNCwyNi4wMzM1NzMxIEM1NC4wMzQsMjYuNTkzNTY1NCA1My41NzgsMjcuMDQ5NTU5MiA1My4wMTcsMjcuMDQ5NTU5MiBDNTIuNDU4LDI3LjA0OTU1OTIgNTIuMDAyLDI2LjU5MzU2NTQgNTIuMDAyLDI2LjAzMzU3MzEgQzUyLjAwMiwyNS40NzM1ODA3IDUyLjQ1OCwyNS4wMTc1ODY5IDUzLjAxNywyNS4wMTc1ODY5IEM1My41NzgsMjUuMDE3NTg2OSA1NC4wMzQsMjUuNDczNTgwNyA1NC4wMzQsMjYuMDMzNTczMSBMNTQuMDM0LDI2LjAzMzU3MzEgWiBNNDguMDAyLDM2LjAwMDQzNyBDNDguMDAyLDM1LjQ0OTQ0NDUgNDguNDUsMzUuMDAwNDUwNiA0OS4wMDIsMzUuMDAwNDUwNiBDNDkuNTU0LDM1LjAwMDQ1MDYgNTAuMDAyLDM1LjQ0OTQ0NDUgNTAuMDAyLDM2LjAwMDQzNyBDNTAuMDAyLDM2LjU1MTQyOTQgNDkuNTU0LDM3LjAwMDQyMzMgNDkuMDAyLDM3LjAwMDQyMzMgQzQ4LjQ1LDM3LjAwMDQyMzMgNDguMDAyLDM2LjU1MTQyOTQgNDguMDAyLDM2LjAwMDQzNyBMNDguMDAyLDM2LjAwMDQzNyBaIE00OC4wMDIsNTUuMDAwMTc3NSBDNDguMDAyLDU0LjQ0OTE4NSA0OC40NSw1NC4wMDAxOTEyIDQ5LjAwMiw1NC4wMDAxOTEyIEM0OS41NTQsNTQuMDAwMTkxMiA1MC4wMDIsNTQuNDQ5MTg1IDUwLjAwMiw1NS4wMDAxNzc1IEM1MC4wMDIsNTUuNTUxMTcgNDkuNTU0LDU2LjAwMDE2MzkgNDkuMDAyLDU2LjAwMDE2MzkgQzQ4LjQ1LDU2LjAwMDE2MzkgNDguMDAyLDU1LjU1MTE3IDQ4LjAwMiw1NS4wMDAxNzc1IEw0OC4wMDIsNTUuMDAwMTc3NSBaIE01OC4wMDIsNDIuMDAwMzU1IEM1OC4wMDIsNDIuNTUxMzQ3NSA1Ny41NTQsNDMuMDAwMzQxNCA1Ny4wMDIsNDMuMDAwMzQxNCBDNTYuNDUsNDMuMDAwMzQxNCA1Ni4wMDIsNDIuNTUxMzQ3NSA1Ni4wMDIsNDIuMDAwMzU1IEM1Ni4wMDIsNDEuNDQ5MzYyNiA1Ni40NSw0MS4wMDAzNjg3IDU3LjAwMiw0MS4wMDAzNjg3IEM1Ny41NTQsNDEuMDAwMzY4NyA1OC4wMDIsNDEuNDQ5MzYyNiA1OC4wMDIsNDIuMDAwMzU1IEw1OC4wMDIsNDIuMDAwMzU1IFogTTY1LDQ1LjI3MjMxMDQgTDU5Ljk2Myw0Mi4zODIzNDk4IEM1OS45NzksNDIuMjU2MzUxNSA2MC4wMDIsNDIuMTMxMzUzMiA2MC4wMDIsNDIuMDAwMzU1IEM2MC4wMDIsNDAuMzQ2Mzc3NiA1OC42NTYsMzkuMDAwMzk2IDU3LjAwMiwzOS4wMDAzOTYgQzU1LjM0NywzOS4wMDAzOTYgNTQuMDAyLDQwLjM0NjM3NzYgNTQuMDAyLDQyLjAwMDM1NSBDNTQuMDAyLDQzLjY1NDMzMjQgNTUuMzQ3LDQ1LjAwMDMxNDEgNTcuMDAyLDQ1LjAwMDMxNDEgQzU3LjgwMSw0NS4wMDAzMTQxIDU4LjUyMyw0NC42ODEzMTg0IDU5LjA2MSw0NC4xNzEzMjU0IEw2My44ODYsNDYuOTM5Mjg3NiBMNTkuNTU1LDQ5LjEwNTI1OCBDNTkuMjE2LDQ5LjI3NTI1NTcgNTkuMDAyLDQ5LjYyMTI1MSA1OS4wMDIsNTAuMDAwMjQ1OCBMNTkuMDAyLDU4LjQ0MTEzMDUgTDQ2Ljk4Myw2NS44MzcwMjk1IEw0MS4wMDMsNjIuNDIwMDc2MiBMNDEuMDAzLDU2LjAwMDE2MzkgTDQ2LjE4Niw1Ni4wMDAxNjM5IEM0Ni42LDU3LjE2MTE0OCA0Ny43LDU4LjAwMDEzNjYgNDkuMDAyLDU4LjAwMDEzNjYgQzUwLjY1Niw1OC4wMDAxMzY2IDUyLjAwMiw1Ni42NTQxNTQ5IDUyLjAwMiw1NS4wMDAxNzc1IEM1Mi4wMDIsNTMuMzQ1MjAwMSA1MC42NTYsNTIuMDAwMjE4NSA0OS4wMDIsNTIuMDAwMjE4NSBDNDcuNyw1Mi4wMDAyMTg1IDQ2LjYsNTIuODM4MjA3IDQ2LjE4Niw1NC4wMDAxOTEyIEw0MS4wMDMsNTQuMDAwMTkxMiBMNDEuMDAzLDQwLjAwMDM4MjMgQzQxLjAwMywzOS42NDkzODcxIDQwLjgxOCwzOS4zMjMzOTE2IDQwLjUxNywzOS4xNDIzOTQxIEwzNS41MTYsMzYuMTQyNDM1IEwzNC40ODcsMzcuODU3NDExNiBMMzkuMDAzLDQwLjU2NjM3NDYgTDM5LjAwMyw0My41MDczMzQ1IEwzMy4wMDIsNDguMTIzMjcxNCBMMzMuMDAyLDQ0LjAwMDMyNzcgQzMzLjAwMiw0My42OTYzMzE5IDMyLjg2NCw0My40MDgzMzU4IDMyLjYyNyw0My4yMTkzMzg0IEwyOC4wMDIsMzkuNTE5Mzg4OSBMMjguMDAyLDM0LjUzNTQ1NyBMMzMuNTU2LDMwLjgzMjUwNzUgQzMzLjgzNSwzMC42NDY1MTAxIDM0LjAwMiwzMC4zMzQ1MTQzIDM0LjAwMiwzMC4wMDA1MTg5IEwzNC4wMDIsMjQuMDAwNjAwOCBMMzIuMDAyLDI0LjAwMDYwMDggTDMyLjAwMiwyOS40NjU1MjYyIEwyNy4wMTMsMzIuNzkwNDgwOCBMMjIuMDAyLDI5LjQ2MzUyNjIgTDIyLjAwMiwyMS41NzQ2MzM5IEwyNy4wMDIsMTguNjU4NjczOCBMMjcuMDAyLDI3LjAwMDU1OTkgTDI5LjAwMiwyNy4wMDA1NTk5IEwyOS4wMDIsMTcuNDkxNjg5NyBMMzMuMDA1LDE1LjE1NjcyMTYgTDM5LjAwMSwxOC42MTU2NzQ0IEwzOS4wMDIsMzEuMDAwNTA1MiBDMzkuMDAyLDMxLjM1OTUwMDMgMzkuMTk0LDMxLjY5MDQ5NTggMzkuNTA2LDMxLjg2ODQ5MzQgTDQ2LjA0MiwzNS42MDM0NDI0IEM0Ni4wMjQsMzUuNzM0NDQwNiA0Ni4wMDIsMzUuODY0NDM4OCA0Ni4wMDIsMzYuMDAwNDM3IEM0Ni4wMDIsMzcuNjU0NDE0NCA0Ny4zNDcsMzkuMDAwMzk2IDQ5LjAwMiwzOS4wMDAzOTYgQzUwLjY1NiwzOS4wMDAzOTYgNTIuMDAyLDM3LjY1NDQxNDQgNTIuMDAyLDM2LjAwMDQzNyBDNTIuMDAyLDM0LjM0NjQ1OTUgNTAuNjU2LDMzLjAwMDQ3NzkgNDkuMDAyLDMzLjAwMDQ3NzkgQzQ4LjIwOCwzMy4wMDA0Nzc5IDQ3LjQ5LDMzLjMxNTQ3MzYgNDYuOTUzLDMzLjgyMDQ2NjcgTDQxLjAwMiwzMC40MTk1MTMyIEw0MS4wMDEsMTguNjE3Njc0MyBMNDYuOTY0LDE1LjE3NjcyMTMgTDU4LjAwMiwyMi41MzU2MjA4IEw1OC4wMDIsMjUuMDAwNTg3MiBMNTUuODUxLDI1LjAwMDU4NzIgQzU1LjQyOSwyMy44NDQ2MDMgNTQuMzE4LDIzLjAxNzYxNDIgNTMuMDE3LDIzLjAxNzYxNDIgQzUxLjM1NCwyMy4wMTc2MTQyIDUwLjAwMiwyNC4zNzA1OTU4IDUwLjAwMiwyNi4wMzM1NzMxIEM1MC4wMDIsMjcuNjk2NTUwNCA1MS4zNTQsMjkuMDQ5NTMxOSA1My4wMTcsMjkuMDQ5NTMxOSBDNTQuMzQzLDI5LjA0OTUzMTkgNTUuNDcxLDI4LjE5MDU0MzYgNTUuODc1LDI3LjAwMDU1OTkgTDU4LjAwMiwyNy4wMDA1NTk5IEw1OC4wMDIsMzAuMDAwNTE4OSBDNTguMDAyLDMwLjM1OTUxNCA1OC4xOTQsMzAuNjkwNTA5NSA1OC41MDYsMzAuODY4NTA3IEw2NSwzNC41ODA0NTY0IEw2NSw0NS4yNzIzMTA0IFogTTMzLjAyLDY1LjgzNzAyOTUgTDI5Ljg2Nyw2My44OTcwNTYgTDM1LjU4Myw1OS44MTQxMTE4IEwzNC40MjEsNTguMTg2MTM0IEwyOC4wMTgsNjIuNzU5MDcxNiBMMjEuMDAyLDU4LjQ0MTEzMDUgTDIxLjAwMiw1MC41NjYyMzgxIEwyNS41MTYsNDcuODU3Mjc1MSBMMjQuNDg3LDQ2LjE0MjI5ODUgTDE5Ljk1OCw0OC44NjAyNjE0IEwxNS4wMDIsNDYuMzgyMjk1MiBMMTUuMDAxLDQwLjYxNzM3MzkgTDIwLjQ0OSwzNy44OTQ0MTExIEwxOS41NTUsMzYuMTA1NDM1NSBMMTUuMDAxLDM4LjM4MTQwNDQgTDE1LjAwMiwzNC41ODA0NTY0IEwyMC45NjMsMzEuMTc0NTAyOSBMMjYuMDAyLDM0LjUxOTQ1NzIgTDI2LjAwMiwzOS40ODAzODk0IEwyMC40NDksNDMuMTY3MzM5MSBMMjEuNTU1LDQ0LjgzMzMxNjMgTDI2Ljk1OCw0MS4yNDUzNjUzIEwzMS4wMDIsNDQuNDgwMzIxMiBMMzEuMDAyLDQ5LjY2MjI1MDQgTDI2LjM5Miw1My4yMDcyMDIgTDI3LjYxMSw1NC43OTIxODA0IEwzOS4wMDMsNDYuMDMwMyBMMzkuMDAzLDYyLjQxOTA3NjIgTDMzLjAyLDY1LjgzNzAyOTUgWiBNNjYuNDk2LDMzLjEzMjQ3NjEgTDYwLjAwMiwyOS40MjA1MjY4IEw2MC4wMDIsMjIuMDAwNjI4MSBDNjAuMDAyLDIxLjY2NTYzMjcgNTkuODM1LDIxLjM1MzYzNyA1OS41NTYsMjEuMTY4NjM5NSBMNDcuNTU2LDEzLjE2ODc0ODcgQzQ3LjI0LDEyLjk1ODc1MTYgNDYuODMyLDEyLjk0NDc1MTggNDYuNTAyLDEzLjEzNDc0OTIgTDQwLjAwNCwxNi44ODQ2OTggTDMzLjUwMiwxMy4xMzQ3NDkyIEMzMy4xOSwxMi45NTQ3NTE3IDMyLjgwNywxMi45NTQ3NTE3IDMyLjQ5OCwxMy4xMzY3NDkyIEwyMC40OTgsMjAuMTM2NjUzNiBDMjAuMTksMjAuMzE1NjUxMSAyMC4wMDIsMjAuNjQ0NjQ2NiAyMC4wMDIsMjEuMDAwNjQxOCBMMjAuMDAyLDI5LjQyMDUyNjggTDEzLjUwNiwzMy4xMzI0NzYxIEMxMy4xOTQsMzMuMzA5NDczNyAxMy4wMDIsMzMuNjQxNDY5MiAxMy4wMDIsMzQuMDAwNDY0MyBMMTMuMDAyLDM0LjQxNzQ1ODYgQzEzLjAwMSwzNC40Mzg0NTgzIDEzLDM0LjQ1ODQ1OCAxMywzNC40Nzk0NTc3IEwxMyw0NS4zNjMzMDkxIEMxMyw0NS4zODMzMDg4IDEzLjAwMSw0NS40MDMzMDg2IDEzLjAwMiw0NS40MjIzMDgzIEwxMy4wMDIsNDcuMDAwMjg2OCBDMTMuMDAyLDQ3LjM3OTI4MTYgMTMuMjE2LDQ3LjcyNTI3NjkgMTMuNTU1LDQ3Ljg5NDI3NDUgTDE5LjAwMiw1MC42MTgyMzc0IEwxOS4wMDIsNTkuMDAwMTIyOSBDMTkuMDAyLDU5LjM0NzExODIgMTkuMTgxLDU5LjY2OTExMzggMTkuNDc3LDU5Ljg1MTExMTMgTDMyLjQ3Nyw2Ny44NTEwMDIgQzMyLjYzOCw2Ny45NTAwMDA3IDMyLjgyLDY4IDMzLjAwMiw2OCBDMzMuMTczLDY4IDMzLjM0NCw2Ny45NTYwMDA2IDMzLjQ5OCw2Ny44NjgwMDE4IEw0MC4wMDMsNjQuMTUyMDUyNSBMNDYuNTA2LDY3Ljg2ODAwMTggQzQ2LjgyMSw2OC4wNDg5OTkzIDQ3LjIxMyw2OC4wNDE5OTk0IDQ3LjUyNiw2Ny44NTEwMDIgTDYwLjUyNiw1OS44NTExMTEzIEM2MC44MjIsNTkuNjY5MTEzOCA2MS4wMDIsNTkuMzQ3MTE4MiA2MS4wMDIsNTkuMDAwMTIyOSBMNjEuMDAyLDUwLjYxODIzNzQgTDY2LjQ0Nyw0Ny44OTQyNzQ1IEM2Ni43ODYsNDcuNzI1Mjc2OSA2Nyw0Ny4zNzkyODE2IDY3LDQ3LjAwMDI4NjggTDY3LDM0LjAwMDQ2NDMgQzY3LDMzLjY0MTQ2OTIgNjYuODA3LDMzLjMxMDQ3MzcgNjYuNDk2LDMzLjEzMjQ3NjEgTDY2LjQ5NiwzMy4xMzI0NzYxIFoiIGlkPSJBV1MtU2FnZU1ha2VyX0ljb25fNjRfU3F1aWQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgIDwvZz4KPC9zdmc+" width="80" height="80" class="img_ev3q">
<em>AWS Builders Sagemaker Session</em><br>
<em>이 글은 아마존 빌더스 세이지메이커 세션을 듣고 작성했습니다</em></p><h1>목차</h1><ul><li><a href="#sagemaker">SageMaker</a></li><li><a href="#%EC%8B%A4%EC%8A%B5">실습</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sagemaker">SageMaker<a href="#sagemaker" class="hash-link" aria-label="Direct link to SageMaker" title="Direct link to SageMaker">​</a></h2><p>세이지메이커(SageMaker)는 AWS ML 스택으로,
준비, 빌드, 훈련 및 튜닝, 배포 및 관리 CI/CD 파이프라인입니다.
세이지메이커 핵심 개념은 다음과 같습니다.</p><ul><li>데이터 보호를 통한 혁신 지원</li><li>반복 훈련 워크플로우 자동화</li></ul><p>관리형 머신러닝 CI/CD 서비스인 세이지메이커는 다음 서비스를 제공합니다.</p><ul><li>워크플로우 각 단계를 중앙에서 관리</li><li>워크플로우 공유 및 재실행</li><li>빌트인 템플릿에서 선택</li><li>워크플로우 시각적으로 비교</li></ul><p>세이지메이커 파이프라인은 수동, <a href="https://aws.amazon.com/ko/cloudwatch/" target="_blank" rel="noopener noreferrer">CloudWatch</a> 이벤트,
코드 체크인, 스케줄링으로 시작됩니다.
세이지메이커는 다음과 같은 순서로 작동합니다.</p><ul><li>입력 데이터 가져오기</li><li>데이터 처리</li><li>모델 훈련</li><li>검증</li><li>모델 배포 (또는) 경고 및 중단</li></ul><p>워크플로우는 Python SDK를 사용해 작성합니다.
파이프라인 실행 세부 정보와 메트릭은 웹 스튜디오를 사용해 실시간으로 확인합니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="실습">실습<a href="#실습" class="hash-link" aria-label="Direct link to 실습" title="Direct link to 실습">​</a></h2><p>실습은 세이지메이커 노트북 인스턴스를 생성해 사용합니다.
이를 위해 AWS CloudFormation을 사용해 노트북 인스턴스를 생성합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a href="#requirements" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">​</a></h3><ul><li>AWS account</li><li>AWS IAM(Identity and Access Management)</li><li>AWS 이해</li></ul><p><em>필자는 AWS Builders 2021에 참여해 실습 계정을 지급받았습니다.</em></p><ol><li>클라우드포메이션에서 스택 생성을 합니다.
준비된 템플릿을 사용했습니다.</li></ol><p align="center"><img loading="lazy" src="/assets/img/sagemaker/cloudformation1.png" class="img_ev3q"></p><br>2. 스택 세부 정보를 지정합니다.<p align="center"><img loading="lazy" src="/assets/img/sagemaker/cloudformation2.png" class="img_ev3q"></p><p>Amazon Elastic Compute Cloud, EC2는 컴퓨트 자원 추상화로써 성능의 일관성을 제공합니다.
ml.m4.xlarge는 다음과 같은 뜻입니다.</p><ul><li>ml: 세이지메이커 등 ml에 사용하는 인스턴스입니다.</li><li>m4: 범용 인스턴스입니다.<br>2.3GHz 인텔 제온® E5-2686 v4(Broadwell) 또는 2.4GHz 인텔 제온® E5-2676 v3(Haswell)</li><li>xlarge: 4vCPU, 16Gib, EBS 전용 스토리지, 네트워크 성능 높음</li></ul><p><em>Gib, Giga Binary byte = 2^30</em><br>
<em>EBS, Elastic Block Store</em></p><br><ol start="3"><li><p>동의 버튼 누르고 스택 생성을 누릅니다.</p><p align="center"><img loading="lazy" src="/assets/img/sagemaker/cloudformation5.png" class="img_ev3q"></p><br></li><li><p>노트북 인스턴스의 생성이 완료되면, 검색창에 sagemaker를 검색합니다.</p><p align="center"><img loading="lazy" src="/assets/img/sagemaker/cloudformation7.png" class="img_ev3q"></p><br></li><li><p>SageMaker에 들어가 왼쪽 탭에 <code>노트북</code>-<code>노트북인스턴스</code>-<code>이름</code> 또는 <code>Jupyter</code> 또는 <code>JupyterLab</code>을 클릭합니다.</p><p align="center"><img loading="lazy" src="/assets/img/sagemaker/cloudformation9.png" class="img_ev3q"></p><br></li></ol><ol start="6"><li>주피터 랩 하단의 <code>Terminal</code>을 열고 실습에 사용할 코드를 clone 받습니다.<p align="center"><img loading="lazy" src="/assets/img/sagemaker/cloudformation12.png" class="img_ev3q"></p><br></li></ol><ol start="7"><li>주피터에서 SDK를 사용해 파이프라인을 실행시키고 SageMakerStudio에 접속하면
파이프라인 조회가 가능합니다.<p align="center"><img loading="lazy" src="/assets/img/sagemaker/sagemakerstudio4.png" class="img_ev3q"></p></li></ol><p>Web UI 형태로 제공되며 개인적인 느낌으로 <a href="https://jwher.github.io/welcome-to-kubeflow" target="_blank" rel="noopener noreferrer">Kubeflow</a>
와 아키텍처, UI 모두 매우 흡사했습니다.</p><p><em>개발자가 같았다면, 세이지메이커가 더 빠르지 않았나 생각해 봅니다(추측)</em></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p>SageMaker는 <a href="https://jwher.github.io/blog-tech-map#amazon-ecs" target="_blank" rel="noopener noreferrer">아마존 ECS</a>
로 다른 AWS 기능을 깊히 사용합니다.(Ex. S3) </p><p>MLOps와 kubeflow, sagemaker, mlflow 그리고 비교 글로 분화해 작성해야 겠습니다.</p><p>MLOps 수명 주기를 최적화하기 위한 핵심 원칙은 다음과 같습니다.</p><ul><li>자동화되고 재현 가능한 ML Workflow 생성</li><li>모델 레지스트리로 모델 관리</li><li>Infrastructure-as-Code 및 CI/CD 파이프라인 사용으로 지속적 전달(Continuous Delivery) 활성화</li><li>모델 성능 및 피드백 정보 모니터링</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://aws.amazon.com/ko/events/seminars/aws-industry-week/" target="_blank" rel="noopener noreferrer">AWS Builders 2021</a><br>
<a href="https://github.com/aws-samples" target="_blank" rel="noopener noreferrer">[깃헙]AWS Samples</a></p>]]></content:encoded>
            <category>tech</category>
            <category>ml</category>
        </item>
        <item>
            <title><![CDATA[Blog Tech Map]]></title>
            <link>https://jwher.github.io/posts/blog-tech-map</link>
            <guid>https://jwher.github.io/posts/blog-tech-map</guid>
            <pubDate>Mon, 23 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[허정원 기술블로그]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="jwher" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpzdmdqcz0iaHR0cDovL3N2Z2pzLmNvbS9zdmdqcyIgd2lkdGg9IjQwMCIgaGVpZ2h0PSI0MDAiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgdmVyc2lvbj0iMS4wIj48cGF0aCBzdHlsZT0iZmlsbDojMDViZjg0IiBkPSJNNDA0LjQyMiAyMTIuNTg0Yy0zLjQ5My0xOC44MzItMi43NDItMzguNzA2IDIuMDM1LTUzLjg3MSA2LjA0LTE4LjY3OSAxNi43NzYtMzUuNTM1IDM2LjgtMzkuNjMzbDMuMDY0LS40NDYuODU4IDE4NC41OTVoMy42NTh2LTE4NC43bDMuNzIuMzg5YzIzLjIyNSAyLjQyNyAzOS43ODYgMjUuNjcgNDMuNDIzIDYwLjk0MiAxLjc1IDQzLjM2OC0yMi4xMzkgMTAwLjk0OS00OS4yNTUgMTM0Ljk3LTIwLjkxMy0zMC41NzUtMzUuNzM3LTY2LjM4OS00NC4zMDMtMTAyLjI0NnptMTQzLjgzMiA1NC44OThjLTE1LjIyNy02LjcxNy0yNS45MDYtMTIuMjExLTMyLjU2NS0xNi43NTMtNi4wOS00LjE1NC0xOC43MjQtMTUuNzk0LTE5LjM3OC0xNy44NTMtLjIxLS42NjQuNjIyLTUuMjEgMS44NS0xMC4xMDQgMi45OTQtMTEuOTIzIDQuMjcxLTIxLjI3NCA0LjM3Ny0zMi4wMjRsLjA4Ny04LjkzMyA2LjQgNi4zNTJjMjAuODggMjAuOTg2IDM0LjQwNyA0Ny45MjQgNDMuMDgyIDc1Ljk3OSAxLjEwNyA0LjM3MiAxLjI0MyA0LjU3NiAzLjIwNiA0Ljc3MiAyLjA0Ni4yMDUgMi4wNS4yIDEuNjEyLTIuMjU4LTcuNzY5LTMxLjA5Ny0yNC4zODQtNTkuMDIxLTQ2LjE1NC04Mi4yNzYtNS44MjEtNS43NDMtOC45NjYtOS4zMTctOC45NjYtMTAuMTg5IDAtMi42NDUtMi4wNjItMTEuNDAzLTQuMTk4LTE3LjgzOC0zLjI4Mi05Ljg4Mi05LjI1Ny0yMS4wNjEtMTMuODI4LTI1Ljg3LS43NTgtLjc5OC0xLjIyNi0xLjQ1MS0xLjA0LTEuNDUxIDEuNTczIDAgMTMuMzkxIDQuMzkgMTcuNzc2IDYuNjAxIDcuNjUgMy44NiAxMi40MzUgNy4xODEgMTcuNzE2IDEyLjI5NyAyLjQ5OCAyLjQxOSA0Ljg3NCA0LjYgNS4yOCA0Ljg0NyAxLjg0NCAxLjEyIDExLjE3NiAxMi43NzggMTUuNzYxIDE5LjY5IDE0LjI4NyAyMS41NCAyMC4yMTggNDEuMzE3IDIxLjYwNiA3Mi4wNDguNDA0IDguOTI4LS41MTggMjUuMDQ1LTEuNTM2IDI2Ljg2NC0uMzIxLjU3NC0zLjQwMS0uNTEtMTEuMDg4LTMuOXptLTIwNi43MiAyLjMzNmMtMS44MjktNS45MTItMi4yNDQtMzEuODg4LS43MTUtNDQuODEgMS44NTMtMTguNTMxIDguMzM5LTM1Ljc2NCAxNy42ODQtNTEuNzY5IDMuMDk3LTQuNjgzIDguMzQtMTMuNzQ1IDE0Ljk4LTE5Ljk2MiA2LjY0Mi02LjIxNyAxNC4zMzItMTAuOTkgMjAuNjI1LTE1LjA5NyA1LjY2NC0zLjY5NSAxNy43OTctOC4xOSAyMC45MjMtOC44OTJsMS45MzUtLjQzNC0xLjM4MyAxLjU0MmMtMi4yNSAyLjUxMi03LjExOSAxMC4zOTEtOC44ODEgMTQuMzc2LTIuNjE3IDUuOTE4LTUuMzQyIDE1LjAzNC02Ljg1IDIyLjkxOGwtMS4zOTggNy4zMDYtOC41NDMgOC40NzFjLTIyLjEyNCAyMi42MTQtMzguMDY4IDUxLjU0NS00NS44NjUgODIuMjI3LS40MiAyLjA5OC0uMzg2IDIuMTM4IDEuNjQ2IDEuOTM1IDEuOTg5LS4xOTggMi4xMjItLjM5MyAzLjIyOC00LjcyMiA3LjkzOC0yOC43MTMgMjMuMjg5LTU0LjYzMiA0My40NDUtNzYuNDA1bDUuNTAzLTUuNDM3LjAzNSAxMC4yNzZjLjA0IDExLjk0NiAxLjA1MSAxOS42MDcgNC4yNzYgMzIuMzk1IDIuNzY4IDEwLjk3NSAzLjA3MSAxMC4wMzctNS41NyAxNy4yMy0xMS4xNDQgOS4yNzQtMjIuMjU4IDE1Ljc3OC00MS45IDI0LjUxOC0xMi4xMzQgNS40LTEyLjc4IDUuNjEyLTEzLjE3NCA0LjMzNHptMjY2LjcyMi01NC43NzFjLTguODgtMS41NjMtMjEuOTg0LTUuMDU0LTM2LjE3NC05LjYzN2wtMTMuMjcxLTQuMjg2LTMuMTMzLTcuNDk2Yy02LjU2NS0xNS43MTMtMTEuMzk1LTIzLjk0Ny0xOS42MzgtMzMuNDg3bC00LjU2Ni01LjI4MyAzLjM5MSAxLjMyNmMyOC4wODMgMTAuNjk5IDUxLjc5IDI5LjA2OCA3MS41MSA1MS40MzFsMi4yNDMgMi43NzQgMS40NDItMS41MzUgMS40NDEtMS41MzUtNC4zMjUtNS4xMWMtMTkuODE2LTIzLjI3My00NS41OTItNDAuMDIzLTczLjk2NC01MC45My02LjQ3MS0yLjE1Ny03LjQzMS0yLjcwNi0xMy4xNjMtNy41MjUtNy41Mi02LjMyMi0xNS4xOTUtMTEuMzk1LTIyLjI4NC0xNC43MjhsLTUuMzE1LTIuNDk4IDUuNDg0LS4xNjVjMTQuODYtLjQ0NiAyNi44MzIgMS4wOTYgMzguNDQ3IDQuOTUzIDE0LjY3MSA0Ljg3MSAzMy4wNjQgMTUuNDE0IDQ0LjkyIDI1Ljc0OCAxMS4wODggOS42NjQgMjIuMjY3IDIzLjk0MiAyOC41NjcgMzYuNDg1IDIuNzI0IDUuNDIzIDYuNzc4IDE2LjE5MiA3LjcxMiAyMC40ODcuNDQ1IDIuMDQ0LjQwMyAyLjA5NS0xLjY5MiAyLjAzNi0xLjE4MS0uMDMzLTQuNjE1LS40OTQtNy42MzItMS4wMjV6bS0zMjQuNzI2LTIuMzAyYy4yMjEtMS4xNTMgMS4zOTYtNC45NzUgMi42MTEtOC40OTQgNy42NDYtMjIuMTQ3IDI1LjE1OC00NC4xMSA0Ni4zMDktNTguMDc4IDE2Ljg3Ni0xMS4xNDQgMzIuMDI2LTE3LjQzIDQ4LjM4Ny0yMC4wNzcgNi44NS0xLjEwOSAyMC45MjQtMS40NCAyNi42OTMtLjYzbDMuNDY3LjQ4Ny00LjQzNSAxLjc4M2MtOC44NjkgMy41NjctMTkuMDY3IDkuNzA3LTI2LjU5NSAxNi4wMTMtMy40MDMgMi44NS01LjY5NiA0LjIxNy04LjM2IDQuOTg3LTMwLjczNyA5Ljk5OS01Ny4zNTUgMjkuMTAyLTc4LjU3NCA1My4yMjRsLTMuNjMgNC40OTQgMS41MjMgMS4yNTEgMS41MjQgMS4yNTIgMi41NDctMy4wMjVjMTcuODAxLTIxLjE4NyA0MC4yNDctMzcuMDYgNjUuMjYtNDguNTkgNC4xMzktMS43NTUgNy42MzctMy4wNzcgNy43NzQtMi45NC4xMzguMTM3LTEuNDEgMi4xMDctMy40MzcgNC4zNzctMTAuMTM4IDExLjM0OC0xOC42MTUgMjUuNTY4LTIxLjQ1OCAzNS45OTQtLjcxNSAyLjYyMy0xLjQyNSA0Ljg5NC0xLjU3OCA1LjA0Ny0uNTk2LjU5Ni0xOS45MTkgNi44MDgtMjguNzAyIDkuMjI3LTkuODY4IDIuNzE3LTI0LjY0IDUuNzk1LTI3LjgxMyA1Ljc5NS0xLjgxNCAwLTEuODk0LS4xMTItMS41MTMtMi4wOTd6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjQ4LjkwMiAxLjI4NykiLz48L3N2Zz48L3N2Zz4=" width="400" height="400" class="img_ev3q">
<em>블로그 사이트맵</em>  </p><h1>목차</h1><ul><li><a href="#%EB%B2%94%EB%A1%80">범례</a></li><li><a href="#%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4">데이터베이스</a></li><li><a href="#%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D%EB%A9%94%EC%8B%9C%EC%A7%80">스트리밍/메시지</a></li><li><a href="#%EB%B9%8C%EB%93%9C">빌드</a></li><li><a href="#cicd">CI/CD</a></li><li><a href="#%EC%98%A4%EC%BC%80%EC%8A%A4%ED%8A%B8%EB%A0%88%EC%9D%B4%EC%85%98">오케스트레이션</a></li><li><a href="#%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%94%94%EC%8A%A4%EC%BB%A4%EB%B2%84%EB%A6%AC">서비스 디스커버리</a></li><li><a href="#rpc">RPC</a></li><li><a href="#%ED%94%84%EB%A1%9D%EC%8B%9C">프록시</a></li><li><a href="#api-%EA%B2%8C%EC%9D%B4%ED%8A%B8%EC%9B%A8%EC%9D%B4">API 게이트웨이</a></li><li><a href="#%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%A9%94%EC%8B%9C">서비스 메시</a></li><li><a href="#%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C-%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80">클라우드 스토리지</a></li><li><a href="#%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EB%9F%B0%ED%83%80%EC%9E%84">컨테이너 런타임</a></li><li><a href="#%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC">클라우드 네트워크</a></li><li><a href="#%EC%9E%90%EB%8F%99%ED%99%94">자동화</a></li><li><a href="#%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EB%A0%88%EC%A7%80%EC%8A%A4%ED%8A%B8%EB%A6%AC">컨테이너 레지스트리</a></li><li><a href="#%EB%B3%B4%EC%95%88">보안</a></li><li><a href="#%ED%82%A4-%EA%B4%80%EB%A6%AC">키 관리</a></li><li><a href="#%EA%B4%80%EC%B8%A1%EC%84%B1">관측성</a></li><li><a href="#%EC%84%9C%EB%B2%84%EB%A6%AC%EC%8A%A4">서버리스</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="범례">범례<a href="#범례" class="hash-link" aria-label="Direct link to 범례" title="Direct link to 범례">​</a></h2><p>CNCF 프로젝트와 블로그에서 다루는 기술을 설명합니다.
CNCF에 대한 개요는 <a href="https://jwher.github.io/cncf" target="_blank" rel="noopener noreferrer">이글</a> 을 참고하세요!</p><ul><li>파란색: 블로그에 작성된 것</li><li>초록색: 잘 알려져 있고, 설명이 필요 없다고 생각하는 것</li><li>빨간색: 사용하고 있지만 잘 알지 못하고 글을 작성해야 하는 것</li><li>노란색: 잘 알지 못하거나 들어봤고 덜 중요한 것</li><li>그외: 사용하지 않고, 모르는 것</li></ul><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="데이터베이스">데이터베이스<a href="#데이터베이스" class="hash-link" aria-label="Direct link to 데이터베이스" title="Direct link to 데이터베이스">​</a></h2><div><img loading="lazy" src="/assets/img/tech/database.png" class="img_ev3q"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mariadb"><a href="https://mariadb.org/" target="_blank" rel="noopener noreferrer">MariaDB</a><a href="#mariadb" class="hash-link" aria-label="Direct link to mariadb" title="Direct link to mariadb">​</a></h3><p><a href="#mysql">MySQL</a>과 같은 코드, 호환성을 유지하는 오픈소스 RDBMS 입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mongodb"><a href="https://www.mongodb.com/" target="_blank" rel="noopener noreferrer">mongoDB</a><a href="#mongodb" class="hash-link" aria-label="Direct link to mongodb" title="Direct link to mongodb">​</a></h3><p>도큐먼트 지향 데이터베이스, NoSQL 중 가장 유명합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mysql"><a href="https://www.mysql.com/" target="_blank" rel="noopener noreferrer">MySQL</a><a href="#mysql" class="hash-link" aria-label="Direct link to mysql" title="Direct link to mysql">​</a></h3><p>세계에서 가장 많이 쓰이는, 오픈 소스 RDBMS 입니다. 오라클에서 관리하고 있습니다.</p><br><blockquote><div><img loading="lazy" src="/assets/img/tech/database-deployment.png" class="img_ev3q"><br><a href="https://web.archive.org/web/20130225171830/http://www.mysql.com/why-mysql/marketshare/" target="_blank" rel="noopener noreferrer">2008 데이터베이스 점유율</a></div></blockquote><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="postgresql"><a href="https://www.postgresql.org/" target="_blank" rel="noopener noreferrer">PostgreSQL</a><a href="#postgresql" class="hash-link" aria-label="Direct link to postgresql" title="Direct link to postgresql">​</a></h3><p>객체-관계형 데이터베이스 시스템(ORDBMS) 입니다.
객체 생성과 상속으로 확장성이 좋습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="redis"><a href="https://redis.io/" target="_blank" rel="noopener noreferrer">redis</a><a href="#redis" class="hash-link" aria-label="Direct link to redis" title="Direct link to redis">​</a></h3><p><em>작성예정</em><br>
<!-- -->REmote DIctionary Service의 약자로, 키-값의 비정형 데이터를 저장하는 오픈소스 DBMS입니다.
모든 데이터를 메모리로 불러와 처리하는 특징이 있습니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="스트리밍메시지">스트리밍/메시지<a href="#스트리밍메시지" class="hash-link" aria-label="Direct link to 스트리밍/메시지" title="Direct link to 스트리밍/메시지">​</a></h2><p align="center"><img loading="lazy" src="/assets/img/tech/streaming-messaging.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nifi"><a href="https://nifi.apache.org/" target="_blank" rel="noopener noreferrer">nifi</a><a href="#nifi" class="hash-link" aria-label="Direct link to nifi" title="Direct link to nifi">​</a></h3><p>NIagara FIles의 약자로, 데이터 흐름의 자동화를 위한 아파치 재단 프로젝트입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="spark"><a href="https://spark.apache.org/" target="_blank" rel="noopener noreferrer">Spark</a><a href="#spark" class="hash-link" aria-label="Direct link to spark" title="Direct link to spark">​</a></h3><p>분산 컴퓨팅 프레임워크입니다.
대규모 데이터 스트리밍 처리에 사용합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kafka"><a href="https://kafka.apache.org/" target="_blank" rel="noopener noreferrer">kafka</a><a href="#kafka" class="hash-link" aria-label="Direct link to kafka" title="Direct link to kafka">​</a></h3><p><em>작성예정</em><br>
<!-- -->메시지 브로커입니다.
실시간, 대규모 처리를 목표하고 있습니다.
소비자와 수신자로 구성되는 Publish/Subscribe 방식입니다.</p><p>관련글</p><ul><li><a href="https://jwher.github.io/kubeflow-visualization-2" target="_blank" rel="noopener noreferrer">Kubeflow 시각화 개발 2편</a>  <br></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rebbitmq"><a href="https://www.rabbitmq.com/" target="_blank" rel="noopener noreferrer">RebbitMQ</a><a href="#rebbitmq" class="hash-link" aria-label="Direct link to rebbitmq" title="Direct link to rebbitmq">​</a></h3><p><em>작성예정</em><br>
<!-- -->메시지 브로커입니다.
Advanced Message Queuing Protocol, AMQP를 구현하였으며 MQTT 등 프로토콜을 지원합니다.
소비자와 수신자로 구성되는 Publish/Subscribe 방식입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="talend"><a href="https://www.talend.com/" target="_blank" rel="noopener noreferrer">talend</a><a href="#talend" class="hash-link" aria-label="Direct link to talend" title="Direct link to talend">​</a></h3><p>Talend 사의 ETL 애플리케이션입니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="빌드">빌드<a href="#빌드" class="hash-link" aria-label="Direct link to 빌드" title="Direct link to 빌드">​</a></h2><p align="center"><img loading="lazy" src="/assets/img/tech/build.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="helm"><a href="https://helm.sh/ko/" target="_blank" rel="noopener noreferrer">HELM</a><a href="#helm" class="hash-link" aria-label="Direct link to helm" title="Direct link to helm">​</a></h3><p>쿠버네티스 패키지 매니저입니다.</p><p>관련글</p><ul><li><a href="https://jwher.github.io/install-helm" target="_blank" rel="noopener noreferrer">Helm: 쿠버네티스 패키지 매니저</a>  <br></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bitnami"><a href="https://bitnami.com/" target="_blank" rel="noopener noreferrer">bitnami</a><a href="#bitnami" class="hash-link" aria-label="Direct link to bitnami" title="Direct link to bitnami">​</a></h3><p>로컬(on-premise)에 소프트웨어 패키지 설치 라이브러리 입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gradle"><a href="https://gradle.org/" target="_blank" rel="noopener noreferrer">Gradle</a><a href="#gradle" class="hash-link" aria-label="Direct link to gradle" title="Direct link to gradle">​</a></h3><p>자바 그루비를 이용한 빌드 자동화 시스템입니다. 안드로이드 앱의 공식 빌드 시스템입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="openapi"><a href="https://www.openapis.org/" target="_blank" rel="noopener noreferrer">OPENAPI</a><a href="#openapi" class="hash-link" aria-label="Direct link to openapi" title="Direct link to openapi">​</a></h3><p>공개된 API로
OpenAPI Specification(<a href="https://swagger.io/" target="_blank" rel="noopener noreferrer">Swagger</a> Specification)을 따릅니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cicd">CI/CD<a href="#cicd" class="hash-link" aria-label="Direct link to CI/CD" title="Direct link to CI/CD">​</a></h2><p align="center"><img loading="lazy" src="/assets/img/tech/ci-cd.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="argo"><a href="https://argoproj.github.io/" target="_blank" rel="noopener noreferrer">argo</a><a href="#argo" class="hash-link" aria-label="Direct link to argo" title="Direct link to argo">​</a></h3><p><em>작성예정</em><br>
<!-- -->오픈소스, 쿠버네티스 동작 워크플로우
GitOps(DevOps)를 위한 CI/CD 도구입니다.</p><p>관련글</p><ul><li><a href="https://jwher.github.io/welcome-to-kubeflow" target="_blank" rel="noopener noreferrer">쿠브플로우: 머신러닝 자동화</a>  <br></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gitlab"><a href="https://about.gitlab.com/" target="_blank" rel="noopener noreferrer">GitLab</a><a href="#gitlab" class="hash-link" aria-label="Direct link to gitlab" title="Direct link to gitlab">​</a></h3><p><em>작성예정</em><br>
<!-- -->Gitlab사가 개발한 웹 기반 Git 저장소입니다.
이슈 추적 시스템(ITS)와 CI/CD 등 DevOps 기능을 갖추었습니다.</p><p>관련글</p><ul><li><a href="https://jwher.github.io/github-issue" target="_blank" rel="noopener noreferrer">깃허브 이슈로 협업하기</a>  <br></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="jenkins"><a href="https://www.jenkins.io/" target="_blank" rel="noopener noreferrer">Jenkins</a><a href="#jenkins" class="hash-link" aria-label="Direct link to jenkins" title="Direct link to jenkins">​</a></h3><p><em>작성예정</em><br>
<!-- -->자바로 작성된 CI 툴입니다.
깃이나 서브버전이 변경되면 배포를 진행하는 자동화 기능과,
빌드 관리 등 다양한 플러그인을 사용합니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="오케스트레이션">오케스트레이션<a href="#오케스트레이션" class="hash-link" aria-label="Direct link to 오케스트레이션" title="Direct link to 오케스트레이션">​</a></h2><p align="center"><img loading="lazy" src="/assets/img/tech/orchestration.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes"><a href="https://kubernetes.io/" target="_blank" rel="noopener noreferrer">Kubernetes</a><a href="#kubernetes" class="hash-link" aria-label="Direct link to kubernetes" title="Direct link to kubernetes">​</a></h3><p>CNCF 첫 프로젝트로 컨테이너화된 애플리케이션을 관리해줍니다.</p><p>관련글</p><ul><li><a href="https://jwher.github.io/welcome-to-kubernetes" target="_blank" rel="noopener noreferrer">쿠버네티스 세계에 오신 걸 환영합니다!</a>  </li><li><a href="https://jwher.github.io/categories#kubernetes" target="_blank" rel="noopener noreferrer">쿠버네티스 카테고리</a><br></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="amazon-ecs"><a href="https://aws.amazon.com/ko/ecs/" target="_blank" rel="noopener noreferrer">Amazon ECS</a><a href="#amazon-ecs" class="hash-link" aria-label="Direct link to amazon-ecs" title="Direct link to amazon-ecs">​</a></h3><p>Elastic Container Service, ECS입니다.
완전관리형 컨테이너 오케스트레이션 서비스로 2015년에 출시되었습니다.
쿠버네티스가 대세가 되며 Elastic Kubernetes Service, EKS를 제공하고 있습니다만,
SageMaker 등 인기 AWS 서비스를 사용하려면 ECS를 사용해야 합니다.<br>
<a href="https://aws.amazon.com/ko/blogs/containers/amazon-ecs-vs-amazon-eks-making-sense-of-aws-container-services/" target="_blank" rel="noopener noreferrer">[공식]Amazon ECS vs Amazon EKS</a></p><p>관련글  </p><ul><li><a href="https://jwher.github.io/sagemaker" target="_blank" rel="noopener noreferrer">SageMaker</a>  <br></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mesos"><a href="http://mesos.apache.org/" target="_blank" rel="noopener noreferrer">MESOS</a><a href="#mesos" class="hash-link" aria-label="Direct link to mesos" title="Direct link to mesos">​</a></h3><p>분산 컴퓨팅 자원(클러스터)을 무중단(fault-tolerant)으로 운영하게 도와줍니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker-swarm"><a href="https://docs.docker.com/engine/swarm/" target="_blank" rel="noopener noreferrer">docker SWARM</a><a href="#docker-swarm" class="hash-link" aria-label="Direct link to docker-swarm" title="Direct link to docker-swarm">​</a></h3><p>클러스터의 도커 엔진들을 하나의 가상 도커 엔진처럼 사용합니다.
도커 1.12 이상부터 도커 엔진에 Swarm 모드가 통합되었습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nomad"><a href="https://www.nomadproject.io/" target="_blank" rel="noopener noreferrer">Nomad</a><a href="#nomad" class="hash-link" aria-label="Direct link to nomad" title="Direct link to nomad">​</a></h3><p>비 중앙화된 애플리케이션을 on-premise 부터 cloud 까지 스케일링하는 컨테이너 관리 도구입니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="서비스-디스커버리">서비스 디스커버리<a href="#서비스-디스커버리" class="hash-link" aria-label="Direct link to 서비스 디스커버리" title="Direct link to 서비스 디스커버리">​</a></h2><p align="center"><img loading="lazy" src="/assets/img/tech/service-discovery.png" class="img_ev3q"></p><p><a href="https://bcho.tistory.com/1252" target="_blank" rel="noopener noreferrer">[조대협]MSA에서 Service discovery 패턴</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="coredns"><a href="https://coredns.io/" target="_blank" rel="noopener noreferrer">CoreDNS</a><a href="#coredns" class="hash-link" aria-label="Direct link to coredns" title="Direct link to coredns">​</a></h3><p><em>작성예정</em><br>
<!-- -->Go로 작성된 서비스 디스커버리입니다.
쿠버네티스 플러그인으로 <code>resource_name.namespace.resource</code>와 같이 DNS를 사용할 수 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="etcd"><a href="https://etcd.io" target="_blank" rel="noopener noreferrer">etcd</a><a href="#etcd" class="hash-link" aria-label="Direct link to etcd" title="Direct link to etcd">​</a></h3><p><em>작성예정</em><br>
<!-- -->중요한(critical) 데이터의 분산 키-값 저장소 입니다.
<a href="#kubernetes">쿠버네티스</a>, <a href="#rook">ROOK</a>, <a href="#coredns">CoreDNS</a>에 사용됩니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="zookeeper"><a href="https://zookeeper.apache.org/" target="_blank" rel="noopener noreferrer">ZooKeeper</a><a href="#zookeeper" class="hash-link" aria-label="Direct link to zookeeper" title="Direct link to zookeeper">​</a></h3><p><em>작성예정</em><br>
<!-- -->하둡의 하위 프로젝트로 하둡 에코시스템 관리를 위해 만들어졌습니다.
현재는 독립적인 상위 프로젝트로써, 중복(redundant) 서비스로 고가용성을 지원합니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rpc">RPC<a href="#rpc" class="hash-link" aria-label="Direct link to RPC" title="Direct link to RPC">​</a></h2><p align="center"><img loading="lazy" src="/assets/img/tech/rpc.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="grpc"><a href="https://grpc.io/" target="_blank" rel="noopener noreferrer">gRPC</a><a href="#grpc" class="hash-link" aria-label="Direct link to grpc" title="Direct link to grpc">​</a></h3><p><em>작성예정</em><br>
<!-- -->HTTP/2, Protocol Buffer를 사용해 고성능의 RPC를 지원합니다.
단 REST와 달리 protobuf로 직렬화(serialize)되어 사람이 알아보기 힘듭니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="프록시">프록시<a href="#프록시" class="hash-link" aria-label="Direct link to 프록시" title="Direct link to 프록시">​</a></h2><p align="center"><img loading="lazy" src="/assets/img/tech/proxy.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="envoy"><a href="https://www.envoyproxy.io/" target="_blank" rel="noopener noreferrer">envoy</a><a href="#envoy" class="hash-link" aria-label="Direct link to envoy" title="Direct link to envoy">​</a></h3><p>오픈소스, 클라우드 네이티브 앱을 위한 서비스 프록시 입니다.</p><p>관련글  </p><ul><li><a href="https://jwher.github.io/envoy" target="_blank" rel="noopener noreferrer">Envoy proxy: 대규모 서비스를 위한 L7 프록시</a>  <br></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nginx"><a href="https://www.nginx.com/" target="_blank" rel="noopener noreferrer">NGINX</a><a href="#nginx" class="hash-link" aria-label="Direct link to nginx" title="Direct link to nginx">​</a></h3><p><em>작성예정</em><br>
<!-- -->고성능의 로드밸런서 입니다.
아파치 HTTP 서버의 스레드 기반과 다르게 비동기 이벤트 기반 구조를 가집니다.
아파치보다 좋은 성능을 보여주며 대체해 나가고 있습니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="api-게이트웨이">API 게이트웨이<a href="#api-게이트웨이" class="hash-link" aria-label="Direct link to API 게이트웨이" title="Direct link to API 게이트웨이">​</a></h2><p align="center"><img loading="lazy" src="/assets/img/tech/api-gateway.png" class="img_ev3q"></p><p>(이 단락은 공백입니다)</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="서비스-메시">서비스 메시<a href="#서비스-메시" class="hash-link" aria-label="Direct link to 서비스 메시" title="Direct link to 서비스 메시">​</a></h2><p align="center"><img loading="lazy" src="/assets/img/tech/service-mesh.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="istio"><a href="https://istio.io/" target="_blank" rel="noopener noreferrer">Istio</a><a href="#istio" class="hash-link" aria-label="Direct link to istio" title="Direct link to istio">​</a></h3><p>관측성, 트래픽 관리, 보안, 정책을 쉽게 관리하는 서비스 메시 입니다.</p><p>관련글  </p><ul><li><a href="https://jwher.github.io/istio" target="_blank" rel="noopener noreferrer">Istio: 서비스 메시</a>  <br></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="클라우드-스토리지">클라우드 스토리지<a href="#클라우드-스토리지" class="hash-link" aria-label="Direct link to 클라우드 스토리지" title="Direct link to 클라우드 스토리지">​</a></h2><p align="center"><img loading="lazy" src="/assets/img/tech/cloud-storage.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rook"><a href="https://rook.io/" target="_blank" rel="noopener noreferrer">ROOK</a><a href="#rook" class="hash-link" aria-label="Direct link to rook" title="Direct link to rook">​</a></h3><p>쿠버네티스를 위한 오픈소스 오브젝트 스토리지로
자가 관리, 자가 확장, 자가 치유를 하는 분산 저장소입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="arrikto"><a href="https://www.arrikto.com/" target="_blank" rel="noopener noreferrer">Arrikto</a><a href="#arrikto" class="hash-link" aria-label="Direct link to arrikto" title="Direct link to arrikto">​</a></h3><p>ML 모델을 시장에 사용할 수 있는 것을 돕는 회사입니다.
Kubeflow의 MLOps 잠재력으로 데이터 과학자가 빠르고 효과적으로 작업하도록 돕습니다.
대표 제품으로 MiniKF가 있습니다.<br>
<em>Arrikto는 그리스어로 "unbreakable"이라는 뜻입니다(출처필요)</em></p><p>관련글  </p><ul><li><a href="https://jwher.github.io/install-kubeflow#%EB%B2%88%EC%99%B8-minikf" target="_blank" rel="noopener noreferrer">MiniKF</a><br></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ceph"><a href="https://ceph.io/en/" target="_blank" rel="noopener noreferrer">ceph</a><a href="#ceph" class="hash-link" aria-label="Direct link to ceph" title="Direct link to ceph">​</a></h3><p>모든 조직을 위해 신뢰할 수 있고 확장 가능하게 설계된 스토리지입니다.
데이터 레플리카를 사용해 내결함성(fault-tolerant)으로 설계되었습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hitachi"><a href="https://www.hitachi.com/" target="_blank" rel="noopener noreferrer">HITACHI</a><a href="#hitachi" class="hash-link" aria-label="Direct link to hitachi" title="Direct link to hitachi">​</a></h3><p>일본의 다국적 회사입니다.
AI, IOT, 빅데이터, 인프라 IT 사업을 하고 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="huawei"><a href="https://www.huawei.com/kr/" target="_blank" rel="noopener noreferrer">HUAWEI</a><a href="#huawei" class="hash-link" aria-label="Direct link to huawei" title="Direct link to huawei">​</a></h3><p>중국의 다국적 회사입니다.
통신장비 제조로 시작해, 현재는 정보 통신 기술(ITC) 솔루션 선두 기업입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ibm"><a href="https://www.ibm.com/kr-ko" target="_blank" rel="noopener noreferrer">IBM</a><a href="#ibm" class="hash-link" aria-label="Direct link to ibm" title="Direct link to ibm">​</a></h3><p>International Business Machines Corporation,
미국의 다국적 회사입니다.
하드웨어(메인프레임)부터 글로벌 기술 지원까지, 고부가가치 사업을 지향하며 확장했습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="minio"><a href="https://min.io/" target="_blank" rel="noopener noreferrer">MINIO</a><a href="#minio" class="hash-link" aria-label="Direct link to minio" title="Direct link to minio">​</a></h3><p>고성능 클라우드 오프젝트 스토리지로,
아마존 S3와 호환성을 두고 설계된 쿠버네티스 네이티브 스토리지입니다.</p><p>관련글  </p><ul><li><a href="https://jwher.github.io/minio" target="_blank" rel="noopener noreferrer">minIO 오브젝트 스토리지</a><br></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="컨테이너-런타임">컨테이너 런타임<a href="#컨테이너-런타임" class="hash-link" aria-label="Direct link to 컨테이너 런타임" title="Direct link to 컨테이너 런타임">​</a></h2><p align="center"><img loading="lazy" src="/assets/img/tech/container-runtime.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="containerd"><a href="https://containerd.io/" target="_blank" rel="noopener noreferrer">containerd</a><a href="#containerd" class="hash-link" aria-label="Direct link to containerd" title="Direct link to containerd">​</a></h3><p><em>작성예정</em><br>
<!-- -->산업 표준 컨테이너 런타임으로 단순성, 강건성(robustness), 호환성(portability)를 강조합니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="클라우드-네트워크">클라우드 네트워크<a href="#클라우드-네트워크" class="hash-link" aria-label="Direct link to 클라우드 네트워크" title="Direct link to 클라우드 네트워크">​</a></h2><p align="center"><img loading="lazy" src="/assets/img/tech/cloud-network.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="flannel"><a href="https://github.com/flannel-io/flannel/tree/master/Documentation" target="_blank" rel="noopener noreferrer">flannel</a><a href="#flannel" class="hash-link" aria-label="Direct link to flannel" title="Direct link to flannel">​</a></h3><p><em>작성예정</em><br>
<!-- -->Layer3(ip) 네트워크 패브릭을 간단하게 설정하는 방법으로 쿠버네티스를 위해 디자인됬습니다. </p><p>관련글  </p><ul><li><a href="https://jwher.github.io/install-kubernetes#kubeadm-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0" target="_blank" rel="noopener noreferrer">Kubeadm 설치하기</a><br></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="자동화">자동화<a href="#자동화" class="hash-link" aria-label="Direct link to 자동화" title="Direct link to 자동화">​</a></h2><p align="center"><img loading="lazy" src="/assets/img/tech/automation.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ansible"><a href="https://www.ansible.com/" target="_blank" rel="noopener noreferrer">ANSIBLE</a><a href="#ansible" class="hash-link" aria-label="Direct link to ansible" title="Direct link to ansible">​</a></h3><p><em>작성예정</em><br>
<!-- -->오픈소스 설정 프로비저닝, 앱 배포를 코드로(infrastructure as code) 관리합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="openstack"><a href="https://www.openstack.org/" target="_blank" rel="noopener noreferrer">openstack</a><a href="#openstack" class="hash-link" aria-label="Direct link to openstack" title="Direct link to openstack">​</a></h3><p>개방형 표준 클라우드 컴퓨팅 플랫폼으로,
가장 많이 배포된 Infrastructure-as-a-Service(IaaS) 입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="vmware"><a href="https://www.vmware.com/" target="_blank" rel="noopener noreferrer">vmware</a><a href="#vmware" class="hash-link" aria-label="Direct link to vmware" title="Direct link to vmware">​</a></h3><p>클라우드 컴퓨팅 및 가상화 소프트웨어를 판매하는 기업입니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="컨테이너-레지스트리">컨테이너 레지스트리<a href="#컨테이너-레지스트리" class="hash-link" aria-label="Direct link to 컨테이너 레지스트리" title="Direct link to 컨테이너 레지스트리">​</a></h2><p align="center"><img loading="lazy" src="/assets/img/tech/container-registry.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="harbor"><a href="https://goharbor.io/" target="_blank" rel="noopener noreferrer">HARBOR</a><a href="#harbor" class="hash-link" aria-label="Direct link to harbor" title="Direct link to harbor">​</a></h3><p>쿠버네티스를 위한 신뢰할 수 있는 클라우드 네이티브 레포지토리를 목표로 만들어졌습니다.
<a href="#notary">notary</a>, <a href="#trivy">trivy</a>를 포함합니다.</p><p>관련글  </p><ul><li><a href="https://jwher.github.io/install-harbor" target="_blank" rel="noopener noreferrer">쿠버네티스에 Harbor 설치하기</a><br></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kraken"><a href="https://eng.uber.com/introducing-kraken/" target="_blank" rel="noopener noreferrer">Kraken</a><a href="#kraken" class="hash-link" aria-label="Direct link to kraken" title="Direct link to kraken">​</a></h3><p>우버에서 만든 오픈소스 p2p 도커 레지스트리 입니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="보안">보안<a href="#보안" class="hash-link" aria-label="Direct link to 보안" title="Direct link to 보안">​</a></h2><p align="center"><img loading="lazy" src="/assets/img/tech/security.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="notary"><a href="https://github.com/notaryproject/notary" target="_blank" rel="noopener noreferrer">notary</a><a href="#notary" class="hash-link" aria-label="Direct link to notary" title="Direct link to notary">​</a></h3><p><em>작성예정</em>  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dex"><a href="https://dexidp.io" target="_blank" rel="noopener noreferrer">dex</a><a href="#dex" class="hash-link" aria-label="Direct link to dex" title="Direct link to dex">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="trivy"><a href="https://aquasecurity.github.io/trivy/v0.28.1/" target="_blank" rel="noopener noreferrer">trivy</a><a href="#trivy" class="hash-link" aria-label="Direct link to trivy" title="Direct link to trivy">​</a></h3><p><em>작성예정</em>  </p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="키-관리">키 관리<a href="#키-관리" class="hash-link" aria-label="Direct link to 키 관리" title="Direct link to 키 관리">​</a></h2><p align="center"><img loading="lazy" src="/assets/img/tech/key-management.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="oauth2"><a href="https://oauth.net/2/" target="_blank" rel="noopener noreferrer">OAuth2</a><a href="#oauth2" class="hash-link" aria-label="Direct link to oauth2" title="Direct link to oauth2">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="vault"><a href="https://www.vaultproject.io" target="_blank" rel="noopener noreferrer">Vault</a><a href="#vault" class="hash-link" aria-label="Direct link to vault" title="Direct link to vault">​</a></h3><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="관측성">관측성<a href="#관측성" class="hash-link" aria-label="Direct link to 관측성" title="Direct link to 관측성">​</a></h2><p align="center"><img loading="lazy" src="/assets/img/tech/observability.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prometheus"><a href="https://prometheus.io" target="_blank" rel="noopener noreferrer">Prometheus</a><a href="#prometheus" class="hash-link" aria-label="Direct link to prometheus" title="Direct link to prometheus">​</a></h3><p><em>작성예정</em>  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="thanos"><a href="https://thanos.io" target="_blank" rel="noopener noreferrer">Thanos</a><a href="#thanos" class="hash-link" aria-label="Direct link to thanos" title="Direct link to thanos">​</a></h3><p><em>작성예정</em>  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gradle-1"><a href="#gradle">Gradle</a><a href="#gradle-1" class="hash-link" aria-label="Direct link to gradle-1" title="Direct link to gradle-1">​</a></h3><p><em>상위 항목과 중복</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="grafana"><a href="https://grafana.com" target="_blank" rel="noopener noreferrer">Grafana</a><a href="#grafana" class="hash-link" aria-label="Direct link to grafana" title="Direct link to grafana">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kiali"><a href="https://kiali.io" target="_blank" rel="noopener noreferrer">kiali</a><a href="#kiali" class="hash-link" aria-label="Direct link to kiali" title="Direct link to kiali">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="elastic"><a href="https://www.elastic.co/kr/" target="_blank" rel="noopener noreferrer">elastic</a><a href="#elastic" class="hash-link" aria-label="Direct link to elastic" title="Direct link to elastic">​</a></h3><p><em>작성예정</em>  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="logstash"><a href="https://www.elastic.co/kr/logstash/" target="_blank" rel="noopener noreferrer">logstash</a><a href="#logstash" class="hash-link" aria-label="Direct link to logstash" title="Direct link to logstash">​</a></h3><p><em>작성예정</em>  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="zipkin"><a href="https://zipkin.io" target="_blank" rel="noopener noreferrer">ZIPKIN</a><a href="#zipkin" class="hash-link" aria-label="Direct link to zipkin" title="Direct link to zipkin">​</a></h3><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="서버리스">서버리스<a href="#서버리스" class="hash-link" aria-label="Direct link to 서버리스" title="Direct link to 서버리스">​</a></h2><p align="center"><img loading="lazy" src="/assets/img/tech/serverless.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aws-lambda"><a href="https://aws.amazon.com/ko/lambda/" target="_blank" rel="noopener noreferrer">AWS Lambda</a><a href="#aws-lambda" class="hash-link" aria-label="Direct link to aws-lambda" title="Direct link to aws-lambda">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="knative"><a href="https://knative.dev/docs/" target="_blank" rel="noopener noreferrer">Knative</a><a href="#knative" class="hash-link" aria-label="Direct link to knative" title="Direct link to knative">​</a></h3><p><em>작성예정</em>  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kubeless"><a href="https://github.com/vmware-archive/kubeless" target="_blank" rel="noopener noreferrer">Kubeless</a><a href="#kubeless" class="hash-link" aria-label="Direct link to kubeless" title="Direct link to kubeless">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nuclio"><a href="https://nuclio.io" target="_blank" rel="noopener noreferrer">nuclio</a><a href="#nuclio" class="hash-link" aria-label="Direct link to nuclio" title="Direct link to nuclio">​</a></h3><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://ko.wikipedia.org/" target="_blank" rel="noopener noreferrer">한국어 위키피디아</a>  </p>]]></content:encoded>
            <category>blog</category>
            <category>tech</category>
        </item>
        <item>
            <title><![CDATA[Cncf]]></title>
            <link>https://jwher.github.io/posts/cncf</link>
            <guid>https://jwher.github.io/posts/cncf</guid>
            <pubDate>Mon, 23 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[CNCF: Cloud Native Computing Foundation]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="cncf" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHJvbGU9ImltZyIgdmlld0JveD0iMC42MCAtMC45MCAzNTguNTQgMjYwLjc5Ij48c3R5bGU+c3ZnIHtlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM2MCAyNjAuOTg2OTM4NX08L3N0eWxlPjxzdHlsZT4uc3Qwe2ZpbGw6IzIzMWYyMH0uc3Qxe2ZpbGw6IzQ0NmNhOX0uc3Qye2ZpbGw6Izc2YzRkNX08L3N0eWxlPjxnIGlkPSJYTUxJRF85NF8iPjxwYXRoIGlkPSJYTUxJRF82MzNfIiBkPSJNMjQuODIzIDIxNi4zMzljMy40NzIgMCA2LjMxLTEuMzc0IDguNTE0LTQuMTIybDQuNTI5IDQuNjY1Yy0zLjU5MyA0LjA0Ni03LjgyOCA2LjA2OC0xMi43MDMgNi4wNjgtNC44NzYgMC04Ljg5MS0xLjUzOS0xMi4wNDYtNC42MTktMy4xNTYtMy4wOC00LjczMy02Ljk2Ni00LjczMy0xMS42NjEgMC00LjY5NCAxLjYwOC04LjYxMSA0LjgyMy0xMS43NTIgMy4yMTYtMy4xNCA3LjE0OC00LjcxIDExLjc5OC00LjcxIDUuMTkyIDAgOS41NCAxLjk3OCAxMy4wNDIgNS45MzNsLTQuMzkzIDQuOTgyYy0yLjIzNC0yLjc3OC01LjAxMS00LjE2Ny04LjMzMi00LjE2Ny0yLjY1OCAwLTQuOTMuODY4LTYuODE2IDIuNjA0LTEuODg4IDEuNzM3LTIuODMgNC4wNzYtMi44MyA3LjAycy44OSA1LjMwNiAyLjY3MiA3LjA4N2MxLjc4IDEuNzgyIDMuOTQgMi42NzIgNi40NzUgMi42NzJ6IiBjbGFzcz0ic3QwIi8+PHBhdGggaWQ9IlhNTElEXzYzMV8iIGQ9Ik00My40MzYgMjIyLjU4OHYtMzEuNjU1aDcuMDY1djI1LjM2aDEzLjQ5NXY2LjI5NWgtMjAuNTZ6IiBjbGFzcz0ic3QwIi8+PHBhdGggaWQ9IlhNTElEXzYyOF8iIGQ9Ik05NC45MjcgMjE4LjIxOGMtMy4yIDMuMTI1LTcuMTQgNC42ODctMTEuODIgNC42ODctNC42OCAwLTguNjItMS41NjItMTEuODItNC42ODctMy4yLTMuMTI1LTQuOC03LjAxMS00LjgtMTEuNjYgMC00LjY1IDEuNi04LjUzNyA0LjgtMTEuNjYyIDMuMi0zLjEyNSA3LjE0LTQuNjg3IDExLjgyLTQuNjg3IDQuNjggMCA4LjYyIDEuNTYyIDExLjgyIDQuNjg3IDMuMiAzLjEyNSA0LjggNy4wMTIgNC44IDExLjY2MSAwIDQuNjUtMS42IDguNTM2LTQuOCAxMS42NjF6bS0yLjQtMTEuNjM5YzAtMi44MjItLjkwNi01LjIzLTIuNzE4LTcuMjIzLTEuODEtMS45OTItNC4wMzgtMi45ODktNi42OC0yLjk4OS0yLjY0MiAwLTQuODY4Ljk5Ny02LjY3OSAyLjk5LTEuODEyIDEuOTkyLTIuNzE4IDQuNC0yLjcxOCA3LjIyMiAwIDIuODI0LjkwNiA1LjIyNCAyLjcxOCA3LjIwMSAxLjgxMSAxLjk3OCA0LjAzNyAyLjk2NiA2LjY4IDIuOTY2IDIuNjQxIDAgNC44NjgtLjk4OCA2LjY4LTIuOTY2IDEuODEtMS45NzcgMi43MTYtNC4zNzcgMi43MTYtNy4yeiIgY2xhc3M9InN0MCIvPjxwYXRoIGlkPSJYTUxJRF82MjZfIiBkPSJNMTE0LjA4MiAyMTQuNDE0YzEuMTc4IDEuNDY1IDIuNzYzIDIuMTk3IDQuNzU0IDIuMTk3IDEuOTk0IDAgMy41NzEtLjczMiA0LjczNC0yLjE5NyAxLjE2MS0xLjQ2NCAxLjc0NC0zLjQ2NCAxLjc0NC02di0xNy40OGg3LjA2NHYxNy43MDZjMCA0LjU5LTEuMjY5IDguMTE0LTMuODAzIDEwLjU3NC0yLjUzNyAyLjQ2MS01Ljc4MyAzLjY5LTkuNzM5IDMuNjktMy45NTQgMC03LjIwNy0xLjIzNi05Ljc1OC0zLjcxMi0yLjU1Mi0yLjQ3NS0zLjgyNy01Ljk5My0zLjgyNy0xMC41NTJ2LTE3LjcwN2g3LjA2NXYxNy40OGMwIDIuNTM3LjU4OSA0LjUzNyAxLjc2NiA2LjAwMXoiIGNsYXNzPSJzdDAiLz48cGF0aCBpZD0iWE1MSURfNjIzXyIgZD0iTTE2My44OTcgMTk1LjA3N2MzLjAxOCAyLjc2MiA0LjUyOSA2LjYwNCA0LjUyOSAxMS41MjVzLTEuNDczIDguODE2LTQuNDE2IDExLjY4NGMtMi45NDMgMi44NjktNy40MzUgNC4zMDItMTMuNDczIDQuMzAyaC0xMC44MjR2LTMxLjY1NUgxNTAuOWM1LjY0NSAwIDkuOTc3IDEuMzgxIDEyLjk5NyA0LjE0NHptLTUuMTg2IDE4LjgxNmMxLjczNi0xLjYzIDIuNjA0LTQgMi42MDQtNy4xMSAwLTMuMTA5LS44NjgtNS41MDItMi42MDQtNy4xNzctMS43MzYtMS42NzYtNC40LTIuNTE0LTcuOTkyLTIuNTE0aC0zLjk0djE5LjI0N2g0LjQ4M2MzLjIzIDAgNS43MTMtLjgxNiA3LjQ1LTIuNDQ2eiIgY2xhc3M9InN0MCIvPjxwYXRoIGlkPSJYTUxJRF82MjFfIiBkPSJNMjA4LjY0IDE5MC45MzNoNy4wNjV2MzEuNjU1aC03LjA2NWwtMTUuMDgtMTkuODM1djE5LjgzNWgtNy4wNjV2LTMxLjY1NWg2LjYxMWwxNS41MzQgMjAuMzc5di0yMC4zNzl6IiBjbGFzcz0ic3QwIi8+PHBhdGggaWQ9IlhNTElEXzYxOF8iIGQ9Ik0yNDYuMDQ2IDIyMi41ODhsLTIuOTQ0LTYuODM4aC0xMy4yN2wtMi45NDIgNi44MzhoLTcuNTE4bDEzLjY3Ny0zMS42NTVoNi44MzdsMTMuNjc4IDMxLjY1NWgtNy41MTh6bS05LjU1NS0yMi4yMzVsLTMuOTg2IDkuMTkzaDcuOTI2bC0zLjk0LTkuMTkzeiIgY2xhc3M9InN0MCIvPjxwYXRoIGlkPSJYTUxJRF82MTZfIiBkPSJNMjY4LjMyNyAxOTcuMDQ3djI1LjU0MWgtNy4wNjV2LTI1LjU0MWgtOC45Njd2LTYuMTE0aDI0Ljk5OHY2LjExNGgtOC45NjZ6IiBjbGFzcz0ic3QwIi8+PHBhdGggaWQ9IlhNTElEXzYxNF8iIGQ9Ik0yODIuNDU1IDE5MC45MzNoNy4wNjV2MzEuNjU1aC03LjA2NXYtMzEuNjU1eiIgY2xhc3M9InN0MCIvPjxwYXRoIGlkPSJYTUxJRF82MTJfIiBkPSJNMzA4Ljk5MyAyMTEuMDg2bDguMDYtMjAuMTUzaDcuNjU1bC0xMi43MjYgMzEuNjU1aC01Ljk3N2wtMTIuNzI3LTMxLjY1NWg3LjY1NWw4LjA2IDIwLjE1M3oiIGNsYXNzPSJzdDAiLz48cGF0aCBpZD0iWE1MSURfNjEwXyIgZD0iTTM1MS4yOSAxOTAuOTMzdjYuMjk1aC0xNS43NnY2LjUyMWgxNC4xNzV2Ni4wMjNoLTE0LjE3NHY2LjU2N2gxNi4yNTd2Ni4yNWgtMjMuMzIzdi0zMS42NTZoMjIuODI1eiIgY2xhc3M9InN0MCIvPjxwYXRoIGlkPSJYTUxJRF82MDhfIiBkPSJNMTYuNzI0IDI0OS41NDhjMS45NDYgMCAzLjUzNi0uNzcgNC43NzItMi4zMWwyLjUzOSAyLjYxNGMtMi4wMTUgMi4yNjgtNC4zODggMy40MDEtNy4xMjEgMy40MDFzLTQuOTg0LS44NjItNi43NTItMi41OWMtMS43NjktMS43MjUtMi42NTMtMy45MDQtMi42NTMtNi41MzUgMC0yLjYzMi45LTQuODI4IDIuNzAzLTYuNTg4IDEuODAzLTEuNzYgNC4wMDctMi42NCA2LjYxMy0yLjY0IDIuOTEgMCA1LjM0OCAxLjEwOSA3LjMxMSAzLjMyNmwtMi40NjIgMi43OTJjLTEuMjUzLTEuNTU3LTIuODEtMi4zMzYtNC42NzEtMi4zMzYtMS40OSAwLTIuNzYzLjQ4Ny0zLjgyIDEuNDYtMS4wNTkuOTc0LTEuNTg3IDIuMjg1LTEuNTg3IDMuOTM1cy40OTkgMi45NzUgMS40OTggMy45NzJjLjk5OCAxIDIuMjA4IDEuNDk5IDMuNjMgMS40OTl6IiBjbGFzcz0ic3QwIi8+PHBhdGggaWQ9IlhNTElEXzYwNV8iIGQ9Ik00MS43MDIgMjUwLjZjLTEuNzkzIDEuNzUyLTQuMDAyIDIuNjI5LTYuNjI1IDIuNjI5cy00LjgzMi0uODc3LTYuNjI2LTIuNjI5Yy0xLjc5NC0xLjc1LTIuNjktMy45My0yLjY5LTYuNTM1IDAtMi42MDcuODk2LTQuNzg2IDIuNjktNi41MzcgMS43OTQtMS43NTIgNC4wMDMtMi42MjggNi42MjYtMi42MjhzNC44MzIuODc2IDYuNjI1IDIuNjI4YzEuNzk0IDEuNzUgMi42OTEgMy45MyAyLjY5MSA2LjUzNyAwIDIuNjA2LS44OTcgNC43ODQtMi42OSA2LjUzNXptLTEuMzQ1LTYuNTIzYzAtMS41ODItLjUwOC0yLjkzMi0xLjUyMy00LjA1LTEuMDE2LTEuMTE2LTIuMjY0LTEuNjc0LTMuNzQ1LTEuNjc0LTEuNDggMC0yLjcyOS41NTgtMy43NDQgMS42NzUtMS4wMTUgMS4xMTctMS41MjMgMi40NjctMS41MjMgNC4wNDlzLjUwOCAyLjkyOCAxLjUyMyA0LjAzNmMxLjAxNSAxLjEwOSAyLjI2MyAxLjY2MiAzLjc0NCAxLjY2MiAxLjQ4MSAwIDIuNzMtLjU1MyAzLjc0NS0xLjY2MiAxLjAxNS0xLjEwOCAxLjUyMy0yLjQ1MyAxLjUyMy00LjAzNnoiIGNsYXNzPSJzdDAiLz48cGF0aCBpZD0iWE1MSURfNjAzXyIgZD0iTTYzLjYzNSAyNDEuODhsLTQuNzk4IDkuNjk4aC0yLjM2bC00Ljc3My05LjY5N3YxMS4xN2gtMy45NnYtMTcuNzQ1SDUzLjFsNC41NyA5Ljc0OCA0LjU5NS05Ljc0OGg1LjMzdjE3Ljc0NWgtMy45NnYtMTEuMTd6IiBjbGFzcz0ic3QwIi8+PHBhdGggaWQ9IlhNTElEXzYwMF8iIGQ9Ik04NC4xODQgMjM2Ljg5M2MxLjI0NCAxLjA1OCAxLjg2NiAyLjY4MiAxLjg2NiA0Ljg3NCAwIDIuMTkxLS42MzggMy43OTUtMS45MTYgNC44MS0xLjI3OCAxLjAxNi0zLjIyOCAxLjUyMy01Ljg1MSAxLjUyM2gtMi4zNjF2NC45NWgtMy45NnYtMTcuNzQ0aDYuMjdjMi43MjQgMCA0LjcwOS41MjkgNS45NTIgMS41ODd6bS0yLjkwNiA2Ljk4MWMuNDczLS41MzQuNzEtMS4zMTIuNzEtMi4zMzYgMC0xLjAyMy0uMzA4LTEuNzUyLS45MjYtMi4xODItLjYxOC0uNDMyLTEuNTc4LS42NDktMi44ODEtLjY0OWgtMi4yNnY1Ljk2NmgyLjY2NmMxLjMyIDAgMi4yMTctLjI2NiAyLjY5MS0uNzk5eiIgY2xhc3M9InN0MCIvPjxwYXRoIGlkPSJYTUxJRF81OThfIiBkPSJNOTMuODQzIDI0OC40NjljLjY2LjgyIDEuNTQ5IDEuMjMgMi42NjYgMS4yM3MyLS40MSAyLjY1My0xLjIzYy42NTEtLjgyMS45NzctMS45NDMuOTc3LTMuMzY0di05Ljc5OWgzLjk2djkuOTI2YzAgMi41NzMtLjcxIDQuNTQ5LTIuMTMyIDUuOTI3LTEuNDIyIDEuMzgtMy4yNDEgMi4wNy01LjQ1OCAyLjA3cy00LjA0LS42OTQtNS40Ny0yLjA4MmMtMS40My0xLjM4OC0yLjE0Ni0zLjM2LTIuMTQ2LTUuOTE1di05LjkyNmgzLjk2djkuNzk5YzAgMS40MjEuMzMgMi41NDMuOTkgMy4zNjR6IiBjbGFzcz0ic3QwIi8+PHBhdGggaWQ9IlhNTElEXzU5Nl8iIGQ9Ik0xMTUuNzI1IDIzOC43MzN2MTQuMzE4aC0zLjk2di0xNC4zMThoLTUuMDI2di0zLjQyN2gxNC4wMTN2My40MjdoLTUuMDI3eiIgY2xhc3M9InN0MCIvPjxwYXRoIGlkPSJYTUxJRF81OTRfIiBkPSJNMTIzLjY0NSAyMzUuMzA2aDMuOTYxdjE3Ljc0NWgtMy45NnYtMTcuNzQ1eiIgY2xhc3M9InN0MCIvPjxwYXRoIGlkPSJYTUxJRF81OTJfIiBkPSJNMTQ0LjM4NSAyMzUuMzA2aDMuOTZ2MTcuNzQ1aC0zLjk2bC04LjQ1NC0xMS4xMnYxMS4xMmgtMy45NnYtMTcuNzQ1aDMuNzA3bDguNzA3IDExLjQyNHYtMTEuNDI0eiIgY2xhc3M9InN0MCIvPjxwYXRoIGlkPSJYTUxJRF81OTBfIiBkPSJNMTY0LjIzNiAyNDQuMDE0aDMuOTg1djYuMjk1Yy0xLjc2IDEuOTYzLTQuMTk3IDIuOTQ0LTcuMzExIDIuOTQ0LTIuNjA3IDAtNC43OTMtLjg2Mi02LjU2Mi0yLjU5LTEuNzY5LTEuNzI1LTIuNjUzLTMuOTA0LTIuNjUzLTYuNTM1IDAtMi42MzIuOTAyLTQuODI4IDIuNzA0LTYuNTg4IDEuODAyLTEuNzYgMy45NzYtMi42NCA2LjUyNC0yLjY0IDIuNTQ2IDAgNC43Ni44MzggNi42MzggMi41MTNsLTIuMDU2IDIuOTdjLS43OTYtLjY5My0xLjUyOC0xLjE3LTIuMTk2LTEuNDM0YTUuODk0IDUuODk0IDAgMCAwLTIuMTctLjM5M2MtMS41MDcgMC0yLjc3Ni41MTEtMy44MDggMS41MzUtMS4wMzIgMS4wMjUtMS41NDggMi4zNzMtMS41NDggNC4wNSAwIDEuNjc1LjQ5NCAzLjAxNyAxLjQ4NCA0LjAyMy45OSAxLjAwNyAyLjE3IDEuNTEgMy41NDIgMS41MSAxLjM3IDAgMi41MTItLjI2MiAzLjQyNy0uNzg2di00Ljg3NHoiIGNsYXNzPSJzdDAiLz48cGF0aCBpZD0iWE1MSURfNTg4XyIgZD0iTTE5MC42MzYgMjM1LjMwNnYzLjQ3OGgtOC4yMjR2My44MzNoNy44MTl2My40NzhoLTcuODJ2Ni45NTZoLTMuOTZ2LTE3Ljc0NWgxMi4xODV6IiBjbGFzcz0ic3QwIi8+PHBhdGggaWQ9IlhNTElEXzU4NV8iIGQ9Ik0yMDguOTEzIDI1MC42Yy0xLjc5MyAxLjc1Mi00LjAwMiAyLjYyOS02LjYyNSAyLjYyOS0yLjYyNCAwLTQuODMyLS44NzctNi42MjUtMi42MjktMS43OTUtMS43NS0yLjY5Mi0zLjkzLTIuNjkyLTYuNTM1IDAtMi42MDcuODk3LTQuNzg2IDIuNjkyLTYuNTM3IDEuNzkzLTEuNzUyIDQuMDAxLTIuNjI4IDYuNjI1LTIuNjI4IDIuNjIzIDAgNC44MzIuODc2IDYuNjI1IDIuNjI4IDEuNzk0IDEuNzUgMi42OSAzLjkzIDIuNjkgNi41MzcgMCAyLjYwNi0uODk2IDQuNzg0LTIuNjkgNi41MzV6bS0xLjM0NS02LjUyM2MwLTEuNTgyLS41MDgtMi45MzItMS41MjMtNC4wNS0xLjAxNi0xLjExNi0yLjI2NC0xLjY3NC0zLjc0NS0xLjY3NC0xLjQ4IDAtMi43MjkuNTU4LTMuNzQ0IDEuNjc1LTEuMDE1IDEuMTE3LTEuNTIzIDIuNDY3LTEuNTIzIDQuMDQ5cy41MDggMi45MjggMS41MjMgNC4wMzZjMS4wMTUgMS4xMDkgMi4yNjQgMS42NjIgMy43NDQgMS42NjIgMS40ODEgMCAyLjczLS41NTMgMy43NDUtMS42NjIgMS4wMTUtMS4xMDggMS41MjMtMi40NTMgMS41MjMtNC4wMzZ6IiBjbGFzcz0ic3QwIi8+PHBhdGggaWQ9IlhNTElEXzU4M18iIGQ9Ik0yMTkuNjUxIDI0OC40NjljLjY2MS44MiAxLjU1IDEuMjMgMi42NjYgMS4yMyAxLjExNyAwIDItLjQxIDIuNjUzLTEuMjMuNjUxLS44MjEuOTc3LTEuOTQzLjk3Ny0zLjM2NHYtOS43OTloMy45NnY5LjkyNmMwIDIuNTczLS43MSA0LjU0OS0yLjEzMiA1LjkyNy0xLjQyMSAxLjM4LTMuMjQgMi4wNy01LjQ1OCAyLjA3LTIuMjE3IDAtNC4wNDEtLjY5NC01LjQ3LTIuMDgyLTEuNDMxLTEuMzg4LTIuMTQ2LTMuMzYtMi4xNDYtNS45MTV2LTkuOTI2aDMuOTYxdjkuNzk5YzAgMS40MjEuMzMgMi41NDMuOTkgMy4zNjR6IiBjbGFzcz0ic3QwIi8+PHBhdGggaWQ9IlhNTElEXzU4MV8iIGQ9Ik0yNDYuNDMzIDIzNS4zMDZoMy45NnYxNy43NDVoLTMuOTZsLTguNDU0LTExLjEydjExLjEyaC0zLjk2di0xNy43NDVoMy43MDZsOC43MDggMTEuNDI0di0xMS40MjR6IiBjbGFzcz0ic3QwIi8+PHBhdGggaWQ9IlhNTElEXzU3OF8iIGQ9Ik0yNjguMzE1IDIzNy42MjljMS42OTEgMS41NDkgMi41MzggMy43MDIgMi41MzggNi40NiAwIDIuNzYtLjgyNSA0Ljk0Mi0yLjQ3NSA2LjU1LTEuNjUgMS42MDgtNC4xNjggMi40MTItNy41NTIgMi40MTJoLTYuMDY4di0xNy43NDVoNi4yN2MzLjE2NiAwIDUuNTk0Ljc3NCA3LjI4NyAyLjMyM3ptLTIuOTA3IDEwLjU0N2MuOTczLS45MTMgMS40Ni0yLjI0MiAxLjQ2LTMuOTg1IDAtMS43NDMtLjQ4Ny0zLjA4NC0xLjQ2LTQuMDI0LS45NzQtLjkzOC0yLjQ2Ny0xLjQwOS00LjQ4MS0xLjQwOWgtMi4yMDh2MTAuNzloMi41MTNjMS44MSAwIDMuMjAyLS40NTcgNC4xNzYtMS4zNzJ6IiBjbGFzcz0ic3QwIi8+PHBhdGggaWQ9IlhNTElEXzU3NV8iIGQ9Ik0yODYuNDE1IDI1My4wNWwtMS42NS0zLjgzMmgtNy40MzhsLTEuNjUgMy44MzNoLTQuMjE0bDcuNjY3LTE3Ljc0NWgzLjgzM2w3LjY2NSAxNy43NDVoLTQuMjEzem0tNS4zNTYtMTIuNDY0bC0yLjIzNCA1LjE1NGg0LjQ0MmwtMi4yMDgtNS4xNTR6IiBjbGFzcz0ic3QwIi8+PHBhdGggaWQ9IlhNTElEXzU3M18iIGQ9Ik0yOTguOTA1IDIzOC43MzN2MTQuMzE4aC0zLjk2di0xNC4zMThoLTUuMDI3di0zLjQyN2gxNC4wMTN2My40MjdoLTUuMDI2eiIgY2xhc3M9InN0MCIvPjxwYXRoIGlkPSJYTUxJRF81NzFfIiBkPSJNMzA2LjgyMyAyMzUuMzA2aDMuOTYxdjE3Ljc0NWgtMy45NnYtMTcuNzQ1eiIgY2xhc3M9InN0MCIvPjxwYXRoIGlkPSJYTUxJRF81NjhfIiBkPSJNMzMwLjA3NyAyNTAuNmMtMS43OTQgMS43NTItNC4wMDMgMi42MjktNi42MjYgMi42MjktMi42MjQgMC00LjgzMS0uODc3LTYuNjI1LTIuNjI5LTEuNzk1LTEuNzUtMi42OTItMy45My0yLjY5Mi02LjUzNSAwLTIuNjA3Ljg5Ny00Ljc4NiAyLjY5Mi02LjUzNyAxLjc5NC0xLjc1MiA0LjAwMS0yLjYyOCA2LjYyNS0yLjYyOCAyLjYyMyAwIDQuODMyLjg3NiA2LjYyNiAyLjYyOCAxLjc5MyAxLjc1IDIuNjkgMy45MyAyLjY5IDYuNTM3IDAgMi42MDYtLjg5NyA0Ljc4NC0yLjY5IDYuNTM1em0tMS4zNDYtNi41MjNjMC0xLjU4Mi0uNTA3LTIuOTMyLTEuNTIzLTQuMDUtMS4wMTUtMS4xMTYtMi4yNjQtMS42NzQtMy43NDQtMS42NzQtMS40OCAwLTIuNzMuNTU4LTMuNzQ1IDEuNjc1LTEuMDE1IDEuMTE3LTEuNTIzIDIuNDY3LTEuNTIzIDQuMDQ5cy41MDggMi45MjggMS41MjMgNC4wMzZjMS4wMTYgMS4xMDkgMi4yNjQgMS42NjIgMy43NDUgMS42NjIgMS40OCAwIDIuNzI5LS41NTMgMy43NDQtMS42NjIgMS4wMTYtMS4xMDggMS41MjMtMi40NTMgMS41MjMtNC4wMzZ6IiBjbGFzcz0ic3QwIi8+PHBhdGggaWQ9IlhNTElEXzU2Nl8iIGQ9Ik0zNDguNTMyIDIzNS4zMDZoMy45NnYxNy43NDVoLTMuOTZsLTguNDU0LTExLjEydjExLjEyaC0zLjk2di0xNy43NDVoMy43MDZsOC43MDggMTEuNDI0di0xMS40MjR6IiBjbGFzcz0ic3QwIi8+PC9nPjxnIGlkPSJYTUxJRF84M18iPjxnIGlkPSJYTUxJRF84OV8iPjxwYXRoIGlkPSJYTUxJRF85M18iIGQ9Ik0xMjQuMzg2IDEwOS44OGgtMjIuMjUxdjUxLjkxMWg1MS45MDl2LTIyLjI0OWgtMjkuNjU4eiIgY2xhc3M9InN0MSIvPjxwYXRoIGlkPSJYTUxJRF85Ml8iIGQ9Ik0yMzUuNjE3IDExMC4wNDZ2MjkuNDk2aC0yOS40OThsLS4xNjMtLjE2NHYyMi40MTNoNTEuOTA5VjEwOS44OGgtMjIuNDE0eiIgY2xhc3M9InN0MSIvPjxwYXRoIGlkPSJYTUxJRF85MV8iIGQ9Ik0xMDIuMTM1IDU3Ljk3OGgyMi40MTdsLS4xNjYtLjE3MVYyOC4zMWgyOS40OTVsLjE2My4xNjZWNi4wNjNoLTUxLjkwOXoiIGNsYXNzPSJzdDEiLz48cGF0aCBpZD0iWE1MSURfOTBfIiBkPSJNMjA1Ljk1NiA2LjA2M1YyOC4zMWgyOS42NjF2MjkuNjY4aDIyLjI0OFY2LjA2M3oiIGNsYXNzPSJzdDEiLz48L2c+PGcgaWQ9IlhNTElEXzg0XyI+PHBhdGggaWQ9IlhNTElEXzg4XyIgZD0iTTIwMy4yMDkgNTcuOTc4TDE3My41NDMgMjguMzFoMzIuNDEzVjYuMDYzaC01MS45MTJ2MjIuNDEzbDI5LjUgMjkuNTAyeiIgY2xhc3M9InN0MiIvPjxwYXRoIGlkPSJYTUxJRF84N18iIGQ9Ik0xNzYuNDU2IDEwOS44OGgtMTkuNjYybDI0LjU3OCAyNC41ODEgNS4wODUgNS4wODFoLTMyLjQxM3YyMi4yNDloNTEuOTEydi0yMi40MTNsLTE0Ljc1Mi0xNC43NTF6IiBjbGFzcz0ic3QyIi8+PHBhdGggaWQ9IlhNTElEXzg2XyIgZD0iTTIzNS42MTcgNTcuOTc4djMyLjQwNmwtNS4wODMtNS4wODQtMjQuNTc4LTI0LjU3NnYxOS42NjRsMTQuNzQ2IDE0Ljc0NCAxNC43NDkgMTQuNzQ4aDIyLjQxNFY1Ny45Nzh6IiBjbGFzcz0ic3QyIi8+PHBhdGggaWQ9IlhNTElEXzg1XyIgZD0iTTE1NC4wNDQgODcuNDY1bC0yOS40OTItMjkuNDg3aC0yMi40MTd2NTEuOTAyaDIyLjI1MVY3Ny40NzFsMjkuNjU4IDI5LjY1OHoiIGNsYXNzPSJzdDIiLz48L2c+PC9nPjwvc3ZnPg==" width="359" height="261" class="img_ev3q">
<em>클라우드, 컨테이너 환경을 위한 오픈소스</em></p><h1>목차</h1><ul><li><a href="#cncf">CNCF</a></li><li><a href="#%EC%B0%BD%EB%A6%BD%EB%A9%A4%EB%B2%84">창립멤버</a></li><li><a href="#%EB%9E%9C%EB%93%9C%EC%8A%A4%EC%BC%80%EC%9D%B4%ED%94%84">랜드스케이프</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cncf">CNCF<a href="#cncf" class="hash-link" aria-label="Direct link to CNCF" title="Direct link to CNCF">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="클라우드-네이티브">클라우드 네이티브<a href="#클라우드-네이티브" class="hash-link" aria-label="Direct link to 클라우드 네이티브" title="Direct link to 클라우드 네이티브">​</a></h3><p>클라우드(Cloud)는 많이 들어보셨을 것입니다.
<strong>클라우드 네이티브</strong> 애플리케이션은 프라이빗, 퍼블릭 및 하이브리드 클라우드 환경에서 <strong>지속적인 개발</strong>과
<strong>자동화된 관리</strong> 환경을 제공하기 위해 설계된 앱을 말합니다.
이러한 설계는 피드백을 반영하고 지속적으로 탄력적으로 결합된 소규모의 독립적인 서비스 컬렉션을 가능하게 합니다.</p><p>Cloud Native Computing Foundation, CNCF는 비영리 리눅스 재단의 일부로 2015년에 설립되었습니다.
CNCF의 목적은 <strong>클라우드 네이티브</strong> 컴퓨팅을 <strong>유비쿼터스</strong>로 만드는 것입니다.
(The Foundation’s mission is to make cloud native computing ubiquitous.)  </p><p>유비쿼터스는 현재 대한민국에서 거의 쓰이지 않는 말이여서 부연설명을 하자면,
'언제 어디서든 어떤 기기를 통해 컴퓨팅할 수 있는 것'을 의미합니다.
즉, 클라우드와 컨테이너 기술 문제를 오픈소스로 해결하기 위해 설립되었습니다.</p><p><em>유비쿼터스와 IOT</em></p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="클라우드-네이티브-기술">클라우드 네이티브 기술<a href="#클라우드-네이티브-기술" class="hash-link" aria-label="Direct link to 클라우드 네이티브 기술" title="Direct link to 클라우드 네이티브 기술">​</a></h3><p>클라우드 네이티브 컴퓨팅 재단은 <strong>클라우드 네이티브 기술</strong>을 다음과 같이 정의합니다.</p><blockquote><p>클라우드 네이티브 기술은 조직이 퍼블릭, 프라이빗, 그리고 하이브리드 클라우드와 같은 현대적이고 동적인 환경에서 확장 가능한 애플리케이션을 개발하고 실행할 수 있게 해준다. 컨테이너, 서비스 메쉬, 마이크로서비스, 불변(Immutable) 인프라, 그리고 선언형(Declarative) API가 이러한 접근 방식의 예시들이다.<br>
<!-- -->
이 기술은 회복성, 관리 편의성, 가시성을 갖춘 느슨하게 결합된 시스템을 가능하게 한다. 견고한 자동화 기능을 함께 사용하면, 엔지니어는 영향이 큰 변경을 최소한의 노력으로 자주, 예측 가능하게 수행할 수 있다.<br>
<!-- -->
Cloud Native Computing Foundation은 벤더 중립적인 오픈 소스 프로젝트 생태계를 육성하고 유지함으로써 해당 패러다임 채택을 촉진한다. 우리 재단은 최신 기술 수준의 패턴을 대중화하여 이런 혁신을 누구나 접근 가능하도록 한다.</p></blockquote><p><a href="https://github.com/cncf/toc/blob/main/DEFINITION.md#%ED%95%9C%EA%B5%AD%EC%96%B4" target="_blank" rel="noopener noreferrer">[깃헙]클라우드 네이티브 정의</a></p><p>요악하면 크게 4가지 요소를 들 수 있습니다.</p><ul><li>MicroService Architecture (MSA)</li><li>DevOps</li><li>CI/CD</li><li>Container<br></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cncf-역사">CNCF 역사<a href="#cncf-역사" class="hash-link" aria-label="Direct link to CNCF 역사" title="Direct link to CNCF 역사">​</a></h3><p>구글은 첫 프로젝트로 쿠버네티스를 기부했고, 2018년 CNCF 커뮤니티에 쿠버네티스 제어권과 900만 달러를 제공했습니다.
2019년 조사는 쿠버네티스 사용자 78%가 프로덕션에 사용해 클라우드 네이티브 주류가 됬음을 보여줍니다.<br>
<a href="https://www.cncf.io/announcements/2015/06/21/new-cloud-native-computing-foundation-to-drive-alignment-among-container-technologies/" target="_blank" rel="noopener noreferrer">[공식]New Cloud Native Computing Foundation</a><br>
<a href="https://www.cncf.io/announcements/2018/08/29/cncf-receives-9-million-cloud-credit-grant-from-google/" target="_blank" rel="noopener noreferrer">[공식]CNCF receives $9 million credit from google</a><br>
<a href="https://www.cncf.io/blog/2020/03/04/2019-cncf-survey-results-are-here-deployments-are-growing-in-size-and-speed-as-cloud-native-adoption-becomes-mainstream/" target="_blank" rel="noopener noreferrer">[공식]Cloud native adoption becomes mainstream</a></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="창립멤버">창립멤버<a href="#창립멤버" class="hash-link" aria-label="Direct link to 창립멤버" title="Direct link to 창립멤버">​</a></h2><ul><li>Google</li><li>CoreOS</li><li>Mesosphere</li><li>RedHat</li><li>Twitter</li><li>Huawei</li><li>Intel</li><li>Cisco</li><li>IBM</li><li>Docker</li><li>Univa</li><li>VMware<br></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="랜드스케이프">랜드스케이프<a href="#랜드스케이프" class="hash-link" aria-label="Direct link to 랜드스케이프" title="Direct link to 랜드스케이프">​</a></h2><div markdown="1" align="center"><img loading="lazy" src="/assets/img/cncf/landscape.png" class="img_ev3q"><br><p><a href="https://landscape.cncf.io/" target="_blank" rel="noopener noreferrer">랜드스케이프</a></p></div><br><div markdown="1" align="center"><img loading="lazy" src="/assets/img/cncf/serverless.png" class="img_ev3q"><br><p><a href="https://landscape.cncf.io/serverless" target="_blank" rel="noopener noreferrer">서버리스</a></p></div><br><p>정말 많은 오픈소스가 개발되고 있습니다.
CNCF는 오픈소스 프로젝트 성숙도를
샌드박스(Sandbox), 인큐베이팅(Incubating), 졸업(Graduated)으로 나누고 있습니다.<br>
<a href="https://github.com/cncf/toc/blob/main/process/graduation_criteria.adoc" target="_blank" rel="noopener noreferrer">[깃헙]Graduation Criteria</a></p><p align="center">![chasm](/img/chasm.svg) 프로젝트 캐즘</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p>현재 애플, AWS, 삼성 등 더 많은 기업이 CNCF 멤버로 함께하고 있습니다.<br>
<a href="https://www.samsungsds.com/kr/insights/101917_RD_Cloudnative.html" target="_blank" rel="noopener noreferrer">[삼성]클라우드 네이티브</a>  </p><p>각 프로젝트를 상세히 알고 싶으면 <a href="https://jwher.github.io/blog-tech-map" target="_blank" rel="noopener noreferrer">이글</a> 을 보세요.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://www.redhat.com/ko/topics/cloud-native-apps" target="_blank" rel="noopener noreferrer">[레드햇]클라우드 네이티브 앱</a><br>
<a href="https://ko.wikipedia.org/wiki/%EC%9C%A0%EB%B9%84%EC%BF%BC%ED%84%B0%EC%8A%A4_%EC%BB%B4%ED%93%A8%ED%8C%85" target="_blank" rel="noopener noreferrer">[위키]유비쿼터스 컴퓨팅</a><br>
<a href="https://en.wikipedia.org/wiki/Cloud_Native_Computing_Foundation" target="_blank" rel="noopener noreferrer">[위키]Cloud Native Computing Foundation</a><br>
<a href="https://github.com/cncf/foundation/blob/master/charter.md" target="_blank" rel="noopener noreferrer">[깃헙]CNCF charter</a></p>]]></content:encoded>
            <category>tech</category>
            <category>kubernetes</category>
            <category>linux</category>
        </item>
        <item>
            <title><![CDATA[Envoy]]></title>
            <link>https://jwher.github.io/posts/envoy</link>
            <guid>https://jwher.github.io/posts/envoy</guid>
            <pubDate>Fri, 20 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Envoy proxy: 대규모 서비스를 위한 L7 프록시]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="envoy-proxy" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHJvbGU9ImltZyIgdmlld0JveD0iLTcuNjQgLTQuMTQgNTU4Ljc4IDYwNS4yOCI+PHRpdGxlPkVudm95IGxvZ288L3RpdGxlPjxzdHlsZT5zdmcge2VuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTQzLjYgNTkyLjV9PC9zdHlsZT48cGF0aCBmaWxsPSIjNGEwZDY2IiBkPSJNMjUuMyA0OTMuNGMwIDQuNSAxIDguNSAyLjkgMTIuMiAxLjkgMy43IDQuNSA2LjggNy43IDkuNCAzLjIgMi42IDYuOCA0LjYgMTEgNi4xIDQuMiAxLjQgOC41IDIuMiAxMyAyLjIgNi4xIDAgMTEuMy0xLjQgMTUuOC00LjIgNC41LTIuOCA4LjYtNi41IDEyLjMtMTEuMWwxNC43IDExLjJjLTEwLjggMTQtMjYgMjEtNDUuNCAyMS04LjEgMC0xNS40LTEuNC0yMi00LjEtNi42LTIuNy0xMi4xLTYuNS0xNi43LTExLjQtNC41LTQuOC04LTEwLjUtMTAuNS0xNy4xLTIuNS02LjYtMy43LTEzLjctMy43LTIxLjMgMC03LjYgMS4zLTE0LjcgNC0yMS4zIDIuNy02LjYgNi4zLTEyLjMgMTEtMTcuMSA0LjctNC44IDEwLjMtOC42IDE2LjgtMTEuNCA2LjUtMi43IDEzLjUtNC4xIDIxLjItNC4xIDkuMSAwIDE2LjggMS42IDIzIDQuOCA2LjMgMy4yIDExLjQgNy4zIDE1LjUgMTIuNCA0IDUuMSA3IDEwLjkgOC44IDE3LjMgMS44IDYuNCAyLjcgMTIuOSAyLjcgMTkuNnY2LjlIMjUuM3ptNjEuNC0xNS41Yy0uMS00LjMtLjgtOC4zLTIuMS0xMS45LTEuMi0zLjYtMy4xLTYuNy01LjUtOS40LTIuNS0yLjctNS41LTQuOC05LjItNi4zLTMuNy0xLjUtOC0yLjMtMTIuOS0yLjMtNC44IDAtOS4xLjktMTMuMSAyLjctNCAxLjgtNy4zIDQuMS0xMC4xIDctMi43IDIuOS00LjkgNi4xLTYuNCA5LjZzLTIuMyA3LTIuMyAxMC41aDYxLjZ6bTM3LjYtNDIuOGgxOS41djE1LjhoLjRjMi40LTUuNSA2LjctOS45IDEyLjgtMTMuMyA2LjEtMy40IDEzLTUuMSAyMS01LjEgNC45IDAgOS42LjggMTQuMiAyLjMgNC41IDEuNSA4LjUgMy45IDExLjkgNyAzLjQgMy4yIDYuMSA3LjIgOC4xIDEyLjIgMiA1IDMgMTAuOSAzIDE3LjZ2NjZoLTE5LjVWNDc3YzAtNC44LS42LTguOC0xLjktMTIuMi0xLjMtMy40LTMtNi4xLTUuMi04LjItMi4yLTIuMS00LjYtMy42LTcuNS00LjUtMi44LS45LTUuNy0xLjQtOC44LTEuNC00IDAtNy44LjctMTEuMiAxLjktMy41IDEuMy02LjUgMy40LTkuMSA2LjItMi42IDIuOC00LjYgNi40LTYuMSAxMC43LTEuNCA0LjMtMi4yIDkuNC0yLjIgMTUuNHY1Mi44aC0xOS41VjQzNS4xem05Ny4xIDBoMjIuNWwzMC43IDc4LjUgMjkuNC03OC41aDIwLjhsLTQwLjIgMTAyLjVoLTIxLjRsLTQxLjgtMTAyLjV6bTEwNC43IDUxLjJjMC03LjUgMS40LTE0LjUgNC4yLTIxIDIuOC02LjUgNi43LTEyLjIgMTEuNi0xNy4xIDQuOS00LjkgMTAuNy04LjggMTcuMy0xMS42IDYuNi0yLjggMTMuOC00LjIgMjEuNC00LjIgNy42IDAgMTQuOCAxLjQgMjEuNCA0LjIgNi42IDIuOCAxMi40IDYuNyAxNy4zIDExLjYgNC45IDQuOSA4LjggMTAuNiAxMS42IDE3LjEgMi44IDYuNSA0LjIgMTMuNSA0LjIgMjFzLTEuNCAxNC41LTQuMiAyMS4xYy0yLjggNi42LTYuNyAxMi4zLTExLjYgMTcuMS00LjkgNC44LTEwLjcgOC42LTE3LjMgMTEuNS02LjYgMi44LTEzLjggNC4yLTIxLjQgNC4yLTcuNiAwLTE0LjgtMS40LTIxLjQtNC4yLTYuNi0yLjgtMTIuNC02LjYtMTcuMy0xMS41cy04LjgtMTAuNS0xMS42LTE3LjFjLTIuOC02LjYtNC4yLTEzLjYtNC4yLTIxLjF6bTIwLjggMGMwIDUuMi44IDEwIDIuNCAxNC40IDEuNiA0LjQgMy44IDguMSA2LjcgMTEuMiAyLjkgMy4xIDYuNCA1LjYgMTAuNiA3LjQgNC4yIDEuOCA4LjkgMi43IDE0LjEgMi43czkuOS0uOSAxNC4xLTIuN2M0LjItMS44IDcuNy00LjMgMTAuNi03LjQgMi45LTMuMSA1LjEtNi44IDYuNy0xMS4yIDEuNi00LjQgMi40LTkuMiAyLjQtMTQuNCAwLTUuMi0uOC0xMC0yLjQtMTQuNC0xLjYtNC40LTMuOC04LjEtNi43LTExLjItMi45LTMuMS02LjQtNS41LTEwLjYtNy40LTQuMi0xLjgtOC45LTIuNy0xNC4xLTIuN3MtOS45LjktMTQuMSAyLjdjLTQuMiAxLjgtNy43IDQuMy0xMC42IDcuNC0yLjkgMy4xLTUuMSA2LjktNi43IDExLjItMS43IDQuNC0yLjQgOS4yLTIuNCAxNC40em04OS43LTUxLjJoMjIuNWwzMC40IDgwaC40bDI5LjEtODBoMjAuOGwtNDguNyAxMjQuNmMtMS43IDQuNS0zLjUgOC41LTUuNCAxMi4yLTEuOSAzLjctNC4xIDYuOC02LjcgOS40LTIuNiAyLjYtNS43IDQuNi05LjQgNi4xLTMuNyAxLjQtOC4xIDIuMi0xMy41IDIuMi0yLjkgMC01LjgtLjItOC43LS41LTIuOS0uNC01LjgtMS4xLTguNS0yLjNsMi40LTE3LjdjMy45IDEuNiA3LjcgMi40IDExLjYgMi40IDMgMCA1LjUtLjQgNy42LTEuMiAyLjEtLjggMy45LTEuOSA1LjQtMy41IDEuNS0xLjUgMi44LTMuMyAzLjgtNS4zczItNC4zIDMtNi45bDYuMy0xNi4yLTQyLjQtMTAzLjN6Ii8+PHBhdGggZmlsbD0iI2IzMWFhYiIgZD0iTTE1OC45IDE3MC4ybC42IDI3LjIgMjguNiAxNy43LS42LTI3LjJ6bTY5LjggMTEyLjlsLS42LTI2LjZMMjAzIDI0MWMtLjQtLjItLjctLjUtMS4xLS43bC42IDI2LjcgMjYuMiAxNi4xek0xMzkuNCAzMTlMNzQgMjc4LjRsLTEuNi02OC4xIDMyLjEtMTMuOC0uNi0yNy4yLTUxLjIgMjIuMWMtMy45IDEuNy02LjMgNS4zLTYuMiA5LjVsMS45IDgxLjZjLjEgNC4yIDIuNyA4LjMgNi43IDEwLjlsNzguNSA0OC42YzMuNyAyLjMgOC4xIDIuOSAxMS44IDEuNy40LS4xLjgtLjMgMS4xLS40bDQ4LjItMjAuOC0yNi4xLTE2LjItMjkuMiAxMi43eiIvPjxwYXRoIGZpbGw9IiNkMTYzY2UiIGQ9Ik0zNTAuOCAxNjguNmMtLjEtNC45LTMuMS05LjctNy44LTEyLjdsLTk1LjMtNTkuMS0yLjkgMS4zLjcgMjguNiA3NS40IDQ2LjcgMS44IDc2LjUgMjguOSAxNy45IDEuNi0uNy0yLjQtOTguNXpNMjM2LjcgMzAyLjhMMTQ4LjIgMjQ4bC0yLjItOTIuMSA0MC4zLTE3LjQtLjctMzEuNy02Mi42IDI3Yy00LjYgMi03LjQgNi4yLTcuMiAxMS4xbDIuNiAxMDhjLjEgNC45IDMuMSA5LjcgNy44IDEyLjZMMjMwIDMyOS44YzQuMyAyLjYgOS40IDMuNCAxMy44IDIgLjQtLjEuOS0uMyAxLjMtLjVsNjEuMy0yNi40LTMwLjctMTguOS0zOSAxNi44eiIvPjxwYXRoIGZpbGw9IiNlMTNlYWYiIGQ9Ik00ODUuNyA5M2wtMTMzLTgyLjVjLTQuOS0zLTEwLjgtMy44LTE1LjgtMi4zLS41LjItMSAuMy0xLjQuNWwtMTI5LjggNTZjLTUuMyAyLjMtOC40IDcuMS04LjMgMTIuN2wzLjMgMTM4LjRjLjEgNS42IDMuNSAxMS4xIDguOSAxNC41bDEzMyA4Mi40YzQuOSAzIDEwLjcgMy45IDE1LjcgMi4zLjUtLjIgMS0uMyAxLjUtLjZsMTI5LjgtNTUuOWM1LjMtMi4zIDguNC03LjEgOC4zLTEyLjdsLTMuMy0xMzguNGMtLjEtNS41LTMuNS0xMS04LjktMTQuNHpNMzUwLjUgMjgxLjlsLTExNS42LTcxLjZMMjMyIDkwbDExMi44LTQ4LjZMNDYwLjQgMTEzbDIuOCAxMjAuMy0xMTIuNyA0OC42eiIvPjwvc3ZnPg==" width="559" height="605" class="img_ev3q">
<em>대규모 서비스를 위한 L7 프록시</em>  </p><h1>목차</h1><ul><li><a href="#proxy">Proxy</a></li><li><a href="#envoy">Envoy</a></li><li><a href="#%EC%8B%A4%EC%8A%B5">실습</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="proxy">Proxy<a href="#proxy" class="hash-link" aria-label="Direct link to Proxy" title="Direct link to Proxy">​</a></h2><p>프록시는 다른 네트워크 서비스에 간접적으로 접속할 수 있게 해 주는 애플리케이션을 말합니다.
프록시를 사용해 다음 목적을 달성할 수 있습니다.</p><ul><li>보안</li><li>IP 우회</li><li>캐시 사용 <a href="https://netmanias.com/ko/post/blog/5457/dns-google-google-global-cache-kt-ott-video-streaming-youtube/google-global-cache-ggc-work-flow-for-youtube-part-1-kt-case" target="_blank" rel="noopener noreferrer">(구글 글로벌 캐시)</a></li><li>접근 정책 사용</li><li>사용률 기록</li></ul><p>프록시는 크게 세 종류로 나눕니다.</p><ul><li>포워드 프록시<br>일반적인 프록시를 말합니다. 네트워크상에 어느 위치에 있을 수 있고,
주로 캐싱 목적으로 사용합니다.</li><li>리버스 프록시<br>서버쪽에서 사용되는 프록시로 서버 자원을 보호합니다.
http로 서브되는 원본 서버를 <strong>숨길 수 있고</strong>, TLS 인증을 추가할 수 있습니다.
또한, 로드밸런싱과 캐시 등을 사용할 수 있습니다.</li><li>오픈 프록시<br>IP 우회와 인터넷 속도가 느린 곳에서 캐시를 위해 사용합니다.
</li></ul><p>프록시는 대개 TCP/IP L4 레이어로 작동했습니다.
하지만 MSA에서 URL이나 HTTP header를 이용한 복잡한 라우팅을 요구하며,
L7 라우팅이 필요하게 됬습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="envoy">Envoy<a href="#envoy" class="hash-link" aria-label="Direct link to Envoy" title="Direct link to Envoy">​</a></h2><p>L4 라우팅은 IP와 Port 정보로 이루어집니다. 하지만 전체 요청을 읽고 파싱해야 하는 L7는 조금 느릴 수 밖에 없습니다.
Envoy(舊Lyft)는 MSA가 요구하는 L7 라우팅, 네트워크 투명성, 쉬운 문제 파악을 위해 등장했습니다.
이는 다음으로 구현됩니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="out-of-process-architecture">Out of Process Architecture<a href="#out-of-process-architecture" class="hash-link" aria-label="Direct link to Out of Process Architecture" title="Direct link to Out of Process Architecture">​</a></h3><p>모든 Envoy는 각 애플리케이션 마다 함께 실행됩니다.
각 애플리케이션은 로컬호스트 Envoy와 통신하며 네트워크 토폴로지를 인식하지 못하는,
즉 투명성(transparent)를 지원합니다.</p><p>이는 기존 proxy에 비해 두가지 이점을 지닙니다.</p><ul><li>다양한 언어 지원 Java, C++, Go, PHP, Python</li><li>업그레이드와 배포의 투명화</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="l3l4-필터">L3/L4 필터<a href="#l3l4-필터" class="hash-link" aria-label="Direct link to L3/L4 필터" title="Direct link to L3/L4 필터">​</a></h3><p>플러그형 체인 필터는 서로 다른 TCP/UDP 프록시를 수행할 수 있게 작성되었습니다.
필터는 이미 TCP, UDP, HTTP, Redis, MongoDB, Postgres 와 TLS 인증을 지원하도록 작성됬습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="l7-필터">L7 필터<a href="#l7-필터" class="hash-link" aria-label="Direct link to L7 필터" title="Direct link to L7 필터">​</a></h3><p>버퍼링, 속도 제한, 라우팅 등 HTTP 연결 관리 서브시스템 기능을 사용할 수 있습니다.
L7 트래픽에 대한 깊은 가시성으로 MongoDB, DynamoDB 등에 wire 레벨의 가시성을 제공합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="다양한-프로토콜-지원">다양한 프로토콜 지원<a href="#다양한-프로토콜-지원" class="hash-link" aria-label="Direct link to 다양한 프로토콜 지원" title="Direct link to 다양한 프로토콜 지원">​</a></h3><p>HTTP/2, gRPC 프로토콜을 최고 수준으로 지원합니다.<br>
<a href="https://www.ietf.org/rfc/rfc7540.html" target="_blank" rel="noopener noreferrer">RFC7540(HTTP/2)</a>  </p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="실습">실습<a href="#실습" class="hash-link" aria-label="Direct link to 실습" title="Direct link to 실습">​</a></h2><p>Envoy를 실행해 보는 다양한 방법이 있으나, 가장 간단하다고 생각되는 도커 이미지로 해봅시다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> pull envoyproxy/envoy-dev:21df5e8676a0f705709f0b3ed90fc2dbbd63cfc5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run --rm envoyproxy/envoy-dev:21df5e8676a0f705709f0b3ed90fc2dbbd63cfc5 --version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">envoy  version: 21df5e8676a0f705709f0b3ed90fc2dbbd63cfc5/1.20.0-dev/Clean/RELEASE/BoringSSL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run --rm -d -p </span><span class="token number" style="color:#36acaa">10000</span><span class="token plain">:10000 envoyproxy/envoy-distroless-dev:21df5e8676a0f705709f0b3ed90fc2dbbd63cfc5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>http://localhost:10000 으로 접속하면 envoy 공식 홈페이지로 라우팅 됩니다.
이는 <code>envoy.yaml</code> 로 설정할 수 있습니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p>Istio는 envoy의 강력한 프록시 기능을 이용해 쿠버네티스에 프로그램 가능한 애플리케이션 인식 레이어를 구축합니다.</p><p>위의 실습을 해보면, envoy 설정파일을 수정해도 실행시간에 동적으로 라우팅이 변경되지 않는 걸 알 수 있습니다.
Istio는 설정이 바뀌면 sidecar로 inject 된 envoy 컨테이너를 재생성하는 것이 아닌가 추측해 봅니다.<br>
<a href="https://jwher.github.io/istio" target="_blank" rel="noopener noreferrer">Istio</a>  </p><p>(Nginx 글을 언젠가 작성하겠습니다)  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://ko.wikipedia.org/wiki/%ED%94%84%EB%A1%9D%EC%8B%9C_%EC%84%9C%EB%B2%84" target="_blank" rel="noopener noreferrer">[위키]프록시 서버</a><br>
<a href="https://www.envoyproxy.io/" target="_blank" rel="noopener noreferrer">[공식]Envoy Proxy</a><br>
<a href="https://bcho.tistory.com/1253" target="_blank" rel="noopener noreferrer">[조대협]Envoy Proxy</a><br>
<a href="https://www.envoyproxy.io/docs/envoy/latest/start/install#install-envoy-using-docker" target="_blank" rel="noopener noreferrer">[공식]Install envoy using docker</a>  </p>]]></content:encoded>
            <category>tech</category>
            <category>kubernetes</category>
            <category>istio</category>
        </item>
        <item>
            <title><![CDATA[Istio]]></title>
            <link>https://jwher.github.io/posts/istio</link>
            <guid>https://jwher.github.io/posts/istio</guid>
            <pubDate>Fri, 20 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Istio: 서비스 메시]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="istio" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDE2MCAyNDAiPjxnIGlkPSJsb2dvIiBmaWxsPSIjNDY2QkIwIj48cG9seWdvbiBpZD0iaHVsbCIgcG9pbnRzPSIwIDIxMCAxNjAgMjEwIDYwIDI0MCIvPjxwb2x5Z29uIGlkPSJtYWluc2FpbCIgcG9pbnRzPSIwIDIwMCA2MCAxOTAgNjAgODAiLz48cG9seWdvbiBpZD0iaGVhZHNhaWwiIHBvaW50cz0iNzAgMTkwIDE2MCAyMDAgNzAgMCIvPjwvZz48L3N2Zz4=" width="160" height="240" class="img_ev3q">
<em>Istio 서비스 메시</em>  </p><h1>목차</h1><ul><li><a href="#%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%A9%94%EC%8B%9C">서비스 메시</a></li><li><a href="#istio">Istio</a></li><li><a href="#envoy">Envoy</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="서비스-메시">서비스 메시<a href="#서비스-메시" class="hash-link" aria-label="Direct link to 서비스 메시" title="Direct link to 서비스 메시">​</a></h2><p>최신 애플리케이션은 분산된 <a href="https://microservices.io/" target="_blank" rel="noopener noreferrer">마이크로서비스</a> 모음으로 설계되고,
각 마이크로서비스 모음은 나눌 수 있는(discrete) 비즈니스 기능을 수행합니다.(MSA)
<strong>서비스 메시</strong>는 MSA를 구현하는데 사용하는 소프트웨어와 이를 생성할 때 사용하는 보안,
네트워크 도메인을 모두 말합니다.</p><p>쿠버네티스와 같은 분산 시스템에서 시스템 크기와 복잡성이 증가함에 따라 관리가 어려워집니다.
관리가 필요한 대상으로 탐색(discovery), 로드밸런싱, 재해복구(failure recovery), 모니터링이 포함됩니다.
또한, 서비스 메시는 A/B 테스트, 카나리아(canary) 배포, 성능 제한(rate limit), 암호화,
종단(end to end) 인증 방법도 제공합니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="istio">Istio<a href="#istio" class="hash-link" aria-label="Direct link to Istio" title="Direct link to Istio">​</a></h2><p>Istio(이스티오)는 오픈 소스 서비스 메시입니다.  </p><blockquote><p align="center"><img loading="lazy" src="/assets/img/istio/sail.jpeg" class="img_ev3q"><br>그리스어로 <a href="https://istio.io/latest/about/faq/" target="_blank" rel="noopener noreferrer">항해</a>를 뜻합니다</p></blockquote><p>이스티오는 서비스 보호, 연결, 모니터링에 균일하고 효율적인 방법을 제공합니다.
이스티오는 서비스 코드 변경이 거의 또는 전혀 없이 로드벨런싱, 잊능, 모니터링 기능을 수행할 수 있습니다.
컨트롤 플레인 주요 기능은 다음과 같습니다.</p><ul><li>TLS 암호화를 통한 서비스 대 서비스 통신</li><li>HTTP, gRPC, WebSocket 및 TCP 트래픽에 대한 자동 로드밸런싱</li><li>다양한 라우팅 규칙, 재시도, 장애극복(failovers), 결함 주입 테스트(fault injection)를 통한 세밀한(fine-grained) 제어</li><li>접근 제어, 성능 제한과 쿼터를 지원하는 플러그형 정책 레이어와 Configuration API</li><li>자동화된 메트릭, 로그, 클러스터 송수신을 포함한 모든 내부 트래픽의 추적</li></ul><p>이스티오는 확장성을 고려해 설계되었으며 배포에 필요한 다양한 요구를 처리할 수 있습니다.
클러스터에 배포된 애플리케이션을 메시에 추가하거나 메시를 다른 클러스터로 확장하거나
쿠버네티스 외부에서 실행되는 VM 또는 기타 엔드포인트를 연결할 수 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="작동원리">작동원리<a href="#작동원리" class="hash-link" aria-label="Direct link to 작동원리" title="Direct link to 작동원리">​</a></h3><p>이스티오는 데이터 플레인과 컨트롤 플레인 두 요소로 이루어집니다.</p><p>데이터 플레인은 두 서비스간의 통신(communication)을 의미합니다.
서비스 메시 없이 네트워크는 트래픽이 보내졌는지, 어떤 종류였는지, 누가 어디로 보내는지 알 수 없습니다.
서비스 메시는 모든 네트워크 트래픽을 가로채기 위해 프록시를 사용합니다.
이스티오는 각 서비스와 함께 배포되는 Envoy 프록시를 사용하고 있습니다.</p><p>컨트롤 플레인은 원하는 구성과 서비스 뷰, 프록시 서버의 동적 프로그래밍, 환경 변화에 따른 규칙 업데이트를 수행합니다.</p><p align="center"><img loading="lazy" src="/assets/img/istio/istio-plane.png" class="img_ev3q"></p><details markdown="1" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>TMI</summary><div><div class="collapsibleContent_i85q"><p>실제로 쿠버네티스 파드에 자동으로 sidecar가 inject 됩니다.
이를 방지하기 위해서는 다음과 같이 설정해야 합니다.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">sidecar.istio.io/inject</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"false"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p><a href="https://jwher.github.io/welcome-to-kubernetes" target="_blank" rel="noopener noreferrer">쿠버네티스</a>, <a href="https://www.nomadproject.io/" target="_blank" rel="noopener noreferrer">노마드</a>, 콘솔(?)에서 사용가능 합니다.
여기에서는 쿠버네티스로 가정하고 설명합니다.</p><p><a href="https://jwher.github.io/envoy" target="_blank" rel="noopener noreferrer">Envoy proxy</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://istio.io/latest/about/service-mesh/" target="_blank" rel="noopener noreferrer">[공식]service mesh</a><br>
<a href="https://bcho.tistory.com/1293" target="_blank" rel="noopener noreferrer">[조대협]Istio #1 - 마이크로 서비스와 서비스 매쉬</a><br>
<a href="https://www.youtube.com/watch?v=1iyFq2VaL5Y" target="_blank" rel="noopener noreferrer">[IBM]What is Istio?</a>  </p>]]></content:encoded>
            <category>tech</category>
            <category>kubernetes</category>
            <category>docker</category>
            <category>istio</category>
        </item>
        <item>
            <title><![CDATA[Dex]]></title>
            <link>https://jwher.github.io/posts/dex</link>
            <guid>https://jwher.github.io/posts/dex</guid>
            <pubDate>Thu, 12 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Dex: OpenID 커넥터]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="dex" src="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyOTggMTA5Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzIzMWYyMDt9LmNscy0ye2ZpbGw6IzQ0OWZkODt9LmNscy0ze2ZpbGw6I2YwNGQ1Yzt9PC9zdHlsZT48L2RlZnM+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNMTgzLjUzNyw2Ny42NDVhMzcuMTI3NTUsMzcuMTI3NTUsMCwwLDEsMi4zMzItMTMuNTU2LDMxLjcxMzczLDMxLjcxMzczLDAsMCwxLDYuMTc5LTEwLjE1MSwyNi44MjkzOCwyNi44MjkzOCwwLDAsMSw4Ljc2NC02LjM2OCwyNC43MjQ3NCwyNC43MjQ3NCwwLDAsMSwxMC4yMTQtMi4yMDYsMjUuNzA5NDcsMjUuNzA5NDcsMCwwLDEsMTAuNDA0LDIuMDE3LDIwLjMxODU1LDIwLjMxODU1LDAsMCwxLDcuNjkyLDUuODAxLDI2LjY2NzcxLDI2LjY2NzcxLDAsMCwxLDQuNzI4LDkuMDc5LDQwLjA0NzQzLDQwLjA0NzQzLDAsMCwxLDEuNjQsMTEuODU0LDM1LjQyNTM5LDM1LjQyNTM5LDAsMCwxLS4zNzgsNS42NzNIMTkzLjc1cS42MzE1MSw5Ljk2Myw2LjExNiwxNS43NjMsNS40ODcsNS44MDM1LDE0LjMxMyw1LjgwMWEyNC4wOTMxLDI0LjA5MzEsMCwwLDAsOC4xMzMtMS4zMjQsMzYuMDQzMTgsMzYuMDQzMTgsMCwwLDAsNy4xMjUtMy40NjdsMy42NTYsNi44MDhhNTIuMTAyMzksNTIuMTAyMzksMCwwLDEtOC45NTMsNC40MTQsMzEuMTAyMzksMzEuMTAyMzksMCwwLDEtMTEuMjIyLDEuODkxLDMwLjAyNDc5LDMwLjAyNDc5LDAsMCwxLTExLjUzOS0yLjIwNiwyNy4zMTAzMSwyNy4zMTAzMSwwLDAsMS05LjMzMS02LjMwNSwyOS4xNjUzNiwyOS4xNjUzNiwwLDAsMS02LjI0Mi0xMC4wMjVBMzcuNTMxNjIsMzcuNTMxNjIsMCwwLDEsMTgzLjUzNyw2Ny42NDVaTTIyNi40MSw2Mi45OHEwLTkuNDU3NS0zLjk3MS0xNC40MzktMy45NzItNC45ODE1LTExLjE1OS00Ljk4MWExNS4xMTQxMiwxNS4xMTQxMiwwLDAsMC02LjI0MiwxLjMyNCwxNy4zMTM4OCwxNy4zMTM4OCwwLDAsMC01LjM2LDMuNzg0LDIwLjExNjUyLDIwLjExNjUyLDAsMCwwLTMuOTcxLDYuMDUyLDI3LjkzNzcsMjcuOTM3NywwLDAsMC0yLjA4Miw4LjI2MUgyMjYuNDFaIi8+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNMjU1Ljc5LDY2LjEzMiwyMzcuMjU0LDM2Ljg3NmgxMS4yMjJsOC4xOTYsMTMuNDkzcTEuMzg2LDIuNTI0NSwyLjksNS4xMDgsMS41MTUsMi41ODYsMy4xNTMsNS4xMDZoLjUwNHExLjM4Ni0yLjUyLDIuNzc0LTUuMTA2LDEuMzg3NDgtMi41ODQ1LDIuNzc1LTUuMTA4bDcuNDQtMTMuNDkzaDEwLjg0NGwtMTguNTM2LDMwLjM5LDE5LjkyMywzMC44OTVIMjc3LjIyN2wtOC45NTMtMTQuMjVxLTEuNjQxLTIuNzcwNS0zLjI3OS01LjU0OS0xLjY0MS0yLjc3MDUtMy40MDQtNS40MjFoLS41MDRxLTEuNjQxLDIuNjQ3NS0zLjE1Myw1LjM1OC0xLjUxMzUsMi43MTM1LTMuMDI2LDUuNjEybC04LjMyMywxNC4yNUgyMzUuNzRaIi8+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNMTgxLjExNiw5MS4xODlhOC4zMzMyNiw4LjMzMzI2LDAsMCwxLTIuMTgyLjI0M2MtMS4yNTMsMC0yLjQxMi0uOTA4LTIuNzEtMy4xNzRWOC4zNzhIMTY1Ljc1N1YzMS45NTlsLjQ0OSw5LjI5OHYxLjEyNGE0MS4xNTEsNDEuMTUxLDAsMCwwLTcuODg4LTUuMTI3LDIwLjkzMzg1LDIwLjkzMzg1LDAsMCwwLTkuMjA3LTEuODkxLDIzLjI4ODY5LDIzLjI4ODY5LDAsMCwwLTEwLjA4OCwyLjI2OSwyNS45OTUzOCwyNS45OTUzOCwwLDAsMC04LjQ0OSw2LjQzMSwzMS44NTk4NCwzMS44NTk4NCwwLDAsMC01Ljg2NCwxMC4xNTEsMzguNjIyNTEsMzguNjIyNTEsMCwwLDAtMi4yMDYsMTMuNDNxMCwxNS4zODcsNi44NzMsMjMuNzA3LDYuODcxNSw4LjMyMzUsMTguNDczLDguMzIzYTIwLjg0NTkyLDIwLjg0NTkyLDAsMCwwLDEwLjE1Mi0yLjU4NSwzOC44MDYxNCwzOC44MDYxNCwwLDAsMCw4LjM4Ni02LjExNmguMTg5YzEuMDA2LDUuNjUsNC4xNDQsOC43MDEsMTAuMTc1LDguNzAxYTEzLjM4MjMsMTMuMzgyMywwLDAsMCw1LjY5Ny0uOTY5Wm0tMTUuMzU5LTguNjY0YTI5LjAwNjgyLDI5LjAwNjgyLDAsMCwxLTcuNTY1LDYuMzY4LDE2LjUwMjEyLDE2LjUwMjEyLDAsMCwxLTguMDcsMi4wOHEtOC4wNzMsMC0xMi40ODUtNi4xNzktNC40MTYtNi4xNzctNC40MTQtMTcuMjc1YTMwLjk5Nzc0LDMwLjk5Nzc0LDAsMCwxLDEuMzg4LTkuNTgzLDIzLjkzOTUxLDIzLjkzOTUxLDAsMCwxLDMuNzgyLTcuMzc3LDE3LjMwNjQsMTcuMzA2NCwwLDAsMSw1LjYxMi00Ljc5MiwxNC40NjU1MSwxNC40NjU1MSwwLDAsMSw2Ljg3My0xLjcwMiwxOS41ODUsMTkuNTg1LDAsMCwxLDcuMzc3LDEuNDUsMjYuMTMzMiwyNi4xMzMyLDAsMCwxLDcuNTAyLDQuOTgxWiIvPjxwYXRoIGNsYXNzPSJjbHMtMiIgZD0iTTkzLjAxMiw1MS44NzhhMjUuMTk2MjQsMjUuMTk2MjQsMCwwLDAsMTQuMTc1LTE4LjUzQTUwLjk1Mjg1LDUwLjk1Mjg1LDAsMCwwLDc0Ljc2LDUuMTU1YTM4LjQ1MzY0LDM4LjQ1MzY0LDAsMCwxLDYuNzcxLDI0LjE3QTMyLjYyNDM4LDMyLjYyNDM4LDAsMCwxLDkzLjAxMiw1MS44NzhaTTMxLjkzNywzOC44NDVhMjUuMTg0MywyNS4xODQzLDAsMCwwLTIxLjg1OCw4LjA1NEE1MC45NTUzNSw1MC45NTUzNSwwLDAsMCwyMi43NjYsODguNDYyYTM4Ljg5Nzc3LDM4Ljg5Nzc3LDAsMCwxLDYuODMxLTI0LjQ4M0EzMi42MTI5MiwzMi42MTI5MiwwLDAsMSwzMS45MzcsMzguODQ1Wm01Ljc0LDM4LjM4NmEyNS4yMTcxNSwyNS4yMTcxNSwwLDAsMCwzLjY0MiwyNC4yMTUsNTEuMDYzMTMsNTEuMDYzMTMsMCwwLDAsMzguNjQzLS4wMzVBMzguNDY3LDM4LjQ2NywwLDAsMSw2MC4wNzUsODYuNjgsMzIuNDg4NzUsMzIuNDg4NzUsMCwwLDEsMzcuNjc3LDc3LjIzMVpNNjcuNzg4LDIyLjUwNkEyNS4yLDI1LjIsMCwwLDAsNTIuNTU5LDMuNzc0LDUxLjEzNTQyLDUxLjEzNTQyLDAsMCwwLDE3LjQyNiwyNi45MzVhMzguNzg1LDM4Ljc4NSwwLDAsMSwyNC41MjkuNjM5QTMyLjI3OTI4LDMyLjI3OTI4LDAsMCwxLDY3Ljc4OCwyMi41MDZaTTkwLjU1Nyw2Ni43NjFhMzIuNDAzNSwzMi40MDM1LDAsMCwxLTE1LjY3OCwxNi42MSwyNS4zNzA2OCwyNS4zNzA2OCwwLDAsMCwyMi44NTIsNS44MzQsNTEuMTEzNTIsNTEuMTEzNTIsMCwwLDAsMTMuOS0zNS4wMDlBMzguNjYzMTUsMzguNjYzMTUsMCwwLDEsOTAuNTU3LDY2Ljc2MVoiLz48Y2lyY2xlIGNsYXNzPSJjbHMtMyIgY3g9IjYwLjcwMiIgY3k9IjU0LjE5NiIgcj0iMTUuOTcyIi8+PC9zdmc+" width="298" height="109" class="img_ev3q">
<em>자원에 OpenID 인증을 제공하는 방법</em>  </p><h1>목차</h1><ul><li><a href="#dex">Dex</a></li><li><a href="#%EB%A1%9C%EC%BB%AC-%EC%98%88%EC%A0%9C">로컬 예제</a></li></ul><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dex">Dex<a href="#dex" class="hash-link" aria-label="Direct link to Dex" title="Direct link to Dex">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사전지식">사전지식<a href="#사전지식" class="hash-link" aria-label="Direct link to 사전지식" title="Direct link to 사전지식">​</a></h3><p align="center"><img loading="lazy" src="/assets/img/dex/social-icons.gif" class="img_ev3q"></p><p>웹서비스를 이용하다 보면 다양한 소셜 계정으로 로그인할 수 있습니다.
이는 각각 <strong><a href="https://ko.wikipedia.org/wiki/%EC%9D%B8%EA%B0%80" target="_blank" rel="noopener noreferrer">인가(authorization)</a></strong>
와 <strong><a href="https://ko.wikipedia.org/wiki/%EC%9D%B8%EC%A6%9D" target="_blank" rel="noopener noreferrer">인증(authentication)</a></strong>
을 제공하는 <strong>OAuth2.0</strong>과 <strong>OIDC</strong>를 사용해 구현됩니다.</p><blockquote><div align="center">![oauth](/img/logos/oauth.svg) ![open-id](/img/logos/open-id.svg) 갑자기 이게 뭐죠😵</div></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="oauth20">OAuth2.0<a href="#oauth20" class="hash-link" aria-label="Direct link to OAuth2.0" title="Direct link to OAuth2.0">​</a></h3><p>OAuth(Open Authorization)는 <strong>엑세스 권한</strong>을 확인하는 <a href="https://ko.wikipedia.org/wiki/%EA%B0%9C%EB%B0%A9%ED%98%95_%ED%91%9C%EC%A4%80" target="_blank" rel="noopener noreferrer">개방형 표준</a> 입니다.
권한이 있는 사용자가 <strong>서드파티 애플리케이션</strong>을 사용해 자원에 접근하기 위해서,
이전까지는 페이스북과 같은 idP(identity Providers)의 <strong>패스워드</strong>를 넘겨 권한을 확인했으나,
OAuth는 패스워드 없이 <strong>엑세스 토큰</strong>을 넘겨 권한을 확인합니다.  </p><p><em>엑세스 토큰은 대게 JWT(JSON Web Token)를 쿠키로 사용합니다</em>  </p><p><a href="https://www.ietf.org/rfc/rfc6749.txt" target="_blank" rel="noopener noreferrer">RFC6749(OAuth 2.0)</a><br>
<a href="https://www.ietf.org/rfc/rfc7519.txt" target="_blank" rel="noopener noreferrer">RFC7519(JWT)</a>  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="oidc">OIDC<a href="#oidc" class="hash-link" aria-label="Direct link to OIDC" title="Direct link to OIDC">​</a></h3><p>OIDC(OpenID Connect)는 OAuth2.0 인가를 기반으로 한 인증입니다.
OIDC를 사용해 인증된 세션과 <strong>사용자 정보</strong>를 요청/수신할 수 있습니다.
OIDC는 JSON 데이터 형식으로 RESTful HTTP API를 지원하고 확장 가능합니다.
OAuth2.0 권한 서버인 <strong>OIDC 제공자(OP, OIDC Provider)</strong> 가
인증이 필요한 <strong>신뢰 당사자(RPs, Relying Parties)</strong> 에 소유권을 입증해줍니다.
이는 주로 <a href="https://ko.wikipedia.org/wiki/%ED%86%B5%ED%95%A9_%EC%9D%B8%EC%A6%9D" target="_blank" rel="noopener noreferrer">통합 인증(SSO, Single Sign-On)</a>
을 위해 사용됩니다.</p><details markdown="1" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>OIDC JSON</summary><div><div class="collapsibleContent_i85q"><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"iss"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"http://127.0.0.1:5556/dex"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"sub"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"CgcyMzQyNzQ5EgZnaXRodWI"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"aud"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"example-app"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"exp"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1492882042</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"iat"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1492795642</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"at_hash"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bi96gOXZShvlWYtal9Eqiw"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"email"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"jane.doe@coreos.com"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"email_verified"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"groups"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"admins"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"developers"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Jane Doe"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details>[[삼성]OIDC](https://www.samsungsds.com/kr/insights/oidc.html) [RFC6750(OAuth 2.0 Authorization Framework)](https://www.ietf.org/rfc/rfc6750.txt) [[공식]OIDC Implementer's Guide](https://openid.net/specs/openid-connect-basic-1_0.html#CodeFlow)<blockquote><p>소셜 로그인이 이렇게 복잡했군요 😅</p></blockquote><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dex-1">Dex<a href="#dex-1" class="hash-link" aria-label="Direct link to Dex" title="Direct link to Dex">​</a></h3><br><blockquote><p align="center"><img loading="lazy" src="/assets/img/dex/dex-workflow.png" class="img_ev3q"><br>간략화된 흐름도</p><details markdown="1" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>자세한 흐름</summary><div><div class="collapsibleContent_i85q"><p align="center"><img loading="lazy" src="/assets/img/dex/oidc_authservice_sequence_diagram.svg" alt="oidc_authservice_sequence_diagram" class="img_ev3q"></p>쿠버네티스에서 동작하는 흐름입니다. 라우터로 Istio를 사용하고 인증 시스템이 완전히 없는 Client App 사이에 미들웨어로 AuthService가 들어갑니다.</div></div></details></blockquote><p>Dex는 OIDC의 구현으로 여러 idP의 커넥터(인터페이스)와 연결해 인증처리를 중앙화(Federate)하고,
서드파티 애플리케이션에 인증을 제공합니다.
여기서 idP는 <a href="https://ko.wikipedia.org/wiki/LDAP" target="_blank" rel="noopener noreferrer">LDAP</a>,
<a href="https://ko.wikipedia.org/wiki/SAML" target="_blank" rel="noopener noreferrer">SAML</a> 또는 GitHub, Google, Naver 등 존재하는 idP일수 있습니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="로컬-예제">로컬 예제<a href="#로컬-예제" class="hash-link" aria-label="Direct link to 로컬 예제" title="Direct link to 로컬 예제">​</a></h2><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="요구사항">요구사항<a href="#요구사항" class="hash-link" aria-label="Direct link to 요구사항" title="Direct link to 요구사항">​</a></h3><ul><li><a href="https://jwher.github.io/golang-setup" target="_blank" rel="noopener noreferrer">고</a> 1.15 버전 이상<br></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="바이너리">바이너리<a href="#바이너리" class="hash-link" aria-label="Direct link to 바이너리" title="Direct link to 바이너리">​</a></h3><p><a href="https://github.com/dexidp/dex" target="_blank" rel="noopener noreferrer">[깃헙]Dex</a> 에서 덱스 소스를 클론합니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/dexidp/dex.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">cd</span><span class="token plain"> dex/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> build</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p><a href="https://github.com/dexidp/dex/blob/master/examples/config-dev.yaml" target="_blank" rel="noopener noreferrer">예제 설정</a>
을 사용해 실행합니다. (<code>examples/</code> 디렉토리에 있습니다)</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./bin/dex serve examples/config-dev.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>예제 설정의 이메일은 <code>admin@example.com</code> 패스워드는 <code>password</code>입니다.
(설청에는 bcrypt hash 값이 들어갑니다.)  </p><br><p>이제 덱스 OIDC 인증을 테스트할 수 있는 예제 클라이언트 앱을 실행합니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> examples</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ./bin/examples-app</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>예제 클라이언트 앱에 덱스로 로그인하는 절차는 다음과 같습니다.</p><p>1. http://localhost:5555/ 의 예제 클라이언트로 이동합니다.</p><br><p align="center"><img loading="lazy" src="/assets/img/dex/example-login.png" alt="example-login" class="img_ev3q"></p><p>2. `login` 버튼을 누릅니다. (여러 입력창이 있지만 아무것도 입력하지 않아도 됩니다)</p><p><em>주의! 현재 버그가 있는 것으로 보입니다(21.08.12) 이동하는 링크
(<a href="http://127.0.0.1:5556/dex/auth?..." target="_blank" rel="noopener noreferrer">http://127.0.0.1:5556/dex/auth?...</a>)
의 <code>127.0.0.1</code>을 <code>localhost</code>로 변경해야 정상적으로 동작합니다.</em></p><br><p markdown="1">3. `examples/config-dev.yaml`에 설정한 이메일과 패스워드를 입력합니다. (`admin@example.com`, `password`)</p><br><p align="center"><img loading="lazy" src="/assets/img/dex/example-grant.png" alt="example-grant" class="img_ev3q"></p><p>4. 예제 앱 요청을 승인합니다.</p><br><p align="center"><img loading="lazy" src="/assets/img/dex/example-token.png" alt="example-token" class="img_ev3q"></p><p>5. 예제 앱이 덱스에 요구하는 token을 확인합니다.</p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ldap">LDAP<a href="#ldap" class="hash-link" aria-label="Direct link to LDAP" title="Direct link to LDAP">​</a></h3><p>LDAP config입니다. 나중에 글을 보완하겠습니다.<br>
<a href="https://dexidp.io/docs/connectors/ldap/" target="_blank" rel="noopener noreferrer">[공식]Authentication Through LDAP</a></p><details markdown="1" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>ldap.yaml</summary><div><div class="collapsibleContent_i85q"><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">issuer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//127.0.0.1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">5556/dex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">storage</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> sqlite3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">file</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> examples/dex.db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">web</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 0.0.0.0</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">5556</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">connectors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> OpenLDAP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># The following configurations seem to work with OpenLDAP:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 1) Plain LDAP, without TLS:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> your</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ldap</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">address</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">389</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">insecureNoSSL</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 2) LDAPS without certificate validation:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#host: localhost:636</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#insecureNoSSL: false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#insecureSkipVerify: true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 3) LDAPS with certificate validation:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#host: YOUR-HOSTNAME:636</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#insecureNoSSL: false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#insecureSkipVerify: false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#rootCAData: 'CERT'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ...where CERT="$( base64 -w 0 your-cert.crt )"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># This would normally be a read-only user.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">bindDN</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cn=""</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">dc=""</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">dc=""</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">dc=""</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">bindPW</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> your</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">password</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># dex UI에 보여지는 입력창</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">usernamePrompt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Username</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">userSearch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">baseDN</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ou=""</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">dc=""</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">dc=""</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">dc=""</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">#filter: "(objectClass=person)"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># LDAP 조회시 사용되는 ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">username</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> uid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># "DN" (case sensitive) is a special attribute name. It indicates that</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># this value should be taken from the entity's DN not an attribute on</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># the entity.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">idAttr</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> uid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">emailAttr</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mail</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">nameAttr</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gecos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">#groupSearch:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">#baseDN: ou=Groups,dc=example,dc=org</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">#filter: "(objectClass=groupOfNames)"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">#userMatchers:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># A user is a member of a group when their DN matches</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># the value of a "member" attribute on the group entity.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">#- userAttr: DN</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">#groupAttr: member</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># The group name should be the "cn" value.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">#nameAttr: cn</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">staticClients</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> example</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">redirectURIs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'http://127.0.0.1:5555/callback'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Example App'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">secret</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ZXhhbXBsZS1hcHAtc2VjcmV0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p align="center"><img loading="lazy" src="/assets/img/pepe-electron.gif" alt="pepe-electron" class="img_ev3q"></p><p>이제 외부 idP를 사용해 쉽게 인증할 수 있습니다!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://en.wikipedia.org/wiki/OAuth" target="_blank" rel="noopener noreferrer">[위키]OAuth</a><br>
<a href="https://www.ibm.com/docs/ko/sva/9.0.7?topic=SSPREK_9.0.7/com.ibm.isam.doc/config/concept/con_oauth_20_concepts.html#con_oauth_20_concepts" target="_blank" rel="noopener noreferrer">[IBM]OAuth2.0 개념</a><br>
<a href="https://en.wikipedia.org/wiki/OpenID#OpenID_Connect_(OIDC)" target="_blank" rel="noopener noreferrer">[위키]OpenID</a><br>
<a href="https://www.ibm.com/docs/ko/sva/9.0.7?topic=concepts-openid-connect" target="_blank" rel="noopener noreferrer">[IBM]OpenID Connect 개념</a>   </p><p><a href="https://dexidp.io/" target="_blank" rel="noopener noreferrer">[공식]Dex</a>  </p>]]></content:encoded>
            <category>tech</category>
            <category>kubernetes</category>
            <category>istio</category>
        </item>
        <item>
            <title><![CDATA[K8S Tip Configmap]]></title>
            <link>https://jwher.github.io/posts/k8s-tip-configmap</link>
            <guid>https://jwher.github.io/posts/k8s-tip-configmap</guid>
            <pubDate>Wed, 11 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[K8s tip: ConfigMap]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="kubernetes" src="/assets/images/kubernetes-f91022b1deed067a9393dd3c42381ab7.svg" width="723" height="702" class="img_ev3q">
<em>컨테이너 설정 데이터를 관리하는 방법</em>  </p><h1>목차</h1><ul><li><a href="#%EC%BB%A8%ED%94%BC%EA%B7%B8%EB%A7%B5">컨피그맵</a></li><li><a href="#%EC%98%88%EC%A0%9C">예제</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="컨피그맵">컨피그맵<a href="#컨피그맵" class="hash-link" aria-label="Direct link to 컨피그맵" title="Direct link to 컨피그맵">​</a></h2><p>간단한(?) 프로그램을 만들어 보신 분은 환경 변수를 코드라인에 직접(inline) 적기보다,
실행시간 파라미터나 파일에서 읽도록 설계해본 경험이 있을 것입니다.</p><blockquote><p align="center"># Fix 워드 파일을 열때, 워드프로세서 코드에서 파일 이름을 수정하고, 빌드하고, 다시 실행하는 과정을 거쳐야 한다면 정말 끔직할 것입니다.</p></blockquote><p>컨테이너 이미지 또한 환경별 구성을 분리해 이식성을 높입니다.
<em>(런타임 파라미터나 공유 볼륨을 사용해서요)</em>
그렇다면 이 "구성 데이터"는 어디에 저장해야 할까요?
게다가 쿠버네티스 환경이라면요!😵</p><p>쿠버네티스에선 컨피그맵(ConfigMap)을 사용해 구성 데이터를 저장합니다.
컨피그맵은 키-값 쌍으로 기밀이 아닌 데이터를 저장하는 데 사용하는 API 오브젝트입니다.
하지만, 컨피그맵에 저장된 데이터는 1MB를 초과할 수 없습니다.
더 큰 설정을 저장하려면, <a href="https://kubernetes.io/ko/docs/concepts/storage/persistent-volumes/" target="_blank" rel="noopener noreferrer">Persistent Volume</a> 을 사용하거나 DB,
Fileserver 또는 <a href="https://jwher.github.io/minio" target="_blank" rel="noopener noreferrer">Object Storage</a> 를 사용할 수 있습니다. </p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="예제">예제<a href="#예제" class="hash-link" aria-label="Direct link to 예제" title="Direct link to 예제">​</a></h2><p>간단한 키/값 컨피그맵입니다.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ConfigMap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> someapp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">cluster-name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">clusterDomain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cluster.local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">istio-namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> istio</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>이 컨피그맵을 사용하는 디플로이먼트(파드)를 살펴볼까요?</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ml</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pipeline</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ui</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubeflow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CLUSTER_DOMAIN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">valueFrom</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">configMapKeyRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> clusterDomain    </span><span class="token comment" style="color:#999988;font-style:italic"># 가져올 키</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> someapp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config  </span><span class="token comment" style="color:#999988;font-style:italic"># 컨피그맵 이름</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ISTIO_NAMESPACE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">valueFrom</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">configMapKeyRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> istio</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> someapp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> someapp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">volumeMounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">volume       </span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">readOnly</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># 파드 레벨에서 볼륨(config-volume)을 설정하고, 마운트한다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">volume         </span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">configMap</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> someapp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config      </span><span class="token comment" style="color:#999988;font-style:italic"># 컨피그맵 이름</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>자, 이제 컨피그맵을 수정해 컨테이너 설정을 변경할 수 있습니다! 😊</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p>기밀을 유지해야 하는 데이터는 <a href="https://kubernetes.io/ko/docs/concepts/configuration/secret/" target="_blank" rel="noopener noreferrer"><code>secret</code></a>
을 사용합니다.<br>
<!-- -->(언젠가 글을 작성하겠습니다)</p><p>PV와 삭제에 관련된 글입니다.<br>
<a href="https://jwher.github.io/k8s-tip-pv-terminating" target="_blank" rel="noopener noreferrer">Persistent Volume</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://kubernetes.io/ko/docs/concepts/configuration/configmap/" target="_blank" rel="noopener noreferrer">[공식]컨피그맵(ConfigMap)</a>  </p>]]></content:encoded>
            <category>tech</category>
            <category>kubeflow</category>
            <category>kubernetes</category>
            <category>short</category>
        </item>
        <item>
            <title><![CDATA[Golang Setup]]></title>
            <link>https://jwher.github.io/posts/golang-setup</link>
            <guid>https://jwher.github.io/posts/golang-setup</guid>
            <pubDate>Tue, 10 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[고(Golang) 개발환경 구축하기]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="go" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI0LjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAyMDUuNCA3Ni43IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyMDUuNCA3Ni43OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6IzAwQUNENzt9Cjwvc3R5bGU+CjxnPgoJPGc+CgkJPGc+CgkJCTxnPgoJCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTE1LjUsMjMuMmMtMC40LDAtMC41LTAuMi0wLjMtMC41bDIuMS0yLjdjMC4yLTAuMywwLjctMC41LDEuMS0wLjVoMzUuN2MwLjQsMCwwLjUsMC4zLDAuMywwLjZsLTEuNywyLjYKCQkJCQljLTAuMiwwLjMtMC43LDAuNi0xLDAuNkwxNS41LDIzLjJ6Ii8+CgkJCTwvZz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPGc+CgkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMC40LDMyLjRjLTAuNCwwLTAuNS0wLjItMC4zLTAuNWwyLjEtMi43YzAuMi0wLjMsMC43LTAuNSwxLjEtMC41aDQ1LjZjMC40LDAsMC42LDAuMywwLjUsMC42bC0wLjgsMi40CgkJCQkJYy0wLjEsMC40LTAuNSwwLjYtMC45LDAuNkwwLjQsMzIuNHoiLz4KCQkJPC9nPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8Zz4KCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yNC42LDQxLjZjLTAuNCwwLTAuNS0wLjMtMC4zLTAuNmwxLjQtMi41YzAuMi0wLjMsMC42LTAuNiwxLTAuNmgyMGMwLjQsMCwwLjYsMC4zLDAuNiwwLjdMNDcuMSw0MQoJCQkJCWMwLDAuNC0wLjQsMC43LTAuNywwLjdMMjQuNiw0MS42eiIvPgoJCQk8L2c+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGcgaWQ9IkNYSGYxcV8zXyI+CgkJCTxnPgoJCQkJPGc+CgkJCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTEyOC40LDIxLjRjLTYuMywxLjYtMTAuNiwyLjgtMTYuOCw0LjRjLTEuNSwwLjQtMS42LDAuNS0yLjktMWMtMS41LTEuNy0yLjYtMi44LTQuNy0zLjgKCQkJCQkJYy02LjMtMy4xLTEyLjQtMi4yLTE4LjEsMS41Yy02LjgsNC40LTEwLjMsMTAuOS0xMC4yLDE5YzAuMSw4LDUuNiwxNC42LDEzLjUsMTUuN2M2LjgsMC45LDEyLjUtMS41LDE3LTYuNgoJCQkJCQljMC45LTEuMSwxLjctMi4zLDIuNy0zLjdjLTMuNiwwLTguMSwwLTE5LjMsMGMtMi4xLDAtMi42LTEuMy0xLjktM2MxLjMtMy4xLDMuNy04LjMsNS4xLTEwLjljMC4zLTAuNiwxLTEuNiwyLjUtMS42CgkJCQkJCWM1LjEsMCwyMy45LDAsMzYuNCwwYy0wLjIsMi43LTAuMiw1LjQtMC42LDguMWMtMS4xLDcuMi0zLjgsMTMuOC04LjIsMTkuNmMtNy4yLDkuNS0xNi42LDE1LjQtMjguNSwxNwoJCQkJCQljLTkuOCwxLjMtMTguOS0wLjYtMjYuOS02LjZjLTcuNC01LjYtMTEuNi0xMy0xMi43LTIyLjJjLTEuMy0xMC45LDEuOS0yMC43LDguNS0yOS4zYzcuMS05LjMsMTYuNS0xNS4yLDI4LTE3LjMKCQkJCQkJYzkuNC0xLjcsMTguNC0wLjYsMjYuNSw0LjljNS4zLDMuNSw5LjEsOC4zLDExLjYsMTQuMUMxMzAsMjAuNiwxMjkuNiwyMS4xLDEyOC40LDIxLjR6Ii8+CgkJCQk8L2c+CgkJCQk8Zz4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTYxLjUsNzYuN2MtOS4xLTAuMi0xNy40LTIuOC0yNC40LTguOGMtNS45LTUuMS05LjYtMTEuNi0xMC44LTE5LjNjLTEuOC0xMS4zLDEuMy0yMS4zLDguMS0zMC4yCgkJCQkJCWM3LjMtOS42LDE2LjEtMTQuNiwyOC0xNi43YzEwLjItMS44LDE5LjgtMC44LDI4LjUsNS4xYzcuOSw1LjQsMTIuOCwxMi43LDE0LjEsMjIuM2MxLjcsMTMuNS0yLjIsMjQuNS0xMS41LDMzLjkKCQkJCQkJYy02LjYsNi43LTE0LjcsMTAuOS0yNCwxMi44QzE2Ni44LDc2LjMsMTY0LjEsNzYuNCwxNjEuNSw3Ni43eiBNMTg1LjMsMzYuM2MtMC4xLTEuMy0wLjEtMi4zLTAuMy0zLjMKCQkJCQkJYy0xLjgtOS45LTEwLjktMTUuNS0yMC40LTEzLjNjLTkuMywyLjEtMTUuMyw4LTE3LjUsMTcuNGMtMS44LDcuOCwyLDE1LjcsOS4yLDE4LjljNS41LDIuNCwxMSwyLjEsMTYuMy0wLjYKCQkJCQkJQzE4MC41LDUxLjMsMTg0LjgsNDQuOSwxODUuMywzNi4zeiIvPgoJCQkJPC9nPgoJCQk8L2c+CgkJPC9nPgoJPC9nPgo8L2c+Cjwvc3ZnPgo=" width="205" height="77" class="img_ev3q"><br>
<em>고(Golang) 개발환경 구축하기</em></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="고-설치하기">고 설치하기<a href="#고-설치하기" class="hash-link" aria-label="Direct link to 고 설치하기" title="Direct link to 고 설치하기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="설치파일">설치파일<a href="#설치파일" class="hash-link" aria-label="Direct link to 설치파일" title="Direct link to 설치파일">​</a></h3><p><a href="https://golang.org/doc/install" target="_blank" rel="noopener noreferrer">공식 사이트</a> 에서 최신 버전의 고를 다운받을 수 있습니다.  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="커맨드라인">커맨드라인<a href="#커맨드라인" class="hash-link" aria-label="Direct link to 커맨드라인" title="Direct link to 커맨드라인">​</a></h3><p>커맨드라인으로 설치할 수도 있습니다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># windows</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> choco </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> golang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ubuntu debian</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> golang-go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># mac</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">% brew </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> golang</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>설치를 완료하고 확인해 봅시다.</p><div class="language-ps1 codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ps1 codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; go version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">go version go1.16.7 windows/amd64</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ide-구성하기">IDE 구성하기<a href="#ide-구성하기" class="hash-link" aria-label="Direct link to IDE 구성하기" title="Direct link to IDE 구성하기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="visual-studio-code">Visual Studio Code<a href="#visual-studio-code" class="hash-link" aria-label="Direct link to Visual Studio Code" title="Direct link to Visual Studio Code">​</a></h3><p><img loading="lazy" alt="vscode" src="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9Im1hc2swIiBtYXNrLXR5cGU9ImFscGhhIiBtYXNrVW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4PSIwIiB5PSIwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNzAuOTExOSA5OS4zMTcxQzcyLjQ4NjkgOTkuOTMwNyA3NC4yODI4IDk5Ljg5MTQgNzUuODcyNSA5OS4xMjY0TDk2LjQ2MDggODkuMjE5N0M5OC42MjQyIDg4LjE3ODcgMTAwIDg1Ljk4OTIgMTAwIDgzLjU4NzJWMTYuNDEzM0MxMDAgMTQuMDExMyA5OC42MjQzIDExLjgyMTggOTYuNDYwOSAxMC43ODA4TDc1Ljg3MjUgMC44NzM3NTZDNzMuNzg2MiAtMC4xMzAxMjkgNzEuMzQ0NiAwLjExNTc2IDY5LjUxMzUgMS40NDY5NUM2OS4yNTIgMS42MzcxMSA2OS4wMDI4IDEuODQ5NDMgNjguNzY5IDIuMDgzNDFMMjkuMzU1MSAzOC4wNDE1TDEyLjE4NzIgMjUuMDA5NkMxMC41ODkgMjMuNzk2NSA4LjM1MzYzIDIzLjg5NTkgNi44NjkzMyAyNS4yNDYxTDEuMzYzMDMgMzAuMjU0OUMtMC40NTI1NTIgMzEuOTA2NCAtMC40NTQ2MzMgMzQuNzYyNyAxLjM1ODUzIDM2LjQxN0wxNi4yNDcxIDUwLjAwMDFMMS4zNTg1MyA2My41ODMyQy0wLjQ1NDYzMyA2NS4yMzc0IC0wLjQ1MjU1MiA2OC4wOTM4IDEuMzYzMDMgNjkuNzQ1M0w2Ljg2OTMzIDc0Ljc1NDFDOC4zNTM2MyA3Ni4xMDQzIDEwLjU4OSA3Ni4yMDM3IDEyLjE4NzIgNzQuOTkwNUwyOS4zNTUxIDYxLjk1ODdMNjguNzY5IDk3LjkxNjdDNjkuMzkyNSA5OC41NDA2IDcwLjEyNDYgOTkuMDEwNCA3MC45MTE5IDk5LjMxNzFaTTc1LjAxNTIgMjcuMjk4OUw0NS4xMDkxIDUwLjAwMDFMNzUuMDE1MiA3Mi43MDEyVjI3LjI5ODlaIiBmaWxsPSJ3aGl0ZSIvPgo8L21hc2s+CjxnIG1hc2s9InVybCgjbWFzazApIj4KPHBhdGggZD0iTTk2LjQ2MTQgMTAuNzk2Mkw3NS44NTY5IDAuODc1NTQyQzczLjQ3MTkgLTAuMjcyNzczIDcwLjYyMTcgMC4yMTE2MTEgNjguNzUgMi4wODMzM0wxLjI5ODU4IDYzLjU4MzJDLTAuNTE1NjkzIDY1LjIzNzMgLTAuNTEzNjA3IDY4LjA5MzcgMS4zMDMwOCA2OS43NDUyTDYuODEyNzIgNzQuNzU0QzguMjk3OTMgNzYuMTA0MiAxMC41MzQ3IDc2LjIwMzYgMTIuMTMzOCA3NC45OTA1TDkzLjM2MDkgMTMuMzY5OUM5Ni4wODYgMTEuMzAyNiAxMDAgMTMuMjQ2MiAxMDAgMTYuNjY2N1YxNi40Mjc1QzEwMCAxNC4wMjY1IDk4LjYyNDYgMTEuODM3OCA5Ni40NjE0IDEwLjc5NjJaIiBmaWxsPSIjMDA2NUE5Ii8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2QpIj4KPHBhdGggZD0iTTk2LjQ2MTQgODkuMjAzOEw3NS44NTY5IDk5LjEyNDVDNzMuNDcxOSAxMDAuMjczIDcwLjYyMTcgOTkuNzg4NCA2OC43NSA5Ny45MTY3TDEuMjk4NTggMzYuNDE2OUMtMC41MTU2OTMgMzQuNzYyNyAtMC41MTM2MDcgMzEuOTA2MyAxLjMwMzA4IDMwLjI1NDhMNi44MTI3MiAyNS4yNDZDOC4yOTc5MyAyMy44OTU4IDEwLjUzNDcgMjMuNzk2NCAxMi4xMzM4IDI1LjAwOTVMOTMuMzYwOSA4Ni42MzAxQzk2LjA4NiA4OC42OTc0IDEwMCA4Ni43NTM4IDEwMCA4My4zMzM0VjgzLjU3MjZDMTAwIDg1Ljk3MzUgOTguNjI0NiA4OC4xNjIyIDk2LjQ2MTQgODkuMjAzOFoiIGZpbGw9IiMwMDdBQ0MiLz4KPC9nPgo8ZyBmaWx0ZXI9InVybCgjZmlsdGVyMV9kKSI+CjxwYXRoIGQ9Ik03NS44NTc4IDk5LjEyNjNDNzMuNDcyMSAxMDAuMjc0IDcwLjYyMTkgOTkuNzg4NSA2OC43NSA5Ny45MTY2QzcxLjA1NjQgMTAwLjIyMyA3NSA5OC41ODk1IDc1IDk1LjMyNzhWNC42NzIxM0M3NSAxLjQxMDM5IDcxLjA1NjQgLTAuMjIzMTA2IDY4Ljc1IDIuMDgzMjlDNzAuNjIxOSAwLjIxMTQwMiA3My40NzIxIC0wLjI3MzY2NiA3NS44NTc4IDAuODczNjMzTDk2LjQ1ODcgMTAuNzgwN0M5OC42MjM0IDExLjgyMTcgMTAwIDE0LjAxMTIgMTAwIDE2LjQxMzJWODMuNTg3MUMxMDAgODUuOTg5MSA5OC42MjM0IDg4LjE3ODYgOTYuNDU4NiA4OS4yMTk2TDc1Ljg1NzggOTkuMTI2M1oiIGZpbGw9IiMxRjlDRjAiLz4KPC9nPgo8ZyBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6b3ZlcmxheSIgb3BhY2l0eT0iMC4yNSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNzAuODUxMSA5OS4zMTcxQzcyLjQyNjEgOTkuOTMwNiA3NC4yMjIxIDk5Ljg5MTMgNzUuODExNyA5OS4xMjY0TDk2LjQgODkuMjE5N0M5OC41NjM0IDg4LjE3ODcgOTkuOTM5MiA4NS45ODkyIDk5LjkzOTIgODMuNTg3MVYxNi40MTMzQzk5LjkzOTIgMTQuMDExMiA5OC41NjM1IDExLjgyMTcgOTYuNDAwMSAxMC43ODA3TDc1LjgxMTcgMC44NzM2OTVDNzMuNzI1NSAtMC4xMzAxOSA3MS4yODM4IDAuMTE1Njk5IDY5LjQ1MjcgMS40NDY4OEM2OS4xOTEyIDEuNjM3MDUgNjguOTQyIDEuODQ5MzcgNjguNzA4MiAyLjA4MzM1TDI5LjI5NDMgMzguMDQxNEwxMi4xMjY0IDI1LjAwOTZDMTAuNTI4MyAyMy43OTY0IDguMjkyODUgMjMuODk1OSA2LjgwODU1IDI1LjI0NkwxLjMwMjI1IDMwLjI1NDhDLTAuNTEzMzM0IDMxLjkwNjQgLTAuNTE1NDE1IDM0Ljc2MjcgMS4yOTc3NSAzNi40MTY5TDE2LjE4NjMgNTBMMS4yOTc3NSA2My41ODMyQy0wLjUxNTQxNSA2NS4yMzc0IC0wLjUxMzMzNCA2OC4wOTM3IDEuMzAyMjUgNjkuNzQ1Mkw2LjgwODU1IDc0Ljc1NEM4LjI5Mjg1IDc2LjEwNDIgMTAuNTI4MyA3Ni4yMDM2IDEyLjEyNjQgNzQuOTkwNUwyOS4yOTQzIDYxLjk1ODZMNjguNzA4MiA5Ny45MTY3QzY5LjMzMTcgOTguNTQwNSA3MC4wNjM4IDk5LjAxMDQgNzAuODUxMSA5OS4zMTcxWk03NC45NTQ0IDI3LjI5ODlMNDUuMDQ4MyA1MEw3NC45NTQ0IDcyLjcwMTJWMjcuMjk4OVoiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcikiLz4KPC9nPgo8L2c+CjxkZWZzPgo8ZmlsdGVyIGlkPSJmaWx0ZXIwX2QiIHg9Ii04LjM5NDExIiB5PSIxNS44MjkxIiB3aWR0aD0iMTE2LjcyNyIgaGVpZ2h0PSI5Mi4yNDU2IiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIi8+CjxmZU9mZnNldC8+CjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjQuMTY2NjciLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAuMjUgMCIvPgo8ZmVCbGVuZCBtb2RlPSJvdmVybGF5IiBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgcmVzdWx0PSJlZmZlY3QxX2Ryb3BTaGFkb3ciLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3ciIHJlc3VsdD0ic2hhcGUiLz4KPC9maWx0ZXI+CjxmaWx0ZXIgaWQ9ImZpbHRlcjFfZCIgeD0iNjAuNDE2NyIgeT0iLTguMDc1NTgiIHdpZHRoPSI0Ny45MTY3IiBoZWlnaHQ9IjExNi4xNTEiIGZpbHRlclVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIj4KPGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiLz4KPGZlT2Zmc2V0Lz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iNC4xNjY2NyIvPgo8ZmVDb2xvck1hdHJpeCB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMC4yNSAwIi8+CjxmZUJsZW5kIG1vZGU9Im92ZXJsYXkiIGluMj0iQmFja2dyb3VuZEltYWdlRml4IiByZXN1bHQ9ImVmZmVjdDFfZHJvcFNoYWRvdyIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDFfZHJvcFNoYWRvdyIgcmVzdWx0PSJzaGFwZSIvPgo8L2ZpbHRlcj4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyIiB4MT0iNDkuOTM5MiIgeTE9IjAuMjU3ODEyIiB4Mj0iNDkuOTM5MiIgeTI9Ijk5Ljc0MjMiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0id2hpdGUiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSJ3aGl0ZSIgc3RvcC1vcGFjaXR5PSIwIi8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPC9zdmc+Cg==" width="100" height="100" class="img_ev3q"></p><p>범용적으로 사용하는 IDE 입니다.
다른 언어와 함께 통합 개발이 편합니다.
확장 탭에서 고언어 확장을 설치해 줍니다.</p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lite-ide">Lite IDE<a href="#lite-ide" class="hash-link" aria-label="Direct link to Lite IDE" title="Direct link to Lite IDE">​</a></h3><p><img loading="lazy" alt="lite-ide" src="/assets/images/lite-ide-88a42ae353275609b44635e29e11e0a2.jpg" width="466" height="466" class="img_ev3q"></p><p>고 전용으로 나온 IDE 입니다.
고를 위해 만들어져 디테일한 편리함이 있습니다.</p><p><a href="http://liteide.org/en/" target="_blank" rel="noopener noreferrer">[공식]Lite IDE</a></p><p>이 밖에도 JetBrain 등 다양한 IDE가 있습니다.  </p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="프로젝트-생성">프로젝트 생성<a href="#프로젝트-생성" class="hash-link" aria-label="Direct link to 프로젝트 생성" title="Direct link to 프로젝트 생성">​</a></h2><p>고언어의 프로젝트 구조는 어떻게 될까요?</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gopath">GOPATH<a href="#gopath" class="hash-link" aria-label="Direct link to GOPATH" title="Direct link to GOPATH">​</a></h3><p>Go 언어의 <code>import</code>를 보면 조금 특이합니다.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "context"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "fmt"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "log"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "google.golang.org/grpc"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "google.golang.org/grpc/credentials"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>인터넷에 있는 소스 코드를 받아와서 바로 사용하고 있습니다.
그렇다면 이 소스코드는 어디에 저장될까요?</p><p>고언어 프로젝트를 생성하면 <code>bin</code>, <code>pkg</code>, <code>src</code> 디렉토리를 생성합니다.
각각의 디렉토리 역할은 다음과 같습니다.</p><ul><li><code>bin</code>: 컴파일된 실행파일(바이너리)이 생성되는 디렉토리입니다.</li><li><code>pkg</code>: 패키지를 컴파일한 라이브러리 파일이 생성되는 디렉토리입니다.
<code>{운영체제}_{아키텍처}</code> 형식으로 디렉토리를 생성합니다. <em>예) <code>linux_amd64</code></em></li><li><code>src</code>: 작성한 소스파일과 인터넷에서 다운로드한 소스 파일이 저장되는 디렉토리입니다.
<del>왜 제거에는 없죠?</del></li></ul><p>다운로드 소스 파일은 <code>%USERPROFILE%\go</code> 경로에 저장되는 것으로 보입니다.(Windows)</p><p>프로젝트를 생성했다면, 프로젝트 디렉토리 경로로 <code>GOPATH</code>를 설정해야 합니다.
윈도우에서는 <code>제어판</code>-&gt;<code>시스템 및 보안</code>-&gt;<code>시스템</code>-&gt;<code>고급 시스템 설정</code>-&gt;<code>고급</code>-&gt;<code>환경 변수</code>
에서 설정할 수 있습니다. CLI를 사용해도 됩니다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># linux/mac</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">GOPATH</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">${project_pwd}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 다음 명령어로 확인합니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ go </span><span class="token function" style="color:#d73a49">env</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>여기서 <code>GOROOT</code>는 빌트인 패키지 저장 위치입니다.
<code>C:\Program Files\Go</code></p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="go-modules">Go modules<a href="#go-modules" class="hash-link" aria-label="Direct link to Go modules" title="Direct link to Go modules">​</a></h3><p>당연하게도 <code>import</code>한 인터넷 소스를 다운받지 않고 빌드/실행하면 오류가 발생합니다.
패키지 관리를 위한 <code>go.mod</code> 파일 생성과 소스 다운로드를 하려면, 다음 명령어를 사용합니다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> go mod init </span><span class="token variable" style="color:#36acaa">${project}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">go: creating new go.mod: module </span><span class="token string" style="color:#e3116c">"project"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">go: to </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> module requirements and sums:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        go mod tidy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> go mod tidy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">go: finding module </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> package google.golang.org/grpc/credentials</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">go: finding module </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> package google.golang.org/grpc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">go: found google.golang.org/grpc </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> google.golang.org/grpc v1.39.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">go: found google.golang.org/grpc/credentials </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> google.golang.org/grpc v1.39.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em><code>go.mod</code> 파일을 만드는 것이 <a href="https://blog.golang.org/using-go-modules" target="_blank" rel="noopener noreferrer">필수</a> 가 되었습니다.</em><br>
<em>Go modules are the future of dependency management in Go</em></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p>학생일 때 <code>GOPATH</code>로 참 헤맸습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://golang.org/doc/install" target="_blank" rel="noopener noreferrer">[공식]고 설치</a><br>
<a href="http://pyrasis.com/book/GoForTheReallyImpatient/Unit03" target="_blank" rel="noopener noreferrer">가장 빨리 만나는 Go 언어</a><br>
<a href="https://blog.golang.org/using-go-modules" target="_blank" rel="noopener noreferrer">[공식]Go modules</a></p>]]></content:encoded>
            <category>dev</category>
            <category>short</category>
        </item>
        <item>
            <title><![CDATA[Docker Shared Volume]]></title>
            <link>https://jwher.github.io/posts/docker-shared-volume</link>
            <guid>https://jwher.github.io/posts/docker-shared-volume</guid>
            <pubDate>Thu, 05 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[도커 컨테이너와 공유 볼륨]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="docker" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUwMCIgaGVpZ2h0PSIyMTAwIiB2aWV3Qm94PSIwIDAgMjU2IDIxNSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0zOC42MTcgMTczLjk4NHYtMTYuMzYyYzAtMi4xNSAxLjM0NC0zLjg3NyAzLjU3LTMuODc3aC42MTZjMi4yMjUgMCAzLjU2MyAxLjcyOSAzLjU2MyAzLjg3N3YzNC40NDdjMCA4LjQtNC4xNSAxNS4wODQtMTEuMzgyIDE5LjM0MmEyMS4zNzQgMjEuMzc0IDAgMCAxLTEwLjk0NSAyLjk4NWgtMS41MzdjLTguNDAyIDAtMTUuMDc3LTQuMTUzLTE5LjM0Mi0xMS4zOGEyMS4zMTQgMjEuMzE0IDAgMCAxLTIuOTg0LTEwLjk0N3YtMS41MzVjMC04LjQwMyA0LjE1Mi0xNS4wODMgMTEuMzc4LTE5LjM0OWEyMS4yOTggMjEuMjk4IDAgMCAxIDEwLjk0OC0yLjk4NWgxLjUzN2M1LjY4NiAwIDEwLjUxIDIuMjA0IDE0LjU3OCA1Ljc4NHpNNy45MjQgMTkxLjNjMCA2LjA2OCAyLjk0MSAxMC42MyA4LjI1OCAxMy41NCAyLjE1IDEuMTc2IDQuNDg0IDEuODA4IDYuOTM3IDEuODA4IDUuOTU2IDAgMTAuMzc0LTIuODEgMTMuNDIxLTcuODU3IDEuNDE3LTIuMzQ4IDIuMDc3LTQuOTE3IDIuMDc3LTcuNjQ4IDAtNS4yNi0yLjQ5LTkuMzY1LTYuNzI5LTEyLjQxNC0yLjU3LTEuODQ4LTUuNDYzLTIuNzc1LTguNjE4LTIuNzc1LTYuNDkyIDAtMTEuMTY0IDMuMjgtMTMuOTY4IDkuMTA2LS45NDYgMS45Ny0xLjM3OCA0LjA2MS0xLjM3OCA2LjI0em02NS4zMjQtMjMuMWgxLjA3NGM4Ljk3OCAwIDE1LjgwNiA0LjM1NSAyMC4xMzMgMTIuMTkyIDEuNzMgMy4xMzUgMi42NTYgNi41NTcgMi42NTYgMTAuMTQydjEuNTM1YzAgOC40LTQuMTQyIDE1LjA5My0xMS4zODUgMTkuMzQzLTMuMzUzIDEuOTY3LTcuMDU3IDIuOTg0LTEwLjk0MyAyLjk4NGgtMS41MzVjLTguNDAyIDAtMTUuMDc5LTQuMTUzLTE5LjM0Mi0xMS4zOGEyMS4zMTYgMjEuMzE2IDAgMCAxLTIuOTg3LTEwLjk0N3YtMS41MzVjMC04LjQwNCA0LjE2OS0xNS4wNjIgMTEuMzc3LTE5LjM0NyAzLjM1MS0xLjk5MSA3LjA1OC0yLjk4NyAxMC45NTItMi45ODd6bS0xNC41OCAyMy4xYzAgNS44OSAyLjg5IDEwLjIyMyA3Ljg2NSAxMy4yNyAyLjMzNiAxLjQzIDQuOTA5IDIuMDc4IDcuNjM4IDIuMDc4IDUuODIgMCAxMC4xMjItMi45NTEgMTMuMTE2LTcuODYzIDEuNDI4LTIuMzQyIDIuMDc0LTQuOTE1IDIuMDc0LTcuNjQyIDAtNS40NzctMi42MzgtOS42NjEtNy4xNDgtMTIuNjkzLTIuNDcxLTEuNjYzLTUuMjIyLTIuNDk2LTguMTk4LTIuNDk2LTYuNDkyIDAtMTEuMTY0IDMuMjgtMTMuOTY3IDkuMTA2LS45NDggMS45Ny0xLjM4IDQuMDYxLTEuMzggNi4yNHptNzAuNjU2LTE0LjcyN2MtMS4xNy0uNTQ4LTMuMzYtLjczLTQuNjI0LS43NzgtNi40NzQtLjI0NC0xMS4xNTggMy40MDItMTMuOTA2IDkuMTEzLS45NDkgMS45Ny0xLjM4MiA0LjA1NS0xLjM4MiA2LjIzNSAwIDYuNjM3IDMuNDg1IDExLjI4NCA5LjQwOSAxNC4xMTcgMi4xNjQgMS4wMzQgNC45NTggMS4yMyA3LjMyMyAxLjIzIDIuMDggMCA1LjAyLTEuMjc0IDYuODY2LTIuMTUxbC4zMi0uMTUyaDEuNDMzbC4xNTguMDMyYzEuNzYyLjM2NyAzLjA5MiAxLjQ4NCAzLjA5MiAzLjM4di43NjdjMCA0LjcxOC04LjYyMiA1Ljc5OC0xMS45MTIgNi4wMjgtMTEuNjEuODAzLTIwLjI5My01LjU3My0yMy42MDMtMTYuNjQ3LS41NzUtMS45MjMtLjgzNC0zLjgzMy0uODM0LTUuODM3di0xLjUzM2MwLTguNDAzIDQuMTctMTUuMDU5IDExLjM3Ny0xOS4zNCAzLjM1MS0xLjk5IDcuMDU3LTIuOTkgMTAuOTUtMi45OWgxLjUzNmM0LjEzIDAgNy45MzQgMS4xNzMgMTEuMzQ0IDMuNTAybC4yOC4xOTQuMTc3LjI5MmMuMzY4LjYxLjY4NSAxLjMxNi42ODUgMi4wNDJ2Ljc2N2MwIDEuOTc4LTEuNDggMy4wNDItMy4yNjYgMy4zODZsLS4xNDguMDI2aC0uNDU4Yy0xLjE1NiAwLTMuNzg1LTEuMTk3LTQuODE3LTEuNjgzem0yNS4xMzQgNS4yNDdjMy4wMS0zLjAxNCA2LjAzLTYuMDIyIDkuMDg1LTguOTg2Ljg1MS0uODI3IDQuMDc0LTQuMzI3IDUuMzQzLTQuMzI3aDEuMzg4bC4xNTguMDMzYzEuNzY4LjM2NyAzLjA5MiAxLjQ4NiAzLjA5MiAzLjM4NnYuNzY2YzAgMS4yOTYtMS41MTggMi44MDItMi4zNTUgMy42ODktMS43OCAxLjg4Ny0zLjY1NCAzLjcxMi01LjQ3NiA1LjU2bC05LjM2MiA5LjUwNGM0LjAzMSA0LjA0IDguMDU4IDguMDgzIDEyLjA1NiAxMi4xNTRhMzEzLjMwNCAzMTMuMzA0IDAgMCAxIDMuMzAxIDMuMzk2Yy4zODUuNDA1Ljk1My45MDkgMS4yNzYgMS40Ny4zNDcuNTI2LjU2IDEuMTE5LjU2IDEuNzUydi44bC0uMDQ1LjE4NWMtLjQzNSAxLjc2OC0xLjU1NyAzLjE5NC0zLjUxNiAzLjE5NGgtLjYxN2MtMS4yODIgMC0yLjczLTEuNDUtMy42MDgtMi4yNzktMS44MS0xLjcwNi0zLjU1Ny0zLjUtNS4zMzEtNS4yNDNsLTUuOTQ5LTUuODR2OS4zMzRjMCAyLjE1LTEuMzQ2IDMuODc4LTMuNTY5IDMuODc4aC0uNjFjLTIuMjI2IDAtMy41Ny0xLjcyOC0zLjU3LTMuODc4di01Mi41OTZjMC0yLjE1IDEuMzQ1LTMuODcgMy41Ny0zLjg3aC42MWMyLjIyMyAwIDMuNTY5IDEuNzIgMy41NjkgMy44N3YyNC4wNDh6bTk2LjU3Ny0xMy4zMTNoLjc3YzIuMzI0IDAgMy44NzUgMS41NjYgMy44NzUgMy44NzcgMCAzLjIwOC0zLjA2NyA0LjAyOS01LjcyIDQuMDI5LTMuNDggMC02LjgwMyAyLjEwNy05LjIwMiA0LjQ3LTIuOTkxIDIuOTQ5LTQuMyA2LjcyNi00LjMgMTAuODc4djE4Ljc1OWMwIDIuMTUtMS4zNDMgMy44NzYtMy41NyAzLjg3NmgtLjYxMmMtMi4yMjcgMC0zLjU2OS0xLjcyNS0zLjU2OS0zLjg3NnYtMTkuODM2YzAtNy42MTcgMy43MDgtMTMuODM1IDkuODktMTguMTk2IDMuNjkxLTIuNjA1IDcuOTE5LTMuOTggMTIuNDM4LTMuOTh6bS01NS4wNzQgMzcuMTc2YzIuODIuOTg1IDYuMDM1Ljg0NCA4LjkyOC4zNCAxLjQ4LS42MjkgNS4yNjQtMi4yOCA2LjY1Ni0yLjAzOGwuMjE3LjAzNy4yLjA5OGMuODUuNDEyIDEuNjYxLjk5NSAyLjA5NSAxLjg2IDEuMDE0IDIuMDI3LjUyNyA0LjA2NS0xLjQ2NSA1LjIxNmwtLjY2My4zODNjLTcuMzUgNC4yNDItMTUuMTY4IDMuNjU0LTIyLjQ5NS0uMzA4LTMuNTAzLTEuODk0LTYuMTgzLTQuNzA1LTguMTYtOC4xMzJsLS40NjItLjgwMWMtNC43MTktOC4xNzItNC4wODItMTYuNzY4IDEuMjQtMjQuNTM5IDEuODM3LTIuNjg2IDQuMjM4LTQuNzYxIDcuMDQ1LTYuMzg0bDEuMDYyLS42MTNjNi45MjItMy45OTYgMTQuMzQxLTMuNzIyIDIxLjQ1LS4yMTUgMy44MjMgMS44ODYgNi45MiA0LjY5NyA5LjA1NCA4LjM5NGwuMzg0LjY2NmMxLjU1IDIuNjg2LS40NTggNS4wMjYtMi41MzEgNi42MjYtMi40MDYgMS44NTYtNC44MzUgNC4wOS03LjE0MSA2LjA4LTUuMTQyIDQuNDM5LTEwLjI3NiA4Ljg4OC0xNS40MTQgMTMuMzN6bS02LjY1NS00LjY3NGM1Ljc1LTQuOTMgMTEuNTAyLTkuODY1IDE3LjIzNy0xNC44MTYgMS45Ni0xLjY5IDQuMTA5LTMuNDQ0IDYuMDUzLTUuMjIxLTEuNTYtMS45NjYtNC4xNjYtMy4zODMtNi4zOC00LjIyOC00LjQ3LTEuNzAzLTguODc3LTEuMTMxLTEyLjk3NiAxLjIzNS01LjM2NSAzLjA5OC03LjY1IDguMDMxLTcuNDUgMTQuMTcuMDggMi40MTguNzMgNC43NDggMi4wMTMgNi44MDUuNDUyLjcyNS45NTcgMS40MDYgMS41MDMgMi4wNTV6TTE0Ny40ODggNDUuNzMyaDIyLjg2NnYyMy4zNzVoMTEuNTYxYzUuMzQgMCAxMC44MzEtLjk1MSAxNS44ODctMi42NjQgMi40ODUtLjg0MyA1LjI3My0yLjAxNSA3LjcyNC0zLjQ5LTMuMjI4LTQuMjE0LTQuODc2LTkuNTM1LTUuMzYtMTQuNzgtLjY2LTcuMTM1Ljc4LTE2LjQyMSA1LjYwOC0yMi4wMDVsMi40MDQtMi43OCAyLjg2NCAyLjMwM2M3LjIxMSA1Ljc5MyAxMy4yNzYgMTMuODg5IDE0LjM0NSAyMy4xMTggOC42ODMtMi41NTQgMTguODc4LTEuOTUgMjYuNTMxIDIuNDY3bDMuMTQgMS44MTItMS42NTIgMy4yMjZDMjQ2LjkzMyA2OC45NDYgMjMzLjQgNzIuODYgMjIwLjE3IDcyLjE2N2MtMTkuNzk3IDQ5LjMwOS02Mi44OTggNzIuNjUzLTExNS4xNTcgNzIuNjUzLTI3IDAtNTEuNzctMTAuMDkzLTY1Ljg3Ni0zNC4wNDdsLS4yMzEtLjM5LTIuMDU1LTQuMTgyYy00Ljc2OC0xMC41NDQtNi4zNTItMjIuMDk1LTUuMjc4LTMzLjYzN2wuMzIzLTMuNDU3SDUxLjQ1VjQ1LjczMmgyMi44NjVWMjIuODY2aDQ1LjczM1YwaDI3LjQ0djQ1LjczMiIgZmlsbD0iIzM2NDU0OCIvPjxwYXRoIGQ9Ik0yMjEuNTcgNTQuMzhjMS41MzMtMTEuOTE2LTcuMzg0LTIxLjI3NS0xMi45MTQtMjUuNzE5LTYuMzczIDcuMzY4LTcuMzYzIDI2LjY3OCAyLjYzNSAzNC44MDgtNS41OCA0Ljk1Ni0xNy4zMzcgOS40NDgtMjkuMzc2IDkuNDQ4SDM1LjM3Yy0xLjE3IDEyLjU2NyAxLjAzNiAyNC4xNCA2LjA3NSAzNC4wNDVsMS42NjcgMy4wNWE1Ni41MzYgNTYuNTM2IDAgMCAwIDMuNDU1IDUuMTg0YzYuMDI1LjM4NyAxMS41OC41MiAxNi42NjIuNDA4aC4wMDJjOS45ODctLjIyIDE4LjEzNi0xLjQgMjQuMzEyLTMuNTRhMS43NjEgMS43NjEgMCAwIDEgMS4xNTMgMy4zMjZjLS44MjIuMjg2LTEuNjc4LjU1Mi0yLjU2Mi44MDVoLS4wMDNjLTQuODYzIDEuMzg5LTEwLjA3OCAyLjMyMy0xNi44MDYgMi43MzguNC4wMDctLjQxNi4wNi0uNDE4LjA2LS4yMjkuMDE1LS41MTcuMDQ4LS43NDcuMDYtMi42NDguMTQ5LTUuNTA2LjE4LTguNDI4LjE4LTMuMTk2IDAtNi4zNDMtLjA2LTkuODYyLS4yNGwtLjA5LjA2YzEyLjIxIDEzLjcyNCAzMS4zMDIgMjEuOTU1IDU1LjIzNCAyMS45NTUgNTAuNjQ4IDAgOTMuNjA4LTIyLjQ1MiAxMTIuNjMyLTcyLjg1NyAxMy40OTYgMS4zODUgMjYuNDY3LTIuMDU3IDMyLjM2Ny0xMy41NzUtOS4zOTgtNS40MjMtMjEuNDg0LTMuNjk0LTI4LjQ0My0uMTk2IiBmaWxsPSIjMjJBMEM4Ii8+PHBhdGggZD0iTTIyMS41NyA1NC4zOGMxLjUzMy0xMS45MTYtNy4zODQtMjEuMjc1LTEyLjkxNC0yNS43MTktNi4zNzMgNy4zNjgtNy4zNjMgMjYuNjc4IDIuNjM1IDM0LjgwOC01LjU4IDQuOTU2LTE3LjMzNyA5LjQ0OC0yOS4zNzYgOS40NDhINDQuMDQ4Yy0uNTk4IDE5LjI0NiA2LjU0NCAzMy44NTUgMTkuMTggNDIuNjg3aC4wMDNjOS45ODctLjIyIDE4LjEzNi0xLjQgMjQuMzEyLTMuNTRhMS43NjEgMS43NjEgMCAwIDEgMS4xNTMgMy4zMjZjLS44MjIuMjg2LTEuNjc4LjU1Mi0yLjU2Mi44MDVoLS4wMDNjLTQuODYzIDEuMzg5LTEwLjUyNiAyLjQ0My0xNy4yNTQgMi44NTgtLjAwMiAwLS4xNjMtLjE1NS0uMTY1LS4xNTUgMTcuMjM3IDguODQyIDQyLjIzIDguODEgNzAuODg1LTIuMTk3IDMyLjEzLTEyLjM0NCA2Mi4wMjktMzUuODYgODIuODktNjIuNzU3LS4zMTQuMTQyLS42Mi4yODctLjkxNy40MzYiIGZpbGw9IiMzN0IxRDkiLz48cGF0aCBkPSJNMzUuNjQ1IDg4LjE4NmMuOTEgNi43MzIgMi44OCAxMy4wMzUgNS44IDE4Ljc3NmwxLjY2NyAzLjA1YTU2LjQzMiA1Ni40MzIgMCAwIDAgMy40NTUgNS4xODRjNi4wMjYuMzg3IDExLjU4MS41MiAxNi42NjQuNDA4IDkuOTg3LS4yMiAxOC4xMzYtMS40IDI0LjMxMi0zLjU0YTEuNzYxIDEuNzYxIDAgMCAxIDEuMTUzIDMuMzI2Yy0uODIyLjI4Ni0xLjY3OC41NTItMi41NjIuODA1aC0uMDAzYy00Ljg2MyAxLjM4OS0xMC40OTYgMi4zODMtMTcuMjI0IDIuNzk5LS4yMzEuMDE0LS42MzQuMDE3LS44NjcuMDMtMi42NDYuMTQ4LTUuNDc1LjIzOS04LjM5OC4yMzktMy4xOTUgMC02LjQ2My0uMDYxLTkuOTgtLjI0IDEyLjIxIDEzLjcyNCAzMS40MiAyMS45ODUgNTUuMzUyIDIxLjk4NSA0My4zNiAwIDgxLjA4NC0xNi40NTggMTAyLjk3OS01Mi44MjJIMzUuNjQ1IiBmaWxsPSIjMUI4MUE1Ii8+PHBhdGggZD0iTTQ1LjM2NyA4OC4xODZjMi41OTIgMTEuODIgOC44MjEgMjEuMDk5IDE3Ljg2NCAyNy40MTggOS45ODctLjIyIDE4LjEzNi0xLjQgMjQuMzEyLTMuNTRhMS43NjEgMS43NjEgMCAwIDEgMS4xNTMgMy4zMjZjLS44MjIuMjg2LTEuNjc4LjU1Mi0yLjU2Mi44MDVoLS4wMDNjLTQuODYzIDEuMzg5LTEwLjYxNSAyLjM4My0xNy4zNDQgMi43OTkgMTcuMjM2IDguODQgNDIuMTU3IDguNzEzIDcwLjgxLTIuMjkzIDE3LjMzNC02LjY2IDM0LjAxNy0xNi41NzQgNDguOTg0LTI4LjUxNUg0NS4zNjciIGZpbGw9IiMxRDkxQjQiLz48cGF0aCBkPSJNNTUuMjYgNDkuNTQzaDE5LjgxOHYxOS44MThINTUuMjZWNDkuNTQzem0xLjY1MSAxLjY1MmgxLjU2NFY2Ny43MWgtMS41NjRWNTEuMTk1em0yLjk0IDBoMS42MjdWNjcuNzFoLTEuNjI2VjUxLjE5NXptMy4wMDIgMGgxLjYyN1Y2Ny43MWgtMS42MjdWNTEuMTk1em0zLjAwNCAwaDEuNjI2VjY3LjcxaC0xLjYyNlY1MS4xOTV6bTMuMDAzIDBoMS42MjZWNjcuNzFINjguODZWNTEuMTk1em0zLjAwMiAwaDEuNTY1VjY3LjcxaC0xLjU2NVY1MS4xOTV6TTc4LjEyNiAyNi42NzdoMTkuODE5djE5LjgxN2gtMTkuODJWMjYuNjc3em0xLjY1MiAxLjY1MmgxLjU2M3YxNi41MTRoLTEuNTYzVjI4LjMyOXptMi45NCAwaDEuNjI2djE2LjUxNGgtMS42MjVWMjguMzI5em0zLjAwMiAwaDEuNjI2djE2LjUxNEg4NS43MlYyOC4zMjl6bTMuMDAzIDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAzIDBoMS42Mjd2MTYuNTE0aC0xLjYyN1YyOC4zMjl6bTMuMDAyIDBoMS41NjZ2MTYuNTE0aC0xLjU2NlYyOC4zMjl6IiBmaWxsPSIjMjNBM0MyIi8+PHBhdGggZD0iTTc4LjEyNiA0OS41NDNoMTkuODE5djE5LjgxOGgtMTkuODJWNDkuNTQzem0xLjY1MiAxLjY1MmgxLjU2M1Y2Ny43MWgtMS41NjNWNTEuMTk1em0yLjk0IDBoMS42MjZWNjcuNzFoLTEuNjI1VjUxLjE5NXptMy4wMDIgMGgxLjYyNlY2Ny43MUg4NS43MlY1MS4xOTV6bTMuMDAzIDBoMS42MjZWNjcuNzFoLTEuNjI2VjUxLjE5NXptMy4wMDMgMGgxLjYyN1Y2Ny43MWgtMS42MjdWNTEuMTk1em0zLjAwMiAwaDEuNTY2VjY3LjcxaC0xLjU2NlY1MS4xOTV6IiBmaWxsPSIjMzRCQkRFIi8+PHBhdGggZD0iTTEwMC45OTMgNDkuNTQzaDE5LjgxOHYxOS44MThoLTE5LjgxOFY0OS41NDN6bTEuNjUxIDEuNjUyaDEuNTYzVjY3LjcxaC0xLjU2M1Y1MS4xOTV6bTIuOTQgMGgxLjYyNlY2Ny43MWgtMS42MjZWNTEuMTk1em0zLjAwMyAwaDEuNjI2VjY3LjcxaC0xLjYyNlY1MS4xOTV6bTMuMDAzIDBoMS42MjZWNjcuNzFoLTEuNjI2VjUxLjE5NXptMy4wMDIgMGgxLjYyOFY2Ny43MWgtMS42MjhWNTEuMTk1em0zLjAwMyAwaDEuNTY0VjY3LjcxaC0xLjU2NFY1MS4xOTV6IiBmaWxsPSIjMjNBM0MyIi8+PHBhdGggZD0iTTEwMC45OTMgMjYuNjc3aDE5LjgxOHYxOS44MTdoLTE5LjgxOFYyNi42Nzd6bTEuNjUxIDEuNjUyaDEuNTYzdjE2LjUxNGgtMS41NjNWMjguMzI5em0yLjk0IDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAzIDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAzIDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAyIDBoMS42Mjh2MTYuNTE0aC0xLjYyOFYyOC4zMjl6bTMuMDAzIDBoMS41NjR2MTYuNTE0aC0xLjU2NFYyOC4zMjl6TTEyMy44NTkgNDkuNTQzaDE5LjgxOHYxOS44MThoLTE5LjgxOFY0OS41NDN6bTEuNjUyIDEuNjUyaDEuNTYzVjY3LjcxaC0xLjU2M1Y1MS4xOTV6bTIuOTQgMGgxLjYyNlY2Ny43MWgtMS42MjZWNTEuMTk1em0zLjAwMiAwaDEuNjI2VjY3LjcxaC0xLjYyNlY1MS4xOTV6bTMuMDAzIDBoMS42MjdWNjcuNzFoLTEuNjI3VjUxLjE5NXptMy4wMDMgMGgxLjYyN1Y2Ny43MWgtMS42MjdWNTEuMTk1em0zLjAwMyAwaDEuNTY0VjY3LjcxaC0xLjU2NFY1MS4xOTV6IiBmaWxsPSIjMzRCQkRFIi8+PHBhdGggZD0iTTEyMy44NTkgMjYuNjc3aDE5LjgxOHYxOS44MTdoLTE5LjgxOFYyNi42Nzd6bTEuNjUyIDEuNjUyaDEuNTYzdjE2LjUxNGgtMS41NjNWMjguMzI5em0yLjk0IDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAyIDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAzIDBoMS42Mjd2MTYuNTE0aC0xLjYyN1YyOC4zMjl6bTMuMDAzIDBoMS42Mjd2MTYuNTE0aC0xLjYyN1YyOC4zMjl6bTMuMDAzIDBoMS41NjR2MTYuNTE0aC0xLjU2NFYyOC4zMjl6IiBmaWxsPSIjMjNBM0MyIi8+PHBhdGggZD0iTTEyMy44NTkgMy44MWgxOS44MThWMjMuNjNoLTE5LjgxOFYzLjgxem0xLjY1MiAxLjY1MWgxLjU2M3YxNi41MTZoLTEuNTYzVjUuNDZ6bTIuOTQgMGgxLjYyNnYxNi41MTZoLTEuNjI2VjUuNDZ6bTMuMDAyIDBoMS42MjZ2MTYuNTE2aC0xLjYyNlY1LjQ2em0zLjAwMyAwaDEuNjI3djE2LjUxNmgtMS42MjdWNS40NnptMy4wMDMgMGgxLjYyN3YxNi41MTZoLTEuNjI3VjUuNDZ6bTMuMDAzIDBoMS41NjR2MTYuNTE2aC0xLjU2NFY1LjQ2eiIgZmlsbD0iIzM0QkJERSIvPjxwYXRoIGQ9Ik0xNDYuNzI1IDQ5LjU0M2gxOS44MTh2MTkuODE4aC0xOS44MThWNDkuNTQzem0xLjY1IDEuNjUyaDEuNTY1VjY3LjcxaC0xLjU2NFY1MS4xOTV6bTIuOTQgMGgxLjYyN1Y2Ny43MWgtMS42MjZWNTEuMTk1em0zLjAwNCAwaDEuNjI3VjY3LjcxaC0xLjYyN1Y1MS4xOTV6bTMuMDAyIDBoMS42MjdWNjcuNzFoLTEuNjI3VjUxLjE5NXptMy4wMDQgMGgxLjYyNlY2Ny43MWgtMS42MjZWNTEuMTk1em0zLjAwMiAwaDEuNTY0VjY3LjcxaC0xLjU2NFY1MS4xOTV6IiBmaWxsPSIjMjNBM0MyIi8+PHBhdGggZD0iTTk2LjcwNCAxMDEuNDkyYTUuNDY4IDUuNDY4IDAgMSAxLS4wMDIgMTAuOTM1IDUuNDY4IDUuNDY4IDAgMCAxIC4wMDItMTAuOTM1IiBmaWxsPSIjRDNFQ0VDIi8+PHBhdGggZD0iTTk2LjcwNCAxMDMuMDQzYy41IDAgLjk3Ny4wOTQgMS40MTcuMjY1YTEuNTk4IDEuNTk4IDAgMCAwIC43OTggMi45OGMuNjA1IDAgMS4xMy0uMzM1IDEuNDAyLS44MzFhMy45MTUgMy45MTUgMCAxIDEtMy42MTctMi40MTRNMCA5MC4xNjJoMjU0LjMyN2MtNS41MzctMS40MDQtMTcuNTItMy4zMDItMTUuNTQ0LTEwLjU2LTEwLjA3IDExLjY1Mi0zNC4zNTMgOC4xNzUtNDAuNDgyIDIuNDMtNi44MjQgOS44OTgtNDYuNTU0IDYuMTM1LTQ5LjMyNS0xLjU3Ni04LjU1NiAxMC4wNDEtMzUuMDY3IDEwLjA0MS00My42MjMgMC0yLjc3MyA3LjcxMS00Mi41MDIgMTEuNDc0LTQ5LjMyNyAxLjU3NS02LjEyOCA1Ljc0Ni0zMC40MSA5LjIyMy00MC40OC0yLjQyOEMxNy41MjIgODYuODYgNS41MzkgODguNzU4IDAgOTAuMTYzIiBmaWxsPSIjMzY0NTQ4Ii8+PHBhdGggZD0iTTExMS4yMzcgMTQwLjg5Yy0xMy41NC02LjQyNS0yMC45NzEtMTUuMTYtMjUuMTA2LTI0LjY5NC01LjAzIDEuNDM1LTExLjA3NSAyLjM1My0xOC4xIDIuNzQ3LTIuNjQ2LjE0OC01LjQzLjIyNC04LjM1LjIyNC0zLjM2OCAwLTYuOTE3LS4xLTEwLjY0My0uMjk3IDEyLjQxNyAxMi40MSAyNy42OTIgMjEuOTY0IDU1Ljk3NiAyMi4xMzggMi4wODggMCA0LjE2LS4wNCA2LjIyMy0uMTE4IiBmaWxsPSIjQkREOUQ3Ii8+PHBhdGggZD0iTTkxLjE2IDEyNC45OTRjLTEuODczLTIuNTQzLTMuNjktNS43MzktNS4wMjYtOC44LTUuMDMgMS40MzctMTEuMDc3IDIuMzU1LTE4LjEwMyAyLjc1IDQuODI2IDIuNjE5IDExLjcyNyA1LjA0NiAyMy4xMyA2LjA1IiBmaWxsPSIjRDNFQ0VDIi8+PC9nPjwvc3ZnPg==" width="2500" height="2100" class="img_ev3q">
<em>도커 컨테이너와 공유 볼륨 권한 문제 해결</em>  </p><h1>목차</h1><ul><li><a href="#%EB%A6%AC%EB%88%85%EC%8A%A4-%EC%82%AC%EC%9A%A9%EC%9E%90%EC%99%80-%EA%B7%B8%EB%A3%B9">리눅스 사용자와 그룹</a></li><li><a href="#%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%8B%A4%EC%8A%B5">컨테이너 실습</a></li><li><a href="#%EA%B3%B5%EC%9C%A0-%EB%B3%BC%EB%A5%A8">공유 볼륨</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="리눅스-사용자와-그룹">리눅스 사용자와 그룹<a href="#리눅스-사용자와-그룹" class="hash-link" aria-label="Direct link to 리눅스 사용자와 그룹" title="Direct link to 리눅스 사용자와 그룹">​</a></h2><p>리눅스 커널은 <code>uid</code>, <code>gid</code> 공간을 관리합니다.
이 정보는 커널 레벨의 syscall 요청에 권한이 있는지 판단하는데 사용됩니다.<br>
<a href="https://ko.wikipedia.org/wiki/%ED%8C%8C%EC%9D%BC_%EC%8B%9C%EC%8A%A4%ED%85%9C_%EA%B6%8C%ED%95%9C" target="_blank" rel="noopener noreferrer">[위키]파일 시스템 권한</a></p><blockquote><p>vi로 write 권한이 없는 파일을 편집할 때
<code>Warning: Changing a readonly file</code>를 보신적이 있나요? </p></blockquote><p>도커 컨테이너를 호스트 서버에서 실행하면 하나의 커널을 공유합니다.
컨테이너화의 가장 큰 장점으로 격리된 프로세스가 커널을 공유해 <strong>빠르다</strong>는 것이죠.
<em>(도커에 대한 자세한 내용은 <a href="https://jwher.github.io/welcome-to-docker" target="_blank" rel="noopener noreferrer">이글</a> 을 보면 도움이 될 것입니다!)</em>
😋</p><p>이 글에선 여러 실습을 통해 호스트와 컨테이너의 <code>uid</code> 관리 방법을 알아봅니다.
해결방법만 찾으신다면 <a href="#%EA%B3%B5%EC%9C%A0-%EB%B3%BC%EB%A5%A8">공유 볼륨</a>으로 넘어가주세요:)</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="컨테이너-실습">컨테이너 실습<a href="#컨테이너-실습" class="hash-link" aria-label="Direct link to 컨테이너 실습" title="Direct link to 컨테이너 실습">​</a></h2><p>하나의 커널을 공유한다는 말은, 컨테이너에서 동작하는 <code>uid</code>와 <code>gid</code> 또한 한 커널에서 관리되고 있음을 뜻합니다.
그렇다면, 컨테이너를 실행시키면 호스트의 어떤 사용자로 실행이 될까요?<br>
<!-- -->⚠ <em>주의! 이 실습은 WSL(OSX)에서 진행하기 어렵습니다.(root uid 문제)</em></p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="실습1">실습1<a href="#실습1" class="hash-link" aria-label="Direct link to 실습1" title="Direct link to 실습1">​</a></h3><p>컨테이너 하나를 실행시켜 봅시다</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run -d ubuntu:latest </span><span class="token function" style="color:#d73a49">sleep</span><span class="token plain"> infinity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Unable to </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> image </span><span class="token string" style="color:#e3116c">'ubuntu:latest'</span><span class="token plain"> locally</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">latest: Pulling from library/ubuntu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">e3f93fd10ed7fe7fa402150fe94fa7235b55d68d12a021a0b5a8427af36e3a8b</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>호스트의 프로세스를 조회해 봅시다</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> aux </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sleep infinity"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token environment constant" style="color:#36acaa">USER</span><span class="token plain">         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root     </span><span class="token number" style="color:#36acaa">3924499</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">2516</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">592</span><span class="token plain"> ?        Ss   </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:26   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:00 </span><span class="token function" style="color:#d73a49">sleep</span><span class="token plain"> infinity</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>컨테이너를 실행할 때, 어떠한 root 권한을 주지 않았지만 sleep infinity 프로세스는 root 사용자로 실행되었습니다.
컨테이너 내부에서 해당 프로세스의 ppid를 조회해 보아도 0번, 즉 root 사용자가 실행한 프로세스로 조회됩니다.✨  </p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="실습2">실습2<a href="#실습2" class="hash-link" aria-label="Direct link to 실습2" title="Direct link to 실습2">​</a></h3><p>호스트 계정의 <code>uid</code>를 확인해 봅시다.  </p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token environment constant" style="color:#36acaa">$UID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>(필요하면 새로운 리눅스 계정을 추가해 줍시다.)</p><p>같은 <code>uid</code>를 사용해 명령을 실행할 <strong>이미지</strong>를 만들어줍니다.</p><div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">FROM ubuntu:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN groupadd containeruser</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN useradd -r -u 1000 -g containeruser containeruser</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">USER containeruser</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CMD ["sleep", "infinity"]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>빌드하고 실행해 확인해 봅시다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> build -t </span><span class="token builtin class-name">test</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">+</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Building </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">.5s </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">7</span><span class="token plain">/7</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> FINISHED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. 생략 </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run -d </span><span class="token builtin class-name">test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ebea1fe7c62de99b9747ea3830cb2b734c4e79907dd9b7b1eb2adf6dce2f9791</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> aux </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sleep infinity"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token environment constant" style="color:#36acaa">USER</span><span class="token plain">       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jwher     </span><span class="token number" style="color:#36acaa">4891</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">2508</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">588</span><span class="token plain"> ?        Ss   07:09   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:00 </span><span class="token function" style="color:#d73a49">sleep</span><span class="token plain"> infinity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token builtin class-name">exec</span><span class="token plain"> -it ebea /bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">containeruser@ebea1fe7c62d:/$ </span><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> aux </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sleep infinity"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token environment constant" style="color:#36acaa">USER</span><span class="token plain">       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contain+     </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">2508</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">588</span><span class="token plain"> ?        Ss   07:09   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:00 </span><span class="token function" style="color:#d73a49">sleep</span><span class="token plain"> infinity</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>컨테이너는 <code>uid</code> 1000의 <code>containeruser</code> 사용자로 실행했습니다.
하지만 이미지 빌드과정에서 만든 <code>containeruser</code>는 호스트에 존재하지 않습니다.
이때, 호스트에서 프로세스를 실행시키는 <code>uid</code>는
도커 <strong>이미지</strong>가 알고있는 사용자의 <code>uid</code> 1000 입니다.
따라서, 호스트에서 실행중인 프로세스를 조회하면 <code>uid</code> 1000에 해당하는 사용자 <code>jwher</code>가 맵핑됩니다.</p><p>이 실습에서 중요한 점은 컨테이너 사용자 <code>containeruser</code>는 호스트의 <code>jwher</code>의 권한을 갖는 것입니다.
호스트에서 <code>jwher</code>에 권한을 부여하면 <code>containeruser</code>에게도 같은 권한이 부여됩니다.❤️  </p><p><em>다시 말해 <code>uid</code> 1000이 중요한 것이지 <strong>이름</strong>이 중요한 것이 아닙니다</em></p><details markdown="1" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>/etc/passwd</summary><div><div class="collapsibleContent_i85q"><p><code>실습2</code> 컨테이너를 잠시 살펴볼까요?</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">containeruser@ebea1fe7c62d:/$ </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> /etc/passwd </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> containeruser</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">containeruser:x:1000:1000::/home/containeruser:/bin/sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="실습3">실습3<a href="#실습3" class="hash-link" aria-label="Direct link to 실습3" title="Direct link to 실습3">​</a></h3><p>도커 런타임 옵션으로 uid를 지정해 실행해 봅시다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run -d --user </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"> ubuntu:latest </span><span class="token function" style="color:#d73a49">sleep</span><span class="token plain"> infinity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">19fd5efdc631f3f102ab5bd2b4759dba228f9f8c14a85a15362d7dc5ca25200b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> aux </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sleep infinity"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token environment constant" style="color:#36acaa">USER</span><span class="token plain">       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jwher     </span><span class="token number" style="color:#36acaa">6073</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">2508</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">584</span><span class="token plain"> ?        Ss   07:26   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:00 </span><span class="token function" style="color:#d73a49">sleep</span><span class="token plain"> infinity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token builtin class-name">exec</span><span class="token plain"> -it 19fd /bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I have no name</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">@19fd5efdc631:/$ </span><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> aux </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sleep infinity"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token environment constant" style="color:#36acaa">USER</span><span class="token plain">       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1000</span><span class="token plain">         </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">2508</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">584</span><span class="token plain"> ?        Ss   07:26   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:00 </span><span class="token function" style="color:#d73a49">sleep</span><span class="token plain"> infinity</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>신기하게도 컨테이너 사용자가 <code>I have no name!</code>으로 나타납니다.😆
이는 /etc/passwd 파일에 uid 1000이 존재하지 않기 때문입니다.
따라서 bash 쉘이 <code>I have no name!</code>을 표시하고 있습니다.</p><p>이 실습에서 중요한 점은 런타임 옵션으로 컨테이너를 만들면 Dockerfile의 값을 오버라이드한다는 것입니다.  </p><p><code>실습2</code>에서 만든 이미지를 다시 사용해 봅시다</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run --user </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> -d </span><span class="token builtin class-name">test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">9306686a63a954bdfa62b162dedb486ba5162f270b5d01b1057aeb9130695bb5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> aux </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sleep infinity"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token environment constant" style="color:#36acaa">USER</span><span class="token plain">       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root   </span><span class="token number" style="color:#36acaa">1535053</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0.4</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">2516</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">584</span><span class="token plain"> ?        Ss   </span><span class="token number" style="color:#36acaa">16</span><span class="token plain">:47   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:00 </span><span class="token function" style="color:#d73a49">sleep</span><span class="token plain"> infinity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token builtin class-name">exec</span><span class="token plain"> -it </span><span class="token number" style="color:#36acaa">9306</span><span class="token plain"> /bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root@9306686a63a9:/</span><span class="token comment" style="color:#999988;font-style:italic"># ps aux | grep "sleep infinity"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token environment constant" style="color:#36acaa">USER</span><span class="token plain">       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root         </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">2516</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">584</span><span class="token plain"> ?        Ss   07:47   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:00 </span><span class="token function" style="color:#d73a49">sleep</span><span class="token plain"> infinity</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>uid 0의 <code>root</code>로 오버라이드 된 것을 확인할 수 있습니다!🔥  </p><br><blockquote><p align="center"># Fix 어려워요...</p></blockquote><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="정리">정리<a href="#정리" class="hash-link" aria-label="Direct link to 정리" title="Direct link to 정리">​</a></h3><p>위의 실습을 정리하면 다음과 같습니다.</p><ol><li>컨테이너 프로세스가 (호스트에)알려진 uid로 실행중이면, 호스트에서 uid를 사용하여 간단하게 접근제한을 할 수 있습니다.  </li><li>더 좋은 방법은 알려진 uid(또는 username)를 런타임에 <code>--user</code> 플래그를 사용하는 것입니다.</li><li>하지만 컨테이너와 호스트의 uid가 맵핑될 때, 각각의 사용자가 다르게 보일 수 있습니다.</li></ol><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="공유-볼륨">공유 볼륨<a href="#공유-볼륨" class="hash-link" aria-label="Direct link to 공유 볼륨" title="Direct link to 공유 볼륨">​</a></h2><p>저는 ELK 스택을 컨테이너로 실행시키는 중 <code>logstash.db</code> 파일을 작성하지 못하는 문제를 겪었습니다.😓
마운트된 볼륨의 권한을 확인해 봅시다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">cd</span><span class="token plain"> /var/lib/docker/volumes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Windows</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">wsl$</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">docker-desktop-data</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">version-pack-data</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">community</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">docker</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">volumes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># WSL </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># /mnt/wsl/docker-desktop-data 하위에 있습니다 해당 경로에 마운트해줍니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mount</span><span class="token plain"> -t drvfs </span><span class="token string" style="color:#e3116c">'\\wsl$\docker-desktop-data'</span><span class="token plain"> /mnt/wsl/docker-desktop-data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">cd</span><span class="token plain"> /mnt/wsl/docker-desktop-data/version-pack-data/community/docker/volumes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 확인해봅시다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ls</span><span class="token plain"> -l</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">total </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drwxrwxr-x  </span><span class="token number" style="color:#36acaa">7</span><span class="token plain"> root root   </span><span class="token number" style="color:#36acaa">93</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">8</span><span class="token plain">월  </span><span class="token number" style="color:#36acaa">9</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><span class="token plain">:23 data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drwx------ </span><span class="token number" style="color:#36acaa">20</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">70</span><span class="token plain"> root </span><span class="token number" style="color:#36acaa">4096</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">8</span><span class="token plain">월  </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">21</span><span class="token plain">:10 db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drwxrwxrwx  </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> root root   </span><span class="token number" style="color:#36acaa">33</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">7</span><span class="token plain">월 </span><span class="token number" style="color:#36acaa">26</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><span class="token plain">:13 events</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drwxrwxr-x  </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> root root   </span><span class="token number" style="color:#36acaa">78</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">7</span><span class="token plain">월 </span><span class="token number" style="color:#36acaa">23</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token plain">:43 keys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drwxrwxrwx  </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> root root </span><span class="token number" style="color:#36acaa">4096</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">8</span><span class="token plain">월  </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> 09:10 logs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>리눅스 파일 권한은 <code>r</code> read, <code>w</code> write, <code>x</code> execute 쌍으로 구분됩니다.
순서대로 <code>4</code>, <code>2</code>, <code>1</code>비트로 표현하기도 합니다.
3쌍이 존재하며 각각 <code>owner</code>, <code>group</code>, <code>other</code> 사용자의 권한을 나타냅니다.  </p><p>제가 쓰고자 하려는 <code>logstash.db</code> 파일은 <code>data</code> 폴더 아래에 있습니다.
하지만 <code>other</code> 사용자는 쓰기 권한이 없네요. 바꿔줍시다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">777</span><span class="token plain"> data</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><blockquote><p align="center"># Fix 흠! 하나 해결했군요!</p></blockquote><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="끝">끝?<a href="#끝" class="hash-link" aria-label="Direct link to 끝?" title="Direct link to 끝?">​</a></h3><p>하지만 도커 공유 볼륨을 호스트 권한으로 관리하는 것은 여러 문제를 발생시킵니다.
예를들어, 호스트에 존재하지 않는 <code>uid</code>, <code>gid</code>로 권한을 준다면 문제가 발생합니다.
근본적인 해결 방법으로 "데이터 전용 컨테이너"를 사용하도록 조언합니다.</p><p><del>위의 방법은 땜빵이라는 것이죠</del></p><p><a href="https://docs.docker.com/storage/volumes/" target="_blank" rel="noopener noreferrer">[공식]Use volumes</a><br>
<a href="https://medium.com/@ramangupta/why-docker-data-containers-are-good-589b3c6c749e" target="_blank" rel="noopener noreferrer">Why Docker Data Containers are Good</a>  </p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p>마찬가지로, 쿠버네티스 로컬 persistent volume 또한
적절한 <a href="https://ko.wikipedia.org/wiki/%ED%8C%8C%EC%9D%BC_%EC%8B%9C%EC%8A%A4%ED%85%9C_%EA%B6%8C%ED%95%9C" target="_blank" rel="noopener noreferrer">파일시스템 권한</a> 이 있어야 합니다.  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://medium.com/@mccode/understanding-how-uid-and-gid-work-in-docker-containers-c37a01d01cf" target="_blank" rel="noopener noreferrer">Understanding how uid and gid work in Docker containers</a><br>
<a href="https://github.com/microsoft/WSL/discussions/4176#discussioncomment-264961" target="_blank" rel="noopener noreferrer">[깃헙]WSL2 where is docker volume location?</a>  </p>]]></content:encoded>
            <category>tech</category>
            <category>docker</category>
            <category>linux</category>
        </item>
        <item>
            <title><![CDATA[Variable Autoencoder]]></title>
            <link>https://jwher.github.io/posts/variable-autoencoder</link>
            <guid>https://jwher.github.io/posts/variable-autoencoder</guid>
            <pubDate>Wed, 28 Jul 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[VAE: Variable Auto Encoder]]></description>
            <content:encoded><![CDATA[<p align="center"><img loading="lazy" src="/assets/img/variable-autoencoder/vae.png" class="img_ev3q"></p>*생성 모델과 VAE, 수학적 의미까지*<h1>목차</h1><ul><li><a href="#%EC%83%9D%EC%84%B1%EB%AA%A8%EB%8D%B8">생성모델</a></li><li><a href="#%EB%B0%B0%EA%B2%BD%EC%A7%80%EC%8B%9D">배경지식</a></li><li><a href="#vae">VAE</a></li><li><a href="#%EC%88%98%ED%95%99%EA%B3%BC-%EC%BD%94%EB%93%9C">수학과 코드</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="생성모델">생성모델<a href="#생성모델" class="hash-link" aria-label="Direct link to 생성모델" title="Direct link to 생성모델">​</a></h2><p><em>Generative Model</em></p><ul><li><strong>생성 모델</strong> 은 새로운 데이터 인스턴스를 만들어냅니다.  </li><li><strong>판별 모델(Discriminative models)</strong> 은 다른 종류의 데이터 인스턴스를 분류합니다.  </li></ul><p>예를 들어 사진 속에서 고양이를 찾는 것은 판별 모델,
실제 고양이를 그리는 것은 생성 모델입니다.  </p><p>수학적으로 표현해봅시다🧮. 주어진 데이터 집합 X와 라벨(레이블) 집합 Y가 있습니다.  </p><ul><li><strong>생성 모델</strong> 은 결합 분포 <code>p(X,Y)</code>를 학습하거나, 라벨이 없으면 <code>p(X)</code> 분포만 학습합니다.</li><li><strong>판별 모델</strong> 은 X일때 Y일 확률, 즉 조건부 확률 <code>p(Y|X)</code>를 학습합니다.  </li></ul><blockquote><div align="center"><img loading="lazy" src="/assets/img/variable-autoencoder/xandy-ybarx.png" class="img_ev3q"></div><p>생성모델은 X에서 Y가 생성되게 학습해야 합니다. 즉, <code>X=Y=X∩Y</code>, <code>(X∩Y)ᶜ=∅</code>이 되어야 합니다.<br>
<!-- -->판별 모델은 X가 Y에 포힘되도록 학습해야 합니다. 즉, <code>X∩Yᶜ=∅</code>이 되어야 합니다.</p><br><br></blockquote><p>눈치가 빠른 사람은 생성 모델이 판별 모델보다 어렵다는 것을 발견했을 겁니다.</p><p>예를 들어 고양이를 찾는다면 주변과 구분되는 특징(꼬리...) 하나 이상만 찾으면 됩니다.
하지만 고양이 그림을 그리려면, 고양이의 모든 특징(꼬리, 귀, 눈, 털...)을 정확히 알아야 합니다.</p><blockquote><div align="center"><img loading="lazy" src="/assets/img/variable-autoencoder/x-is-y-y-include-x.png" class="img_ev3q"><br><img loading="lazy" src="/assets/img/variable-autoencoder/x-y-example.png" class="img_ev3q"></div><p>생성 모델은 집합 X와 집합 Y를 최대한 일치시키는 방법을 찾아야 합니다.<br>
<!-- -->반면에 판별 모델은 집합 Y에 속한 X만 찾으면 됩니다.<br>
<!-- -->(X를 학습해야 하는 정보, Y를 고양이의 특징이라고 생각해 봅시다)</p></blockquote><p>생성 모델의 종류로는 VAE, GAN, HMM, Bayesian 등이 있습니다.
판별 모델의 종류로는 k-NN, 로지스틱 회귀, SVM, 결정트리 등이 있습니다.
이 글에서 함께 생성 모델인 VAE를 살펴봅시다.🤗</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="배경지식">배경지식<a href="#배경지식" class="hash-link" aria-label="Direct link to 배경지식" title="Direct link to 배경지식">​</a></h2><p>VAE를 살펴보기 전엔 <a href="#%ED%99%95%EB%A5%A0%EB%B6%84%ED%8F%AC">확률분포</a>,
<a href="#%EB%B2%A0%EC%9D%B4%EC%A6%88-%EC%A0%95%EB%A6%AC">베이즈 정리</a>,
<a href="#%EC%BF%A8%EB%B0%B1-%EB%9D%BC%EC%9D%B4%EB%B8%94%EB%9F%AC-%EB%B0%9C%EC%82%B0">쿨백-라이블러 발산</a> 배경지식이 필요합니다.
전부 아신다고요? <a href="#vae">다음 장</a> 으로 넘어가세요🎉</p><p><del><em>저는 개념이 지겨워서 역순으로 코드 먼저 볼 때가 많습니다</em></del></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="확률분포">확률분포<a href="#확률분포" class="hash-link" aria-label="Direct link to 확률분포" title="Direct link to 확률분포">​</a></h3><p><em>probability distribution</em>  </p><p>확률 분포는 확률변수(x)가 특정한 값을 가질 확률을 나타내는 함수(f(x))입니다.
확률 분포는 <strong>이산확률분포(Discrete Probability Distribution)</strong> 와
<strong>연속확률분포(Continuous Probability Distribution)</strong> 로 나뉘는데요,
<strong>이산확률분포</strong>는 확률변수가 가질 수 있는 값이 <strong>가산집합</strong>인 확률분포를 말합니다.
반면에, <strong>연속확률분포</strong>는 확률변수가 <strong>연속적</strong>이고 확률밀도함수로 표현할 수 있는 분포를 말합니다.</p><p>통계학을 들으신 분이라면 이항분포의 특수한 형태인
<a href="https://ko.wikipedia.org/wiki/%ED%91%B8%EC%95%84%EC%86%A1_%EB%B6%84%ED%8F%AC" target="_blank" rel="noopener noreferrer">푸아송 분포</a>
와 대표적인 연속확률분포인 정규분포가 어렴풋이 기억날겁니다.  </p><p>정규분포(Gaussian distribution)와 연속확률분포를 조금 더 자세히 볼까요?  </p><p align="center"><img loading="lazy" src="/assets/img/variable-autoencoder/Gaussian_distribution.svg" class="img_ev3q"></p><p>연속 확률 변수의 확률밀도함수(f(x))는 다음 두 조건을 만족합니다.  </p><ul><li>모든 실수 x에 대해 f(x)≥0  </li><li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>∫</mo><mi mathvariant="normal">∞</mi><mrow><mo>−</mo><mi mathvariant="normal">∞</mi></mrow></msubsup><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi>d</mi><mi>x</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\int_{\infty}^{-\infty}f(x)dx=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3221em;vertical-align:-0.3558em"></span><span class="mop"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9662em"><span style="top:-2.3442em;margin-left:-0.1945em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∞</span></span></span></span><span style="top:-3.2579em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3558em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span></span>  </li></ul><p>정규분포 또한 연속확률분포로 확률밀도함수의 특징을 갖습니다.    </p><p>정규분포는 평균(μ, mu)과 표준편차(σ, sigma)로 분포를 표기합니다.  </p><ul><li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo stretchy="false">(</mo><mi>μ</mi><mo separator="true">,</mo><msup><mi>σ</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">N(\mu, \sigma^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10903em">N</span><span class="mopen">(</span><span class="mord mathnormal">μ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>  </li></ul><p>평균이 0이고 표준편차가 1인 정규분포 N(0,1)을 표준정규분포라 합니다.
정규분포는 정규화를 통해 표준정규분포를 얻을 수 있습니다.</p><ul><li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Z</mi><mo>=</mo><mfrac><mrow><mi>X</mi><mo>−</mo><mi>μ</mi></mrow><mi>σ</mi></mfrac></mrow><annotation encoding="application/x-tex">Z=\frac{X-\mu}{\sigma}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.07153em">Z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.2694em;vertical-align:-0.345em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9244em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em">σ</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.4461em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em">X</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>  </li></ul><p>각 사건이 벌어졌을 때의 이득과 확률을 곱한 값의 합을 <strong>기댓값</strong>이라고 하는데요,
연속확률변수에서 기댓값은 다음과 같습니다.</p><ul><li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo stretchy="false">[</mo><mi>X</mi><mo stretchy="false">]</mo><mo>=</mo><msubsup><mo>∫</mo><mi mathvariant="normal">∞</mi><mrow><mo>−</mo><mi mathvariant="normal">∞</mi></mrow></msubsup><mi>x</mi><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi>d</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">E[X] = \int_{\infty}^{-\infty}xf(x)dx</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.05764em">E</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.07847em">X</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.3221em;vertical-align:-0.3558em"></span><span class="mop"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9662em"><span style="top:-2.3442em;margin-left:-0.1945em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∞</span></span></span></span><span style="top:-3.2579em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3558em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">x</span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span></span></span></span></span>  </li></ul><p>정규분포에서 기댓값을 계산해 보면 모평균과 같습니다.</p><ul><li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo stretchy="false">[</mo><mi>X</mi><mo stretchy="false">]</mo><mo>=</mo><mi>μ</mi></mrow><annotation encoding="application/x-tex">E[X]=μ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.05764em">E</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.07847em">X</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal">μ</span></span></span></span></span>  <br></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="베이즈-정리">베이즈 정리<a href="#베이즈-정리" class="hash-link" aria-label="Direct link to 베이즈 정리" title="Direct link to 베이즈 정리">​</a></h3><p><em>Bayes' theorem</em>  </p><p>베이즈 정리는 두 확률변수의 <strong>사전확률</strong>과 <strong>사후확률</strong> 사이의 관계를 나타냅니다.<br>
<em>A,B는 가측집합이고 P(B)&gt;0일 때,</em>  </p><ul><li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>A</mi><mo>∣</mo><mi>B</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo><mo>∗</mo><mi>P</mi><mo stretchy="false">(</mo><mi>B</mi><mo>∣</mo><mi>A</mi><mo stretchy="false">)</mo></mrow><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>B</mi><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">P(A\mid B)=\frac{P(A)*P(B\mid A)}{P(B)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">P</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.05017em">B</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">P</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">A</span><span class="mclose mtight">)</span><span class="mbin mtight">∗</span><span class="mord mathnormal mtight" style="margin-right:0.13889em">P</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.05017em">B</span><span class="mrel mtight">∣</span><span class="mord mathnormal mtight">A</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></li></ul><p>조건부 확률을 통해 쉽게 증명할 수 있습니다.  </p><blockquote><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>A</mi><mo>∣</mo><mi>B</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>A</mi><mo>⋂</mo><mi>B</mi><mo stretchy="false">)</mo></mrow><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>B</mi><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">P(A\mid B)=\frac{P(A \bigcap B)}{P(B)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">P</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.05017em">B</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">P</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">A</span><span class="mspace mtight" style="margin-right:0.1952em"></span><span class="mop op-symbol small-op mtight" style="position:relative;top:0em">⋂</span><span class="mspace mtight" style="margin-right:0.1952em"></span><span class="mord mathnormal mtight" style="margin-right:0.05017em">B</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><br>
<br>
<em>P(B)&gt;0임을 가정했으므로</em><br>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>A</mi><mo>∣</mo><mi>B</mi><mo stretchy="false">)</mo><mi>P</mi><mo stretchy="false">(</mo><mi>B</mi><mo stretchy="false">)</mo><mo>=</mo><mi>P</mi><mo stretchy="false">(</mo><mi>A</mi><mo>⋂</mo><mi>B</mi><mo stretchy="false">)</mo><mo>=</mo><mi>P</mi><mo stretchy="false">(</mo><mi>B</mi><mo>⋂</mo><mi>A</mi><mo stretchy="false">)</mo><mo>=</mo><mi>P</mi><mo stretchy="false">(</mo><mi>B</mi><mo>∣</mo><mi>A</mi><mo stretchy="false">)</mo><mi>P</mi><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(A\mid B)P(B)=P(A \bigcap B)=P(B \bigcap A)=P(B\mid A)P(A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop op-symbol small-op" style="position:relative;top:0em">⋂</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop op-symbol small-op" style="position:relative;top:0em">⋂</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">A</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">A</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mclose">)</span></span></span></span></span><br>
<br>
<em>첫 식에 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>A</mi><mo>⋂</mo><mi>B</mi><mo stretchy="false">)</mo><mo>=</mo><mi>P</mi><mo stretchy="false">(</mo><mi>B</mi><mo>∣</mo><mi>A</mi><mo stretchy="false">)</mo><mi>P</mi><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(A \bigcap B)=P(B\mid A)P(A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop op-symbol small-op" style="position:relative;top:0em">⋂</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">A</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mclose">)</span></span></span></span></span> 를 이용하면</em><br>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>A</mi><mo>∣</mo><mi>B</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo><mo>⋅</mo><mi>P</mi><mo stretchy="false">(</mo><mi>B</mi><mo>∣</mo><mi>A</mi><mo stretchy="false">)</mo></mrow><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>B</mi><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">P(A\mid B)=\frac{P(A)\cdot P(B\mid A)}{P(B)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">P</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.05017em">B</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">P</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">A</span><span class="mclose mtight">)</span><span class="mbin mtight">⋅</span><span class="mord mathnormal mtight" style="margin-right:0.13889em">P</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.05017em">B</span><span class="mrel mtight">∣</span><span class="mord mathnormal mtight">A</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>  </p></blockquote><details markdown="1" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>TMI</summary><div><div class="collapsibleContent_i85q"><p>부가적으로, 사건 A와 사건 B가 독립일 때 조건부 확률
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>A</mi><mo>∣</mo><mi>B</mi><mo stretchy="false">)</mo><mo>=</mo><mi>P</mi><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(A\mid B)=P(A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mclose">)</span></span></span></span></span><br>
<!-- -->이므로<br>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo><mi>P</mi><mo stretchy="false">(</mo><mi>B</mi><mo stretchy="false">)</mo><mo>=</mo><mi>P</mi><mo stretchy="false">(</mo><mi>A</mi><mo>⋂</mo><mi>B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(A)P(B)=P(A \bigcap B)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop op-symbol small-op" style="position:relative;top:0em">⋂</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="mclose">)</span></span></span></span></span><br>
<!-- -->임을 알 수 있습니다.</p></div></div></details><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="쿨백-라이블러-발산">쿨백-라이블러 발산<a href="#쿨백-라이블러-발산" class="hash-link" aria-label="Direct link to 쿨백-라이블러 발산" title="Direct link to 쿨백-라이블러 발산">​</a></h3><p><em>Kullback–Leibler Divergence</em>    </p><p>쿨백-라이블러 발산은 두 확률분포의 차이를 계산하는 함수입니다.  </p><p>두 확률변수에 대한 확률분포 P, Q에 대해 쿨백-라이블러 발산은 다음과 같이 정의됩니다.  </p><ul><li>이산확률분포: <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mrow><mi>K</mi><mi>L</mi></mrow></msub><mo stretchy="false">(</mo><mi>P</mi><mo>∣</mo><mo>∣</mo><mi>Q</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mo>∑</mo><mi>i</mi></msub><mi>P</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mfrac><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow><mrow><mi>Q</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">D_{KL}(P\mid\mid Q)=\sum_iP(i)log\frac{P(i)}{Q(i)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em">K</span><span class="mord mathnormal mtight">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">Q</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.162em"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">Q</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">P</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>  </li><li>연속확률븐포: <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mrow><mi>K</mi><mi>L</mi></mrow></msub><mo stretchy="false">(</mo><mi>P</mi><mo>∣</mo><mo>∣</mo><mi>Q</mi><mo stretchy="false">)</mo><mo>=</mo><msubsup><mo>∫</mo><mrow><mo>−</mo><mi mathvariant="normal">∞</mi></mrow><mi mathvariant="normal">∞</mi></msubsup><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mfrac><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mrow><mi>q</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mfrac><mi>d</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">D_{KL}(P\mid\mid Q)=\int_{-\infty}^{\infty}p(x)log\frac{p(x)}{q(x)}dx</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em">K</span><span class="mord mathnormal mtight">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">Q</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em"></span><span class="mop"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8593em"><span style="top:-2.3442em;margin-left:-0.1945em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">∞</span></span></span></span><span style="top:-3.2579em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4142em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em">q</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span></span></span></span></span><br><em>(p,q는 각각 확률분포의 확률밀도함수입니다)</em>  </li></ul><p>연속일때 조금 더 풀어보면 다움과 같습니다  </p><ul><li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mrow><mi>K</mi><mi>L</mi></mrow></msub><mo stretchy="false">(</mo><mi>P</mi><mo>∣</mo><mo>∣</mo><mi>Q</mi><mo stretchy="false">)</mo><mo>=</mo><msubsup><mo>∫</mo><mrow><mo>−</mo><mi mathvariant="normal">∞</mi></mrow><mi mathvariant="normal">∞</mi></msubsup><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi>d</mi><mi>x</mi><mo>−</mo><msubsup><mo>∫</mo><mrow><mo>−</mo><mi mathvariant="normal">∞</mi></mrow><mi mathvariant="normal">∞</mi></msubsup><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>q</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi>d</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">D_{KL}(P\mid\mid Q)=\int_{-\infty}^{\infty}p(x)log\ p(x)dx - \int_{-\infty}^{\infty}p(x)log\ q(x)dx</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em">K</span><span class="mord mathnormal mtight">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">Q</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.2734em;vertical-align:-0.4142em"></span><span class="mop"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8593em"><span style="top:-2.3442em;margin-left:-0.1945em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">∞</span></span></span></span><span style="top:-3.2579em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4142em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.2734em;vertical-align:-0.4142em"></span><span class="mop"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8593em"><span style="top:-2.3442em;margin-left:-0.1945em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">∞</span></span></span></span><span style="top:-3.2579em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4142em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span></span></span></span></span>  </li></ul><br><p align="center"><iframe src="https://angeloyeo.github.io/p5/2020-10-27-KL_divergence/" style="width:900px;height:350px"></iframe></p><p><a href="https://angeloyeo.github.io/2020/10/27/KL_divergence.html" target="_blank" rel="noopener noreferrer">KL divergence</a>
눈으로 이해하기 쉬운 좋은 자료를 만들어 주셨습니다.  </p><p>쿨백-라이블러 발산의 중요한 특징은 다음과 같습니다.  </p><ul><li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mrow><mi>K</mi><mi>L</mi></mrow></msub><mo stretchy="false">(</mo><mi>p</mi><mo>∣</mo><mo>∣</mo><mi>q</mi><mo stretchy="false">)</mo><mo>≥</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">D_{KL}(p\mid\mid q) ≥ 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em">K</span><span class="mord mathnormal mtight">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0</span></span></span></span></span>  </li><li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mrow><mi>K</mi><mi>L</mi></mrow></msub><mo stretchy="false">(</mo><mi>p</mi><mo>∣</mo><mo>∣</mo><mi>q</mi><mo stretchy="false">)</mo><mo mathvariant="normal">≠</mo><msub><mi>D</mi><mrow><mi>K</mi><mi>L</mi></mrow></msub><mo stretchy="false">(</mo><mi>q</mi><mo>∣</mo><mo>∣</mo><mi>p</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">D_{KL}(p\mid\mid q) ≠ D_{KL}(q\mid\mid p)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em">K</span><span class="mord mathnormal mtight">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em">K</span><span class="mord mathnormal mtight">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mclose">)</span></span></span></span></span></li></ul><p><del>증명은 다음에 하겠습니다</del></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="vae">VAE<a href="#vae" class="hash-link" aria-label="Direct link to VAE" title="Direct link to VAE">​</a></h2><p>생성 모델 구조를 봅시다.  </p><p align="center"><img loading="lazy" src="/assets/img/variable-autoencoder/latent-vector.png" class="img_ev3q"></p><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi><mo>∼</mo><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">z\sim p(z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">)</span></span></span></span></span>의 확률변수가 주어졌을 때, 원하는 x값을 얻을 확률은 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo>∣</mo><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(x\mid z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">)</span></span></span></span></span> 입니다.
우리의 목적은 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo>∣</mo><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(x\mid z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">)</span></span></span></span></span>일 수도 있는 근사값 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>θ</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo>∣</mo><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p_\theta(x\mid z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em">θ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">)</span></span></span></span></span> 를 구하는 것입니다.  </p><p><em>주의! <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo>∣</mo><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(x\mid z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">)</span></span></span></span></span>는 생성기(generator)가 아닌 확률분포입니다</em>  </p><p>그렇다면 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo>∣</mo><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(x\mid z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">)</span></span></span></span></span>와 가장 비슷한 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>θ</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo>∣</mo><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p_\theta(x\mid z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em">θ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">)</span></span></span></span></span>를 어떻게 구해야 할까요?
둘 사이의 MSE(Mean Square Error)가 최소가 되는 분포를 찾으면 가장 비슷할까요?   </p><p align="center"><img loading="lazy" src="/assets/img/variable-autoencoder/mle-example.png" class="img_ev3q"></p><p>파란색 분포를 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo>∣</mo><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(x\mid z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">)</span></span></span></span></span>라고 합시다.
주황색 분포는 변형이 존재하고, 회색 분포는 x축 이동을 했습니다.
주황색과 회색 분포 중 무엇이 파란색 분포에 더 가까울까요?  </p><p>회색 분포는 단순히 이동을 했기 때문에 의미적으로 파란색과 동일합니다.
하지만 파란색 분포와 다른 확률분포의 차이(MSE)를 계산하면, 오류가 있지만 더 가까이 있는 주황색 분포가 작습니다.  </p><p>즉, 사전 확률(prior probability, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">)</span></span></span></span></span>) 지표로 학습하면 올바르게 학습되지 않습니다.
따라서 사후 확률(posterior probability, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(z\mid x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span>)과 근사값 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q_\lambda(z\mid x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span>를 포함해
<a href="https://ko.wikipedia.org/wiki/%EB%B3%80%EB%B6%84%EB%B2%95" target="_blank" rel="noopener noreferrer">변분법(Calculus of Variational)</a>
을 통해 학습합니다.  </p><p align="center"><img loading="lazy" src="/assets/img/variable-autoencoder/latent-vector-learn.png" class="img_ev3q"></p><p><del><em>왜 앞에있는게 사후확률이야</em></del><br>
<!-- -->p(z)를 바로 학습하는 것이 아니라, 이미 존재하는 결과(<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(z\mid x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span> 사후확률)로 z를 학습합니다.
이때 근사함수 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><msub><mi>p</mi><mi>θ</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo>∣</mo><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q_\lambda(z\mid x), p_\theta(x\mid z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em">θ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">)</span></span></span></span></span>를 각각 <code>encoder</code>, <code>decoder</code>로 부르겠습니다.<br>
<em>(신경망은 각각 λ와 θ를 파라미터로 가집니다)</em></p><p>자, 그럼 이제 변분법을 통해 참 사후조건인 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(z\mid x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span>를 찾으면 됩니다!
왜 VAE인지 이제 알겠군요!😉  </p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="elbo">ELBO<a href="#elbo" class="hash-link" aria-label="Direct link to ELBO" title="Direct link to ELBO">​</a></h2><p><em>Evidence Lower BOund</em>  </p><p>생성해야할 x의 분포 p(x)의 확실한 최소 경계값을 추정하고 최댓값을 구해 유사한 분포를 만들 수 있습니다.  </p><p>이상적인 사후조건에 베이즈 정리를 적용해봅시다.  </p><blockquote><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo>⋅</mo><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo>∣</mo><mi>z</mi><mo stretchy="false">)</mo></mrow><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">p(z\mid x) = \frac{ p(z) \cdot p(x\mid z) }{ p(x) }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.04398em">z</span><span class="mclose mtight">)</span><span class="mbin mtight">⋅</span><span class="mord mathnormal mtight">p</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">x</span><span class="mrel mtight">∣</span><span class="mord mathnormal mtight" style="margin-right:0.04398em">z</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><br>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo>⋅</mo><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo>∣</mo><mi>z</mi><mo stretchy="false">)</mo></mrow><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">p(x) = \frac{ p(z) \cdot p(x\mid z) }{ p(z\mid x) }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.04398em">z</span><span class="mrel mtight">∣</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.04398em">z</span><span class="mclose mtight">)</span><span class="mbin mtight">⋅</span><span class="mord mathnormal mtight">p</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">x</span><span class="mrel mtight">∣</span><span class="mord mathnormal mtight" style="margin-right:0.04398em">z</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><br>
<br>
<em>양변에 로그를 취합니다</em><br>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>l</mi><mi>o</mi><mi>g</mi><mfrac><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo>⋅</mo><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo>∣</mo><mi>z</mi><mo stretchy="false">)</mo></mrow><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">log\ p(x)=log\frac{p(z) \cdot p(x\mid z)}{p(z\mid x)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em"></span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.04398em">z</span><span class="mrel mtight">∣</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.04398em">z</span><span class="mclose mtight">)</span><span class="mbin mtight">⋅</span><span class="mord mathnormal mtight">p</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">x</span><span class="mrel mtight">∣</span><span class="mord mathnormal mtight" style="margin-right:0.04398em">z</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><br>
<br>
<em>로그의 성질에 따라</em><br>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mspace width="1em"></mspace><mo>=</mo><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo>+</mo><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo>∣</mo><mi>z</mi><mo stretchy="false">)</mo><mo>−</mo><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\quad = log\ p(z)+log\ p(x\mid z)-log\ p(z\mid x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em"></span><span class="mspace" style="margin-right:1em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span> <!-- -->&nbsp;<!-- --> <!-- -->&nbsp;<!-- --> <!-- -->&nbsp;<!-- --> -1)    </p><br></blockquote><p>우리가 알고있는 근사분포 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q_\lambda(z\mid x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span>는 연속확률분포임으로  </p><blockquote><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>∫</mo><mi mathvariant="normal">∞</mi><mrow><mo>−</mo><mi mathvariant="normal">∞</mi></mrow></msubsup><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mi>d</mi><mi>z</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\int_{\infty}^{-\infty}q_\lambda(z\mid x)dz=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3221em;vertical-align:-0.3558em"></span><span class="mop"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9662em"><span style="top:-2.3442em;margin-left:-0.1945em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∞</span></span></span></span><span style="top:-3.2579em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3558em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span></span>  </p></blockquote><p>입니다.</p><br><p>1이 곱셈의 항등원이라는 점을 이용해 식을 변형해봅시다.  </p><blockquote><p><em>log p(x) 양변에 1을 곱하면</em><br>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>⋅</mo><mn>1</mn><mo>=</mo><mo>∫</mo><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi>d</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">log\ p(x) \cdot 1=\int q_\lambda(z\mid x)log\ p(x)dz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.1111em;vertical-align:-0.3061em"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em">∫</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span></span></span></span></span><br>
<br>
<em>식1)을 사용하여</em><br>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mspace width="1em"></mspace><mo>=</mo><mo>∫</mo><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mrow><mo fence="true">[</mo><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo>+</mo><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo>∣</mo><mi>z</mi><mo stretchy="false">)</mo><mo>−</mo><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mo fence="true">]</mo></mrow><mi>d</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">\quad = \int q_\lambda(z\mid x) \left [ log\ p(z)+log\ p(x\mid z)-log\ p(z\mid x) \right ] dz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em"></span><span class="mspace" style="margin-right:1em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.1111em;vertical-align:-0.3061em"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em">∫</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em">[</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em">]</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span></span></span></span></span><br>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mspace width="1em"></mspace><mo>=</mo><mo>∫</mo><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mi>d</mi><mi>z</mi><mo>+</mo><mo>∫</mo><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo>∣</mo><mi>z</mi><mo stretchy="false">)</mo><mi>d</mi><mi>z</mi><mo>−</mo><mo>∫</mo><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mi>d</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">\quad = \int q_\lambda(z\mid x)log\ p(z)dz + \int q_\lambda(z\mid x)log\ p(x\mid z)dz - \int q_\lambda(z\mid x)log\ p(z\mid x)dz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em"></span><span class="mspace" style="margin-right:1em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.1111em;vertical-align:-0.3061em"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em">∫</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">)</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.1111em;vertical-align:-0.3061em"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em">∫</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">)</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.1111em;vertical-align:-0.3061em"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em">∫</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span></span></span></span></span>  </p></blockquote><p>0이 덧셈의 항등원이라는 점을 이용해 식을 변형합니다.
양변에 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>=</mo><mo>∫</mo><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mi>d</mi><mi>z</mi><mo>−</mo><mo>∫</mo><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mi>d</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">0=\int q_\lambda(z\mid x)log\ q_\lambda(z\mid x)dz - \int q_\lambda(z\mid x)log\ q_\lambda(z\mid x)dz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.1111em;vertical-align:-0.3061em"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em">∫</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.1111em;vertical-align:-0.3061em"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em">∫</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span></span></span></span></span> 을 더합니다.
이때, 우리가 알아낼 수 있는 것(<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(z), q_\lambda(z\mid x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span>)을 생각해 짝지어 줍시다  </p><blockquote><p><em>이전식에서 양변에 0을 더하면</em><br>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mo>∫</mo><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo>∣</mo><mi>z</mi><mo stretchy="false">)</mo><mi>d</mi><mi>z</mi><mo>+</mo><mo>∫</mo><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mfrac><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo></mrow><mrow><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mfrac><mi>d</mi><mi>z</mi><mo>−</mo><mo>∫</mo><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mfrac><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mrow><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mfrac><mi>d</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">log\ p(x)= \int q_\lambda(z\mid x)log\ p(x\mid z)dz + \int q_\lambda(z\mid x)log\frac{p(z)}{q_\lambda(z\mid x)}dz - \int q_\lambda(z\mid x)log\frac{p(z\mid x)}{q_\lambda(z\mid x)}dz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.1111em;vertical-align:-0.3061em"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em">∫</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">)</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.1111em;vertical-align:-0.3061em"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em">∫</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.04398em">z</span><span class="mrel mtight">∣</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.04398em">z</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.1111em;vertical-align:-0.3061em"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em">∫</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.04398em">z</span><span class="mrel mtight">∣</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.04398em">z</span><span class="mrel mtight">∣</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span></span></span></span></span>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mo>∫</mo><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo>∣</mo><mi>z</mi><mo stretchy="false">)</mo><mi>d</mi><mi>z</mi><mo>−</mo><mo>∫</mo><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mfrac><mrow><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo></mrow></mfrac><mi>d</mi><mi>z</mi><mo>+</mo><mo>∫</mo><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mfrac><mrow><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mfrac><mi>d</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">log\ p(x)= \int q_\lambda(z\mid x)log\ p(x\mid z)dz - \int q_\lambda(z\mid x)log\frac{q_\lambda(z\mid x)}{p(z)}dz + \int q_\lambda(z\mid x)log\frac{q_\lambda(z\mid x)}{p(z\mid x)}dz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.1111em;vertical-align:-0.3061em"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em">∫</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">)</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.1111em;vertical-align:-0.3061em"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em">∫</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.04398em">z</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.04398em">z</span><span class="mrel mtight">∣</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.1111em;vertical-align:-0.3061em"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em">∫</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.04398em">z</span><span class="mrel mtight">∣</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.04398em">z</span><span class="mrel mtight">∣</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span></span></span></span></span><br>
<br>
<em>몬테카를로 추정과 쿨백-라이블러 발산으로 변형하면</em><br>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>E</mi><mrow><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">[</mo><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo>∣</mo><mi>z</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo><mo>−</mo><msub><mi>D</mi><mrow><mi>K</mi><mi>L</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mo>∣</mo><mo>∣</mo><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>+</mo><msub><mi>D</mi><mrow><mi>K</mi><mi>L</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mo>∣</mo><mo>∣</mo><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">log\ p(x)= E_{q_\lambda(z\mid x)}[log\ p(x\mid z)] - D_{KL}(q_\lambda(z\mid x)\mid\mid p(z)) + D_{KL}(q_\lambda(z\mid x)\mid\mid p(z\mid x))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3552em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.5198em;margin-left:-0.0576em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.04398em">z</span><span class="mrel mtight">∣</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">)]</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em">K</span><span class="mord mathnormal mtight">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">))</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em">K</span><span class="mord mathnormal mtight">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">))</span></span></span></span></span><br>
<br>
<em>쿨백-라이블러 발산의 특징(≥0)을 이용하면</em><br>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>≥</mo><msub><mi>E</mi><mrow><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">[</mo><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo>∣</mo><mi>z</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo><mo>−</mo><msub><mi>D</mi><mrow><mi>K</mi><mi>L</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mo>∣</mo><mo>∣</mo><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">log\ p(x) \geq E_{q_\lambda(z\mid x)}[log\ p(x\mid z)] - D_{KL}(q_\lambda(z\mid x)\mid\mid p(z))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3552em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.5198em;margin-left:-0.0576em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.04398em">z</span><span class="mrel mtight">∣</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">)]</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em">K</span><span class="mord mathnormal mtight">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">))</span></span></span></span></span>  </p><br></blockquote><p>자! 길었습니다.😅 여기에서 확실한 최소 경계
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mi>L</mi><mi>B</mi><mi>O</mi><mo stretchy="false">(</mo><mi>λ</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>E</mi><mrow><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">[</mo><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo>∣</mo><mi>z</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo><mo>−</mo><msub><mi>D</mi><mrow><mi>K</mi><mi>L</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mo>∣</mo><mo>∣</mo><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">ELBO(\lambda)=E_{q_\lambda(z\mid x)}[log\ p(x\mid z)] - D_{KL}(q_\lambda(z\mid x)\mid\mid p(z))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.05764em">E</span><span class="mord mathnormal">L</span><span class="mord mathnormal" style="margin-right:0.02778em">BO</span><span class="mopen">(</span><span class="mord mathnormal">λ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3552em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.5198em;margin-left:-0.0576em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.04398em">z</span><span class="mrel mtight">∣</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">)]</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em">K</span><span class="mord mathnormal mtight">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">))</span></span></span></span></span>
가 ELBO 입니다!  </p><p>각 항의 의미는 다음과 같습니다.  </p><ul><li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>E</mi><mrow><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">[</mo><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo>∣</mo><mi>z</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">E_{q_\lambda(z\mid x)}[log\ p(x\mid z)]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3552em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.5198em;margin-left:-0.0576em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.04398em">z</span><span class="mrel mtight">∣</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">)]</span></span></span></span></span>: 디코더 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mtext>&nbsp;</mtext><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo>∣</mo><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">log\ p(x\mid z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mspace">&nbsp;</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">)</span></span></span></span></span>의 기댓값으로 재생성 에러를 나타냅니다.  </li><li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><msub><mi>D</mi><mrow><mi>K</mi><mi>L</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mo>∣</mo><mo>∣</mo><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">- D_{KL}(q_\lambda(z\mid x)\mid\mid p(z))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">−</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em">K</span><span class="mord mathnormal mtight">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mclose">))</span></span></span></span></span>: 알수있는 파라미터로 분포를 정규화할수 있습니다.  </li><li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mrow><mi>K</mi><mi>L</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mo>∣</mo><mo>∣</mo><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">D_{KL}(q_\lambda(z\mid x)\mid\mid p(z\mid x))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em">K</span><span class="mord mathnormal mtight">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">))</span></span></span></span></span>: 실제(참) 사후조건분포 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(z\mid x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span>는 계산할 수 없습니다.
따라서 앞의 두 항을 최대화하는 방법을 사용합니다.  <br></li></ul><p>말로만 하면 어려우니 그림을 볼까요?  </p><p align="center"><img loading="lazy" src="/assets/img/variable-autoencoder/elbo.png" class="img_ev3q"><img loading="lazy" src="/assets/img/variable-autoencoder/elbo-draw.png" class="img_ev3q"></p><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mrow><mi>K</mi><mi>L</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>q</mi><mi>λ</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mo>∣</mo><mo>∣</mo><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>≥</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">D_{KL}(q_\lambda(z\mid x)\mid\mid p(z\mid x)) \geq 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em">K</span><span class="mord mathnormal mtight">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">))</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0</span></span></span></span></span>에 따라
확률분포 log p(x)와 ELBO(λ)는 0 이상의 차이(거리)가 있습니다.
하지만 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>z</mi><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(z\mid x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span>는 계산할 수 없으므로, ELBO를 최대화 하는 방법으로 학습합니다.<br>
<em>(다른말로 디코더의 기댓값 최대화, 이상적인 인코더 생성을 목표로 합니다)</em></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reparameterization-trick">Reparameterization Trick<a href="#reparameterization-trick" class="hash-link" aria-label="Direct link to Reparameterization Trick" title="Direct link to Reparameterization Trick">​</a></h2><p>backpropagation 문제를 해결합니다.  </p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="수학과-코드">수학과 코드<a href="#수학과-코드" class="hash-link" aria-label="Direct link to 수학과 코드" title="Direct link to 수학과 코드">​</a></h2><p><a href="https://github.com/magenta/magenta/blob/be6558f1a06984faff6d6949234f5fe9ad0ffdb5/magenta/models/music_vae/base_model.py#L210-L272" target="_blank" rel="noopener noreferrer">Music VAE</a></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> tensorflow_probability </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> tfp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ds = tfp.distributions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> 전략 </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q_z </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">encode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">input_sequence</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x_length</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> control_sequence</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">z </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> q_z</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Prior distribution.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p_z </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ds</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MultivariateNormalDiag</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    loc</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> hparams</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">z_size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scale_diag</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> hparams</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">z_size</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># KL Divergence (nats)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kl_div </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ds</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kl_divergence</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">q_z</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p_z</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">r_loss</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> metric_map </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decoder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reconstruction_loss</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x_input</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x_target</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x_length</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> z</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> control_sequence</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">free_nats </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> hparams</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">free_bits </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kl_cost </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">maximum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">kl_div </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> free_nats</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">beta </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1.0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">pow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hparams</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">beta_rate</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">to_float</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">global_step</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> hparams</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">max_beta</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">loss </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reduce_mean</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">r_loss</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> beta </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reduce_mean</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">kl_cost</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scalars_to_summarize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">'loss'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">loss</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">'losses/r_loss'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> r_loss</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">'losses/kl_loss'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kl_cost</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">'losses/kl_bits'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kl_div </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">'losses/kl_beta'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> beta</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> metric_map</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scalars_to_summarize</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://developers.google.com/machine-learning/gan/generative" target="_blank" rel="noopener noreferrer">What is a Generative Model?</a><br>
<a href="https://ko.wikipedia.org/wiki/%ED%99%95%EB%A5%A0_%EB%B6%84%ED%8F%AC" target="_blank" rel="noopener noreferrer">[위키]확률 분포</a><br>
<a href="https://ko.wikipedia.org/wiki/%EB%B2%A0%EC%9D%B4%EC%A6%88_%EC%A0%95%EB%A6%AC" target="_blank" rel="noopener noreferrer">[위키]베이즈 정리</a><br>
<a href="https://ko.wikipedia.org/wiki/%EC%BF%A8%EB%B0%B1-%EB%9D%BC%EC%9D%B4%EB%B8%94%EB%9F%AC_%EB%B0%9C%EC%82%B0" target="_blank" rel="noopener noreferrer">[위키]쿨백-라이블러 발산</a>  </p>]]></content:encoded>
            <category>math</category>
            <category>paper</category>
            <category>ml</category>
        </item>
        <item>
            <title><![CDATA[K8S Tip Pv Terminating]]></title>
            <link>https://jwher.github.io/posts/k8s-tip-pv-terminating</link>
            <guid>https://jwher.github.io/posts/k8s-tip-pv-terminating</guid>
            <pubDate>Mon, 26 Jul 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[K8s tip: PersistentVolume terminating]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="kubernetes" src="/assets/images/kubernetes-f91022b1deed067a9393dd3c42381ab7.svg" width="723" height="702" class="img_ev3q">
<em>쿠버네티스 PV 삭제하기</em>  </p><h1>목차</h1><ul><li><a href="#pv-%EC%82%AD%EC%A0%9C%ED%95%98%EA%B8%B0">PV 삭제하기</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pv-삭제하기">PV 삭제하기<a href="#pv-삭제하기" class="hash-link" aria-label="Direct link to PV 삭제하기" title="Direct link to PV 삭제하기">​</a></h2><p>오늘도 인프라 관리에 골머리를 앓고 있는 당신, persistent volume이 지워지지 않는 현상을 발견한다.  </p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get </span><span class="token function" style="color:#d73a49">pv</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                 CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS        CLAIM                                       STORAGECLASS    REASON   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">harbor-chartmuseum   5Gi        RWO            Retain           Terminating   harbor/chartmuseum                          local-storage            6d8h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">harbor-database      1Gi        RWO            Retain           Terminating   harbor/database                             local-storage            6d8h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">harbor-jobservice    1Gi        RWO            Retain           Terminating   harbor/jobservice                           local-storage            6d8h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">harbor-redis         1Gi        RWO            Retain           Terminating   harbor/redis                                local-storage            6d8h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">harbor-registry      160Gi      RWO            Retain           Terminating   harbor/registry                             local-storage            6d8h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">harbor-trivy         5Gi        RWO            Retain           Terminating   harbor/trivy                                local-storage            6d8h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이는 존재하지 않는 persistent volume claim에 binding 되어 있어 발생한다.  </p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl edit </span><span class="token function" style="color:#d73a49">pv</span><span class="token plain"> harbor-database</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. 전략 </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">claimRef:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: data-harbor-redis-0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 이하 해당하는 항목을 전부 삭제한다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. 후략 </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Zombie claim을 지워주면 바로 사라지게 된다!</p><p align="center"><img loading="lazy" src="/assets/img/doby-is-free.png" class="img_ev3q"></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p>오늘도 한고비 넘겼네요 😓<br>
<del>사실 이 문제는 완전히 삭제되길 기다리지 못해서 발생했을 가능성이 높습니다</del><br>
<del><em>이미 알고있었다고예?</em></del></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="http://www.google.com" target="_blank" rel="noopener noreferrer">www.google.com</a></p>]]></content:encoded>
            <category>tech</category>
            <category>kubernetes</category>
            <category>short</category>
        </item>
        <item>
            <title><![CDATA[Free Wildcard Dns]]></title>
            <link>https://jwher.github.io/posts/free-wildcard-dns</link>
            <guid>https://jwher.github.io/posts/free-wildcard-dns</guid>
            <pubDate>Wed, 21 Jul 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[무료 와일드카드 DNS]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="wildcard" src="/assets/images/wildcard-889efbc962bfe1a0532e4c6826ddd9d2.svg" width="250" height="250" class="img_ev3q">
<em>무료 와일드카드 DNS</em>  </p><h1>목차</h1><ul><li><a href="#%EC%86%8C%EA%B0%9C">소개</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="소개">소개<a href="#소개" class="hash-link" aria-label="Direct link to 소개" title="Direct link to 소개">​</a></h2><p>개발 및 테스트할 때는 무료 와일드 카드 DNS 테스트 사이트 중 하나를 사용하도록 기본 도메인을 변경합니다.</p><ul><li><a href="https://nip.io" target="_blank" rel="noopener noreferrer">nip.io</a></li><li><a href="http://xip.io/" target="_blank" rel="noopener noreferrer">xip.io</a> <em>(21.07.21작동하지 않음)</em></li><li><a href="https://sslip.io/" target="_blank" rel="noopener noreferrer">sslip.io</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사용법">사용법<a href="#사용법" class="hash-link" aria-label="Direct link to 사용법" title="Direct link to 사용법">​</a></h3><p>단순히 포함된 ip로 연결해 줍니다.  </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">https://192.168.1.30.nip.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http://127.0.0.1.nip.io:8080</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p>이 블로그에서 가장 짧은 글이 될 것 같습니다.<br>
<!-- -->저 스스로 정확한 사용처를 이해하고 있는지 의문입니다.<br>
<del>알려주세요</del></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://cloud.google.com/run/docs/gke/default-domain?hl=ko#choose_an_alternative_for_wildcard_dns" target="_blank" rel="noopener noreferrer">[GKE]와일드 카드 DNS의 대안 선택</a></p>]]></content:encoded>
            <category>dev</category>
            <category>short</category>
        </item>
        <item>
            <title><![CDATA[Install Harbor]]></title>
            <link>https://jwher.github.io/posts/install-harbor</link>
            <guid>https://jwher.github.io/posts/install-harbor</guid>
            <pubDate>Wed, 21 Jul 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[쿠버네티스에 Harbor 설치하기]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="harbor" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDIwMDEwOTA0Ly9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy1TVkctMjAwMTA5MDQvRFREL3N2ZzEwLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4wIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiB3aWR0aD0iMTUwMS4wMDAwMDBwdCIgaGVpZ2h0PSIxODU1LjAwMDAwMHB0IiB2aWV3Qm94PSIwIDAgMTUwMS4wMDAwMDAgMTg1NS4wMDAwMDAiCiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCBtZWV0Ij4KPG1ldGFkYXRhPgpDcmVhdGVkIGJ5IHBvdHJhY2UgMS4xNiwgd3JpdHRlbiBieSBQZXRlciBTZWxpbmdlciAyMDAxLTIwMTkKPC9tZXRhZGF0YT4KPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsMTg1NS4wMDAwMDApIHNjYWxlKDAuMTAwMDAwLC0wLjEwMDAwMCkiCmZpbGw9IiMwMDAwMDAiIHN0cm9rZT0ibm9uZSI+CjxwYXRoIGQ9Ik03MjAwIDE4MzUzIGMtNjU1IC00NCAtMTE2MSAtMTMzIC0xNzE2IC0zMDMgLTI1NTkgLTc4MiAtNDQ5MyAtMjkyMAotNTAwOCAtNTUzNSAtMjA0IC0xMDM4IC0xNzggLTIxMTggNzUgLTMxNDYgNTAxIC0yMDM5IDE4ODggLTM3NzkgMzc2OSAtNDcyOQo5MTYgLTQ2MiAxODQ1IC03MTAgMjg4NCAtNzcwIDEwMDIgLTU3IDIxMDcgMTI5IDMwODUgNTIwIDIxNDcgODU4IDM3NzQgMjcyMAo0MzM1IDQ5NTggMjA1IDgxNCAyNjYgMTY3MiAxODAgMjUxNyAtMTM5IDEzNzcgLTY3NSAyNjgzIC0xNTQ5IDM3NzYgLTE3OCAyMjEKLTI4MiAzMzggLTUwNCA1NjIgLTQ5MiA0OTggLTk4OCA4ODEgLTE1NzQgMTIxNCAtOTYzIDU0OCAtMTk5NyA4NTYgLTMxMjcgOTMzCi0xMzAgOSAtNzM1IDExIC04NTAgM3ogbTc5OCAtMTM1NCBjNjkwIC01MCAxMzc1IC0yMjIgMjAwMiAtNTA0IDI0NSAtMTEwIDY4NQotMzUwIDY4NSAtMzczIDAgLTYgLTc3NiAtODE3IC0xNzI0IC0xODAzIC05NDggLTk4NiAtMTcxOSAtMTc5NSAtMTcxNCAtMTc5Ngo1IC0yIDEwNjggNTQ1IDIzNjMgMTIxNSBsMjM1NSAxMjE5IDgzIC0xMDEgYzEzMCAtMTU3IDI0NyAtMzE2IDM2NyAtNDk2IDEyNQotMTg3IDI1MCAtMzk4IDI0MiAtNDA3IC00IC0zIC0xMjAyIC0zOTAgLTI2NjMgLTg1OSAtMTQ2MiAtNDcwIC0yNjYwIC04NTcKLTI2NjMgLTg1OSAtMiAtMyAxNiAtNSA0MCAtNSA2NiAwIDU2MDIgMTg4IDU3NTAgMTk1IGwxMjYgNiAzNyAtMTg4IGM1MiAtMjc1CjEwNyAtNzA1IDkyIC03MjAgLTUgLTYgLTYwMTUgNDIwIC02MTAzIDQzMSAtMTggMyAtMzMgMiAtMzMgLTIgMCAtNCAxMzc0Ci00ODQgMzA1MyAtMTA2NiAxNjc4IC01ODIgMzA1MyAtMTA2MCAzMDU1IC0xMDYxIDUgLTQgLTU3IC0yNDIgLTEwNSAtNDA1Ci0yOTMgLTk4NiAtODc4IC0xOTI3IC0xNjMwIC0yNjIyIC05NzQgLTg5OSAtMjEwNSAtMTQxNCAtMzQzMyAtMTU2NCAtOTIgLTEwCi0yNzEgLTE4IC00OTEgLTIxIGwtMzQ3IC01IC02IDM4IGMtMyAyMiAtMTggMTkyIC0zMiAzODAgbC0yNyAzNDEgLTE0MjEgNjI2CmMtNzgyIDM0NCAtMTQyOCA2MjcgLTE0MzUgNjI5IC0xMyAyIC0yMyAtODMgLTYwIC01MTAgbC00NiAtNTEzIC0xMjAgODUKYy00NzEgMzM1IC04ODcgNzI5IC0xMjM3IDExNzEgLTk5MSAxMjU0IC0xNDMxIDI4NDQgLTEyMjIgNDQyNSAzNDQgMjYxNyAyNDExCjQ3MDQgNTAyNCA1MDc0IDE1MCAyMSAyMzYgMzAgNDc1IDQ5IDEwMyA5IDYzMiA2IDc2MyAtNHoiLz4KPHBhdGggZD0iTTU3MDggMTQ3NzQgYy0zOSAtMjEgLTU4IC02NCAtNTggLTEzMSBsMCAtNTkgLTY0NSAtNjI5IC02NDUgLTYzMCAwCi0yMDIgMCAtMjAzIDExNSAwIDExNSAwIDAgLTY4MCAwIC02ODAgLTExNSAwIC0xMTUgMCAwIC0zNDAgMCAtMzQwIDE4NSAwIDE4NQowIC02IC01NyBjLTMwIC0zMDggLTc5IC04OTkgLTc1IC05MDQgMTAgLTEwIDIzODIgLTEwNTEgMjM4NiAtMTA0NyAyIDIgLTMzCjQ1NCAtNzggMTAwNiBsLTgyIDEwMDIgMTU3IDAgMTU4IDAgMCAzNDAgMCAzNDAgLTEyMCAwIC0xMjAgMCAwIDY4MCAwIDY4MAoxMjAgMCAxMjAgMCAtMSAyMDMgMCAyMDIgLTY0NSA2MjkgLTY0NCA2MjkgMCA1OSBjMCA3MCAtMTkgMTEyIC02MCAxMzMgLTM3CjE5IC05NyAxOSAtMTMyIC0xeiBtODYyIC0yNTM0IGwwIC02ODAgLTE4NSAwIC0xODUgMCAwIDMyNCBjMCAzNjUgLTUgNDAwIC03NQo1MDEgLTE4NCAyNjggLTU5OCAyMzMgLTczOCAtNjIgbC0zMiAtNjggLTMgLTM0NyAtMyAtMzQ4IC0xODQgMCAtMTg1IDAgMCA2ODAKMCA2ODAgNzk1IDAgNzk1IDAgMCAtNjgweiIvPgo8cGF0aCBkPSJNNDU5NSA5MzY2IGMtMTEgLTEzOSAtMTUgLTIzMCAtOSAtMjM1IDEyIC0xMyAyNTE0IC0xMTE0IDI1MTkgLTExMTAKMyA0IC0zNSA0OTIgLTM5IDQ5NiAtNiA2IC0yNDE0IDEwNjYgLTI0MzIgMTA3MCAtMjAgNSAtMjEgLTIgLTM5IC0yMjF6Ii8+CjxwYXRoIGQ9Ik00NTQ3IDg4MDMgYy0xMSAtMTkgLTQwIC00NTQgLTMxIC00NjIgMTMgLTEyIDI2NTQgLTExNzQgMjY1OCAtMTE3MAo0IDMgLTM0IDQ5MSAtMzggNDk2IC0xIDEgLTU3NSAyNTQgLTEyNzYgNTYzIC03MDEgMzA5IC0xMjgzIDU2NiAtMTI5MiA1NzEgLTkKNSAtMTkgNiAtMjEgMnoiLz4KPHBhdGggZD0iTTQ0NzYgODAwOCBjLTEyIC0zNCAtMzkgLTQ0OSAtMzAgLTQ1NyAxNCAtMTIgMjc5NCAtMTIzNCAyNzk4IC0xMjMwCjMgMyAtMzQgNDkxIC0zOCA0OTYgMCAxIC02MTEgMjcwIC0xMzU2IDU5OCAtNzQ1IDMyOSAtMTM1OCA1OTkgLTEzNjMgNjAyIC00CjIgLTkgLTIgLTExIC05eiIvPgo8cGF0aCBkPSJNMTEwMjMgMjcwMCBjLTY0NyAtODIgLTExMDYgLTY0NiAtMTA3MCAtMTMxNiAzMiAtNTkzIDQzMyAtMTA2MCA5OTUKLTExNTkgMTE1IC0yMCAzNTMgLTIwIDQ2OCAwIDU4NCAxMDIgMTAwMiA2MTQgMTAwNCAxMjMwIDIgNTk5IC0zNzggMTA5MyAtOTM5CjEyMjEgLTEyMSAyOCAtMzM4IDM5IC00NTggMjR6IG0zNTggLTI3NSBjMjgyIC01OSA1MjEgLTI1NCA2NTAgLTUyOSA3NyAtMTY1CjExMCAtMzY1IDkwIC01NDcgLTI3IC0yNTUgLTEyNyAtNDY4IC0yOTMgLTYyNSAtMTc4IC0xNjggLTM1MSAtMjQxIC01OTggLTI1MQotMjA0IC04IC0zNTUgMjkgLTUyMiAxMjggLTE0MyA4NCAtMzA0IDI2OCAtMzczIDQyNCAtMTcyIDM5MCAtOTQgODYxIDE5MQoxMTQ5IDIyMSAyMjQgNTQwIDMxNyA4NTUgMjUxeiIvPgo8cGF0aCBkPSJNMzYxMCAyNjY4IGMtMTggLTEzIC00MSAtMzQgLTUyIC00OCAtMTAgLTE0IC0yNDMgLTUxNyAtNTE4IC0xMTE5Ci00NDcgLTk3NyAtNTAwIC0xMDk4IC01MDAgLTExNDMgMCAtODggNTYgLTEzNiAxNDYgLTEyNSAzMyAzIDU0IDEzIDc1IDMzIDE3CjE4IDc2IDEzNyAxNTcgMzE5IGwxMzAgMjkwIDY1OSAzIDY1OSAyIDEzMyAtMjk0IGMxNTEgLTMzNCAxNjcgLTM1NiAyNTggLTM1Ngo3NSAwIDEzMyA2MCAxMzMgMTM2IDAgMjggLTEyNyAzMTUgLTUwMSAxMTMzIC0yNzYgNjAzIC01MTMgMTExMSAtNTI2IDExMjkKLTM1IDQ3IC03MiA2MiAtMTUxIDYyIC01NSAwIC03NiAtNSAtMTAyIC0yMnogbTM3NCAtOTI3IGMxNDYgLTMyNyAyNjUgLTU5NgoyNjMgLTU5OCAtMiAtMiAtMjQ3IC0yIC01NDMgLTEgbC01NDAgMyAyNzEgNjAyIGMxNDggMzMxIDI3MyA1OTggMjc2IDU5NSA0Ci00IDEyNiAtMjc0IDI3MyAtNjAxeiIvPgo8cGF0aCBkPSJNMjUyIDI2NjAgYy02NSAtNDAgLTYyIDI0IC02MiAtMTIwNyAwIC0xMDY0IDEgLTExMjAgMTggLTExNTIgNDgKLTkwIDE4OCAtOTMgMjQyIC02IDE5IDMxIDIwIDQ5IDIwIDUzNCBsMCA1MDEgNjkwIDAgNjg5IDAgMyAtNTAzIGMzIC00NjUgNAotNTA1IDIxIC01MzAgNTcgLTg4IDE4NyAtODggMjQ0IDAgMTcgMjYgMTggODcgMjEgMTEzNiAyIDc0MSAtMSAxMTIxIC04IDExNDcKLTYgMjIgLTI1IDUxIC00NSA2OSAtMzAgMjYgLTQ0IDMxIC04NiAzMSAtNjUgMCAtMTA0IC0yMyAtMTI5IC03NSAtMTkgLTM5Ci0yMCAtNjMgLTIwIC01MjMgbDAgLTQ4MiAtNjkwIDAgLTY5MCAwIDAgNDkwIGMwIDU0MiAxIDUzMSAtNjMgNTcwIC00MiAyNgotMTEyIDI2IC0xNTUgMHoiLz4KPHBhdGggZD0iTTUzOTMgMjY2MyBjLTM2IC03IC04MCAtNTYgLTkyIC0xMDAgLTggLTI5IC0xMSAtMzYyIC05IC0xMTQwIDMKLTEwNDAgNCAtMTEwMCAyMSAtMTEyNiA1NyAtODggMTg3IC04OCAyNDQgMCAxNyAyNSAxOCA2MiAyMSA0NTUgbDMgNDI4IDM0MgotMiAzNDEgLTMgMzQ3IC00NTAgYzE5MCAtMjQ3IDM2MiAtNDYxIDM4MCAtNDczIDI4IC0xOSA0NCAtMjMgODUgLTIwIDg4IDcKMTQxIDY3IDEzMiAxNTEgLTUgNDIgLTMxIDc5IC0zMTggNDQ3IC0xNzEgMjIxIC0zMTAgNDAzIC0zMDggNDA0IDEgMiAyNSA5IDUzCjE1IDIyMiA1NSA0MjIgMjAwIDUwNCAzNjUgNTUgMTEyIDc0IDIxMCA2OSAzNTUgLTYgMTU4IC0zNSAyNTUgLTEwOSAzNjYgLTEwNAoxNTUgLTI2MiAyNTIgLTUwNCAzMDcgLTg0IDIwIC0xMjQgMjEgLTYzNSAyNCAtMzAwIDEgLTU1NSAwIC01NjcgLTN6IG0xMTQ0Ci0yODEgYzIyMiAtNTcgMzU0IC0xODcgMzgzIC0zNzYgMzkgLTI1MiAtMTEwIC00NjEgLTM4NSAtNTQyIC01MiAtMTUgLTExNwotMTggLTUwNyAtMjEgbC00NDggLTQgMCA0ODYgMCA0ODcgNDM4IC01IGM0MDQgLTQgNDQzIC02IDUxOSAtMjV6Ii8+CjxwYXRoIGQ9Ik03NzY1IDI2NTYgYy0xNiAtNyAtNDEgLTI2IC01NSAtNDEgbC0yNSAtMjcgLTMgLTExMTkgYy0zIC0xMjM4IC03Ci0xMTU4IDYxIC0xMjAwIDMxIC0xOSA0OCAtMTkgNjM3IC0xNiBsNjA1IDMgOTUgMjYgYzI1MSA2OCAzOTYgMTY5IDQ4NCAzMzgKNDkgOTIgNjYgMTcwIDY2IDI5MSAwIDE3NyAtNDIgMjgzIC0xNTQgMzk0IC03MyA3MiAtMTk5IDE0OCAtMjkzIDE3NiAtMjQgNwotNDMgMTUgLTQzIDE4IDAgMyAyNiAxOSA1OCAzNiA4MSA0MSAyMDEgMTYzIDI0MCAyNDUgNTkgMTIwIDc3IDI3NSA0OCA0MTEKLTQ0IDIwOCAtMjI0IDM3NiAtNDY4IDQzOCAtMTM1IDM1IC0yNTIgNDEgLTc0NSA0MSAtMzc2IC0xIC00ODQgLTQgLTUwOCAtMTR6Cm0xMDk5IC0yNjEgYzE0OCAtMzEgMjYyIC0xMDkgMzEzIC0yMTQgMjUgLTUxIDI4IC02NiAyOCAtMTY2IDAgLTk4IC0zIC0xMTYKLTI3IC0xNjcgLTUxIC0xMTAgLTE1NiAtMTg5IC0zMDUgLTIzMCAtNzMgLTIwIC0xMDUgLTIyIC00OTUgLTI2IGwtNDE4IC00IDAKNDExIDAgNDExIDQxOCAwIGMzMjcgMCA0MzIgLTMgNDg2IC0xNXogbTEzMSAtMTA4MyBjMjEwIC01OCAzMTcgLTE1NiAzNDcKLTMyMSAxNCAtNzUgLTEgLTE3MCAtMzggLTI0MyAtNTEgLTEwMSAtMTYxIC0xNzkgLTMxMSAtMjIwIC03NCAtMjEgLTEwMyAtMjIKLTU1NSAtMjYgbC00NzggLTMgMCA0MjEgMCA0MjEgNDc4IC0zIGM0NTQgLTQgNDgxIC01IDU1NyAtMjZ6Ii8+CjxwYXRoIGQ9Ik0xMjk2MCAyNjUyIGMtMTkgLTkgLTQ1IC0zMiAtNTcgLTUxIGwtMjMgLTM0IDAgLTExMTQgYzAgLTEyMzUgLTQKLTExNjAgNjUgLTEyMDMgNjUgLTQwIDE2MSAtMTYgMTk3IDUxIDE3IDMxIDE4IDY2IDE4IDQ1NiBsMCA0MjMgMzQzIDAgMzQzIDAKMzQ4IC00NTIgYzE5MSAtMjQ5IDM1OSAtNDYyIDM3NCAtNDcyIDE0IC0xMSA0NyAtMjEgNzYgLTI0IDYyIC01IDExMSAyNCAxMzkKODEgMzYgNzMgMzQgNzcgLTMwOCA1MTcgbC0zMTQgNDA0IDgyIDIzIGMxNjUgNDUgMzMxIDE0NyA0MTUgMjU1IDk2IDEyNSAxMzUKMjQ5IDEzNSA0MjggMCAyMTMgLTUzIDM1MSAtMTg4IDQ4NiAtNjkgNzAgLTk3IDg5IC0xODYgMTMzIC0xMTkgNTcgLTIyMiA4NwotMzU5IDEwMSAtNTIgNSAtMzEzIDEwIC01ODAgMTAgLTQ0MiAwIC00ODggLTIgLTUyMCAtMTh6IG0xMDQwIC0yNTIgYzMxNSAtMzMKNDkxIC0xODQgNTA3IC00MzYgMTMgLTE5NiAtODMgLTM2MiAtMjU5IC00NDggLTE0MiAtNjkgLTE0NCAtNzAgLTY0MCAtNzQKbC00NDggLTMgMCA0ODUgMCA0ODYgMzY5IDAgYzIwMyAwIDQxNSAtNSA0NzEgLTEweiIvPgo8L2c+Cjwvc3ZnPgo=" width="2001" height="2473" class="img_ev3q">
<em>쿠버네티스에 Harbor 설치하기</em>  </p><h1>목차</h1><ul><li><a href="#%EC%9A%94%EA%B5%AC%EC%82%AC%ED%95%AD">요구사항</a></li><li><a href="#%ED%95%98%EB%B2%84-%EC%84%A4%EC%B9%98">하버 설치</a></li><li><a href="#%ED%97%AC%EB%A6%84%EC%B0%A8%ED%8A%B8%EB%A1%9C-%EB%B0%B0%ED%8F%AC">헬름차트로 배포</a></li><li><a href="#%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0">문제 해결</a></li></ul><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="요구사항">요구사항<a href="#요구사항" class="hash-link" aria-label="Direct link to 요구사항" title="Direct link to 요구사항">​</a></h2><ul><li>최소사양: 2 CPU/4GB 메모리/40GB 디스크</li><li>권장사양: 4 CPU/8GB 메모리/160GB 디스크</li><li>도커, 도커-컴포즈, (option)OpenSSL</li><li>(또는) 쿠버네티스 클러스터</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="하버-설치">하버 설치<a href="#하버-설치" class="hash-link" aria-label="Direct link to 하버 설치" title="Direct link to 하버 설치">​</a></h2><p>이 글은 <a href="https://jwher.github.io/welcome-to-kubernetes" target="_blank" rel="noopener noreferrer">쿠버네티스</a>
에서 <a href="https://jwher.github.io/install-helm" target="_blank" rel="noopener noreferrer">헬름</a> 을 사용한
하버 배포와 문제 해결을 주로 다룹니다.<br>
<a href="#%ED%97%AC%EB%A6%84%EC%B0%A8%ED%8A%B8%EB%A1%9C-%EB%B0%B0%ED%8F%AC">바로가기</a>  </p><p>아래는 도커 컴포즈를 사용한 하버 설치 방법을 <em>간단히</em> 기술했습니다.
읽어 보시면 하버 구조파악에 도움이 될 것입니다!</p><blockquote><p><img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/assets/img/not-america-but-heaven.jpg" alt="Alt" title="not-america-but-heaven" class="img_ev3q"><br>
<del>간단히가 아니라 대충이겠지!</del></p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="하버-인스톨러-다운로드">하버 인스톨러 다운로드<a href="#하버-인스톨러-다운로드" class="hash-link" aria-label="Direct link to 하버 인스톨러 다운로드" title="Direct link to 하버 인스톨러 다운로드">​</a></h3><ol><li><a href="https://github.com/goharbor/harbor/releases" target="_blank" rel="noopener noreferrer">하버 릴리즈 페이지</a> 에서 오프라인/온라인 인스톨러를 받습니다.  </li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 21.07.21 최신 버전 기준</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://github.com/goharbor/harbor/releases/download/v2.3.0/harbor-offline-installer-v2.3.0.tgz</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><ol start="2"><li>(선택) 검증하기</li></ol><p>정상적인 설치 파일인지 검증해볼 수 있습니다.  </p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># *.asc 파일을 위해 퍼블릭 키를 얻습니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ gpg --keyserver hkps://keyserver.ubuntu.com --receive-keys 644FF454C0B4115C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpg: /home/cwadmin/.gnupg/trustdb.gpg: trustdb created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpg: key 644FF454C0B4115C: public key </span><span class="token string" style="color:#e3116c">"Harbor-sign (The key for signing Harbor build) &lt;jiangd@vmware.com&gt;"</span><span class="token plain"> imported</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpg: Total number processed: </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpg:               imported: </span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>public key "Harbor-sign (The key for signing Harbor build) &lt;jiangd@vmware.com&gt;" imported</code>
를 확인해야 합니다.</p><br><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># *.asc를 이용해 검증합니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 온라인 인스톨러</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ gpg -v --keyserver hkps://keyserver.ubuntu.com --verify harbor-online-installer-version.tgz.asc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 오프라인 인스톨러</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ gpg -v --keyserver hkps://keyserver.ubuntu.com --verify harbor-offline-installer-version.tgz.asc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpg: assuming signed data </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'harbor-offline-installer-v2.2.3.tgz'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpg: Signature made </span><span class="token number" style="color:#36acaa">2021</span><span class="token plain">년 07월 05일 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">월</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpg:                using RSA key 7722D168DAEC457806C96FF9644FF454C0B4115C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpg: using pgp trust model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpg: Good signature from </span><span class="token string" style="color:#e3116c">"Harbor-sign (The key for signing Harbor build) &lt;jiangd@vmware.com&gt;"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">unknown</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpg: WARNING: This key is not certified with a trusted signature</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpg:          There is no indication that the signature belongs to the owner.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Primary key fingerprint: </span><span class="token number" style="color:#36acaa">7722</span><span class="token plain"> D168 DAEC </span><span class="token number" style="color:#36acaa">4578</span><span class="token plain"> 06C9  6FF9 644F F454 C0B4 115C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpg: binary signature, digest algorithm SHA512, key algorithm rsa4096</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>Good signature from "Harbor-sign (The key for signing Harbor build) &lt;jiangd@vmware.com&gt;" [unknown]</code>
를 확인해야 합니다.</p><br><ol start="3"><li>tar 풀기</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> xzvf harbor-</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">online/offline</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">-installer-</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">version</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.tgz</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://jwher.github.io/install-tar.gz" target="_blank" rel="noopener noreferrer">이 글</a> 에서 tar 파일을 자세히 다루고 있습니다.</p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ssl">SSL<a href="#ssl" class="hash-link" aria-label="Direct link to SSL" title="Direct link to SSL">​</a></h3><p>안타깝지만 일정에 치여서 다루지 않겠습니다.  </p><p>간단히 설명 드리자면 https를 위한 SSL/TLS 인증서를 발급받는 절차입니다.
외부 도메인이 있다면 <a href="https://letsencrypt.org/ko/" target="_blank" rel="noopener noreferrer">Let's Encript</a>
에서 무료로 인증서를 발급받을 수 있습니다.<br>
<!-- -->내부적으로 사용한다면 <a href="https://www.openssl.org/" target="_blank" rel="noopener noreferrer">OpenSSL</a> 을 사용하여 인증서를 생성합니다.  </p><p><a href="https://goharbor.io/docs/2.3.0/install-config/configure-https/" target="_blank" rel="noopener noreferrer">[공식]Configure HTTPS Access to Harbor</a>  </p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tls-설정">TLS 설정<a href="#tls-설정" class="hash-link" aria-label="Direct link to TLS 설정" title="Direct link to TLS 설정">​</a></h3><p>내부 TLS 설정을 다룹니다.<br>
<a href="https://goharbor.io/docs/2.3.0/install-config/configure-internal-tls/" target="_blank" rel="noopener noreferrer">[공식]Configure Internal TLS</a>  </p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="yml-설정">YML 설정<a href="#yml-설정" class="hash-link" aria-label="Direct link to YML 설정" title="Direct link to YML 설정">​</a></h3><p>하버를 커스터마이징 할 수 있는 <code>harbor.yml</code> 파일의 설정을 다룹니다.<br>
<a href="https://goharbor.io/docs/2.3.0/install-config/configure-yml-file/" target="_blank" rel="noopener noreferrer">[공식]Configure the Harbor YML File</a>  </p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="인스톨러-스크립트-실행">인스톨러 스크립트 실행<a href="#인스톨러-스크립트-실행" class="hash-link" aria-label="Direct link to 인스톨러 스크립트 실행" title="Direct link to 인스톨러 스크립트 실행">​</a></h3><p>하버는 다음 설정으로 설치할 수 있습니다.</p><ul><li>하버만</li><li><a href="https://github.com/theupdateframework/notary" target="_blank" rel="noopener noreferrer">Notary</a> 와 하버</li><li><a href="https://github.com/aquasecurity/trivy" target="_blank" rel="noopener noreferrer">Trivy</a> 와 하버</li><li>(helm)<a href="https://github.com/helm/chartmuseum" target="_blank" rel="noopener noreferrer">ChartMuseum</a> 와 하버</li><li>위의 세개 중 두개나 전부 설치하기</li></ul><p align="center"><img loading="lazy" src="/assets/img/install-harbor/harbor-arch.png" class="img_ev3q"></p><p><em>Notary: 서버와 클라이언트 사이에 삼자로 신뢰할 수 있는 통신을 만들어 줍니다(CNCF)</em><br>
<em>Trivy: 이미지의 취약점을 찾습니다</em></p><p>각각의 설정은 다음 플래그를 이용합니다.</p><ul><li><code>Notary</code>: --with-notary</li><li><code>Trivy</code>: --with-trivy</li><li><code>ChartMuseum</code>: --with-chartmuseum</li></ul><p>쉘 스크립트를 실행할 때 여러 권한이 필요합니다. <code>sudo</code>로 권한을 부여해 줍시다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> ./install.sh </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">flags</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cli">CLI<a href="#cli" class="hash-link" aria-label="Direct link to CLI" title="Direct link to CLI">​</a></h3><p>Harbor API v2.0을 사용하는 간단한 CLI 명령어를 테스트 할 수 있습니다.  </p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 이미지 목록 확인</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -X GET http://</span><span class="token punctuation" style="color:#393A34">[</span><span class="token variable" style="color:#36acaa">$id</span><span class="token builtin class-name">:</span><span class="token variable" style="color:#36acaa">$passwd</span><span class="token plain">@</span><span class="token punctuation" style="color:#393A34">]</span><span class="token variable" style="color:#36acaa">${endpoint}</span><span class="token plain">:5000/v2/_catalog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -u </span><span class="token string" style="color:#e3116c">"</span><span class="token string variable" style="color:#36acaa">$id</span><span class="token string" style="color:#e3116c">:</span><span class="token string variable" style="color:#36acaa">$pw</span><span class="token string" style="color:#e3116c">"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"repositories"</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"ubuntu"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -X GET http://</span><span class="token punctuation" style="color:#393A34">[</span><span class="token variable" style="color:#36acaa">$id</span><span class="token builtin class-name">:</span><span class="token variable" style="color:#36acaa">$passwd</span><span class="token plain">@</span><span class="token punctuation" style="color:#393A34">]</span><span class="token variable" style="color:#36acaa">${endpoint}</span><span class="token plain">:5000/v2/</span><span class="token variable" style="color:#36acaa">${repository}</span><span class="token plain">/tags/list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"name"</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">"ubuntu"</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">"tags"</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"18.04"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>축하드립니다!🎉 설치에 성공하셨군요!</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="헬름차트로-배포">헬름차트로 배포<a href="#헬름차트로-배포" class="hash-link" aria-label="Direct link to 헬름차트로 배포" title="Direct link to 헬름차트로 배포">​</a></h2><p>요구사항</p><ul><li>쿠버네티스 1.10+</li><li>헬름 2.8.0+</li><li><a href="https://jwher.github.io/kubernetes-usage" target="_blank" rel="noopener noreferrer">쿠버네티스 활용 지식</a></li><li>PostgreSQL 능력자</li><li>Redis 능력자</li><li>PVC와 외부 오브젝트 스토리지 능력자  </li></ul><p><del>사실 지식은 필요 없어도 됩니다</del></p><p>헬름차트가 없다면 <a href="https://jwher.github.io/install-helm" target="_blank" rel="noopener noreferrer">이 글</a> 을 보고 설치할 수 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="차트-다운받기">차트 다운받기<a href="#차트-다운받기" class="hash-link" aria-label="Direct link to 차트 다운받기" title="Direct link to 차트 다운받기">​</a></h3><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> harbor https://helm.goharbor.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">"harbor"</span><span class="token plain"> has been added to your repositories</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm fetch harbor/harbor --untar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>⚠<em>주의 helm repo는 계정마다 관리됩니다. sudo를 사용해 fetch 할 때 주의하세요</em>  </p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="설정하기">설정하기<a href="#설정하기" class="hash-link" aria-label="Direct link to 설정하기" title="Direct link to 설정하기">​</a></h3><p>레포지토리를 받은 폴더에 <code>values.yaml</code> 파일이 있습니다.
이 파일을 수정하거나, 배포 명령어에 <code>--set</code>플래그를 지정해 값을 변경할 수 있습니다.  </p><p>해당 파일에도 주석이 잘 적혀있습니다만,
공식 사이트를 확인해 보는 것도 좋을 것입니다. 😁<br>
<a href="https://goharbor.io/docs/2.3.0/install-config/harbor-ha-helm/#configuration" target="_blank" rel="noopener noreferrer">[공식]Configuration</a></p><p>주요 플래그  </p><ul><li><p><code>externalURL</code>: FQDN(Fully Qualified Domain Name)입니다.
<code>http</code> 프로토콜을 사용해도 <code>https</code>로 작성하세요.
<code>80</code>이나 <code>443</code>이 아닌 포트로 노출된다면, 포트를 명시해 주세요.  </p></li><li><p><code>expose.tls.enabled</code>: TLS 사용여부를 설정합니다.(<code>ture</code>/<code>false</code>)</p></li><li><p><code>expose.ingress.hosts.core/notary</code>:
포트를 제외한 노출 url을 작성합니다. <code>*</code>와 같은 wildcard를 사용할 수 있고, ip 형식일 수 없습니다.
<a href="https://jwher.github.io/free-wildcard-dns" target="_blank" rel="noopener noreferrer">무료 와일드카드 DNS</a>  </p></li><li><p><code>persistence.enabled</code>: 삭제시 pv 처리 방법을 설정합니다.(<code>ture</code>/<code>false</code>) </p></li><li><p><code>harborAdminPassword</code>: 관리자(<code>admin</code>) 계정의 비밀번호를 설정합니다. 기본값은 <code>Harbor12345</code>입니다</p></li></ul><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="배포하기">배포하기<a href="#배포하기" class="hash-link" aria-label="Direct link to 배포하기" title="Direct link to 배포하기">​</a></h3><p>다음 명령어로 쿠버네티스에 배포할 수 있습니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># (Helm2) helm install --name $name $chart $flags</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> --name my-release chart/path/ --set </span><span class="token assign-left variable" style="color:#36acaa">key</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># (Helm3) helm install $name $chart $flags</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> --namespace harbor harbor-v1 </span><span class="token builtin class-name">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>헬름으로 배포하면 아래 pvc가 생성됩니다.
각각에 맞는 적절한 pv를 생성해 줍시다.  </p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get pvc -n harbor -o custom-columns</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">NAME:.metadata.name,STORAGE:.spec.resources.requests.storage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                            STORAGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data-harbor-redis-0             1GB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data-harbor-trivy-0             5GB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">database-data-harbor-database-0 1GB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">harbor-chartmuseum              5GB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">harbor-jobservice               1GB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">harbor-registry                 5GB</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>총 18GB를 필요로 하지만
<a href="#%EC%9A%94%EA%B5%AC%EC%82%AC%ED%95%AD">요구사항</a> 에 맞게 저는 레지스트리에 160GB를 할당했습니다.  </p><details markdown="1" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>pv.yaml</summary><div><div class="collapsibleContent_i85q">```yaml apiVersion: v1 kind: PersistentVolume metadata: name: harbor-redis spec: accessModes: - ReadWriteOnce capacity: storage: 1Gi claimRef: name: data-harbor-redis-0 namespace: harbor local: path: /var/lib/docker/volumes/harbor/redis nodeAffinity: required: nodeSelectorTerms: - matchExpressions: - key: kubernetes.io/hostname operator: In values: - cwdev07 persistentVolumeReclaimPolicy: Retain storageClassName: local-storage volumeMode: Filesystem --- apiVersion: v1 kind: PersistentVolume metadata: name: harbor-trivy spec: accessModes: - ReadWriteOnce capacity: storage: 5Gi claimRef: name: data-harbor-trivy-0 namespace: harbor local: path: /var/lib/docker/volumes/harbor/trivy nodeAffinity: required: nodeSelectorTerms: - matchExpressions: - key: kubernetes.io/hostname operator: In values: - cwdev07 persistentVolumeReclaimPolicy: Retain storageClassName: local-storage volumeMode: Filesystem --- apiVersion: v1 kind: PersistentVolume metadata: name: harbor-database spec: accessModes: - ReadWriteOnce capacity: storage: 1Gi claimRef: name: database-data-harbor-database-0 namespace: harbor local: path: /var/lib/docker/volumes/harbor/database nodeAffinity: required: nodeSelectorTerms: - matchExpressions: - key: kubernetes.io/hostname operator: In values: - cwdev07 persistentVolumeReclaimPolicy: Retain storageClassName: local-storage volumeMode: Filesystem --- apiVersion: v1 kind: PersistentVolume metadata: name: harbor-chartmuseum spec: accessModes: - ReadWriteOnce capacity: storage: 5Gi claimRef: name: harbor-chartmuseum namespace: harbor local: path: /var/lib/docker/volumes/harbor/chartmuseum nodeAffinity: required: nodeSelectorTerms: - matchExpressions: - key: kubernetes.io/hostname operator: In values: - cwdev07 persistentVolumeReclaimPolicy: Retain storageClassName: local-storage volumeMode: Filesystem --- apiVersion: v1 kind: PersistentVolume metadata: name: harbor-jobservice spec: accessModes: - ReadWriteOnce capacity: storage: 1Gi claimRef: name: harbor-jobservice namespace: harbor local: path: /var/lib/docker/volumes/harbor/jobservice nodeAffinity: required: nodeSelectorTerms: - matchExpressions: - key: kubernetes.io/hostname operator: In values: - cwdev07 persistentVolumeReclaimPolicy: Retain storageClassName: local-storage volumeMode: Filesystem --- apiVersion: v1 kind: PersistentVolume metadata: name: harbor-registry spec: accessModes: - ReadWriteOnce capacity: storage: 160Gi claimRef: name: harbor-registry namespace: harbor local: path: /var/lib/docker/volumes/harbor/registry nodeAffinity: required: nodeSelectorTerms: - matchExpressions: - key: kubernetes.io/hostname operator: In values: - cwdev07 persistentVolumeReclaimPolicy: Retain storageClassName: local-storage volumeMode: Filesystem ```</div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="서비스-노출">서비스 노출<a href="#서비스-노출" class="hash-link" aria-label="Direct link to 서비스 노출" title="Direct link to 서비스 노출">​</a></h3><p>pv 생성까지 완료하면 파드들이 정상적으로 실행됩니다.
이후 지정한 노출 방식(<code>expose.type</code>)에 따라 서비스 설정을 합니다.
예를 들어 <code>ingress</code>는 ingress controller를 쿠버네티스에 배포해야 합니다.<br>
<a href="https://kubernetes.github.io/ingress-nginx/deploy/#bare-metal" target="_blank" rel="noopener noreferrer">ingress-nginx</a></p><p>완료되면 설정한 <code>externalURL</code>로 접속해 봅시다!</p><p align="center"><img loading="lazy" src="/assets/img/install-harbor/harbor-portal.png" class="img_ev3q"></p><p>헬름 차트로 값을 변경하지 않고 배포하셨다면,
하버 포탈의 관리자 id/pw는 다음과 같습니다.</p><ul><li><code>id</code>: admin</li><li><code>password</code>: Harbor12345</li></ul><p>자, 이제 당신도 개인 도커 레지스트리를 가지고 있습니다!</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="문제-해결">문제 해결<a href="#문제-해결" class="hash-link" aria-label="Direct link to 문제 해결" title="Direct link to 문제 해결">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-로그인이-안되요">1. 로그인이 안되요<a href="#1-로그인이-안되요" class="hash-link" aria-label="Direct link to 1. 로그인이 안되요" title="Direct link to 1. 로그인이 안되요">​</a></h3><p><code>Invalid user name or password</code> 에러가 뜨며 로그인이 안됩니다.<br>
<!-- -->당황하지 말고 브라우저 개발자 도구 (chrome <code>F12</code>)를 눌러서 확인해 봅시다. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-405-method-not-allowed">a: 405 Method Not Allowed<a href="#a-405-method-not-allowed" class="hash-link" aria-label="Direct link to a: 405 Method Not Allowed" title="Direct link to a: 405 Method Not Allowed">​</a></h3><p><code>NodePort</code>, <code>ClusterIP</code>, <code>LoadBalancer</code>로 노출할 때
api 서버와 연동이 안되어 발생하는 문제로 생각됩니다.<br>
<code>ingress</code>를 살펴볼까요?</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"> 전략 </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">rules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> 도메인 이름 </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">serviceName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> harbor</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">v1</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">portal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">servicePort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">serviceName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> harbor</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">v1</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">servicePort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /api/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">serviceName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> harbor</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">v1</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">servicePort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /service/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">serviceName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> harbor</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">v1</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">servicePort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">serviceName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> harbor</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">v1</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">servicePort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /chartrepo/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">serviceName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> harbor</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">v1</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">servicePort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /c/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"> 후략 </span><span class="token punctuation" style="color:#393A34">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>/</code>는 ui서버(portal),
<code>/api/</code>, <code>/service/</code>, <code>/v2</code>, <code>/chartrepo/</code>, <code>/c/</code>는
core로 연결(proxy)되고 있습니다.
nginx 서비스가 실행중인지, 설정이 잘 되었는지 확인해 보시면 되겠습니다.   </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="b-403-forbidden">b: 403 Forbidden<a href="#b-403-forbidden" class="hash-link" aria-label="Direct link to b: 403 Forbidden" title="Direct link to b: 403 Forbidden">​</a></h3><p>잘못된 프로토콜(<code>http</code>)로 접근했을 가능성이 큽니다.
인증서를 따로 설정해 주지 않으셨더라도, <code>https</code>로 접근해야 합니다.</p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-접속이-안되요404-not-found">2. 접속이 안되요(404 Not Found)<a href="#2-접속이-안되요404-not-found" class="hash-link" aria-label="Direct link to 2. 접속이 안되요(404 Not Found)" title="Direct link to 2. 접속이 안되요(404 Not Found)">​</a></h3><p>ingress를 사용하셨다면 host를 제거합시다(주석처리).</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl edit ingress </span><span class="token variable" style="color:#36acaa">$harbor</span><span class="token plain">-ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. 전략 </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rules:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">#- host: { 도메인 이름 }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - http:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. 후략 </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://gruuuuu.github.io/cloud/k8s-service/" target="_blank" rel="noopener noreferrer">호롤리한 하루</a>  </p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>TMI</summary><div><div class="collapsibleContent_i85q"><div markdown="1"><p>대학 동기인데, 저와 비슷한 일을 하는 걸 보니 신기하네요.<br>
<del>사실 친하지도 않고 안면식도 있을지 모릅니다</del><br>
<!-- -->저는 실무적인 일을 많이 하는데, 이론적인 공부를 탄탄히 쌓아가는 걸 보면 부럽습니다.</p></div></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-docker-login이-안되요">3. docker login이 안되요<a href="#3-docker-login이-안되요" class="hash-link" aria-label="Direct link to 3. docker login이 안되요" title="Direct link to 3. docker login이 안되요">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-unsupported-protocol-scheme-">a: unsupported protocol scheme ""<a href="#a-unsupported-protocol-scheme-" class="hash-link" aria-label="Direct link to a: unsupported protocol scheme &quot;&quot;" title="Direct link to a: unsupported protocol scheme &quot;&quot;">​</a></h3><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> login </span><span class="token variable" style="color:#36acaa">${endpoint}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error response from daemon: Get </span><span class="token variable" style="color:#36acaa">${endpoint}</span><span class="token plain">/v2/: Get </span><span class="token variable" style="color:#36acaa">${endpoint}</span><span class="token plain">/service/token?account</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">apannwitz</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token assign-left variable" style="color:#36acaa">client_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">docker</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token assign-left variable" style="color:#36acaa">offline_token</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token assign-left variable" style="color:#36acaa">service</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">harbor-registry: unsupported protocol scheme </span><span class="token string" style="color:#e3116c">""</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>인증서를 사용하지 않을 때 <strong>서버</strong>에서 발생하는 문제입니다.<br>
<code>http</code> 프로토콜을 사용하더라도 <code>externalURL</code>은 <code>https</code>로 작성해야 합니다.  </p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ helm upgrade -n harbor </span><span class="token variable" style="color:#36acaa">${release-name}</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> --set </span><span class="token assign-left variable" style="color:#36acaa">externalURL</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">https://</span><span class="token variable" style="color:#36acaa">${endpoint}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://github.com/goharbor/harbor/issues/7418" target="_blank" rel="noopener noreferrer">[깃헙]Set protocol of URL as "http"</a>    </p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="b-x509-certificate">b: x509 certificate<a href="#b-x509-certificate" class="hash-link" aria-label="Direct link to b: x509 certificate" title="Direct link to b: x509 certificate">​</a></h3><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> login </span><span class="token variable" style="color:#36acaa">${endpoint}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error response from daemon: Get </span><span class="token variable" style="color:#36acaa">${endpoint}</span><span class="token plain">/v2/: x509: certificate is valid </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> ingress.local, not </span><span class="token variable" style="color:#36acaa">${endpoint}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>마찬가지로 인증서를 사용하지 않을 때 <strong>로컬</strong>에서 발생하는 문제입니다.<br>
<!-- -->docker의 <code>daemon.json</code>을 수정하고 재시작 합니다. (/etc/docker/daemon.json)</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ... 전략 ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"insecure-registries"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"your-registry-addr"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ... 후략 ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>데몬 재시작 명령어</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ systemctl restart </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 또는</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">service</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> restart</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://goharbor.io/docs/2.0.0/install-config/run-installer-script/#connect-http" target="_blank" rel="noopener noreferrer">[공식]Connecting to Harbor via HTTP</a><br>
<a href="https://github.com/distribution/distribution/issues/1874#issuecomment-237194314" target="_blank" rel="noopener noreferrer">[깃헙]CNCF distribution</a> <em>무려 800 이상의 반응이...</em><br>
<a href="https://stackoverflow.com/a/38716311" target="_blank" rel="noopener noreferrer">[stackoverflow]Can not pull/push images after update docker to 1.12</a>  </p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="c-dial-tcp-443-connect-connection-refused">c: dial tcp 443 connect connection refused<a href="#c-dial-tcp-443-connect-connection-refused" class="hash-link" aria-label="Direct link to c: dial tcp 443 connect connection refused" title="Direct link to c: dial tcp 443 connect connection refused">​</a></h3><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> login </span><span class="token variable" style="color:#36acaa">${endpoint}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error response from daemon: Get https://</span><span class="token variable" style="color:#36acaa">${url}</span><span class="token builtin class-name">:</span><span class="token variable" style="color:#36acaa">${port}</span><span class="token plain">/v2/: Get https://</span><span class="token variable" style="color:#36acaa">${url}</span><span class="token plain">/service/token?account</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">harbor_registry_user</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token assign-left variable" style="color:#36acaa">client_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">docker</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token assign-left variable" style="color:#36acaa">offline_token</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token assign-left variable" style="color:#36acaa">service</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">harbor-registry: connect: connection refused</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 또는</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error response from daemon: login attempt to http://</span><span class="token variable" style="color:#36acaa">${url}</span><span class="token builtin class-name">:</span><span class="token variable" style="color:#36acaa">${port}</span><span class="token plain">/v2/ failed with status: </span><span class="token number" style="color:#36acaa">400</span><span class="token plain"> Bad Request</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 또는</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error response from daemon: Get https://</span><span class="token variable" style="color:#36acaa">${url}</span><span class="token plain">/v2/: dial tcp </span><span class="token variable" style="color:#36acaa">${url}</span><span class="token plain">:443: connect: connection refused</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>첫번째 경우는 <code>harbor-core</code>에서 발생하는 문제입니다.<br>
<code>/v2/</code>에서 <code>externalURL</code>로 <code>/service/</code> api를 호출하는데,
port가 지정되어 있지 않으면 https 프로토콜의 기본값 443번으로 연결됩니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ helm upgrade -n harbor </span><span class="token variable" style="color:#36acaa">${release-name}</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> --set </span><span class="token assign-left variable" style="color:#36acaa">externalURL</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">https://</span><span class="token variable" style="color:#36acaa">${url}</span><span class="token builtin class-name">:</span><span class="token variable" style="color:#36acaa">${port}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>두번째로 <code>/v2/</code>에서 400 Bad Request가 발생한다면 ingress의 호스트 문제일 가능성이 큽니다.
<a href="#2-%EC%A0%91%EC%86%8D%EC%9D%B4-%EC%95%88%EB%90%98%EC%9A%94404-not-found">2. 접속이 안되요(404 Not Found)</a> 를 참고해 호스트를 제거합니다.</p><p>세번째로 <code>/v2/</code>에서 바로 connection refused가 발생한다면,
<code>docker login ${endpoint}</code>에서 포트를 누락시켰을 가능성이 큽니다.</p><p><a href="https://github.com/goharbor/harbor/issues/6896#issuecomment-462046107" target="_blank" rel="noopener noreferrer">[깃헙]Not able to connect to harbor repo</a>  </p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-pushpull-이-안되요">4. push/pull 이 안되요<a href="#4-pushpull-이-안되요" class="hash-link" aria-label="Direct link to 4. push/pull 이 안되요" title="Direct link to 4. push/pull 이 안되요">​</a></h3><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> push </span><span class="token variable" style="color:#36acaa">${endpoint}</span><span class="token plain">/</span><span class="token variable" style="color:#36acaa">${repository}</span><span class="token plain">/</span><span class="token variable" style="color:#36acaa">${image-name}</span><span class="token builtin class-name">:</span><span class="token variable" style="color:#36acaa">${tag}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error response from daemon: Get </span><span class="token variable" style="color:#36acaa">${endpoint}</span><span class="token plain">/v2/: http: server gave HTTP response to HTTPS client</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이 역시 인증서를 사용하지 않았을 때 <strong>로컬</strong>에서 생기는 문제입니다.<br>
<del>이쯤되면 그냥 인증서 쓰고 말자</del><br>
<a href="#b-x509-certificate">b: x509 certificate</a> 를 참고해
로컬 도커의 <code>daemon.json</code>을 수정해 줍시다.</p><p><a href="https://stackoverflow.com/questions/49674004/docker-repository-server-gave-http-response-to-https-client/54190375" target="_blank" rel="noopener noreferrer">[stackoverflow]Docker repository server gave HTTP response to HTTPS client</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p>6월 25일 도입을 결정했으나, 시기를 계속 늦춰
만 한달이 지난 7월 19일부터 작업을 했습니다.
설치와 배포는 생각보다 빠르게 됬네요:)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://goharbor.io/docs/2.2.0/install-config/" target="_blank" rel="noopener noreferrer">[공식]Harbor Installation and Configuration</a><br>
<a href="https://goharbor.io/docs/2.2.0/install-config/harbor-ha-helm/" target="_blank" rel="noopener noreferrer">[공식]Deploying Harbor with High Availability via Helm</a>  </p>]]></content:encoded>
            <category>tech</category>
            <category>kubernetes</category>
            <category>docker</category>
            <category>linux</category>
        </item>
        <item>
            <title><![CDATA[Install Helm]]></title>
            <link>https://jwher.github.io/posts/install-helm</link>
            <guid>https://jwher.github.io/posts/install-helm</guid>
            <pubDate>Wed, 21 Jul 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Helm: 쿠버네티스 패키지 매니저]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="helm" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBoZWlnaHQ9IjM1MSIgdmlld0JveD0iMCAwIDMwNCAzNTEiIHdpZHRoPSIzMDQiPgo8bWFzayBpZD0iYSIgZmlsbD0iI2ZmZiI+CjxwYXRoIGQ9Im0wIDBoMzEzLjMwMzE1NXYxNTkuODY0ODY1aC0zMTMuMzAzMTU1eiIgZmlsbD0iI2ZmZiIgZmlsbC1ydWxlPSJldmVub2RkIi8+CjwvbWFzaz4KPG1hc2sgaWQ9ImIiIGZpbGw9IiNmZmYiPgo8cGF0aCBkPSJtMCAwaDMxMy4zMDMxNTV2MTU5Ljg2NDg2NWgtMzEzLjMwMzE1NXoiIGZpbGw9IiNmZmYiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPgo8L21hc2s+CjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTExIC01MSkiPgo8cGF0aCBkPSJtMTEuNjc4NTcxNCAxODloMTkuNzg1ODM1N3YyNi43ODloMjMuOTAzN3YtMjYuNzg5aDE5Ljc4NTgzNTh2NzUuMjVoLTE5Ljc4NTgzNTh2LTI4LjY5NTMzM2gtMjMuOTAzN3YyOC42OTUzMzNoLTE5Ljc4NTgzNTd6bTg2LjE3Mzg0MjkgNzUuMjV2LTc1LjI1aDQ2LjgwMzA0Mjd2MTYuMzU0MzMzaC0yNy4wMTcyMDd2MTIuMjQwNjY3aDIzLjkwMzd2MTYuNjU1MzMzaC0yMy45MDM3djEzLjg0NmgyNy4wMTcyMDd2MTYuMTUzNjY3em02OC40OTcxNTY3IDB2LTc1LjI1aDE5Ljc4NTgzNnY1NS4zODRoMjcuMTE3NjQzdjE5Ljg2NnptNzcuNTM2MzcyLTc1LjI1IDMwLjczMzMyOCAyNy44OTI2NjcgMzAuNjMyODkzLTI3Ljg5MjY2N2g4LjkzODc3OXY3NS4yNWgtMTkuODg2Mjcydi0zOC42MjgzMzNsLTE5LjY4NTQgMTcuOTU5NjY2LTE5Ljc4NTgzNS0xNy44NTkzMzN2MzguNTI4aC0xOS44ODYyNzJ2LTc1LjI1eiIgZmlsbD0iIzBmMTY4OSIvPgo8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxIDAgMCAtMSAxMS45NTgxMzYgNDU1KSI+CjxnIGZpbGw9IiMwZjE2ODkiIG1hc2s9InVybCgjYSkiPgo8cGF0aCBkPSJtMjAzLjQ2MDY3NiA5NS42ODc1NDI1YzYuOTM2MzEgMCAxMi41NTkzMDEtMTQuODA5MjE5NCAxMi41NTkzMDEtMzMuMDc3MzE3MnMtNS42MjI5OTEtMzMuMDc3MzE3Mi0xMi41NTkzMDEtMzMuMDc3MzE3MmMtNi45MzYzMTEgMC0xMi41NTkzMDEgMTQuODA5MjE5NC0xMi41NTkzMDEgMzMuMDc3MzE3MnM1LjYyMjk5IDMzLjA3NzMxNzIgMTIuNTU5MzAxIDMzLjA3NzMxNzJ6IiB0cmFuc2Zvcm09Im1hdHJpeCguODE5MTUyMDQgLjU3MzU3NjQ0IC0uNTczNTc2NDQgLjgxOTE1MjA0IDExMS44NzAwOTEgLTUxLjcwNjU1NikiLz4KPHBhdGggZD0ibTMwLjE0MjMyMjMgOTUuNjg3NTQyNWM2LjkzNjMxMDQgMCAxMi41NTkzMDEtMTQuODA5MjE5NCAxMi41NTkzMDEtMzMuMDc3MzE3MnMtNS42MjI5OTA2LTMzLjA3NzMxNzItMTIuNTU5MzAxLTMzLjA3NzMxNzItMTIuNTU5MzAwOSAxNC44MDkyMTk0LTEyLjU1OTMwMDkgMzMuMDc3MzE3MiA1LjYyMjk5MDUgMzMuMDc3MzE3MiAxMi41NTkzMDA5IDMzLjA3NzMxNzJ6IiB0cmFuc2Zvcm09Im1hdHJpeCgtLjgxOTE1MjA0IC41NzM1NzY0NCAuNTczNTc2NDQgLjgxOTE1MjA0IDU4LjA4NDYxMSA0Ny43MDQ3NjgpIi8+CjxwYXRoIGQ9Im0xMTYuNzMyODE1IDY2LjI3NTI2NzZjNi45MzYzMTEgMCAxMi41NTkzMDEtMTQuODA5MjE5MyAxMi41NTkzMDEtMzMuMDc3MzE3MiAwLTE4LjI2ODA5NzgtNS42MjI5OS0zMy4wNzczMTcxMy0xMi41NTkzMDEtMzMuMDc3MzE3MTMtNi45MzYzMSAwLTEyLjU1OTMwMSAxNC44MDkyMTkzMy0xMi41NTkzMDEgMzMuMDc3MzE3MTMgMCAxOC4yNjgwOTc5IDUuNjIyOTkxIDMzLjA3NzMxNzIgMTIuNTU5MzAxIDMzLjA3NzMxNzJ6IiB0cmFuc2Zvcm09Im1hdHJpeCgtMSAwIDAgMSAyNzIuNjI4NTI0IDUzLjY3MDc2MikiLz4KPC9nPgo8cGF0aCBkPSJtMjUxLjQ2NzAwNiAxNzMuMDk5ODQ5Yy0yMC4yMzAwNzYtMzMuNjA5OTY5LTU2Ljg4OTU2NS01Ni4wNjc5MDgtOTguNzU1Nzc2LTU2LjA2NzkwOC00MC43MjA3OTggMC03Ni41MTU4NzY2IDIxLjI0NTkwMS05Ny4wNTg2OTU5IDUzLjMzNDU4OG0yLjE5ODExMDcgMTI5LjE2OTUzNGMyMC44NDAzMDM2IDMwLjIzMjcwMSA1NS41NTU5MDQyIDUwLjAyNjU5MSA5NC44NjA1ODUyIDUwLjAyNjU5MSAzOS4zNzYwOTkgMCA3NC4xNDY0MjQtMTkuODY1ODg3IDk0Ljk3NDA0OS01MC4xOTE0OTUiIG1hc2s9InVybCgjYSkiIHN0cm9rZT0iIzBmMTY4OSIgc3Ryb2tlLXdpZHRoPSIyMCIvPgo8L2c+CjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExLjk1ODEzNikiPgo8ZyBmaWxsPSIjMGYxNjg5IiBtYXNrPSJ1cmwoI2IpIj4KPHBhdGggZD0ibTIwMy40NjA2NzYgOTUuNjg3NTQyNWM2LjkzNjMxIDAgMTIuNTU5MzAxLTE0LjgwOTIxOTQgMTIuNTU5MzAxLTMzLjA3NzMxNzJzLTUuNjIyOTkxLTMzLjA3NzMxNzItMTIuNTU5MzAxLTMzLjA3NzMxNzJjLTYuOTM2MzExIDAtMTIuNTU5MzAxIDE0LjgwOTIxOTQtMTIuNTU5MzAxIDMzLjA3NzMxNzJzNS42MjI5OSAzMy4wNzczMTcyIDEyLjU1OTMwMSAzMy4wNzczMTcyeiIgdHJhbnNmb3JtPSJtYXRyaXgoLjgxOTE1MjA0IC41NzM1NzY0NCAtLjU3MzU3NjQ0IC44MTkxNTIwNCAxMTEuODcwMDkxIC01NC4xNjYwMTYpIi8+CjxwYXRoIGQ9Im0zMC4xNDIzMjIzIDk1LjY4NzU0MjVjNi45MzYzMTA0IDAgMTIuNTU5MzAxLTE0LjgwOTIxOTQgMTIuNTU5MzAxLTMzLjA3NzMxNzJzLTUuNjIyOTkwNi0zMy4wNzczMTcyLTEyLjU1OTMwMS0zMy4wNzczMTcyLTEyLjU1OTMwMDkgMTQuODA5MjE5NC0xMi41NTkzMDA5IDMzLjA3NzMxNzIgNS42MjI5OTA1IDMzLjA3NzMxNzIgMTIuNTU5MzAwOSAzMy4wNzczMTcyeiIgdHJhbnNmb3JtPSJtYXRyaXgoLS44MTkxNTIwNCAuNTczNTc2NDQgLjU3MzU3NjQ0IC44MTkxNTIwNCA1OC4wODQ2MTEgNDUuMjQ1MzA4KSIvPgo8cGF0aCBkPSJtMTE2LjczMjgxNSA2Ni4yNzUyNjc2YzYuOTM2MzExIDAgMTIuNTU5MzAxLTE0LjgwOTIxOTMgMTIuNTU5MzAxLTMzLjA3NzMxNzIgMC0xOC4yNjgwOTc4LTUuNjIyOTktMzMuMDc3MzE3MTMtMTIuNTU5MzAxLTMzLjA3NzMxNzEzLTYuOTM2MzEgMC0xMi41NTkzMDEgMTQuODA5MjE5MzMtMTIuNTU5MzAxIDMzLjA3NzMxNzEzIDAgMTguMjY4MDk3OSA1LjYyMjk5MSAzMy4wNzczMTcyIDEyLjU1OTMwMSAzMy4wNzczMTcyeiIgdHJhbnNmb3JtPSJtYXRyaXgoLTEgMCAwIDEgMjcyLjYyODUyNCA1MS4yMTEzMDIpIi8+CjwvZz4KPHBhdGggZD0ibTI1MS40NjcwMDYgMTcwLjY0MDM5Yy0yMC4yMzAwNzYtMzMuNjA5OTY5LTU2Ljg4OTU2NS01Ni4wNjc5MDgtOTguNzU1Nzc2LTU2LjA2NzkwOC00MC43MjA3OTggMC03Ni41MTU4NzY2IDIxLjI0NTktOTcuMDU4Njk1OSA1My4zMzQ1ODdtMi4xOTgxMTA3IDEyOS4xNjk1MzRjMjAuODQwMzAzNiAzMC4yMzI3MDIgNTUuNTU1OTA0MiA1MC4wMjY1OTEgOTQuODYwNTg1MiA1MC4wMjY1OTEgMzkuMzc2MDk5IDAgNzQuMTQ2NDI0LTE5Ljg2NTg4NiA5NC45NzQwNDktNTAuMTkxNDk0IiBtYXNrPSJ1cmwoI2IpIiBzdHJva2U9IiMwZjE2ODkiIHN0cm9rZS13aWR0aD0iMjAiLz4KPC9nPgo8L2c+Cjwvc3ZnPgo=" width="304" height="351" class="img_ev3q">
<em>쿠버네티스 패키지 매니저</em>  </p><h1>목차</h1><ul><li><a href="#helm">Helm</a></li><li><a href="#%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0">설치하기</a></li><li><a href="#%EB%AA%85%EB%A0%B9%EC%96%B4">명령어</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="helm">Helm<a href="#helm" class="hash-link" aria-label="Direct link to Helm" title="Direct link to Helm">​</a></h2><p>헬름이란?<br>
<!-- -->쿠버네티스 패키지 매니저입니다.
헬름은 쿠버네티스용 소프트웨어를 검색하거나, 공유하고 사용하기에 가장 좋은 방법입니다.</p><ul><li>복잡성 관리: 차트는 매우 복잡한 앱도 표현하고, 반복적인 애플리케이션 설치를 제공하며, 단일 권한으로 서비스할 수 있습니다.</li><li>쉬운 업데이트: 즉석(in-place) 업그레이드와 커스텀 훅을 통해 업데이트하는 수고를 덜어줍니다.</li><li>간단한 공유: 차트는 버전 관리, 공유, 퍼블릭이나 프라이빗 서버 호스팅이 편리합니다.</li><li>롤백: helm rollback을 사용하여 릴리스를 예전 버전으로 간편하게 되돌리세요.</li></ul><p><em>이 단락은 공식 홈페이지의 내용을 인용했습니다.</em></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="설치하기">설치하기<a href="#설치하기" class="hash-link" aria-label="Direct link to 설치하기" title="Direct link to 설치하기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="apt로-설치하기">apt로 설치하기<a href="#apt로-설치하기" class="hash-link" aria-label="Direct link to apt로 설치하기" title="Direct link to apt로 설치하기">​</a></h3><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> https://baltocdn.com/helm/signing.asc </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> apt-key </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> apt-transport-https --yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"deb https://baltocdn.com/helm/stable/debian/ all main"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tee</span><span class="token plain"> /etc/apt/sources.list.d/helm-stable-debian.list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> helm</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="명령어">명령어<a href="#명령어" class="hash-link" aria-label="Direct link to 명령어" title="Direct link to 명령어">​</a></h2><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 차트 설치</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$name</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$chart</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">flags</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 업그레이드</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm upgrade </span><span class="token variable" style="color:#36acaa">$name</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$chart</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">flags</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 롤백</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm </span><span class="token function" style="color:#d73a49">history</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm rollback </span><span class="token variable" style="color:#36acaa">$name</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">revision</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">flags</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p>현재 개념, 설치, 명령어 페이지가 하나입니다.
지식이 늘어나면 분리가 필요합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://helm.sh/ko/" target="_blank" rel="noopener noreferrer">[공식]헬름</a><br>
<a href="https://helm.sh/docs/intro/install/" target="_blank" rel="noopener noreferrer">[공식]Installing Helm</a><br>
<a href="https://helm.sh/docs/helm/helm/" target="_blank" rel="noopener noreferrer">[공식]Helm Commands</a></p>]]></content:encoded>
            <category>tech</category>
            <category>kubernetes</category>
        </item>
        <item>
            <title><![CDATA[Github Issue]]></title>
            <link>https://jwher.github.io/posts/github-issue</link>
            <guid>https://jwher.github.io/posts/github-issue</guid>
            <pubDate>Thu, 15 Jul 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[깃허브 이슈로 협업하기]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="github" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTggMEMzLjU4IDAgMCAzLjU4IDAgOEMwIDExLjU0IDIuMjkgMTQuNTMgNS40NyAxNS41OUM1Ljg3IDE1LjY2IDYuMDIgMTUuNDIgNi4wMiAxNS4yMUM2LjAyIDE1LjAyIDYuMDEgMTQuMzkgNi4wMSAxMy43MkM0IDE0LjA5IDMuNDggMTMuMjMgMy4zMiAxMi43OEMzLjIzIDEyLjU1IDIuODQgMTEuODQgMi41IDExLjY1QzIuMjIgMTEuNSAxLjgyIDExLjEzIDIuNDkgMTEuMTJDMy4xMiAxMS4xMSAzLjU3IDExLjcgMy43MiAxMS45NEM0LjQ0IDEzLjE1IDUuNTkgMTIuODEgNi4wNSAxMi42QzYuMTIgMTIuMDggNi4zMyAxMS43MyA2LjU2IDExLjUzQzQuNzggMTEuMzMgMi45MiAxMC42NCAyLjkyIDcuNThDMi45MiA2LjcxIDMuMjMgNS45OSAzLjc0IDUuNDNDMy42NiA1LjIzIDMuMzggNC40MSAzLjgyIDMuMzFDMy44MiAzLjMxIDQuNDkgMy4xIDYuMDIgNC4xM0M2LjY2IDMuOTUgNy4zNCAzLjg2IDguMDIgMy44NkM4LjcgMy44NiA5LjM4IDMuOTUgMTAuMDIgNC4xM0MxMS41NSAzLjA5IDEyLjIyIDMuMzEgMTIuMjIgMy4zMUMxMi42NiA0LjQxIDEyLjM4IDUuMjMgMTIuMyA1LjQzQzEyLjgxIDUuOTkgMTMuMTIgNi43IDEzLjEyIDcuNThDMTMuMTIgMTAuNjUgMTEuMjUgMTEuMzMgOS40NyAxMS41M0M5Ljc2IDExLjc4IDEwLjAxIDEyLjI2IDEwLjAxIDEzLjAxQzEwLjAxIDE0LjA4IDEwIDE0Ljk0IDEwIDE1LjIxQzEwIDE1LjQyIDEwLjE1IDE1LjY3IDEwLjU1IDE1LjU5QzEzLjcxIDE0LjUzIDE2IDExLjUzIDE2IDhDMTYgMy41OCAxMi40MiAwIDggMFoiIHRyYW5zZm9ybT0ic2NhbGUoNjQpIiBmaWxsPSIjMUIxRjIzIi8+Cjwvc3ZnPgo=" width="1024" height="1024" class="img_ev3q">
<em>깃허브 이슈로 협업하기</em>  </p><h1>목차</h1><ul><li><a href="#%EC%9D%B4%EC%8A%88">이슈</a></li><li><a href="#%ED%85%9C%ED%94%8C%EB%A6%BF">템플릿</a></li><li><a href="#%EB%A8%B8%EC%A7%80%EC%9A%94%EC%B2%AD">머지요청</a></li><li><a href="#%EB%A7%88%EC%9D%BC%EC%8A%A4%ED%86%A4">마일스톤</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="이슈">이슈<a href="#이슈" class="hash-link" aria-label="Direct link to 이슈" title="Direct link to 이슈">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="git">Git<a href="#git" class="hash-link" aria-label="Direct link to Git" title="Direct link to Git">​</a></h3><p><strong>깃</strong> 은 지옥에서 온 정보 관리자 입니다.</p><blockquote><p align="center"><img loading="lazy" src="https://t1.daumcdn.net/cfile/tistory/2158293455F6709717" class="img_ev3q"></p><p>Initial revision of "git", the information manager from hell<br>
<!-- -->─ Linus Torvalds</p></blockquote><p>농담이 아니라, 리눅스 창시자이기도 한 리누스 토발즈가 <strong>깃</strong>을
처음 소개하며 한 <a href="https://github.com/git/git/commit/e83c5163316f89bfbde7d9ab23ca2e25604af290" target="_blank" rel="noopener noreferrer">말</a> 입니다.
깃이 없을 땐 얼마나 지옥같은 코드 관리를 했는지 느껴지네요.  </p><p>깃은 크게 버전 관리, 백업, 협업을 목표로 하고 있습니다.
본 글은 깃의 버전 관리와 백업 기능을 이해하는 독자를 위해 작성했습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="issue">Issue<a href="#issue" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h3><p>본론으로 돌아와 볼까요,<br>
<!-- -->깃허브(깃랩)는 지옥같은 코드 관리만 해주지 않습니다.
이슈 추적 시스템(ITS: Issue Tracking System)으로 개발자간의 협업을 돕죠</p><p align="center"><img loading="lazy" src="/assets/img/github-issue/issue.png" class="img_ev3q"></p><p><em>이 버튼을 본 적이 있나요?</em></p><p>개발자간 idea, work, bug(problem)을 다루기 위해 깃허브(깃랩)은 <strong>이슈</strong>를  사용합니다.
세부적인 목표사항은 다음과 같습니다.</p><ul><li>아이디어 구현에 관한 논의</li><li>작업 진행상황 추적</li><li>기능 제안 수락, 질문, 요청 지원 또는 버그 보고</li><li>정교한 코드 구현</li></ul><p>이슈를 등록하기 위해 보통 다음 단게를 거칩니다.</p><ul><li>이슈 탭을 눌러 엽니다(open).</li><li>해당 문제, 상황을 재현할 수 있는 최대한 많은 정보(context)를 제공합니다.</li><li>해당 환경 정보(버전, os 등) 관련이 있다고 생각하는 모든 정보를 제공합니다.  </li></ul><p>이슈를 등록하게 되면 보통 다음 단계를 거칩니다.</p><ul><li>프로젝트 팀(혹은 매니저)이 라벨(label)과 담당자(assign)를 지정합니다.</li><li>담당자가 최대한 빨리 답변하기 위해 노력합니다.</li><li>해결이 되거나 오랜 기간 답변이 없다면, 이슈는 닫힙니다(closed).</li></ul><p>이제 개발자들과 쉽게 소통할 수 있습니다!  </p><p>하지만 쉬운 만큼 문제가 따르죠,
다른 개발자들과 열심히 소통하던 당신은 도통 이해할 수 없는 이슈를 보게 됩니다.  </p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="템플릿">템플릿<a href="#템플릿" class="hash-link" aria-label="Direct link to 템플릿" title="Direct link to 템플릿">​</a></h2><p>프로젝트의 핵심 개발자와 관리자는 이슈의 오남용을 막기 위해 template을 만들었습니다.
깃헙에서는 <code>.github</code>, 깃랩에서는 <code>.gitlab</code> 폴더 밑에 이슈 템플릿을 작성합니다.
마크다운 파일(.md)로 작성된 템플릿은 어떠한 정보를 포함해야 하는지 명시할 수 있습니다.</p><p align="center"><img loading="lazy" src="/assets/img/github-issue/template-gitlab.png" class="img_ev3q"></p><p><em>깃랩에서 템플릿을 사용해 이슈를 작성하는 모습</em></p><p>백문이 불여일견, 예시를 하나 봅시다</p><div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!--bug_report.md--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token hr punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name: Bug report</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">about: Report a bug you've encountered</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">title: "</span><span class="token url-reference url punctuation" style="color:#393A34">[</span><span class="token url-reference url variable" style="color:#36acaa">Bug</span><span class="token url-reference url punctuation" style="color:#393A34">]</span><span class="token url-reference url punctuation" style="color:#393A34">:</span><span class="token url-reference url" style="color:#36acaa"> Please</span><span class="token plain"> add a title"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">labels: bug</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">assignees: ''</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token hr punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token title important punctuation" style="color:#393A34">##</span><span class="token title important"> Summary</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">어떤 버그인지 명확하고 간결한 서술</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token title important punctuation" style="color:#393A34">##</span><span class="token title important"> To Reproduce</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">해당 버그를 재현하기 위한 단계:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">1.</span><span class="token plain"> Go to '...'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">2.</span><span class="token plain"> Click on '....'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">3.</span><span class="token plain"> Scroll down to '....'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">4.</span><span class="token plain"> See error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token title important punctuation" style="color:#393A34">##</span><span class="token title important"> Expected behaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">왜 일어났는지에 대한 명확하고 간결한 서술</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token title important punctuation" style="color:#393A34">##</span><span class="token title important"> Screenshots</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">가능하다면 문제를 해결하기 적합한 스크린샷 첨부</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token title important punctuation" style="color:#393A34">##</span><span class="token title important"> Environment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 파이선 버전: [e.g. 3.8.0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 우분투 버전: [e.g. 20.04LTS]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token title important punctuation" style="color:#393A34">##</span><span class="token title important"> Browser(s)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> Browser [e.g. chrome, safari]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> Version [e.g. 22]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token title important punctuation" style="color:#393A34">##</span><span class="token title important"> Additional context</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">위에 해당되지 않은 항목 기술</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">e.g. 이슈 #397과 유사한 증상입니다.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/label </span><span class="token strike punctuation" style="color:#393A34">~</span><span class="token strike content">버그 </span><span class="token strike punctuation" style="color:#393A34">~</span><span class="token plain">문제</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/cc @jwher</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/assign @jwher</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>내용은 각각의 프로젝트 마다 다를 것입니다.
하지만 공통되는 지정어도 있습니다.  </p><p>눈치 빠르신 분은 찾으셨나요?<br>
<!-- -->인스타그램이나 페이스북을 많이 사용하셨으면 더 찾기 쉬우셨을 겁니다.  </p><ul><li><code>@mentions</code>: 해당 ID를 가진 사람에게 알림을 보냅니다.  </li><li><code>#reference</code>: <code>#9999</code>처럼 숫자로 사용합니다. 다른 이슈를 참조합니다.</li><li><code>/cc</code>: Carbon Copy의 줄임말로 참조를 뜻합니다. 뒤에 <code>멘션</code>을 붙입니다.</li><li><code>/assign</code>: 뒤에 <code>멘션</code>을 붙여 담당자를 지정합니다.</li><li><code>/milestone</code>: 애자일 스프린트 시간 설정 기능입니다. 뒤에 <code>%"마일스톤"</code>을 붙입니다.</li><li><code>/label</code>: 다양한 이슈를 관리하기 위해 <code>~라벨</code>을 붙입니다. 여러개를 지정할 수 있습니다.</li><li><code>/due</code>: 목표일을 지정합니다. 뒤에 <code>yyyy-mm-dd</code>을 붙입니다.</li></ul><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="머지요청">머지요청<a href="#머지요청" class="hash-link" aria-label="Direct link to 머지요청" title="Direct link to 머지요청">​</a></h2><p>문제를 해결했다면 반영해야죠. 이슈의 큰 기능 중 하나는 <code>merge</code> 입니다.<br>
<!-- -->해결한 문제를 merge request 하면, 프로젝트 관리자가 메인(마스터) 브랜치와 병합하게 됩니다.  </p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="마일스톤">마일스톤<a href="#마일스톤" class="hash-link" aria-label="Direct link to 마일스톤" title="Direct link to 마일스톤">​</a></h2><p>마일스톤을 알기 위해선 <strong>애자일 방법론</strong>을 먼저 알아야 하는데요,
간단히 말하자면 짧은 개발주기를 여러번 가지는 개발법입니다.  </p><p>마일스톤은 개발 기간을 설정하고, 목표에 도달할 때 까지 이슈를 관리해 줍니다.
프로젝트 관리자는 마일스톤을 통해 이슈와 머지 요청을 쉽게 추적할 수 있습니다.</p><p>또한, 마일스톤이 애자일 스프린트 주기이기 때문에 Release 로 사용할 수 있습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="iteration">Iteration<a href="#iteration" class="hash-link" aria-label="Direct link to Iteration" title="Direct link to Iteration">​</a></h2><p>앞서 설명하지 않은 syntax가 있었는데요, <code>/iteration</code>입니다.
Iteration은 이슈를 반복하게 됩니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p>자! 이제 당신은 이슈로 협업/프로젝트를 관리할 수 있습니다!</p><p><em>질문: ITS가 깃에 종속적인지, 깃허브 기능인지 아시는분은 알려주세요</em><br>
<em>질문: template는 전부 .md 형식일까요?</em></p><p>입문자를 위해 깃 아키텍처와 워크플로우를 다룬 글을 작성해야겠습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://ko.wikipedia.org/wiki/%EA%B9%83%ED%97%88%EB%B8%8C" target="_blank" rel="noopener noreferrer">[위키]깃허브</a><br>
<a href="https://docs.gitlab.com/ee/user/project/issues/" target="_blank" rel="noopener noreferrer">[깃랩]Issues</a><br>
<a href="https://guides.github.com/features/issues/" target="_blank" rel="noopener noreferrer">[깃헙]Mastering Issues</a>  </p>]]></content:encoded>
            <category>dev</category>
        </item>
        <item>
            <title><![CDATA[K8S Tip Rollback]]></title>
            <link>https://jwher.github.io/posts/k8s-tip-rollback</link>
            <guid>https://jwher.github.io/posts/k8s-tip-rollback</guid>
            <pubDate>Tue, 06 Jul 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[K8s tip: Rollback]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/kubernetes.png" alt="Alt" title="kubernetes" class="img_ev3q"></p><p><em>쿠버네티스 배포 롤백하기</em>  </p><h1>목차</h1><ul><li><a href="#%EA%B0%9C%EB%85%90">개념</a></li><li><a href="#%EB%B0%B0%ED%8F%AC-%EB%A1%A4%EB%B0%B1%ED%95%98%EA%B8%B0">배포 롤백하기</a></li></ul><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="개념">개념<a href="#개념" class="hash-link" aria-label="Direct link to 개념" title="Direct link to 개념">​</a></h2><p>디플로이먼트는 파드와 레플리카셋에 대한 선언적 업데이트를 제공합니다. 😵  </p><p>혹시, 디플로이먼트, 파드, 레플리카셋을 처음 들어보셨나요?
<!-- -->[이글][/posts/welcome-to-kubernetes]<!-- --> 을 먼저 읽는 걸 추천합니다!  </p><p>그래도 어려우니 조금 풀어서 볼까요?<br>
<!-- -->사용자는 디플로이먼트로 파드의 의도하는 상태를 설명하고, 디플로이먼트 <a href="https://kubernetes.io/ko/docs/concepts/architecture/controller/" target="_blank" rel="noopener noreferrer">컨트롤러</a>
는 현재 상태에서 의도하는 상태로 변경해줍니다.
또한 새 레플리카셋을 생성한 디플로이먼트를 관리해주는데요,
디플로이먼트의 템플릿(.spec.template)이 변경될 경우 디플로이먼트 롤아웃이 작동(trigger)되어
롤백지점을 생성해 주는 역할도 합니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="배포-롤백하기">배포 롤백하기<a href="#배포-롤백하기" class="hash-link" aria-label="Direct link to 배포 롤백하기" title="Direct link to 배포 롤백하기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="롤아웃-기록-확인">롤아웃 기록 확인<a href="#롤아웃-기록-확인" class="hash-link" aria-label="Direct link to 롤아웃 기록 확인" title="Direct link to 롤아웃 기록 확인">​</a></h3><p>어떤 버전으로 롤백을 해야 할까요?
먼저 디플로이먼트의 롤아웃 기록을 확인해 봅시다.<br>
<!-- -->저는 현재 개발중인 visualization 디플로이먼트를 확인해 볼려고 합니다.<br>
<em>디플로이먼트가 없으신 분은 예제 요청하시면 추가하겠습니다</em>  </p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl rollout </span><span class="token function" style="color:#d73a49">history</span><span class="token plain"> deploy/ml-pipeline-newvis -n kubeflow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REVISION  CHANGE-CAUSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token plain">         </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>어라? 아무 내용도 없습니다!  </p><p><code>CHANGE-CAUSE</code>는 디플로이먼트 주석인 <code>kubernetes.io/change-cause</code>에서
복사되는데요, 다음 방법으로 메시지를 작성할 수 있습니다.</p><ul><li><code>annotate</code>로 작성: <code>kubectl annotate deploy/${deploy_name} kubernetes.io/change-cause="변경내용"</code></li><li><code>--record</code> 플래그 추가</li><li>수동으로 리소스 메니페스트 편집</li></ul><p>가만이 있을 수 없겠죠, 직접 해봅시다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># annotate 명령어로 작성</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl annotate deploy/ml-pipeline-newvis -n kubeflow kubernetes.io/change-cause</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"첫 배포"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/ml-pipeline-newvis annotated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 확인해 봅시다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl rollout </span><span class="token function" style="color:#d73a49">history</span><span class="token plain"> deploy/ml-pipeline-newvis -n kubeflow  deployment.apps/ml-pipeline-newvis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REVISION  CHANGE-CAUSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token plain">         첫 배포</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># --record 플래그 사용</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl edit deploy/ml-pipeline-newvis -n kubeflow --record</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/ml-pipeline-newvis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 확인해 봅시다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl rollout </span><span class="token function" style="color:#d73a49">history</span><span class="token plain"> deploy/ml-pipeline-newvis -n kubeflow  deployment.apps/ml-pipeline-newvis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REVISION  CHANGE-CAUSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token plain">         첫 배포</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2</span><span class="token plain">         kubectl edit deploy/ml-pipeline-newvis --namespace</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">kubeflow --record</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 수동 편집은 yaml의 kubernetes.io/change-cause을 직접 수정해 주면 됩니다</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>수정 버전의 세부 정보를 보려면 다음과 같이 합니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl rollout </span><span class="token function" style="color:#d73a49">history</span><span class="token plain"> deploy/ml-pipeline-newvis -n kubeflow --revision</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/ml-pipeline-newvis with revision </span><span class="token comment" style="color:#999988;font-style:italic">#1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Pod Template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Labels:       </span><span class="token assign-left variable" style="color:#36acaa">app</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ml-pipeline-newvis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pod-template-hash</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">5d754d989b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Annotations:  kubernetes.io/change-cause: 첫 배포</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ml-pipeline-newvis:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Image:      jwher/new-vis:v1.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Port:       </span><span class="token number" style="color:#36acaa">5000</span><span class="token plain">/TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Host Port:  </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">/TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Environment:        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Mounts:     </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Volumes:      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="롤백하기">롤백하기<a href="#롤백하기" class="hash-link" aria-label="Direct link to 롤백하기" title="Direct link to 롤백하기">​</a></h3><p>어떤 버전으로 롤백할 지 결정했나요? 롤백은 다음과 같이 합니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl rollout undo deploy/ml-pipeline-newvis -n kubeflow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># --to-revision 플래그로 버전을 지정할 수 있습니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl rollout undo deploy/ml-pipeline-newvis -n kubeflow --to-revision</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>롤백에 성공했는지 확인해 봅시다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get deploy/ml-pipeline-newvis -n kubeflow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                 READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ml-pipeline-newvis   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">            </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">           18h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>1개중 1개의 파드가 준비되어 있고(READY) 최신이며(UP-TO-DATE)
사용가능한 레플리카는 1개(AVAILABLE) 입니다.
완벽합니다! ☺️</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p><a href="/posts/welcome-to-kubernetes">쿠버네티스란?</a></p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://kubernetes.io/ko/docs/concepts/workloads/controllers/deployment/" target="_blank" rel="noopener noreferrer">[공식]디플로이먼트</a></p>]]></content:encoded>
            <category>tech</category>
            <category>kubernetes</category>
            <category>short</category>
        </item>
        <item>
            <title><![CDATA[K8S Tip Expose Service]]></title>
            <link>https://jwher.github.io/posts/k8s-tip-expose-service</link>
            <guid>https://jwher.github.io/posts/k8s-tip-expose-service</guid>
            <pubDate>Fri, 25 Jun 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[K8s tip: Expose Service]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/kubernetes.png" alt="Alt" title="kubernetes" class="img_ev3q"><br>
<em>쿠버네티스 서비스 노출하기</em>  </p><h1>목차</h1><ul><li><a href="#%EC%82%AC%EB%A1%80%EC%99%80-%EC%84%A4%EB%AA%85">사례와 설명</a></li><li><a href="#%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%85%B8%EC%B6%9C%ED%95%98%EA%B8%B0">서비스 노출하기</a></li></ul><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="사례와-설명">사례와 설명<a href="#사례와-설명" class="hash-link" aria-label="Direct link to 사례와 설명" title="Direct link to 사례와 설명">​</a></h2><p>쿠버네티스 파드가 교체되어도 일정한 주소를 제공합니다.
여러개의 레플리카의 로드밸런싱, 같은 주소 접근 기능을 제공합니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="서비스-노출하기">서비스 노출하기<a href="#서비스-노출하기" class="hash-link" aria-label="Direct link to 서비스 노출하기" title="Direct link to 서비스 노출하기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="yaml-파일로-노출하기">yaml 파일로 노출하기<a href="#yaml-파일로-노출하기" class="hash-link" aria-label="Direct link to yaml 파일로 노출하기" title="Direct link to yaml 파일로 노출하기">​</a></h3><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl apply -f </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">service.yaml</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="디플로이먼트-노출하기">디플로이먼트 노출하기<a href="#디플로이먼트-노출하기" class="hash-link" aria-label="Direct link to 디플로이먼트 노출하기" title="Direct link to 디플로이먼트 노출하기">​</a></h3><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl expose deploy/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--type</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-n </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">namespace</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>노출된 서비스는 다음과 같이 확인할 수 있습니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get svc </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-n </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">namespace</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p><a href="https://jwher.github.io/2021-05-28-kubernetes-usage/" target="_blank" rel="noopener noreferrer">Kubernetes Usage</a><br>
<!-- -->죄송합니다... 빠르게 제대로 다시 작성하겠습니다!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://kubernetes.io/ko/docs/tutorials/stateless-application/expose-external-ip-address/" target="_blank" rel="noopener noreferrer">[공식]외부 IP 주소를 노출하여 클러스터의 애플리케이션에 접속하기</a>  </p>]]></content:encoded>
            <category>tech</category>
            <category>kubernetes</category>
            <category>short</category>
        </item>
        <item>
            <title><![CDATA[Uuid]]></title>
            <link>https://jwher.github.io/posts/uuid</link>
            <guid>https://jwher.github.io/posts/uuid</guid>
            <pubDate>Fri, 25 Jun 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[UUID 범용 고유 식별자]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/ticket.png" alt="Alt" title="ticket" class="img_ev3q"><br>
<em>범용 고유 식별자</em>  </p><h1>목차</h1><ul><li><a href="#%EB%B2%94%EC%9A%A9-%EA%B3%A0%EC%9C%A0-%EC%8B%9D%EB%B3%84%EC%9E%90">범용 고유 식별자</a></li><li><a href="#%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%96%B8%EC%96%B4%EC%99%80-%EC%8B%9C%EC%8A%A4%ED%85%9C">사용하는 언어와 시스템</a></li></ul><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="범용-고유-식별자">범용 고유 식별자<a href="#범용-고유-식별자" class="hash-link" aria-label="Direct link to 범용 고유 식별자" title="Direct link to 범용 고유 식별자">​</a></h2><p><em>60D5892F-de60-421a-be12-07da5eafb067 이렇게 생긴 문자열을 본적 있나요?</em></p><p>네트워크, 특히 분산 컴퓨팅에서 서로를 구분하기 위한 <strong>이름</strong>은 매우 중요합니다.
각각의 객체에 고유한 이름을 주려면 어떻게 해야 할까요?</p><blockquote><p>음... 해쉬값을 주면 되나요?</p></blockquote><p>얼핏 생각나는 고유한 이름으로 해쉬가 있습니다.
하지만 인터페이스를 통해 다른 시스템과 통신할 때 어떤 <strong>해쉬</strong>를 계산해 알려줄까요?</p><p>다행히 정의된 표준이 있습니다!</p><p>범용 고유 식별자 UUID: Universally Unique IDentifier는 <a href="https://ko.wikipedia.org/wiki/%EA%B0%9C%EB%B0%A9_%EC%86%8C%ED%94%84%ED%8A%B8%EC%9B%A8%EC%96%B4_%EC%9E%AC%EB%8B%A8" target="_blank" rel="noopener noreferrer">개방 소프트웨어 재단</a>
에서 분산 컴퓨팅 환경의 일부로 만든 식별자 표준입니다.
36개의 16진수 문자를 8-4-4-4-12 로 만들고, 각 그룹이 의미하는 내용은 다음과 같습니다.</p><table><thead><tr><th align="left">이름</th><th align="left">길이 (hex)</th><th align="left">내용</th></tr></thead><tbody><tr><td align="left">time_low</td><td align="left">8</td><td align="left">시간의 low 32비트를 부여하는 정수</td></tr><tr><td align="left">time_mid</td><td align="left">4</td><td align="left">시간의 middle 16비트를 부여하는 정수</td></tr><tr><td align="left">time_hi_and_version</td><td align="left">4</td><td align="left">최상위 비트에서 4비트 "version", 그리고 시간의 high 12비트</td></tr><tr><td align="left">clock_seq_hi_and_res clock_seq_low</td><td align="left">4</td><td align="left">최상위 비트에서 1-3비트, 그리고 13-15비트 클럭 시퀀스</td></tr><tr><td align="left">node</td><td align="left">12</td><td align="left">48비트 노드 id</td></tr></tbody></table><p>하이픈을 제외한 16진수 32개를 조합하므로 2^4*32=2^128<br>
<!-- -->=340,282,366,920,938,463,463,374,607,431,768,211,456개의 UUID를 만들 수 있습니다!</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="사용하는-언어와-시스템">사용하는 언어와 시스템<a href="#사용하는-언어와-시스템" class="hash-link" aria-label="Direct link to 사용하는 언어와 시스템" title="Direct link to 사용하는 언어와 시스템">​</a></h2><p>저는 항상 컴퓨터가 언어와 객체를 어떻게 구분하는가 궁금했는데요,
이렇게 많은 언어와 시스템이 UUID를 사용합니다!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="언어">언어<a href="#언어" class="hash-link" aria-label="Direct link to 언어" title="Direct link to 언어">​</a></h3><ul><li>액션스크립트</li><li>C</li><li>C++</li><li>얼랭(Erlang)</li><li>해스켈(Haskell)</li><li>자바(Java)</li><li>자바스크립트(JavaScript)</li><li>펄(Perl)</li><li>PHP</li><li>파이썬(Python)</li><li>루비(Ruby)</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="os">OS<a href="#os" class="hash-link" aria-label="Direct link to OS" title="Direct link to OS">​</a></h3><ul><li>OS X</li><li>유닉스(Unix)</li><li>유닉스 기반 OS (linux...)</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="데이터베이스">데이터베이스<a href="#데이터베이스" class="hash-link" aria-label="Direct link to 데이터베이스" title="Direct link to 데이터베이스">​</a></h3><ul><li>MySQL</li><li>오라클 데이터베이스(Oracle Database)</li><li>PostgreSQL</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="프레임워크">프레임워크<a href="#프레임워크" class="hash-link" aria-label="Direct link to 프레임워크" title="Direct link to 프레임워크">​</a></h3><ul><li>닷넷 프레임워크(.NET)</li><li>Openstack</li></ul><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>처음보는것들</summary><div><div class="collapsibleContent_i85q"><div markdown="1"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="위키백과에-나오지만">위키백과에 나오지만...<a href="#위키백과에-나오지만" class="hash-link" aria-label="Direct link to 위키백과에 나오지만..." title="Direct link to 위키백과에 나오지만...">​</a></h3><p>아시는 분들은 알려주시면 감사하겠습니다!</p><ul><li>아파치 Solr</li><li>Caché 오브젝트스크립트</li><li>CakePHP</li><li>코코아/카본 (OS X)</li><li>코드기어 라드 스튜디오 (델파이/C++빌더)</li><li>코드퓨전</li><li>커먼 리스프(lisp)</li><li>CouchDB</li><li>D</li><li>에펠</li><li>파이어버드 서버</li><li>프리 파스칼 &amp; 라자루스 IDE</li><li>Haxe</li><li>KohanaPHP</li><li>Lasso</li><li>루아</li><li>OCaml</li><li>프로그레스 오픈에지 ABL</li><li>레볼루션/RunRev</li><li>SAP 비즈니스오브젝트 데이터 서비스</li><li>Tcl</li></ul></div></div></div></details><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p>이 글은 한국어 위키백과를 많이 참고해 작성했습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://ko.wikipedia.org/wiki/%EB%B2%94%EC%9A%A9_%EA%B3%A0%EC%9C%A0_%EC%8B%9D%EB%B3%84%EC%9E%90" target="_blank" rel="noopener noreferrer">[위키]범용 고유 식별자</a></p>]]></content:encoded>
            <category>tech</category>
            <category>linux</category>
            <category>virtualbox</category>
            <category>short</category>
        </item>
        <item>
            <title><![CDATA[Deploying Ml Model On Kubernetes Nuclio]]></title>
            <link>https://jwher.github.io/posts/deploying-ml-model-on-kubernetes-nuclio</link>
            <guid>https://jwher.github.io/posts/deploying-ml-model-on-kubernetes-nuclio</guid>
            <pubDate>Wed, 23 Jun 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[쿠버네티스 누클리오에 ML 모델 배포하기]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/nuclio-superman.png" alt="Alt" title="nuclio superman" class="img_ev3q"><br>
<em>쿠버네티스 누클리오에 ML 모델 배포하기</em>  </p><h1>목차</h1><ul><li><a href="#nuctl">nuctl</a></li><li><a href="#%EB%88%84%ED%81%B4%EB%A6%AC%EC%98%A4-%EC%84%A4%EC%B9%98">누클리오 설치</a></li><li><a href="#%EB%AA%A8%EB%8D%B8-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0">모델 배포하기</a></li></ul><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="nuctl">nuctl<a href="#nuctl" class="hash-link" aria-label="Direct link to nuctl" title="Direct link to nuctl">​</a></h2><p>누클리오를 처음 들어보신다면 <a href="https://jwher.github.io/2021-06-02-nuclio/" target="_blank" rel="noopener noreferrer">이 글</a>
을 먼저 읽는걸 추천드립니다.
본 글은 쿠버네티스 위에서 누클리오를 사용하는 법을 다룹니다.
(도커도 별반 다르지 않습니다)</p><p>nuclio control, nuctl은 누클리오 커맨드 라인 인터페이스로 누클리오 기능에 접근할 수 있게 해줍니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="요구사항">요구사항<a href="#요구사항" class="hash-link" aria-label="Direct link to 요구사항" title="Direct link to 요구사항">​</a></h3><ul><li>kubernetes cluster</li><li>(또는) <a href="https://jwher.github.io/2021-04-13-install-docker/" target="_blank" rel="noopener noreferrer">docker</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="바이너리-설치하기">바이너리 설치하기<a href="#바이너리-설치하기" class="hash-link" aria-label="Direct link to 바이너리 설치하기" title="Direct link to 바이너리 설치하기">​</a></h3><p>누클리오 최신 release 버전은 <a href="https://github.com/nuclio/nuclio/releases" target="_blank" rel="noopener noreferrer">https://github.com/nuclio/nuclio/releases</a>
에서 제공하고 있습니다.</p><p>CLI를 통해 다운받는 법은 다음과 같습니다.  </p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 21.06.25 최신 버전</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://github.com/nuclio/nuclio/releases/download/1.6.11/nuctl-1.6.11-linux-amd64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> +x nuctl-1.6.11-linux-amd64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 또는 다음 명령어로 받을 수 있습니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -s https://api.github.com/repos/nuclio/nuclio/releases/latest </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> -i </span><span class="token string" style="color:#e3116c">"browser_download_url.*nuctl.*</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable function" style="color:#d73a49">uname</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cut</span><span class="token plain"> -d </span><span class="token builtin class-name">:</span><span class="token plain"> -f </span><span class="token number" style="color:#36acaa">2,3</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tr</span><span class="token plain"> -d </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">" </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> -O nuctl -qi - </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> +x nuctl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>어디에서나 사용할 수 있게 환경변수를 등록하거나, /bin 폴더에 링크를 만들어 줍니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token environment constant" style="color:#36acaa">$PATH</span><span class="token operator" style="color:#393A34">=</span><span class="token environment constant" style="color:#36acaa">$PATH</span><span class="token builtin class-name">:</span><span class="token environment constant" style="color:#36acaa">$PWD</span><span class="token plain">/nuctl-1.6.11-linux-amd64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 또는</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ln</span><span class="token plain"> -s </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">full/path/to/origin</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> /bin/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">origin</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>확인해 봅시다</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./nuctl-1.6.11-linux-amd64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nuclio command-line interface</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Usage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nuctl </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">command</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Available Commands:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  build       Build a </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  create      Create resources</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  delete      Delete resources</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deploy      Build and deploy a function, or deploy from an existing image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin class-name">export</span><span class="token plain">      Export functions or projects</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  get         Display resource information</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin class-name">help</span><span class="token plain">        Help about any </span><span class="token builtin class-name">command</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">import</span><span class="token plain">      Import functions or projects</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  invoke      Invoke a </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  update      Update resources</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  version     Display the version number of the nuctl CLI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Flags:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -h, --help                </span><span class="token builtin class-name">help</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> nuctl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -k, --kubeconfig string   Path to a Kubernetes configuration </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">admin.conf</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -n, --namespace string    Namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --platform string     Platform identifier - </span><span class="token string" style="color:#e3116c">"kube"</span><span class="token plain">, </span><span class="token string" style="color:#e3116c">"local"</span><span class="token plain">, or </span><span class="token string" style="color:#e3116c">"auto"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">default </span><span class="token string" style="color:#e3116c">"auto"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -v, --verbose             Verbose output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Use </span><span class="token string" style="color:#e3116c">"nuctl [command] --help"</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">more</span><span class="token plain"> information about a command.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="누클리오-설치">누클리오 설치<a href="#누클리오-설치" class="hash-link" aria-label="Direct link to 누클리오 설치" title="Direct link to 누클리오 설치">​</a></h2><p>쿠버네티스 위에 누클리오를 설치하는 법을 다룹니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="요구사항-1">요구사항<a href="#요구사항-1" class="hash-link" aria-label="Direct link to 요구사항" title="Direct link to 요구사항">​</a></h3><ul><li>쿠버네티스 v1.7 이상 클러스터</li><li>도커 레지스트리에 대한 자격증명(credentials)</li><li>Nuclio CLI</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="누클리오-설치하기">누클리오 설치하기<a href="#누클리오-설치하기" class="hash-link" aria-label="Direct link to 누클리오 설치하기" title="Direct link to 누클리오 설치하기">​</a></h3><p>쿠버네티스 CLI<a href="https://jwher.github.io/2021-05-28-kubernetes-usage/" target="_blank" rel="noopener noreferrer">(kubectl)</a> 을 사용하여 설치합니다.
쿠버네티스 컨트롤이 없으시거나 사용법이 익숙하지 않으신 분은 <a href="https://jwher.github.io/2021-05-28-kubernetes-usage/" target="_blank" rel="noopener noreferrer">링크</a>를 참고해 주세요.
도커 위에서 누클리오를 사용하실 분은 <a href="https://jwher.github.io/2021-04-13-install-docker/" target="_blank" rel="noopener noreferrer">docker 설치</a>와
<a href="https://nuclio.io/docs/latest/setup/docker/getting-started-docker/" target="_blank" rel="noopener noreferrer">[공식]Getting Started with Nuclio on Docker</a>
를 참고해 주세요.</p><p>1. 누클리오 네임스페이스를 생성해 줍니다.</p><p>모든 리소스는 "nuclio" 네임스페이스에 생성됩니다.
RBAC 또한 네임스페이스에 따라 생성되니 정확한 네임스페이스를 사용하는걸 추천합니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create namespace nuclio</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>2. 레지스트리 시크릿을 만들어 줍니다.</p><p>프라이빗 레지스트리가 없으신 분은 도커 허브 레지스트리를 사용하시면 됩니다.
도커 허브의 레지스트리는 registry.hub.docker.com 또는 docker.io 입니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">read</span><span class="token plain"> -s mypassword</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">enter your password</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create secret docker-registry registry-credentials </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --namespace nuclio </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --docker-username </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">username</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --docker-password </span><span class="token variable" style="color:#36acaa">$mypassword</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --docker-server </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">URL</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --docker-email ignored@nuclio.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">unset</span><span class="token plain"> mypassword</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>3. RBAC 롤을 생성해 줍니다.</p><p>다음 명령어를 수행하기 전에 해당 <a href="https://raw.githubusercontent.com/nuclio/nuclio/master/hack/k8s/resources/nuclio-rbac.yaml" target="_blank" rel="noopener noreferrer">파일 내용</a> 을 꼭 확인합시다.
맹목적으로 명령어를 실행하지 않는 습관(뜨끔😳)을 들이는 것이 좋습니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl apply -f https://raw.githubusercontent.com/nuclio/nuclio/master/hack/k8s/resources/nuclio-rbac.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>4. 누클리오를 쿠버네티스 클러스터에 배포합니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl apply -f https://raw.githubusercontent.com/nuclio/nuclio/master/hack/k8s/resources/nuclio.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 배포 후 확인해 봅시다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get pods --namespace nuclio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                           READY   STATUS             RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nuclio-controller-56b4f69b49-2gbpk             </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running            </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          3d23h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nuclio-dashboard-584689f894-mg8qq              </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running            </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          3d23h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>5. 누클리오 대쉬보드 포트를 포워딩 합니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl port-forward -n nuclio </span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">kubectl get pods -n nuclio -l nuclio.io/app</span><span class="token variable operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">dashboard -o </span><span class="token variable assign-left variable" style="color:#36acaa">jsonpath</span><span class="token variable operator" style="color:#393A34">=</span><span class="token variable string" style="color:#e3116c">'{.items[0].metadata.name}'</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8070</span><span class="token plain">:8070</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 명령어가 길고 복잡합니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 쿠버네티스를 잘 이해하셨거나 kubectl 글을 읽어보셨다면 간단하게 사용할 수 있습니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl port-forward svc/nuclio-dashboard -n nuclio </span><span class="token number" style="color:#36acaa">8070</span><span class="token plain">:8070 --address</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.0.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>이제 브라우저에서 누클리오 대쉬보드를 확인할 수 있습니다!<br>
<img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/nuclio-dashboard.png" alt="Alt" title="nuclio dashboard" class="img_ev3q"></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="모델-배포하기">모델 배포하기<a href="#모델-배포하기" class="hash-link" aria-label="Direct link to 모델 배포하기" title="Direct link to 모델 배포하기">​</a></h2><p>자! 드디어 ML 모델 배포입니다.
<a href="https://jwher.github.io/2021-06-02-nuclio/" target="_blank" rel="noopener noreferrer">누클리오 구조</a>를 이해하고 배포해야 각종 오류 원인을 이해할 수 있습니다.
꼭 먼저 읽어보시는걸 권장합니다.</p><p>저는 function 작성과 도커파일을 사용하는 방법을 혼합해 배포하였습니다.
사용한 모델은 <a href="https://jwher.github.io/2021-05-24-alphapose/" target="_blank" rel="noopener noreferrer">Alphapose</a> 로 keypoint detection 모델입니다.</p><p>누클리오를 성공적으로 설치하셨다면 function을 작성해 클러스터에 배포할 수 있습니다.
지원되는 런타임(Go, Python, NodeJS)은 두 인자를 받는 엔트리 포인트를 가집니다.</p><ul><li>Context: 함수 호출시 상태를 관리하는 객체입니다. 로거, 데이터 바인딩, 유저 정의 데이터가 포함됩니다.</li><li>Event: 함수를 트리거한 이벤트 정보를 포함한 객체입니다. body, headers, trigger information을 포함합니다.</li></ul><blockquote><p><img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/nervous.png" alt="Alt" title="nervous" class="img_ev3q"><br>
<!-- -->긴장하고 출발합시다!</p></blockquote><p>1. 파이썬 코드 작성</p><p>ML 모델이 파이썬으로 작성되었고 능숙한 언어이기에 파이썬을 사용하겠습니다.
ModelHandler 클래스와 handle 함수가 정의되어야 합니다 (이름은 달라도 됩니다)  </p><p><em>당연히 모델마다 구현이 다릅니다 Alphapose 코드가 필요하시면 github에 공개하겠습니다</em></p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>model_handler.py</summary><div><div class="collapsibleContent_i85q"><div markdown="1"><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ModelHandler</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        args </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> argparse</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Namespace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cfg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> update_config</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">args</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cfg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Load pose model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> 중략 </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">handle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> im_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> image</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        runtime_profile </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">'dt'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">'pt'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">'pn'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pose </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            start_time </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> getTime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">no_grad</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">inps</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> orig_img</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> im_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> boxes</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scores</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ids</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cropped_boxes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">det_loader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">process</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">im_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> image</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> 중략 </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">args</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">profile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token string" style="color:#e3116c">'det time: {dt:.4f} | pose time: {pt:.4f} | post processing: {pn:.4f}'</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        dt</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mean</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">runtime_profile</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'dt'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pt</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mean</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">runtime_profile</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'pt'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pn</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mean</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">runtime_profile</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'pn'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'===========================&gt; Finish Model Running.'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> Exception </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            exc_type</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> exc_obj</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> exc_tb </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">exc_info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">repr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:#e3116c">f'line: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">exc_tb</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">tb_lineno</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'An error as above occurs when processing the images, please check it'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">pass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> KeyboardInterrupt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'===========================&gt; Finish Model Running.'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> pose </span><span class="token keyword" style="color:#00009f">is</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'error'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> write_json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">pose</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div></details><p>init_context() 함수에는 상태를 유지할(비용이 비싼) 객체를 생성해 줍니다.
저는 ML 모델 객체를 생성해 주었습니다.<br>
<!-- -->엔트리 포인트로 사용할 handler()함수를 정의해 줍니다. (이름은 달라도 됩니다)
앞서 언급한 것처럼 context와 event를 인자로 받습니다.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>main.py</summary><div><div class="collapsibleContent_i85q"><div markdown="1"><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> base64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> numpy </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> np</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> PIL </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> model_handler </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> ModelHandler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">init_context</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Init context...  0%"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Read the DL model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    model </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ModelHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">setattr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">user_data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'model'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> model</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Init context...100%"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">handler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> event</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Run alphapose model"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> event</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">body</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    imagename </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'name'</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># data["imagename"]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    buf </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> io</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">BytesIO</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">base64</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">b64decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"image"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">encode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'utf-8'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># threshold = float(data.get("threshold", 0.5))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Image</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">buf</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># PIL to CV2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cvimg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cvimg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cvimg</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">copy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    results </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">user_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">handle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">imagename</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cvimg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Response</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">body</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">results</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> headers</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        content_type</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'application/json'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> status_code</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div></details><br><p>2. function.yml 작성</p><p>누클리오 배포 설정을 담은 yaml 파일을 작성해 줍니다.
저는 Alphapose가 동작할 수 있는 환경을 docker image로 미리 구성해 사용했습니다.</p><p><em>yaml 파일도 당연히 내용이 다릅니다 문법만 참고해 주세요</em></p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>function.yaml</summary><div><div class="collapsibleContent_i85q"><div markdown="1"><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> alphapose</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cvat       </span><span class="token comment" style="color:#999988;font-style:italic"># 누클리오 대쉬보드의 프로젝트 이름입니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ALPHAPOSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> detector</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">framework</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> custom</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      [</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        {"id": 1, "name": "nose"},</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        {"id": 2, "name": "left_eye"},</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        {"id": 3, "name": "right_eye"},</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        {"id": 4, "name": "left_ear"},</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        {"id": 5, "name": "right_ear"},</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        {"id": 6, "name": "left_shoulder"},</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        {"id": 7, "name": "right_shoulder"},</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        {"id": 8, "name": "left_elbow"},</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        {"id": 9, "name": "right_elbow"},</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        {"id": 10, "name": "left_wrist"},</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        {"id": 11, "name": "right_wrist"},</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        {"id": 12, "name": "left_hip"},</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        {"id": 13, "name": "right_hip"},</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        {"id": 14, "name": "left_knee"},</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        {"id": 15, "name": "right_knee"},</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        {"id": 16, "name": "left_ankle"},</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token key atrule" style="color:#00a4db">"id"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">17</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">"name"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"right_ankle"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">description</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Keypoint detection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">runtime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'python:3.6'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">handler</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> main</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">handler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">eventTimeout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 30s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NUCLIO_PYTHON_EXE_PATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /root/miniconda3/envs/alphapose/bin/python</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jwher/alphapose</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">nuclio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">baseImage</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jwher/alphapose</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">directives</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">preCopy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> USER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> WORKDIR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /Alphapose</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">postCopy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> RUN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> echo "works well"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">nodeSelector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">gpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"true"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">triggers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">myHttpTrigger</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">maxWorkers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'http'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">workerAvailabilityTimeoutMilliseconds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">attributes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">maxRequestBodySize</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">33554432</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 32MB</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">platform</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">attributes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">restartPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">maximumRetryCount</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">mountMode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> volume</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div></details><br><p>3. 배포하기</p><p>앞서 작성한 main.py, model_handler.py, function.yml을 같은 디렉토리에 위치시킵니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ nuctl deploy --project-name cvat -n nuclio --path </span><span class="token builtin class-name">.</span><span class="token plain"> --platform kube -r docker.io --http-trigger-service-type NodePort</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>nuctl -h</code>를 통해 플래그 정보를 확인할 수 있습니다.<br>
<!-- -->사용한 플래그의 의미는 다음과 같습니다.</p><ul><li><code>--project-name</code> : 프로젝트 이름, 누클리오 대쉬보드에서 확인 가능한 이름입니다</li><li><code>-n</code>, <code>--namespace</code> : 쿠버네티스 네임스페이스, nuclio 고정입니다</li><li><code>-p</code>, <code>--path</code> : function.yml 파일이 위치한 디렉토리</li><li><code>--platform</code> : 사용하는 플랫폼입니다. local: 도커 kube: 쿠버네티스</li><li><code>-r</code> <code>--registry</code> : 도커 이미지 레포지토리입니다.</li><li><code>--http-trigger-service-type</code> : 쿠버네티스에서 serviceType을 정해줍니다.
NodePort를 사용해 클러스터 외부에서도 접속 가능하게 설정했습니다.</li></ul><p>배포가 잘 되었는지 확인해 봅니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get pods --namespace nuclio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                           READY   STATUS             RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nuclio-alphapose-78d76bd9b7-px7f4              </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running            </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          3d23h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nuclio-controller-56b4f69b49-2gbpk             </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running            </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          3d23h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nuclio-dashboard-584689f894-mg8qq              </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running            </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          3d23h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>대쉬보드 UI에서도 확인할 수 있습니다!<br>
<img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/nuclio-alphapose.png" alt="Alt" title="nuclio alphapose" class="img_ev3q"></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p>오늘은 맥주한잔 해야겠네요 😊</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://nuclio.io/docs/latest/setup/k8s/getting-started-k8s/" target="_blank" rel="noopener noreferrer">[공식]Getting Started with Nuclio on Kubernetes</a><br>
<a href="https://nuclio.io/docs/latest/reference/nuctl/nuctl/" target="_blank" rel="noopener noreferrer">[공식]The Nuclio CLI</a><br>
<a href="https://nuclio.io/docs/latest/tasks/deploying-functions/" target="_blank" rel="noopener noreferrer">[공식]Deploying Functions</a><br>
<a href="https://nuclio.io/docs/latest/tasks/deploy-functions-from-dockerfile/" target="_blank" rel="noopener noreferrer">[공식]Deploying Functions from a Dockerfile</a></p>]]></content:encoded>
            <category>tech</category>
            <category>kubernetes</category>
            <category>docker</category>
            <category>nuclio</category>
        </item>
        <item>
            <title><![CDATA[Kubeflow Visualization 2]]></title>
            <link>https://jwher.github.io/posts/kubeflow-visualization-2</link>
            <guid>https://jwher.github.io/posts/kubeflow-visualization-2</guid>
            <pubDate>Mon, 21 Jun 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Kubeflow 시각화 개발 2편]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/engineering.jpg" alt="Alt" title="engineering" class="img_ev3q"><br>
<em>Event Driven Architecture 구현</em>  </p><h1>목차</h1><ul><li><a href="#%EC%9D%B4%EC%A0%84-%EC%9D%B4%EC%95%BC%EA%B8%B0">이전 이야기</a></li><li><a href="#%EC%8B%9C%EA%B0%81%ED%99%94-%EB%8C%80%EC%83%81-%EC%84%A0%EC%A0%95">시각화 대상 선정</a></li><li><a href="#%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80-%EC%84%A0%EC%A0%95">스토리지 선정</a></li><li><a href="#Message-Queue-%EC%84%A0%EC%A0%95">Message Queue 선정</a></li></ul><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="이전-이야기">이전 이야기<a href="#이전-이야기" class="hash-link" aria-label="Direct link to 이전 이야기" title="Direct link to 이전 이야기">​</a></h2><p><a href="https://jwher.github.io/2021-06-08-kubeflow-visualization-1/" target="_blank" rel="noopener noreferrer">이전글</a><br>
<!-- -->저는 MLOps를 위해 kubeflow를 도입해 사용하고 있습니다.
운영자가 필요 없도록 CI/CD의 버튼 수준의 자동화를 구현하려고 하는데요,
중간 파이프라인의 진행 상황을 명확하게 관찰할 수 있도록
진행 상황 <strong>실시간 시각화</strong>를 개발하려고 합니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="시각화-대상-선정">시각화 대상 선정<a href="#시각화-대상-선정" class="hash-link" aria-label="Direct link to 시각화 대상 선정" title="Direct link to 시각화 대상 선정">​</a></h2><p>어떤 내용을 실시간으로 보여줄 지 정해야겠죠? <del>사실 설계단계에서 해야합니다</del>  </p><p>기존 visualization artifact는
confusion matrix(csv),
Markdown(inline, file, url),
ROC(csv),
Table(csv),
Tensorboard(file?),
Web app(static html)을 지원했습니다.<br>
<a href="https://v1-2-branch.kubeflow.org/docs/components/pipelines/sdk/output-viewer/" target="_blank" rel="noopener noreferrer">[공식]Visualize Results in the Pipelines UI</a></p><p>저는 기존 기능과 호환을 위해 csv, html 형식을 지원하고
추가적으로 텍스트, 이미지, 진행상황(텍스트), 사용자 코드 실행을 지원하려고 합니다. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="스토리지-선정">스토리지 선정<a href="#스토리지-선정" class="hash-link" aria-label="Direct link to 스토리지 선정" title="Direct link to 스토리지 선정">​</a></h2><p>파이프라인 단계에서 생성되는 파일을 저장할 공간이 필요합니다.
기존 visualization artifact는 <a href="https://jwher.github.io/2021-06-16-minio/" target="_blank" rel="noopener noreferrer">minIO</a> 의 mlpipeline 버킷에 저장됬는데요,
마찬가지로 같은 스토리지를 사용해 호환성을 높이려고 합니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="message-queue-선정">Message Queue 선정<a href="#message-queue-선정" class="hash-link" aria-label="Direct link to Message Queue 선정" title="Direct link to Message Queue 선정">​</a></h2><p>Message Queue는 EDA의 필수 구성요소라 할 수 있죠.
minIO는 S3 호환 표준으로 객체(object)가 버킷에서 발생시키는 알람을 통해 모니터링 할 수 있습니다.
메시지 큐로는 Kafka를 선택했는데요,
사내에서(<del>도움을 받진 못했지만</del>) Hadoop을 많이 사용하고 있기 때문에
하둡 에코시스템의 kafka가 장점을 지닌다 생각했습니다.
또한, 전체 시스템 로그수집/분석으로 사용하는 ELK스택과 연동도 고려하면 더더욱 kafka였습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-배포">kafka 배포<a href="#kafka-배포" class="hash-link" aria-label="Direct link to kafka 배포" title="Direct link to kafka 배포">​</a></h3><p>kafka를 모르신다면 앞으로 작성할 <a href="/404">이글</a> 을 참고하시면 좋을 것 같습니다. <del>없는데 어떻게</del>  </p><p>쿠버네티스에 카프카를 배포해야 사용할 수 있겠죠?
카프카를 사용하기 위해 zookeeper, 편하게 사용하기 위해 kafka manager가 필요합니다.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>kafka.yaml</summary><div><div class="collapsibleContent_i85q"><div markdown="1"><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubeflow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kafka</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kafka</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kafka</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kafka</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> zookeeper</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> zookeeper</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">imagePullPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> IfNotPresent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2181</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ZOO_MY_ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kafka</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> wurstmeister/kafka</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">imagePullPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> IfNotPresent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9092</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> KAFKA_ADVERTISED_HOST_NAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"localhost"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> KAFKA_ZOOKEEPER_CONNECT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"localhost:2181"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kafka</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">manager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kafkamanager/kafka</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">manager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">imagePullPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> IfNotPresent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ZK_HOSTS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"localhost:2181"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> APPLICATION_SECRET</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"random-secret"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubeflow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kafka</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kafka</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterIP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kafka</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># 기본적으로 그리고 편의상 `targetPort` 는 `port` 필드와 동일한 값으로 설정합니다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9092</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">targetPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9092</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">#nodePort: 30007</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubeflow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kafka</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">manager</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kafka</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterIP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kafka</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">targetPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div></details><p>배포를 했다면 카프카 클러스터를 추가해 줘야겠죠!
커맨드라인을 사용해도 되나 시간상 빠르게 사용할 수 있는 CMAK kafka manager를 사용합시다. (야후? 추후 상세히 작성하겠습니다)</p><p>Add Cluster를 눌러줍니다  </p><img src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/kafka-cluster.png"><br><p>minio 문서에 따르면 0.9버전이 호환된다고 합니다.<br>
<!-- -->(MinIO requires Kafka version 0.10 or 0.9. Internally MinIO uses the Shopify/sarama library and so has the same version compatibility as provided by this library.)  </p><img src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/kafka-cluster-add.png"><br><p>클러스터를 생성했으면 Topic을 만들어줍시다.  </p><img src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/kafka-topic.png"><br><p>이름은 mlpipeline으로 하겠습니다.  </p><img src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/kafka-topic-add.png"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="notification-config">notification config<a href="#notification-config" class="hash-link" aria-label="Direct link to notification config" title="Direct link to notification config">​</a></h3><p>이젠 kafka와 minio를 연결시켜야 합니다.</p><p>커맨드라인으로 설정할 수도 있고 <code>~/.minio/config.json</code>을 추가해
kafka에 minIO 이벤트를 publish 할 수 있습니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">vi</span><span class="token plain"> config.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>생성해준 카프카의 주소와 토픽을 설정해 줍시다.</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token property" style="color:#36acaa">"kafka"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"1"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"enable"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"brokers"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"10.111.188.42:9092"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"topic"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"mlpipeline"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>설정을 저장한 후 컨테이너를 재시작 시켜주세요  </p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="minio-python-라이브러리">minio python 라이브러리<a href="#minio-python-라이브러리" class="hash-link" aria-label="Direct link to minio python 라이브러리" title="Direct link to minio python 라이브러리">​</a></h3><p>minIO python API를 제공합니다.
flask를 사용해 개발하기 편하겠군요!</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> minio </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Minio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Minio</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">'ip:port'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        access_key</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'access'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        secret_key</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'secret'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        secure</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 연결 테스트</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">list_buckets</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>notification config를 설정해 주어야 합니다</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> minio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">notificationconfig </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> NotificationConfig</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> QueueConfig</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PrefixFilterRule</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">noti_config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> NotificationConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            queue_config_list</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                QueueConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token string" style="color:#e3116c">"arn:minio:sqs::1:kafka"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'s3:ObjectCreated:*'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'s3:ObjectRemoved:*'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'s3:ObjectAccessed:*'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    config_id</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"whatever not conflict"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic"># prefix_filter_rule=PrefixFilterRule("1"),</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">set_bucket_notification</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'bucket name'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> noti_config</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>QueueConfig 의미는 다음과 같습니다.</p><ul><li>arn:minio:sqs::1:amqp<br>arn:{type}:{protocol}:{region}:{account-id}:{function}:{function-name}<br>ARN: Amazon Resource Number<br>SQS: Simple Queue Service<br>amqp: Advanced Message Queuing Protocol  </li><li>events<br>수신할 이벤트 목록입니다</li><li>config_id<br>설정 아이디입니다</li><li>prefix_filter_rule<br>파일 앞의 이름을 필터링합니다</li><li>suffix_filter_rule<br>파일 뒤의 이름을 필터링합니다.</li></ul><br><p>이벤트 리슨은 다음과 같이 합니다.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">events </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">listen_bucket_notification</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">'bucket name'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> prefix</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">''</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> suffix</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">''</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> events</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'s3:ObjectCreated:*'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'s3:ObjectRemoved:*'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'s3:ObjectAccessed:*'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이때 <code>events</code>는 제너레이터 타입입니다.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> event </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> events</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">type</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">event</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">event</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'dict'</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">'Records'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">'eventVersion'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2.0'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'eventSource'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'minio:s3'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'awsRegion'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">''</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'eventTime'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2021-06-23T09:23:29Z'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'eventName'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'s3:ObjectCreated:Put'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'userIdentity'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">'principalId'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'minio'</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'requestParameters'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">'accessKey'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'minio'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'region'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">''</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'sourceIPAddress'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'127.0.0.1'</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'responseElements'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">'x-amz-request-id'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'168B2BC399599AFD'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'x-minio-deployment-id'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'abf9f200-cda5-4c7a-b16a-ce6baa64123e'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'x-minio-origin-endpoint'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'http://ip:9000'</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'s3'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">'s3SchemaVersion'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'1.0'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'configurationId'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Config'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'bucket'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">'name'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'test'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'ownerIdentity'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">'principalId'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'minio'</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'arn'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'arn:aws:s3:::test'</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'object'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">'key'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'input.jpg'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'size'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">209222</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'eTag'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'64575f26c680e43a076cb4907080a091-1'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'contentType'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'image/jpeg'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'userMetadata'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">'content-type'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'image/jpeg'</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'versionId'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'1'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'sequencer'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'168B2BC399BBFFC8'</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'source'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">'host'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'127.0.0.1'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'port'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">''</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'userAgent'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.106 Safari/537.36'</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">'key'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'input.jpg'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'size'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">209222</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'eTag'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'64575f26c680e43a076cb4907080a091-1'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'contentType'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'image/jpeg'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'userMetadata'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">'content-type'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'image/jpeg'</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'versionId'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'1'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'sequencer'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'168B2BC399BBFFC8'</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>설정에 따라 객체가 생성, 삭제, 접근 이벤트마다 dict 타입의 <code>event</code>를 수신할 수 있습니다!</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p>시간이 부족해서 다음에 더 잘 작성하겠습니다...</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://v1-2-branch.kubeflow.org/docs/components/pipelines/sdk/output-viewer/#web-app" target="_blank" rel="noopener noreferrer">[공식]kubeflow output viewer</a><br>
<a href="https://docs.min.io/docs/python-client-api-reference.html" target="_blank" rel="noopener noreferrer">[공식]python client api reference</a>
<a href="https://programmersought.com/article/56446127239/" target="_blank" rel="noopener noreferrer">Minio bucket notification guide</a><br>
<a href="https://docs.min.io/docs/minio-bucket-notification-guide.html#apache-kafka" target="_blank" rel="noopener noreferrer">[공식]Publish MinIO events via Kafka</a><br>
<a href="https://medium.com/harrythegreat/aws%EC%9D%98-arn-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0-8c20d0ccbbfd" target="_blank" rel="noopener noreferrer">AWS의 ARN 이해하기</a></p>]]></content:encoded>
            <category>dev</category>
            <category>kubeflow</category>
            <category>kubernetes</category>
        </item>
        <item>
            <title><![CDATA[Linux Disk Free]]></title>
            <link>https://jwher.github.io/posts/linux-disk-free</link>
            <guid>https://jwher.github.io/posts/linux-disk-free</guid>
            <pubDate>Mon, 21 Jun 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[리눅스 디스크 정리하기]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/hard-drive-internal.jpg" alt="Alt" title="hard-drive-internal" class="img_ev3q"><br>
<em>디스크 정리하기</em>  </p><h1>목차</h1><ul><li><a href="#%EB%94%94%EC%8A%A4%ED%81%AC-%EC%A0%95%EB%A6%AC%ED%95%98%EA%B8%B0">디스크 정리하기</a></li></ul><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="디스크-정리하기">디스크 정리하기<a href="#디스크-정리하기" class="hash-link" aria-label="Direct link to 디스크 정리하기" title="Direct link to 디스크 정리하기">​</a></h2><p>업무중인데 서버가 갑자기 작동을 안해 당황해본적 있으신가요? 😓  </p><blockquote><p>공포의 메시지 😨  </p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">No space left on device</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></blockquote><p><img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/%EB%B6%88%ED%8E%B8.jpg" alt="Alt" title="불편" class="img_ev3q"></p><p>저도 오늘 겪어서 짧게 문서 남깁니다!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="뭐부터-해야돼">뭐부터 해야돼?<a href="#뭐부터-해야돼" class="hash-link" aria-label="Direct link to 뭐부터 해야돼?" title="Direct link to 뭐부터 해야돼?">​</a></h3><p>사실 디스크 용량부족 원인은 case-by-case 일 겁니다. 😄<br>
<!-- -->한번 확인해봅시다  </p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">df</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem      1K-blocks      Used  Available Use% Mounted on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">udev            </span><span class="token number" style="color:#36acaa">131824004</span><span class="token plain">         </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">131824004</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs            </span><span class="token number" style="color:#36acaa">26373680</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">2734536</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">23639144</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">% /run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sda1          </span><span class="token number" style="color:#36acaa">523248</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">8036</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">515212</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">% /boot/efi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sda2       </span><span class="token number" style="color:#36acaa">102687672</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">80998168</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">16430240</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">84</span><span class="token plain">% /var</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sda3       </span><span class="token number" style="color:#36acaa">681956080</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">221976732</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">425268208</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">35</span><span class="token plain">% /home</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs           </span><span class="token number" style="color:#36acaa">131868400</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">988</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">131867412</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">% /dev/shm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs                </span><span class="token number" style="color:#36acaa">5120</span><span class="token plain">         </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">5120</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /run/lock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs           </span><span class="token number" style="color:#36acaa">131868400</span><span class="token plain">         </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">131868400</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /sys/fs/cgroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/loop3          </span><span class="token number" style="color:#36acaa">56832</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">56832</span><span class="token plain">          </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain">% /snap/core18/1997</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/loop5          </span><span class="token number" style="color:#36acaa">72192</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">72192</span><span class="token plain">          </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain">% /snap/lxd/19647</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/loop6          </span><span class="token number" style="color:#36acaa">69248</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">69248</span><span class="token plain">          </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain">% /snap/lxd/20326</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>삭제 전 상황을 캡쳐 못했습니다😢 완전히 똑같진 않지만 이런 상황이었습니다</em></p><p>얼핏 보니 snap이라는 것이 할당된 디스크의 100%를 사용하고 있군요!  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="snapd">snapd<a href="#snapd" class="hash-link" aria-label="Direct link to snapd" title="Direct link to snapd">​</a></h3><p>snap이라, 솔직히 처음 들어봤습니다.
그래도 가만히 있을 순 없죠! 문제를 빨리 해결하기 위해 googling을 해봅시다.</p><p><a href="https://snowdeer.github.io/linux/2018/01/22/ubuntu-16p04-using-snap-package/" target="_blank" rel="noopener noreferrer">snap 패키지 사용하기</a><br>
<!-- -->역시 Google입니다. 빠르게 정보를 찾아보니 "다양한 리눅스 배포판에서 Universal Package를 사용하기 위한 툴"
이라고 하네요. 좀더 명확이 알면 좋겠으나 현재로써는 필요 없다고 판단됩니다. 작업이 급하니 지워볼까요?</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> autoremove --purge snapd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="apt">apt<a href="#apt" class="hash-link" aria-label="Direct link to apt" title="Direct link to apt">​</a></h3><p>앞서 snap을 보니 우분투 패키지 매니저인 apt(advanced packaging tool)의 캐시도 많을 것이란 생각이 드네요!  </p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> autoclean</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker">docker<a href="#docker" class="hash-link" aria-label="Direct link to docker" title="Direct link to docker">​</a></h3><p>저의 경우에는 <code>/var</code>밑의 docker layer도 많은 용량을 차지했습니다.  </p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> system prune -a --volumes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WARNING</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"> This will remove:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - all stopped containers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - all networks not used by at least one container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - all volumes not used by at least one container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - all images without at least one container associated to them</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - all build cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Are you sure you want to continue? </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">y/N</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>위의 메시지처럼 멈춘 컨테이너, 사용하지 않는 네트워크 인터페이스, 사용하지 않는 볼륨, 사용하지 않는 image,
<strong>build cache</strong>를 전부 삭제합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="결과는">결과는?<a href="#결과는" class="hash-link" aria-label="Direct link to 결과는?" title="Direct link to 결과는?">​</a></h3><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">df</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem     1K-blocks     Used Available Use% Mounted on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">udev            </span><span class="token number" style="color:#36acaa">10103724</span><span class="token plain">        </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">10103724</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs            </span><span class="token number" style="color:#36acaa">2025764</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">3732</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">2022032</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">% /run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sda1      </span><span class="token number" style="color:#36acaa">102685624</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">21775456</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">75651008</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">23</span><span class="token plain">% /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs           </span><span class="token number" style="color:#36acaa">10128800</span><span class="token plain">        </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">10128800</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /dev/shm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs               </span><span class="token number" style="color:#36acaa">5120</span><span class="token plain">        </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">5116</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">% /run/lock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs           </span><span class="token number" style="color:#36acaa">10128800</span><span class="token plain">        </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">10128800</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /sys/fs/cgroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs            </span><span class="token number" style="color:#36acaa">2025760</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">20</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">2025740</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">% /run/user/1000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>디스크가 넉넉해졌군요!  </p><p><img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/%ED%8E%B8%EC%95%88.jpg" alt="Alt" title="편안" class="img_ev3q"></p><p>이 방법이 모두에게 통하진 않겠지만, 해결의 실마리가 되었으면 좋겠습니다.</p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="http://www.google.com" target="_blank" rel="noopener noreferrer">www.google.com</a></p>]]></content:encoded>
            <category>tech</category>
            <category>linux</category>
            <category>short</category>
        </item>
        <item>
            <title><![CDATA[Welcome To Docker]]></title>
            <link>https://jwher.github.io/posts/welcome-to-docker</link>
            <guid>https://jwher.github.io/posts/welcome-to-docker</guid>
            <pubDate>Sat, 19 Jun 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[도커의 세계에 오신 걸 환영합니다!]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="docker" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUwMCIgaGVpZ2h0PSIyMTAwIiB2aWV3Qm94PSIwIDAgMjU2IDIxNSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0zOC42MTcgMTczLjk4NHYtMTYuMzYyYzAtMi4xNSAxLjM0NC0zLjg3NyAzLjU3LTMuODc3aC42MTZjMi4yMjUgMCAzLjU2MyAxLjcyOSAzLjU2MyAzLjg3N3YzNC40NDdjMCA4LjQtNC4xNSAxNS4wODQtMTEuMzgyIDE5LjM0MmEyMS4zNzQgMjEuMzc0IDAgMCAxLTEwLjk0NSAyLjk4NWgtMS41MzdjLTguNDAyIDAtMTUuMDc3LTQuMTUzLTE5LjM0Mi0xMS4zOGEyMS4zMTQgMjEuMzE0IDAgMCAxLTIuOTg0LTEwLjk0N3YtMS41MzVjMC04LjQwMyA0LjE1Mi0xNS4wODMgMTEuMzc4LTE5LjM0OWEyMS4yOTggMjEuMjk4IDAgMCAxIDEwLjk0OC0yLjk4NWgxLjUzN2M1LjY4NiAwIDEwLjUxIDIuMjA0IDE0LjU3OCA1Ljc4NHpNNy45MjQgMTkxLjNjMCA2LjA2OCAyLjk0MSAxMC42MyA4LjI1OCAxMy41NCAyLjE1IDEuMTc2IDQuNDg0IDEuODA4IDYuOTM3IDEuODA4IDUuOTU2IDAgMTAuMzc0LTIuODEgMTMuNDIxLTcuODU3IDEuNDE3LTIuMzQ4IDIuMDc3LTQuOTE3IDIuMDc3LTcuNjQ4IDAtNS4yNi0yLjQ5LTkuMzY1LTYuNzI5LTEyLjQxNC0yLjU3LTEuODQ4LTUuNDYzLTIuNzc1LTguNjE4LTIuNzc1LTYuNDkyIDAtMTEuMTY0IDMuMjgtMTMuOTY4IDkuMTA2LS45NDYgMS45Ny0xLjM3OCA0LjA2MS0xLjM3OCA2LjI0em02NS4zMjQtMjMuMWgxLjA3NGM4Ljk3OCAwIDE1LjgwNiA0LjM1NSAyMC4xMzMgMTIuMTkyIDEuNzMgMy4xMzUgMi42NTYgNi41NTcgMi42NTYgMTAuMTQydjEuNTM1YzAgOC40LTQuMTQyIDE1LjA5My0xMS4zODUgMTkuMzQzLTMuMzUzIDEuOTY3LTcuMDU3IDIuOTg0LTEwLjk0MyAyLjk4NGgtMS41MzVjLTguNDAyIDAtMTUuMDc5LTQuMTUzLTE5LjM0Mi0xMS4zOGEyMS4zMTYgMjEuMzE2IDAgMCAxLTIuOTg3LTEwLjk0N3YtMS41MzVjMC04LjQwNCA0LjE2OS0xNS4wNjIgMTEuMzc3LTE5LjM0NyAzLjM1MS0xLjk5MSA3LjA1OC0yLjk4NyAxMC45NTItMi45ODd6bS0xNC41OCAyMy4xYzAgNS44OSAyLjg5IDEwLjIyMyA3Ljg2NSAxMy4yNyAyLjMzNiAxLjQzIDQuOTA5IDIuMDc4IDcuNjM4IDIuMDc4IDUuODIgMCAxMC4xMjItMi45NTEgMTMuMTE2LTcuODYzIDEuNDI4LTIuMzQyIDIuMDc0LTQuOTE1IDIuMDc0LTcuNjQyIDAtNS40NzctMi42MzgtOS42NjEtNy4xNDgtMTIuNjkzLTIuNDcxLTEuNjYzLTUuMjIyLTIuNDk2LTguMTk4LTIuNDk2LTYuNDkyIDAtMTEuMTY0IDMuMjgtMTMuOTY3IDkuMTA2LS45NDggMS45Ny0xLjM4IDQuMDYxLTEuMzggNi4yNHptNzAuNjU2LTE0LjcyN2MtMS4xNy0uNTQ4LTMuMzYtLjczLTQuNjI0LS43NzgtNi40NzQtLjI0NC0xMS4xNTggMy40MDItMTMuOTA2IDkuMTEzLS45NDkgMS45Ny0xLjM4MiA0LjA1NS0xLjM4MiA2LjIzNSAwIDYuNjM3IDMuNDg1IDExLjI4NCA5LjQwOSAxNC4xMTcgMi4xNjQgMS4wMzQgNC45NTggMS4yMyA3LjMyMyAxLjIzIDIuMDggMCA1LjAyLTEuMjc0IDYuODY2LTIuMTUxbC4zMi0uMTUyaDEuNDMzbC4xNTguMDMyYzEuNzYyLjM2NyAzLjA5MiAxLjQ4NCAzLjA5MiAzLjM4di43NjdjMCA0LjcxOC04LjYyMiA1Ljc5OC0xMS45MTIgNi4wMjgtMTEuNjEuODAzLTIwLjI5My01LjU3My0yMy42MDMtMTYuNjQ3LS41NzUtMS45MjMtLjgzNC0zLjgzMy0uODM0LTUuODM3di0xLjUzM2MwLTguNDAzIDQuMTctMTUuMDU5IDExLjM3Ny0xOS4zNCAzLjM1MS0xLjk5IDcuMDU3LTIuOTkgMTAuOTUtMi45OWgxLjUzNmM0LjEzIDAgNy45MzQgMS4xNzMgMTEuMzQ0IDMuNTAybC4yOC4xOTQuMTc3LjI5MmMuMzY4LjYxLjY4NSAxLjMxNi42ODUgMi4wNDJ2Ljc2N2MwIDEuOTc4LTEuNDggMy4wNDItMy4yNjYgMy4zODZsLS4xNDguMDI2aC0uNDU4Yy0xLjE1NiAwLTMuNzg1LTEuMTk3LTQuODE3LTEuNjgzem0yNS4xMzQgNS4yNDdjMy4wMS0zLjAxNCA2LjAzLTYuMDIyIDkuMDg1LTguOTg2Ljg1MS0uODI3IDQuMDc0LTQuMzI3IDUuMzQzLTQuMzI3aDEuMzg4bC4xNTguMDMzYzEuNzY4LjM2NyAzLjA5MiAxLjQ4NiAzLjA5MiAzLjM4NnYuNzY2YzAgMS4yOTYtMS41MTggMi44MDItMi4zNTUgMy42ODktMS43OCAxLjg4Ny0zLjY1NCAzLjcxMi01LjQ3NiA1LjU2bC05LjM2MiA5LjUwNGM0LjAzMSA0LjA0IDguMDU4IDguMDgzIDEyLjA1NiAxMi4xNTRhMzEzLjMwNCAzMTMuMzA0IDAgMCAxIDMuMzAxIDMuMzk2Yy4zODUuNDA1Ljk1My45MDkgMS4yNzYgMS40Ny4zNDcuNTI2LjU2IDEuMTE5LjU2IDEuNzUydi44bC0uMDQ1LjE4NWMtLjQzNSAxLjc2OC0xLjU1NyAzLjE5NC0zLjUxNiAzLjE5NGgtLjYxN2MtMS4yODIgMC0yLjczLTEuNDUtMy42MDgtMi4yNzktMS44MS0xLjcwNi0zLjU1Ny0zLjUtNS4zMzEtNS4yNDNsLTUuOTQ5LTUuODR2OS4zMzRjMCAyLjE1LTEuMzQ2IDMuODc4LTMuNTY5IDMuODc4aC0uNjFjLTIuMjI2IDAtMy41Ny0xLjcyOC0zLjU3LTMuODc4di01Mi41OTZjMC0yLjE1IDEuMzQ1LTMuODcgMy41Ny0zLjg3aC42MWMyLjIyMyAwIDMuNTY5IDEuNzIgMy41NjkgMy44N3YyNC4wNDh6bTk2LjU3Ny0xMy4zMTNoLjc3YzIuMzI0IDAgMy44NzUgMS41NjYgMy44NzUgMy44NzcgMCAzLjIwOC0zLjA2NyA0LjAyOS01LjcyIDQuMDI5LTMuNDggMC02LjgwMyAyLjEwNy05LjIwMiA0LjQ3LTIuOTkxIDIuOTQ5LTQuMyA2LjcyNi00LjMgMTAuODc4djE4Ljc1OWMwIDIuMTUtMS4zNDMgMy44NzYtMy41NyAzLjg3NmgtLjYxMmMtMi4yMjcgMC0zLjU2OS0xLjcyNS0zLjU2OS0zLjg3NnYtMTkuODM2YzAtNy42MTcgMy43MDgtMTMuODM1IDkuODktMTguMTk2IDMuNjkxLTIuNjA1IDcuOTE5LTMuOTggMTIuNDM4LTMuOTh6bS01NS4wNzQgMzcuMTc2YzIuODIuOTg1IDYuMDM1Ljg0NCA4LjkyOC4zNCAxLjQ4LS42MjkgNS4yNjQtMi4yOCA2LjY1Ni0yLjAzOGwuMjE3LjAzNy4yLjA5OGMuODUuNDEyIDEuNjYxLjk5NSAyLjA5NSAxLjg2IDEuMDE0IDIuMDI3LjUyNyA0LjA2NS0xLjQ2NSA1LjIxNmwtLjY2My4zODNjLTcuMzUgNC4yNDItMTUuMTY4IDMuNjU0LTIyLjQ5NS0uMzA4LTMuNTAzLTEuODk0LTYuMTgzLTQuNzA1LTguMTYtOC4xMzJsLS40NjItLjgwMWMtNC43MTktOC4xNzItNC4wODItMTYuNzY4IDEuMjQtMjQuNTM5IDEuODM3LTIuNjg2IDQuMjM4LTQuNzYxIDcuMDQ1LTYuMzg0bDEuMDYyLS42MTNjNi45MjItMy45OTYgMTQuMzQxLTMuNzIyIDIxLjQ1LS4yMTUgMy44MjMgMS44ODYgNi45MiA0LjY5NyA5LjA1NCA4LjM5NGwuMzg0LjY2NmMxLjU1IDIuNjg2LS40NTggNS4wMjYtMi41MzEgNi42MjYtMi40MDYgMS44NTYtNC44MzUgNC4wOS03LjE0MSA2LjA4LTUuMTQyIDQuNDM5LTEwLjI3NiA4Ljg4OC0xNS40MTQgMTMuMzN6bS02LjY1NS00LjY3NGM1Ljc1LTQuOTMgMTEuNTAyLTkuODY1IDE3LjIzNy0xNC44MTYgMS45Ni0xLjY5IDQuMTA5LTMuNDQ0IDYuMDUzLTUuMjIxLTEuNTYtMS45NjYtNC4xNjYtMy4zODMtNi4zOC00LjIyOC00LjQ3LTEuNzAzLTguODc3LTEuMTMxLTEyLjk3NiAxLjIzNS01LjM2NSAzLjA5OC03LjY1IDguMDMxLTcuNDUgMTQuMTcuMDggMi40MTguNzMgNC43NDggMi4wMTMgNi44MDUuNDUyLjcyNS45NTcgMS40MDYgMS41MDMgMi4wNTV6TTE0Ny40ODggNDUuNzMyaDIyLjg2NnYyMy4zNzVoMTEuNTYxYzUuMzQgMCAxMC44MzEtLjk1MSAxNS44ODctMi42NjQgMi40ODUtLjg0MyA1LjI3My0yLjAxNSA3LjcyNC0zLjQ5LTMuMjI4LTQuMjE0LTQuODc2LTkuNTM1LTUuMzYtMTQuNzgtLjY2LTcuMTM1Ljc4LTE2LjQyMSA1LjYwOC0yMi4wMDVsMi40MDQtMi43OCAyLjg2NCAyLjMwM2M3LjIxMSA1Ljc5MyAxMy4yNzYgMTMuODg5IDE0LjM0NSAyMy4xMTggOC42ODMtMi41NTQgMTguODc4LTEuOTUgMjYuNTMxIDIuNDY3bDMuMTQgMS44MTItMS42NTIgMy4yMjZDMjQ2LjkzMyA2OC45NDYgMjMzLjQgNzIuODYgMjIwLjE3IDcyLjE2N2MtMTkuNzk3IDQ5LjMwOS02Mi44OTggNzIuNjUzLTExNS4xNTcgNzIuNjUzLTI3IDAtNTEuNzctMTAuMDkzLTY1Ljg3Ni0zNC4wNDdsLS4yMzEtLjM5LTIuMDU1LTQuMTgyYy00Ljc2OC0xMC41NDQtNi4zNTItMjIuMDk1LTUuMjc4LTMzLjYzN2wuMzIzLTMuNDU3SDUxLjQ1VjQ1LjczMmgyMi44NjVWMjIuODY2aDQ1LjczM1YwaDI3LjQ0djQ1LjczMiIgZmlsbD0iIzM2NDU0OCIvPjxwYXRoIGQ9Ik0yMjEuNTcgNTQuMzhjMS41MzMtMTEuOTE2LTcuMzg0LTIxLjI3NS0xMi45MTQtMjUuNzE5LTYuMzczIDcuMzY4LTcuMzYzIDI2LjY3OCAyLjYzNSAzNC44MDgtNS41OCA0Ljk1Ni0xNy4zMzcgOS40NDgtMjkuMzc2IDkuNDQ4SDM1LjM3Yy0xLjE3IDEyLjU2NyAxLjAzNiAyNC4xNCA2LjA3NSAzNC4wNDVsMS42NjcgMy4wNWE1Ni41MzYgNTYuNTM2IDAgMCAwIDMuNDU1IDUuMTg0YzYuMDI1LjM4NyAxMS41OC41MiAxNi42NjIuNDA4aC4wMDJjOS45ODctLjIyIDE4LjEzNi0xLjQgMjQuMzEyLTMuNTRhMS43NjEgMS43NjEgMCAwIDEgMS4xNTMgMy4zMjZjLS44MjIuMjg2LTEuNjc4LjU1Mi0yLjU2Mi44MDVoLS4wMDNjLTQuODYzIDEuMzg5LTEwLjA3OCAyLjMyMy0xNi44MDYgMi43MzguNC4wMDctLjQxNi4wNi0uNDE4LjA2LS4yMjkuMDE1LS41MTcuMDQ4LS43NDcuMDYtMi42NDguMTQ5LTUuNTA2LjE4LTguNDI4LjE4LTMuMTk2IDAtNi4zNDMtLjA2LTkuODYyLS4yNGwtLjA5LjA2YzEyLjIxIDEzLjcyNCAzMS4zMDIgMjEuOTU1IDU1LjIzNCAyMS45NTUgNTAuNjQ4IDAgOTMuNjA4LTIyLjQ1MiAxMTIuNjMyLTcyLjg1NyAxMy40OTYgMS4zODUgMjYuNDY3LTIuMDU3IDMyLjM2Ny0xMy41NzUtOS4zOTgtNS40MjMtMjEuNDg0LTMuNjk0LTI4LjQ0My0uMTk2IiBmaWxsPSIjMjJBMEM4Ii8+PHBhdGggZD0iTTIyMS41NyA1NC4zOGMxLjUzMy0xMS45MTYtNy4zODQtMjEuMjc1LTEyLjkxNC0yNS43MTktNi4zNzMgNy4zNjgtNy4zNjMgMjYuNjc4IDIuNjM1IDM0LjgwOC01LjU4IDQuOTU2LTE3LjMzNyA5LjQ0OC0yOS4zNzYgOS40NDhINDQuMDQ4Yy0uNTk4IDE5LjI0NiA2LjU0NCAzMy44NTUgMTkuMTggNDIuNjg3aC4wMDNjOS45ODctLjIyIDE4LjEzNi0xLjQgMjQuMzEyLTMuNTRhMS43NjEgMS43NjEgMCAwIDEgMS4xNTMgMy4zMjZjLS44MjIuMjg2LTEuNjc4LjU1Mi0yLjU2Mi44MDVoLS4wMDNjLTQuODYzIDEuMzg5LTEwLjUyNiAyLjQ0My0xNy4yNTQgMi44NTgtLjAwMiAwLS4xNjMtLjE1NS0uMTY1LS4xNTUgMTcuMjM3IDguODQyIDQyLjIzIDguODEgNzAuODg1LTIuMTk3IDMyLjEzLTEyLjM0NCA2Mi4wMjktMzUuODYgODIuODktNjIuNzU3LS4zMTQuMTQyLS42Mi4yODctLjkxNy40MzYiIGZpbGw9IiMzN0IxRDkiLz48cGF0aCBkPSJNMzUuNjQ1IDg4LjE4NmMuOTEgNi43MzIgMi44OCAxMy4wMzUgNS44IDE4Ljc3NmwxLjY2NyAzLjA1YTU2LjQzMiA1Ni40MzIgMCAwIDAgMy40NTUgNS4xODRjNi4wMjYuMzg3IDExLjU4MS41MiAxNi42NjQuNDA4IDkuOTg3LS4yMiAxOC4xMzYtMS40IDI0LjMxMi0zLjU0YTEuNzYxIDEuNzYxIDAgMCAxIDEuMTUzIDMuMzI2Yy0uODIyLjI4Ni0xLjY3OC41NTItMi41NjIuODA1aC0uMDAzYy00Ljg2MyAxLjM4OS0xMC40OTYgMi4zODMtMTcuMjI0IDIuNzk5LS4yMzEuMDE0LS42MzQuMDE3LS44NjcuMDMtMi42NDYuMTQ4LTUuNDc1LjIzOS04LjM5OC4yMzktMy4xOTUgMC02LjQ2My0uMDYxLTkuOTgtLjI0IDEyLjIxIDEzLjcyNCAzMS40MiAyMS45ODUgNTUuMzUyIDIxLjk4NSA0My4zNiAwIDgxLjA4NC0xNi40NTggMTAyLjk3OS01Mi44MjJIMzUuNjQ1IiBmaWxsPSIjMUI4MUE1Ii8+PHBhdGggZD0iTTQ1LjM2NyA4OC4xODZjMi41OTIgMTEuODIgOC44MjEgMjEuMDk5IDE3Ljg2NCAyNy40MTggOS45ODctLjIyIDE4LjEzNi0xLjQgMjQuMzEyLTMuNTRhMS43NjEgMS43NjEgMCAwIDEgMS4xNTMgMy4zMjZjLS44MjIuMjg2LTEuNjc4LjU1Mi0yLjU2Mi44MDVoLS4wMDNjLTQuODYzIDEuMzg5LTEwLjYxNSAyLjM4My0xNy4zNDQgMi43OTkgMTcuMjM2IDguODQgNDIuMTU3IDguNzEzIDcwLjgxLTIuMjkzIDE3LjMzNC02LjY2IDM0LjAxNy0xNi41NzQgNDguOTg0LTI4LjUxNUg0NS4zNjciIGZpbGw9IiMxRDkxQjQiLz48cGF0aCBkPSJNNTUuMjYgNDkuNTQzaDE5LjgxOHYxOS44MThINTUuMjZWNDkuNTQzem0xLjY1MSAxLjY1MmgxLjU2NFY2Ny43MWgtMS41NjRWNTEuMTk1em0yLjk0IDBoMS42MjdWNjcuNzFoLTEuNjI2VjUxLjE5NXptMy4wMDIgMGgxLjYyN1Y2Ny43MWgtMS42MjdWNTEuMTk1em0zLjAwNCAwaDEuNjI2VjY3LjcxaC0xLjYyNlY1MS4xOTV6bTMuMDAzIDBoMS42MjZWNjcuNzFINjguODZWNTEuMTk1em0zLjAwMiAwaDEuNTY1VjY3LjcxaC0xLjU2NVY1MS4xOTV6TTc4LjEyNiAyNi42NzdoMTkuODE5djE5LjgxN2gtMTkuODJWMjYuNjc3em0xLjY1MiAxLjY1MmgxLjU2M3YxNi41MTRoLTEuNTYzVjI4LjMyOXptMi45NCAwaDEuNjI2djE2LjUxNGgtMS42MjVWMjguMzI5em0zLjAwMiAwaDEuNjI2djE2LjUxNEg4NS43MlYyOC4zMjl6bTMuMDAzIDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAzIDBoMS42Mjd2MTYuNTE0aC0xLjYyN1YyOC4zMjl6bTMuMDAyIDBoMS41NjZ2MTYuNTE0aC0xLjU2NlYyOC4zMjl6IiBmaWxsPSIjMjNBM0MyIi8+PHBhdGggZD0iTTc4LjEyNiA0OS41NDNoMTkuODE5djE5LjgxOGgtMTkuODJWNDkuNTQzem0xLjY1MiAxLjY1MmgxLjU2M1Y2Ny43MWgtMS41NjNWNTEuMTk1em0yLjk0IDBoMS42MjZWNjcuNzFoLTEuNjI1VjUxLjE5NXptMy4wMDIgMGgxLjYyNlY2Ny43MUg4NS43MlY1MS4xOTV6bTMuMDAzIDBoMS42MjZWNjcuNzFoLTEuNjI2VjUxLjE5NXptMy4wMDMgMGgxLjYyN1Y2Ny43MWgtMS42MjdWNTEuMTk1em0zLjAwMiAwaDEuNTY2VjY3LjcxaC0xLjU2NlY1MS4xOTV6IiBmaWxsPSIjMzRCQkRFIi8+PHBhdGggZD0iTTEwMC45OTMgNDkuNTQzaDE5LjgxOHYxOS44MThoLTE5LjgxOFY0OS41NDN6bTEuNjUxIDEuNjUyaDEuNTYzVjY3LjcxaC0xLjU2M1Y1MS4xOTV6bTIuOTQgMGgxLjYyNlY2Ny43MWgtMS42MjZWNTEuMTk1em0zLjAwMyAwaDEuNjI2VjY3LjcxaC0xLjYyNlY1MS4xOTV6bTMuMDAzIDBoMS42MjZWNjcuNzFoLTEuNjI2VjUxLjE5NXptMy4wMDIgMGgxLjYyOFY2Ny43MWgtMS42MjhWNTEuMTk1em0zLjAwMyAwaDEuNTY0VjY3LjcxaC0xLjU2NFY1MS4xOTV6IiBmaWxsPSIjMjNBM0MyIi8+PHBhdGggZD0iTTEwMC45OTMgMjYuNjc3aDE5LjgxOHYxOS44MTdoLTE5LjgxOFYyNi42Nzd6bTEuNjUxIDEuNjUyaDEuNTYzdjE2LjUxNGgtMS41NjNWMjguMzI5em0yLjk0IDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAzIDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAzIDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAyIDBoMS42Mjh2MTYuNTE0aC0xLjYyOFYyOC4zMjl6bTMuMDAzIDBoMS41NjR2MTYuNTE0aC0xLjU2NFYyOC4zMjl6TTEyMy44NTkgNDkuNTQzaDE5LjgxOHYxOS44MThoLTE5LjgxOFY0OS41NDN6bTEuNjUyIDEuNjUyaDEuNTYzVjY3LjcxaC0xLjU2M1Y1MS4xOTV6bTIuOTQgMGgxLjYyNlY2Ny43MWgtMS42MjZWNTEuMTk1em0zLjAwMiAwaDEuNjI2VjY3LjcxaC0xLjYyNlY1MS4xOTV6bTMuMDAzIDBoMS42MjdWNjcuNzFoLTEuNjI3VjUxLjE5NXptMy4wMDMgMGgxLjYyN1Y2Ny43MWgtMS42MjdWNTEuMTk1em0zLjAwMyAwaDEuNTY0VjY3LjcxaC0xLjU2NFY1MS4xOTV6IiBmaWxsPSIjMzRCQkRFIi8+PHBhdGggZD0iTTEyMy44NTkgMjYuNjc3aDE5LjgxOHYxOS44MTdoLTE5LjgxOFYyNi42Nzd6bTEuNjUyIDEuNjUyaDEuNTYzdjE2LjUxNGgtMS41NjNWMjguMzI5em0yLjk0IDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAyIDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAzIDBoMS42Mjd2MTYuNTE0aC0xLjYyN1YyOC4zMjl6bTMuMDAzIDBoMS42Mjd2MTYuNTE0aC0xLjYyN1YyOC4zMjl6bTMuMDAzIDBoMS41NjR2MTYuNTE0aC0xLjU2NFYyOC4zMjl6IiBmaWxsPSIjMjNBM0MyIi8+PHBhdGggZD0iTTEyMy44NTkgMy44MWgxOS44MThWMjMuNjNoLTE5LjgxOFYzLjgxem0xLjY1MiAxLjY1MWgxLjU2M3YxNi41MTZoLTEuNTYzVjUuNDZ6bTIuOTQgMGgxLjYyNnYxNi41MTZoLTEuNjI2VjUuNDZ6bTMuMDAyIDBoMS42MjZ2MTYuNTE2aC0xLjYyNlY1LjQ2em0zLjAwMyAwaDEuNjI3djE2LjUxNmgtMS42MjdWNS40NnptMy4wMDMgMGgxLjYyN3YxNi41MTZoLTEuNjI3VjUuNDZ6bTMuMDAzIDBoMS41NjR2MTYuNTE2aC0xLjU2NFY1LjQ2eiIgZmlsbD0iIzM0QkJERSIvPjxwYXRoIGQ9Ik0xNDYuNzI1IDQ5LjU0M2gxOS44MTh2MTkuODE4aC0xOS44MThWNDkuNTQzem0xLjY1IDEuNjUyaDEuNTY1VjY3LjcxaC0xLjU2NFY1MS4xOTV6bTIuOTQgMGgxLjYyN1Y2Ny43MWgtMS42MjZWNTEuMTk1em0zLjAwNCAwaDEuNjI3VjY3LjcxaC0xLjYyN1Y1MS4xOTV6bTMuMDAyIDBoMS42MjdWNjcuNzFoLTEuNjI3VjUxLjE5NXptMy4wMDQgMGgxLjYyNlY2Ny43MWgtMS42MjZWNTEuMTk1em0zLjAwMiAwaDEuNTY0VjY3LjcxaC0xLjU2NFY1MS4xOTV6IiBmaWxsPSIjMjNBM0MyIi8+PHBhdGggZD0iTTk2LjcwNCAxMDEuNDkyYTUuNDY4IDUuNDY4IDAgMSAxLS4wMDIgMTAuOTM1IDUuNDY4IDUuNDY4IDAgMCAxIC4wMDItMTAuOTM1IiBmaWxsPSIjRDNFQ0VDIi8+PHBhdGggZD0iTTk2LjcwNCAxMDMuMDQzYy41IDAgLjk3Ny4wOTQgMS40MTcuMjY1YTEuNTk4IDEuNTk4IDAgMCAwIC43OTggMi45OGMuNjA1IDAgMS4xMy0uMzM1IDEuNDAyLS44MzFhMy45MTUgMy45MTUgMCAxIDEtMy42MTctMi40MTRNMCA5MC4xNjJoMjU0LjMyN2MtNS41MzctMS40MDQtMTcuNTItMy4zMDItMTUuNTQ0LTEwLjU2LTEwLjA3IDExLjY1Mi0zNC4zNTMgOC4xNzUtNDAuNDgyIDIuNDMtNi44MjQgOS44OTgtNDYuNTU0IDYuMTM1LTQ5LjMyNS0xLjU3Ni04LjU1NiAxMC4wNDEtMzUuMDY3IDEwLjA0MS00My42MjMgMC0yLjc3MyA3LjcxMS00Mi41MDIgMTEuNDc0LTQ5LjMyNyAxLjU3NS02LjEyOCA1Ljc0Ni0zMC40MSA5LjIyMy00MC40OC0yLjQyOEMxNy41MjIgODYuODYgNS41MzkgODguNzU4IDAgOTAuMTYzIiBmaWxsPSIjMzY0NTQ4Ii8+PHBhdGggZD0iTTExMS4yMzcgMTQwLjg5Yy0xMy41NC02LjQyNS0yMC45NzEtMTUuMTYtMjUuMTA2LTI0LjY5NC01LjAzIDEuNDM1LTExLjA3NSAyLjM1My0xOC4xIDIuNzQ3LTIuNjQ2LjE0OC01LjQzLjIyNC04LjM1LjIyNC0zLjM2OCAwLTYuOTE3LS4xLTEwLjY0My0uMjk3IDEyLjQxNyAxMi40MSAyNy42OTIgMjEuOTY0IDU1Ljk3NiAyMi4xMzggMi4wODggMCA0LjE2LS4wNCA2LjIyMy0uMTE4IiBmaWxsPSIjQkREOUQ3Ii8+PHBhdGggZD0iTTkxLjE2IDEyNC45OTRjLTEuODczLTIuNTQzLTMuNjktNS43MzktNS4wMjYtOC44LTUuMDMgMS40MzctMTEuMDc3IDIuMzU1LTE4LjEwMyAyLjc1IDQuODI2IDIuNjE5IDExLjcyNyA1LjA0NiAyMy4xMyA2LjA1IiBmaWxsPSIjRDNFQ0VDIi8+PC9nPjwvc3ZnPg==" width="2500" height="2100" class="img_ev3q">
<em>docker는 들어봤겠지?</em>  </p><h1>목차</h1><ul><li><a href="#docker">docker</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="docker">docker<a href="#docker" class="hash-link" aria-label="Direct link to docker" title="Direct link to docker">​</a></h2><p>docker</p><p><em>옛날 옛날에 ...</em></p><blockquote><div align="center"><img src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/server.png"></div>전공 지식과 열정만으로 사업을 시작한 당신. 자금 부족으로 서버 하나에 여러 어플리케이션을 동작시키고 있었다. 몇날 밤을 새며 까다로운 고객의 요구사항을 맞춘 당신. 두근거리는 마음으로 배포 버튼을 누르는데... 아뿔사! 서드파티 앱과 충돌을 일으키며 서버가 죽고 말았다.</blockquote><p>수많은 개발자가 함께 일하는 환경이나, 오픈소스를 많이 활용하는 곳에서 여러 어플리케이션의 환경을 맞춰주는 것은 <em>어렵다</em><br>
<!-- -->각각의 독립적인 하드웨어 환경을 구축해 주는것에도 비용적인 한계가 있다.</p><p>따라서 배포와 운영을 하는 Engineer들은 생각한다. 각 어플리케이션마다 <em>독립적</em>인 환경을 만들 순 없을까?<br>
<!-- -->이런 고충을 해결하기 위해 나온 프로세스 격리 기술이 docker이다. </p><p>격리된 공간에서 프로세스가 동작하는 기술을 <!-- -->[container][container-definition]<!-- -->, container의 실행 정보를 image라고 한다.<br>
<!-- -->docker container는 호스트의 커널을 공유해 VM보다 매우 빠르다는 장점이 있다.  </p><blockquote><p><img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/container_evolution.svg" alt="Alt" title="container_evolution" class="img_ev3q">
이전에도 가상화 기술은 존재했다.  </p></blockquote><p>이렇게 여러 개발자 그룹, 혹은 오픈소스를 사용해 작은 서비스 어플리케이션으로 이루어진 아키텍처를
Micro Service Architecture(MSA) 라고 한다. 이와 반대로 하나로 통합된 아키텍처를 Monolithic 아키텍처라 한다.</p><blockquote><div align="center"><img src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/container.png"></div>다양한 크기의 짐이 규격화된 container에 담겨 유통 혁명을 일으켰다.</blockquote><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p>주말에 작성해 보려고 했는데 욕심이 과했습니다. 빨리 마저 작성해겠습니다...</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://www.google.com" target="_blank" rel="noopener noreferrer">https://www.google.com</a></p>]]></content:encoded>
            <category>tech</category>
            <category>docker</category>
        </item>
        <item>
            <title><![CDATA[Welcome To Kubeflow]]></title>
            <link>https://jwher.github.io/posts/welcome-to-kubeflow</link>
            <guid>https://jwher.github.io/posts/welcome-to-kubeflow</guid>
            <pubDate>Sat, 19 Jun 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[쿠브플로우: 머신러닝 자동화]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="kubeflow" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNzYuOTMgMjc0LjU1Ij48dGl0bGU+bG9nbzwvdGl0bGU+PGcgaWQ9IkxheWVyXzIiIGRhdGEtbmFtZT0iTGF5ZXIgMiI+PGcgaWQ9IkxheWVyXzEtMiIgZGF0YS1uYW1lPSJMYXllciAxIj48cGF0aCBkPSJNOTUuOSw2Mi4xNSwxMDAsMTY0LjI1bDczLjc1LTk0LjEyYTYuNzksNi43OSwwLDAsMSw5LjYtMS4xMWw0NiwzNi45Mi0xNS02NS42MVoiIGZpbGw9IiM0Mjc5ZjQiLz48cG9seWdvbiBwb2ludHM9IjEwMi41NSAxODIuOTggMTY3Ljk3IDE4Mi45OCAxMjcuOCAxNTAuNzUgMTAyLjU1IDE4Mi45OCIgZmlsbD0iIzAwMjhhYSIvPjxwb2x5Z29uIHBvaW50cz0iMTgwLjE4IDgzLjkyIDEzNi4xOCAxNDAuMDYgMTgzLjA2IDE3Ny42NyAyMjcuNTMgMTIxLjkxIDE4MC4xOCA4My45MiIgZmlsbD0iIzAxNGJkMSIvPjxwb2x5Z29uIHBvaW50cz0iODMuNTYgNTIuMyA4My41NyA1Mi4yOSAxMjIuMjYgMy43NyA1OS44NyAzMy44MiA0NC40NiAxMDEuMzMgODMuNTYgNTIuMyIgZmlsbD0iI2JlZGNmZiIvPjxwb2x5Z29uIHBvaW50cz0iNDUuMzIgMTIyLjA1IDg2Ljc2IDE3NC4wMSA4Mi44MSA3NS4wMyA0NS4zMiAxMjIuMDUiIGZpbGw9IiM2Y2ExZmYiLz48cG9seWdvbiBwb2ludHM9IjIwMi4zMSAyOC43MyAxNDIuNjUgMCAxMDUuNTIgNDYuNTYgMjAyLjMxIDI4LjczIiBmaWxsPSIjYTFjM2ZmIi8+PHBhdGggZD0iTTEuNiwyNzJWMjI3LjIySDcuMzR2MjMuNDFsMjAuNDgtMjMuNDFoNi40bC0xNy4zOSwxOS43LDE5LDI1LjA3SDI5LjFsLTE1LjkyLTIwLjgtNS44NCw2LjY1VjI3MloiIGZpbGw9IiM0Mjc5ZjQiIHN0cm9rZT0iIzQyNzlmNCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjMuMiIvPjxwYXRoIGQ9Ik00MS42MiwyNjIuMjFWMjQwaDUuNDN2MjIuMzlhNC42Nyw0LjY3LDAsMCwwLDIuMzUsNC4xOSwxMSwxMSwwLDAsMCwxMSwwLDQuNjksNC42OSwwLDAsMCwyLjMzLTQuMTlWMjQwaDUuNDN2MjIuMTlhOS4wOCw5LjA4LDAsMCwxLTQuMSw3Ljg3LDE2LjIsMTYuMiwwLDAsMS0xOC4zNywwQTkuMDcsOS4wNywwLDAsMSw0MS42MiwyNjIuMjFaIiBmaWxsPSIjNDI3OWY0IiBzdHJva2U9IiM0Mjc5ZjQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIzLjIiLz48cGF0aCBkPSJNNzcuNDYsMjcyVjIyNGg1LjQzdjE2LjgxYTI5LjI5LDI5LjI5LDAsMCwxLDkuMzItMS43MywxMy4xLDEzLjEsMCwwLDEsNi4yLDEuNDEsMTAuNzEsMTAuNzEsMCwwLDEsNC4xOCwzLjc0LDE4LjA3LDE4LjA3LDAsMCwxLDIuMjMsNS4wNiwyMS4yNiwyMS4yNiwwLDAsMSwuNzMsNS41OHEwLDguNDMtNC4zOCwxMi43OVQ4Ny4zNSwyNzJabTUuNDMtNC44N2g0LjU1cTYuNzcsMCw5LjcyLTIuOTV0My05LjUxYTE0LjIxLDE0LjIxLDAsMCwwLTItNy41Miw2LjU1LDYuNTUsMCwwLDAtNi0zLjIyLDI0LjczLDI0LjczLDAsMCwwLTkuMjUsMS41NFoiIGZpbGw9IiM0Mjc5ZjQiIHN0cm9rZT0iIzQyNzlmNCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjMuMiIvPjxwYXRoIGQ9Ik0xMTIuMzYsMjU1Ljk0cTAtNy43MSw0LjA5LTEyLjNhMTMuNzUsMTMuNzUsMCwwLDEsMTAuOC00LjU5cTEzLjM1LDAsMTMuMzYsMTguODZIMTE3Ljc5YTEyLjMsMTIuMywwLDAsMCwyLjksNy4wN3EyLjU5LDMuMTEsNy45LDMuMWEyNC45MiwyNC45MiwwLDAsMCwxMC41NS0ydjVhMjcuNzQsMjcuNzQsMCwwLDEtOS44NiwxLjg3LDE5LjgzLDE5LjgzLDAsMCwxLTcuNy0xLjM3LDEzLjMxLDEzLjMxLDAsMCwxLTUuMjgtMy43NiwxNi4yMSwxNi4yMSwwLDAsMS0zLTUuMzhBMjAuODQsMjAuODQsMCwwLDEsMTEyLjM2LDI1NS45NFptNS42Mi0yLjEyaDE3LjI2YTE0LjkxLDE0LjkxLDAsMCwwLTIuMzctNy4xMiw2LjQ0LDYuNDQsMCwwLDAtNS42Mi0yLjc4LDguMiw4LjIsMCwwLDAtNi4yMSwyLjcyQTEyLjA3LDEyLjA3LDAsMCwwLDExOCwyNTMuODJaIiBmaWxsPSIjNDI3OWY0IiBzdHJva2U9IiM0Mjc5ZjQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIzLjIiLz48cGF0aCBkPSJNMTQ3LjMyLDI0NC44OVYyNDBoNXYtNy41OWE4LjE0LDguMTQsMCwwLDEsMi4zMS02LjA1LDcuNzksNy43OSwwLDAsMSw1LjY5LTIuMjhoNy44NlYyMjloLTVjLTIuMjEsMC0zLjY3LjQ1LTQuMzcsMS4zNHMtMS4wNiwyLjU1LTEuMDYsNVYyNDBoOC40NnY0Ljg3aC04LjQ2VjI3MmgtNS40NHYtMjcuMVoiIGZpbGw9IiMwMDI4YWEiIHN0cm9rZT0iIzAwMjhhYSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjMuMiIvPjxwYXRoIGQ9Ik0xNzUuMjYsMjcyVjIyNGg1LjQzdjQ4WiIgZmlsbD0iIzAwMjhhYSIgc3Ryb2tlPSIjMDAyOGFhIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMy4yIi8+PHBhdGggZD0iTTE5NC40MSwyNjguMDVhMTcuODYsMTcuODYsMCwxLDEsMTIuMzMsNC45QTE2LjU3LDE2LjU3LDAsMCwxLDE5NC40MSwyNjguMDVabTMuODQtMjAuNjVhMTMuMTYsMTMuMTYsMCwwLDAsMCwxNy4yLDEyLjA3LDEyLjA3LDAsMCwwLDE3LDAsMTMuMDksMTMuMDksMCwwLDAsMC0xNy4yLDEyLjA3LDEyLjA3LDAsMCwwLTE3LDBaIiBmaWxsPSIjMDAyOGFhIiBzdHJva2U9IiMwMDI4YWEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIzLjIiLz48cGF0aCBkPSJNMjI4LjQ1LDI0MGg1Ljc1bDcuMywyNS4zMkwyNDguOTMsMjQwaDUuMzZsNy4zNCwyNS4zNEwyNjksMjQwaDUuNzRMMjY0LjcsMjcyaC02LjEybC02LjgzLTI0LjU4TDI0NSwyNzJoLTYuNDdaIiBmaWxsPSIjMDAyOGFhIiBzdHJva2U9IiMwMDI4YWEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIzLjIiLz48L2c+PC9nPjwvc3ZnPg==" width="277" height="275" class="img_ev3q">
<em>MLOps와 쿠브플로우</em></p><h1>목차</h1><ul><li><a href="#MLOps">MLOps</a></li></ul><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="mlops">MLOps<a href="#mlops" class="hash-link" aria-label="Direct link to MLOps" title="Direct link to MLOps">​</a></h2><p>DevOps라는 단어를 들어본 적이 있는가?<br>
<!-- -->이전에 소프트웨어를 개발해 배포하고 관리하는 것은 Engineer의 몫이였다.  </p><p>하지만, 수많은 서버에 배포/관리 작업은 <em>힘들다</em><br>
<!-- -->특히나 이미 동작중인 소프트웨어의 버전을 업데이트 하거나, 무정지로 작동해야 할 때, 심지어는 오류로 인한
Rollback 상황까지 생각하면...</p><blockquote><p>정신 나갈 것 같애!</p></blockquote><br>ML Production flow는 일반적으로 다음 단계를 거친다.<ol><li>Project setup  </li><li>Data pipeline  </li><li>Modeling &amp; training  </li><li>Serving</li></ol><p>수요가 높아진 AI/ML에 DevOps 개념을 적용해 MLOps라는 이름으로 위의 단계의 배포/관리를 지원하는
다양한 workflow가 등장하고 있다.</p><p>현재 Airflow 등 다양한 workflow 플랫폼이 있고, 확연한 우위를 점한 것은 없어 보인다.<br>
<img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/workflow-compare.png" alt="Alt" title="workflow-compare" class="img_ev3q"><br>
<!-- -->luigi와 Argo는 각각 다른 것들이 더 유명해 특정하기 쉽지 않다.</p><p><img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/workflow-rank.png" alt="Alt" title="workflow-rank" class="img_ev3q"><br>
<!-- -->특이하게 한국에서 kubeflow에 대한 관심이 높다.</p><p>여러 workflow에 대한 비교가 <a href="https://www.datarevenue.com/en-blog/airflow-vs-luigi-vs-argo-vs-mlflow-vs-kubeflow" target="_blank" rel="noopener noreferrer">여기</a>에 잘 살명되어 있다.</p><p>kubeflow는 kubernetes 상에서 돌아가는 workflow이다. 다양한 시스템에서 동작하는 다양한 버전이 존재한다. </p><br><p><img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master//assets/img/Kubeflow.gif" alt="Alt" title="kubeflow" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p>주말에 작성해 보려고 했는데 욕심이 과했습니다. 빨리 마저 작성해겠습니다...</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://huyenchip.com/2020/06/22/mlops.html" target="_blank" rel="noopener noreferrer">What I learned from looking at 200 machine learning tools</a></p>]]></content:encoded>
            <category>tech</category>
            <category>kubeflow</category>
            <category>kubernetes</category>
        </item>
        <item>
            <title><![CDATA[Minio]]></title>
            <link>https://jwher.github.io/posts/minio</link>
            <guid>https://jwher.github.io/posts/minio</guid>
            <pubDate>Wed, 16 Jun 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[minIO 오브젝트 스토리지]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/minio.svg" alt="Alt" title="minio" class="img_ev3q"><br>
<em>High Performance, Kubernetes Native Object Storage</em>  </p><h1>목차</h1><ul><li><a href="#minIO">minIO</a></li></ul><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="minio">minIO<a href="#minio" class="hash-link" aria-label="Direct link to minIO" title="Direct link to minIO">​</a></h2><p><em>minIO 어떻게 읽지?</em><br>
<!-- -->저는 처음 봤을 때 이 생각이 먼저 들었는데요😆 minimum IO 라는 뜻인가? 라고 생각해 보았지만,
<em>미-니-오</em>라고 읽습니다</p><p>미니오는 쿠버네티스 네이티브 오브젝트 스토리지입니다.
혹시 쿠버네티스를 처음 들어보신다면 <a href="https://jwher.github.io/2021-04-12-welcome-to-kubernetes/" target="_blank" rel="noopener noreferrer">이글</a>
을 먼저 읽어보면 좋겠습니다.  </p><p>공식 사이트에서는 다음과 같이 미니오를 설명하고 있습니다.<br>
<!-- -->미니오는 아마존 S3 호환 표준입니다.
<strong>아마존 S3</strong>는 전세계 오브젝트 스토리지 <strong>사실상</strong> 표준이고, 미니오는 처음으로 API 도입한 것들 중 하나이고
처음으로 S3 select 지원을 했습니다.
마이크로소프트 아주르를 포함한 750개 이상의 조직에서 미니오 S3 게이트웨이를 사용하며 나머지 산업체를 합한 것 이상으로 큽니다.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>원문</summary><div><div class="collapsibleContent_i85q"><div markdown="1">The defacto standard for Amazon S3 compatibility. Amazon’s S3 API is the defacto standard in the object storage world. MinIO is the defacto standard for S3 compatibility and was one of the first to adopt the API and the first to add support for S3 Select. More than 750 organizations, including Microsoft Azure, use MinIO’s S3 Gateway - more than the rest of the industry combined.</div></div></div></details><p>설명이 S3 일색이네요... S3를 써보신 멋쟁이들은 바로 이해하셨죠?
<del>저는 S3가 뭔지 몰랐어요</del>  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="amazon-s3">Amazon S3<a href="#amazon-s3" class="hash-link" aria-label="Direct link to Amazon S3" title="Direct link to Amazon S3">​</a></h3><p>S3는 Simple Storage Service, 아마존에서 제공하는 <strong>인터넷 스토리지 서비스</strong>입니다.
S3는 단순성, 견고성에 초점을 두고 개발되었습니다. 공식 홈에서 소개하는 S3의 장점은 다음과 같습니다.</p><ul><li>한 파일 최대 5TB 크기 데이터들을 무한정으로 저장할 수 있습니다. <del>전체 서버가 가득 차면?</del></li><li>데이터를 중복/분산 저장해 복구가 가능합니다. </li><li>엑세스 권한을 통해 데이터가 무단으로 액세스되지 않도록 보호합니다.</li><li>REST 인터페이스를 지원합니다.</li></ul><p><em>버킷, 객체(object)등 용어는 <a href="https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/userguide/Welcome.html" target="_blank" rel="noopener noreferrer">공식설명</a> 을 참고해주세요</em></p><p>공식 설명엔 없지만 사용자 입장에서 가장 큰 강점은
트래픽과 디스크 사이즈에 대한 고민을 없에주기 때문이라고 생각합니다.
보통 운영하는 시스템 규모가 커지고 트래픽이 증가하면
크게는 저장소 설계를 다시 하는 등 시스템적 작업이 필요한데
이 부분을 아마존이 해결해 주는 것이죠:D</p><div align="center" markdown="1"><p><img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/money.jpg" alt="Alt" title="money" class="img_ev3q"><br>
<em>물론 돈을 받고요...</em></p></div><p>설명이 있으니 어떻게 구현했는지 궁금하네요😄
하지만 S3는 아마존에서 제공하기에 어떻게 구현되었는지 알수가 없습니다(혹시 저만 모르나요).
사용자는 아마존에서 제공하는 인터페이스만 볼 수 있죠.
RAIDS, HDFS 처럼 분산 시스템으로 설계됬을 것 같다는 추측만 할 뿐입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="미니오">미니오<a href="#미니오" class="hash-link" aria-label="Direct link to 미니오" title="Direct link to 미니오">​</a></h3><p>자 다시 우리의 미니오로 돌아왔습니다. 미니오는 쿠버네티스에서 사용하고,
저는 onpremise로 쿠버네티스를 운영하기 때문에 미니오는 살펴볼 수 있죠. </p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get pvc -n kubeflow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME             STATUS   VOLUME     CAPACITY   ACCESS MODES   STORAGECLASS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">minio-pvc        Bound    minio-pv   20Gi       RWO                           66d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get </span><span class="token function" style="color:#d73a49">pv</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME       CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS     CLAIM                          STORAGECLASS    REASON   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">minio-pv   20Gi       RWO            Retain           Bound      kubeflow/minio-pvc             local-storage            66d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get </span><span class="token function" style="color:#d73a49">pv</span><span class="token plain"> minio-pv -o yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: PersistentVolume</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: minio-pv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  selfLink: /api/v1/persistentvolumes/minio-pv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  accessModes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - ReadWriteOnce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capacity:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    storage: 20Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  local:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path: /mnt/minio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nodeAffinity:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    required:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      nodeSelectorTerms:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - matchExpressions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - key: kubernetes.io/hostname</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          operator: In</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          values:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          - slaveNode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  persistentVolumeReclaimPolicy: Retain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  storageClassName: local-storage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  volumeMode: Filesystem</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>저는 미니오의 pv를 <a href="https://jwher.github.io/2021-06-14-k8s-tip-nodeselector/" target="_blank" rel="noopener noreferrer">selector</a> 를 사용하여 원하는 노드에 배치시켜놨습니다.
해당 노드에 마운트된 폴더를 볼까요?</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">cd</span><span class="token plain"> mnt/minio/minio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/mnt/minio/minio$ </span><span class="token function" style="color:#d73a49">ls</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mlpipeline  </span><span class="token builtin class-name">test</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/minio-bucket.png" alt="Alt" title="minio bucket" class="img_ev3q"></p><p>놀랍게도 bucket과 object가 파일시스템으로 저장되고 있음을 확인했습니다.
이 부분에서 저는 미니오가 S3 호환 인터페이스이지 S3처럼 분산저장소는 아니라는 생각이 들었습니다.</p><p><em>(구현을 더 자세히 알아보고 싶지만 시간이 없습니다ㅜㅜ 잘 아시는 분 태클 환영합니다)</em></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p>이번 글에서 minIO를 알아봤는데요,
활용하는 방법에 대해서 <a href="https://jwher.github.io/2021-06-21-kubeflow-visualization-2/" target="_blank" rel="noopener noreferrer">다음 글</a> 에서 다루니 궁금하신 분은 더 읽어보시는 것도 좋을 것 같습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://min.io" target="_blank" rel="noopener noreferrer">[공식]min.io</a><br>
<a href="https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/userguide/Welcome.html" target="_blank" rel="noopener noreferrer">[공식]Amazon S3이란 무엇인가요?</a></p>]]></content:encoded>
            <category>tech</category>
            <category>kubeflow</category>
            <category>kubernetes</category>
        </item>
        <item>
            <title><![CDATA[K8S Tip Nodeselector]]></title>
            <link>https://jwher.github.io/posts/k8s-tip-nodeselector</link>
            <guid>https://jwher.github.io/posts/k8s-tip-nodeselector</guid>
            <pubDate>Mon, 14 Jun 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[K8s tip: nodeSelector]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/kubernetes.png" alt="Alt" title="kubernetes" class="img_ev3q"><br>
<em>파드를 원하는 노드에 할당하는 법</em>  </p><h1>목차</h1><ul><li><a href="#%EC%82%AC%EB%A1%80%EC%99%80-%EC%84%A4%EB%AA%85">사례와 설명</a></li><li><a href="#%EB%85%B8%EB%93%9C%EC%97%90-%ED%8C%8C%EB%93%9C-%ED%95%A0%EB%8B%B9%ED%95%98%EA%B8%B0">노드에 파드 할당하기</a><br></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="사례와-설명">사례와 설명<a href="#사례와-설명" class="hash-link" aria-label="Direct link to 사례와 설명" title="Direct link to 사례와 설명">​</a></h2><blockquote><p>쿠버네티스 클러스터를 운영하는 당신, ML 모델이 느리게 동작하는 것을 확인한다.<br>
<!-- -->해결사인 당신은 원인을 찾게 되고, GPU 노드가 놀고 있음을 확인한다!</p></blockquote><p>파드는 스케줄러가 배포 시점에 가장 최적화된 노드에 배치한다.(<em>기회가 되면 더 다루겠다</em>)</p><p>위의 사례가 적절한 예시가 될 지 모르겠지만, 여러가지 이유로 특정한 <a href="https://kubernetes.io/ko/docs/concepts/architecture/nodes/" target="_blank" rel="noopener noreferrer">노드</a>
집합에서만 동작하도록 <a href="https://kubernetes.io/ko/docs/concepts/workloads/pods/" target="_blank" rel="noopener noreferrer">파드</a> 를
제한해야할 필요가 있다.</p><p><strong>노드 설렉터</strong>는 쿠버네티스에서 권장하는 노드 선택 제약 조건이다.
<code>nodeSelector</code>는 <code>spec</code>의 필드로서 키:값의 매핑으로 지정하게 된다.  </p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="노드에-파드-할당하기">노드에 파드 할당하기<a href="#노드에-파드-할당하기" class="hash-link" aria-label="Direct link to 노드에 파드 할당하기" title="Direct link to 노드에 파드 할당하기">​</a></h2><p>쿠버네티스 클러스터를 살펴보자</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">master@master:~$ kubectl get nodes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        STATUS   ROLES    AGE   VERSION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpu         Ready    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">   51d   v1.16.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">master      Ready    master   58d   v1.16.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">slave       Ready    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">   58d   v1.16.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>gpu노드에 gpu 라벨(레이블)을 추가한다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># kubectl label {node} {key=value}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">master@master:~$ kubectl label nodes gpu </span><span class="token assign-left variable" style="color:#36acaa">gpu</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node/gpu labeled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 잘 되었나 확인해보자</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">master@master:~$ kubectl get nodes --show-labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        STATUS   ROLES    AGE   VERSION   LABELS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpu         Ready    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">   51d   v1.16.0   beta.kubernetes.io/arch</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">amd64,beta.kubernetes.io/os</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">linux,gpu</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true,kubernetes.io/arch</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">amd64,kubernetes.io/hostname</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">gpu,kubernetes.io/os</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">master      Ready    master   58d   v1.16.0   beta.kubernetes.io/arch</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">amd64,beta.kubernetes.io/os</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">linux,kubernetes.io/arch</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">amd64,kubernetes.io/hostname</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">master,kubernetes.io/os</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">linux,node-role.kubernetes.io/master</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">slave       Ready    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">   58d   v1.16.0   beta.kubernetes.io/arch</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">amd64,beta.kubernetes.io/os</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">linux,kubernetes.io/arch</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">amd64,kubernetes.io/hostname</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">slave,kubernetes.io/os</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 자세히 살펴보면 알겠지만, 미리 지정된 kubernetes.io/hostname=gpu 라벨을 사용할 수 있다</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>배포 테스트를 위해 적당한 pod 생성 yaml을 만들어주자.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> alpine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imagePullPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> IfNotPresent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">nodeSelector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">gpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>배포하고 확인해 본다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">master@master:~$ kubectl apply -f test.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/test created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">master@master:~$ kubectl get pod -o wide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                        READY   STATUS      RESTARTS   AGE    IP            NODE        NOMINATED NODE   READINESS GATES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">test</span><span class="token plain">                        </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">/1     Completed   </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">          115s   </span><span class="token number" style="color:#36acaa">10.244</span><span class="token plain">.3.78   gpu         </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">           </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>간단한 작업이지만 kubernetes 구조를 이해하는데 큰 도움이 될 것이다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p><a href="https://jwher.github.io/2021-04-12-welcome-to-kubernetes/" target="_blank" rel="noopener noreferrer">kubernetes의 세계에 오신 걸 환영합니다</a><br>
<a href="https://jwher.github.io/2021-05-28-kubernetes-usage/" target="_blank" rel="noopener noreferrer">쿠버네티스 사용하기</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://kubernetes.io/ko/docs/concepts/scheduling-eviction/assign-pod-node/" target="_blank" rel="noopener noreferrer">[공식]노드에 파드 할당하기</a></p>]]></content:encoded>
            <category>tech</category>
            <category>kubernetes</category>
            <category>short</category>
        </item>
        <item>
            <title><![CDATA[Information Theory]]></title>
            <link>https://jwher.github.io/posts/information-theory</link>
            <guid>https://jwher.github.io/posts/information-theory</guid>
            <pubDate>Tue, 08 Jun 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[정보 이론]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="cards" src="/assets/images/cards-eae3566dd0ab616cbf474ee7ad7c0e2e.jpg" width="1200" height="1500" class="img_ev3q"><br>
<em>정보 이론</em>  </p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> TMI </summary><div><div class="collapsibleContent_i85q"><div markdown="1"><p>이 글은 이전에 작성한 제 포스트를 재구성했습니다.(<del>가장 인기있던 포스트</del>)<br>
<!-- -->네이버에 정보이론을 검색해보니 EBS에서 쉽게 설명한 자료가 있네요.<br>
<a href="https://blog.naver.com/ebsmath1/222051905808" target="_blank" rel="noopener noreferrer">[중2 확률의 계산]정보이론의 아버지, 클로드 섀넌</a></p></div></div></div></details><h1>목차</h1><ul><li>엔트로피란?</li><li>엔트로피의 계산</li><li>결정트리에서</li><li>통신에서</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="엔트로피란">엔트로피란?<a href="#엔트로피란" class="hash-link" aria-label="Direct link to 엔트로피란?" title="Direct link to 엔트로피란?">​</a></h2><blockquote><p>플레잉 카드(playing card), 혹은 트럼프(trump)는 스페이드, 다이아몬드, 하트, 클로버 각각 13장씩,
한벌에 총 52장의 카드로 이루어졌다.  </p><p>한 세트의 잘 섞인 플레잉 카드가 있다고 하자  </p><p>당신은 스페이드 에이스 한 장을 가지고 있다. 다음에 한 장을 뽑는다면 어떤 카드인지 예측할 수 있는가?<br>
<!-- -->반대로, 스페이드 에이스를 제외한 51장의 카드를 가지고 있다. 다음에 뽑을 한 장이 어떤 카드인지 예측할 수 있는가?</p></blockquote><p>정보 이론은 정보(데이터)를 정량화 하기 위해 만들어졌다.
앞선 예제에서 보듯, 많은 정보를 알수록 새롭게 알 수 있는 정보가 적어진다.
즉 높은 확률 또는 자주 일어나는 일일수록 적은 정보로 표현 가능하다.</p><blockquote><p>동음이의어도 많은 사전 정보(=문맥)을 가지면 특정 단어로 유추 가능하다  </p></blockquote><p>임의의 변수에 대한 <strong>엔트로피</strong>는 변수에서 일어날 수 있는 가능한 정보, 사건, 불확실성의 평균값을 말한다.
(the entropy of a random variable is the average level of "information", "surprise", or "uncertainty" inherent in the variable's possible outcomes.)  </p><p>이 글에서 다루는 엔트로피는 정보 엔트로피로 저장 또는 통신에 사용되는 평균적인 비트 수로 표현된다.</p><p>정보 엔트로피는 벨 연구소의 클로드 섀넌이 발표한 논문에서 도입된 개념이다.
따라서 정보 엔트로피를 Shannon entropy, S로 표시하기도 한다.<br>
<img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/information-theory-claudeshannon.jpg" alt="Alt" title="claudeshannon" class="img_ev3q"><br>
<em>Claude Shannon, 1948. A Mathematical Theory of Communication</em></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="엔트로피의-계산">엔트로피의 계산<a href="#엔트로피의-계산" class="hash-link" aria-label="Direct link to 엔트로피의 계산" title="Direct link to 엔트로피의 계산">​</a></h2><p>다음과 같은 원소 집합을 가정하자.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">M = {m1, m2, ... , mn}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>여기에서 특정한 원소 mi의 발생 확률을 p(mi)라고 하면 예상되는 정보량 I(M)은</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">I(mi) = log2(1/p(mi)) = -log2(p(mi))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이다. <a href="https://en.wikipedia.org/wiki/Entropy_(information_theory)#Characterization" target="_blank" rel="noopener noreferrer">증명</a><br>
<!-- -->확률분포의 역수를 취하는 형태로, 낮은 확률일 수록 높은 정보량을 가짐을 보여준다.  </p><blockquote><p>알파벳 집합 M = {a, b, ... , z} 에서 특정한 알파벳 mi가 나올 정보량은<br>
<!-- -->I(mi) = log2(1/1/26) = log2(26) = 4.7004...<br>
<!-- -->즉, 5개의 비트로 모든 알파멧의 등장 확률을 표현할 수 있다. (2^5=32&gt;26)</p></blockquote><p>전체 집합이 가지는 엔트로피 E(M)은</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">E(M) = sum(p(mi)*I(mi)) = sum(-p(mi)*log2(p(mi)))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>로 (일어날 확률)*(정보량)의 합이다.</p><blockquote><p><img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/dice.jpg" alt="Alt" title="dice" class="img_ev3q"><br>
<!-- -->주사위 집합 M = {1, 2, ... , 6} 에서 상황별 엔트로피를 살펴보자  </p><p>주사위 각 숫자에 한명씩 배팅한 경우<br>
<!-- -->M = {1, 2, 3, 4, 5, 6} =&gt; p(mi)=1/6<br>
<!-- -->E(M) = 6<em>(-1/6 </em> log2(1/6)) = 2.5850...</p><p>주사위 1에 배팅한 경우(1 or 나머지)<br>
<!-- -->M = {H(1), L(2, 3, 4, 5, 6)} =&gt; p(H) = 1/6, p(L) = 5/6<br>
<!-- -->E(M) = (-1/6 <em> log2(1/6)) + (-5/6 </em> log2(5/6)) = 0.1957...</p><p>짝수에 배팅한 경우(2,4,6 or 1,3,5)<br>
<!-- -->M = {H(2, 4, 6), L(1, 3, 5)} =&gt; p(H) = 1/2, p(L) = 1/2<br>
<!-- -->E(M) = (-1/2 <em> log2(1/2)) + (-1/2 </em> log2(1/2)) = 1</p><p>1~6중 하나라도 나오는 경우<br>
<!-- -->M = {H(1, 2, 3, 4, 5, 6)} =&gt; P(H) = 6/6<br>
<!-- -->E(M) = (-1*log2(1)) = 0</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="결정트리에서">결정트리에서<a href="#결정트리에서" class="hash-link" aria-label="Direct link to 결정트리에서" title="Direct link to 결정트리에서">​</a></h2><p>고전적인 인공지능 기법에서 결정 트리(Decision Tree)의 탐색 순서에도 사용된다.<br>
<!-- -->결정 트리의 성능은 tree node 조회 횟수외 직결되기 때문에,
정보량이 가장 적은(가장 확실한 결과) node를 우선적으로 선택해야 할 것이다.<br>
<!-- -->(추후 작성)</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="통신에서">통신에서<a href="#통신에서" class="hash-link" aria-label="Direct link to 통신에서" title="Direct link to 통신에서">​</a></h2><p>정보이론은 통신에서 먼저 연구된 분야인 만큼 전자 통신에서 압축, 오류 감지에도 유용하게 사용된다.    </p><p>데이터링크 계층에서 사용되는 해밍 코드, BCH 등 checksum bit 또한 정보이론을 기반으로 설계되었다.<br>
<!-- -->(추후 작성)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://ko.wikipedia.org/wiki/%EC%A0%95%EB%B3%B4_%EC%9D%B4%EB%A1%A0" target="_blank" rel="noopener noreferrer">[위키]정보 이론</a></p>]]></content:encoded>
            <category>math</category>
            <category>ml</category>
        </item>
        <item>
            <title><![CDATA[Kubeflow Visualization 1]]></title>
            <link>https://jwher.github.io/posts/kubeflow-visualization-1</link>
            <guid>https://jwher.github.io/posts/kubeflow-visualization-1</guid>
            <pubDate>Tue, 08 Jun 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Kubeflow 시각화 개발 1편]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/engineering.jpg" alt="Alt" title="engineering" class="img_ev3q"><br>
<em>kubeflow 시스템 이해와 ETL 아키텍처 설계</em>  </p><h1>목차</h1><ul><li>문제점</li><li>kubeflow 시스템 이해</li><li>ETL 아키텍처 설계</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="문제점">문제점<a href="#문제점" class="hash-link" aria-label="Direct link to 문제점" title="Direct link to 문제점">​</a></h2><p>필자는 <a href="https://en.wikipedia.org/wiki/MLOps" target="_blank" rel="noopener noreferrer">MLOps</a> 를 위해 kubeflow를 도입해 쓰고 있습니다. </p><p>ML 모델 개발자로 일을 하다 <em>엔지니어링</em> 업무까지 맡아 <strong>풀스택</strong>이 되어버린 저에게 공감가는 글을 찾았는데요,<br>
<a href="https://coffeewhale.com/kubernetes/mlops/2021/01/28/mlops-determinedai/" target="_blank" rel="noopener noreferrer">[번역] 데이터 과학자들은 쿠버네티스에 관심이 없습니다 - MLOps</a><br>
<em>원문을 찾아 다시 다룰 예정</em>  </p><p>개발자 동료분들이 툭하면 서버 접속이 안된다, docker 문제있다... 불평을 일상처럼 듣는 제게 깊은 감동을 주었습니다.😊
개발자가 아키텍처 기술을 공부하지 않아 생기는 문제이지만,
<strong>솔직히</strong> 보통 개발자라면 자주 쓰지도 않는 시스템 명령어를 공부하진 않을 것 같아요.  </p><p>특히, MSA와 EDA 서비스 개발방식이 주가 되며 개발자가 알아야할 부분은 줄었지만,
전체 시스템 파악은 더 어려워지고 있습니다.
개발자가 엔지니어링까지 할 수 있는 DevOps라고 하지만,
결국 말 그대로 엔지니어링 공부를 해서 <strong>풀스택</strong>개발을 하라는 것과 다를바가 없다는 생각이 드네요...</p><blockquote><p><img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/hard-to-die.png" alt="Alt" title="hard to die" class="img_ev3q"><br>
<em>죽겠어요...</em></p></blockquote><p>결국 개발자를 위한 개발자가 DevOps 시스템을 잘 만들어서 엔지니어링에 대한
공부 없이 진짜 DevOps를 할 수 있게 해야한다고 생각하고, <strong>UX개발</strong>이 핵심이라고 생각합니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kubeflow-시스템-이해">kubeflow 시스템 이해<a href="#kubeflow-시스템-이해" class="hash-link" aria-label="Direct link to kubeflow 시스템 이해" title="Direct link to kubeflow 시스템 이해">​</a></h2><p>vanilla kubeflow는 1단계 자동화를 지원합니다.<br>
<img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/mlops1.png" alt="Alt" title="mlops1" class="img_ev3q"><br>
<!-- -->그림에서 데이터 분석, 모델(소스코드) 제작까지 개발자(ML)의 역할,
파이프라인 배포와 관리부터 운영자(operator)의 역할로 보여주고 있습니다.
Deployment가 자동화 되었지만 외부 데이터 공급, 파이프라인 단계 생성은 여전히 운영자가 필요하죠.
현재 kubeflow에서 작성하는 Argo DAG(Directed acyclic graph) yaml 작성과 배포에 해당된다고 볼 수 있겠습니다.</p><p><em>개발자와 운영자 범위는 대해 회사/부서마다 다르겠죠</em>  </p><p>진정한 MLOps 또는 DevOps를 어떻게 볼 것인가? 라고 질문하면 버튼 수준의 자동화라고 생각하는데요,
2단계 자동화를 봅시다<br>
<img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/mlops2.png" alt="Alt" title="mlops2" class="img_ev3q"><br>
<!-- -->데이터 분석가가 진행중인 실험(experiment)를 보고 모델 분석과 소스 코드 수정을 합니다.
소스는 레파지토리(Git 혹은 SVN...)에 업로드되고 Integration 프로세스에 따라 패키징,
Deployment 프로세스에 따라 자동적으로 배포됩니다.<br>
<!-- -->😆이제 어디에도 징징대는 운영자가 없네요! 개발자는 git push 버튼만 누르면 됩니다!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="제약사항">제약사항<a href="#제약사항" class="hash-link" aria-label="Direct link to 제약사항" title="Direct link to 제약사항">​</a></h3><p>하지만 우리에겐 징징대는 운영자 동료와 복잡한 배포 구조가 있습니다.  </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="우리의-목표">우리의 목표<a href="#우리의-목표" class="hash-link" aria-label="Direct link to 우리의 목표" title="Direct link to 우리의 목표">​</a></h4><p>2단계 자동화를 함에 있어, 중간 파이프라인의 진행 상황을 명확하게 관찰할 수 있게 하려고 합니다.
즉 진행 상황 시각화를 개발하려고 합니다.  </p><div align="center"><img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/vis-pipeline.png" class="img_ev3q">⇒<img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/vis-pipeline2.png" class="img_ev3q">*기존 ⇒ 변경 UI*</div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="가진-것">가진 것<a href="#가진-것" class="hash-link" aria-label="Direct link to 가진 것" title="Direct link to 가진 것">​</a></h4><p>우리가 가진건 github에 있는 vanilla kubeflow 밖에 없습니다.
vanilla kubeflow도 visualization을 지원하지만,
파이프라인이 완료된 결과를 보여주는 것으로 실시간 진행상황을 보고싶은 우리의 요구를 충족하지 못합니다.  </p><br><p>기존 visualization이 가지는 한계는 다음과 같습니다.  </p><p><strong>여러 시각화 작업은 동시에 생성될 수 없습니다</strong>  </p><ul><li>하나의 파이썬 커널이 시각화 작업을 진행하기 때문입니다  </li><li>일반적 해결책: 시각화 서비스 레플리카를 늘리세요</li></ul><p><strong>시각화는 30초를 지나면 생성에 실패합니다</strong>  </p><ul><li>시각화 과정 중 30초가 넘으면 프론트엔드 요청에 타임아웃 헤더를 추가할 수 있습니다  </li><li>일반적 해결책: visualization deploy.yaml에 추가하세요</li></ul><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> KERNEL_TIMEOUT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>HTML 컨텐츠는 4MB를 넘지 못합니다</strong>  </p><ul><li>gRPC는 송수신 최대 크기 제한을 4MB로 두기 때문입니다  </li><li>일반적 해결책: gRPC 서버의 main.go에서 수동으로 maxCallRecvMsgSize를 설정해 줍니다.  </li></ul><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>원문</summary><div><div class="collapsibleContent_i85q"><div markdown="1">**Multiple visualizations cannot be generated concurrently** * This is because a single Python kernel is used to generate visualizations * General solution: increase the number of replicas<p><strong>Visualizations that take longer than 30 seconds will fail to generate</strong></p><ul><li>For visualizations where the 30 second timeout is reached, you can add the TimeoutValue header to the request made by the frontend  </li><li>General solution: set the KERNEL_TIMEOUT environment variable of the visualization service deployment</li></ul><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> KERNEL_TIMEOUT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>The HTML content of the generated visualizations cannot be larger than 4MB</strong>  </p><ul><li>gRPC by default imposes a limit of 4MB as the maximum size that can be sent and received by a server  </li><li>Genearl solution: manually set MaxCallRecvMsgSize for gRPC</li></ul></div></div></div></details><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="etl-아키텍처-설계">ETL 아키텍처 설계<a href="#etl-아키텍처-설계" class="hash-link" aria-label="Direct link to ETL 아키텍처 설계" title="Direct link to ETL 아키텍처 설계">​</a></h2><p><img loading="lazy" src="https://raw.githubusercontent.com/JWHer/jwher.github.io/master/_posts/images/newvis-architecture.png" alt="Alt" title="newvis architecture" class="img_ev3q"><br>
<em>기술 스택보다 용도를 명확히 하자</em>  <del>그래도 뭔가 더 있어보인다</del></p><ul><li>minIO를 통한 메타정보/오브젝트 저장</li><li>kafka 메시지 큐를 이용한 동시 처리
대규모 서비스에서에서 빠른 속도로 처리할 수 있습니다.<br>(검증을 해봐야겠지만 <a href="https://epicdevs.com/17" target="_blank" rel="noopener noreferrer">글</a> 을 참고했습니다)</li><li>python/flask를 이용한 시각화</li><li>사용자에게 보여줄 웹 서버</li></ul><p>다음 시간부터 실제 구현을 해 봅시다!</p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h3><p><a href="https://github.com/kubeflow/pipelines/blob/master/backend/src/apiserver/visualization/README.md" target="_blank" rel="noopener noreferrer">[깃헙]Python based visualizations guideline</a></p>]]></content:encoded>
            <category>dev</category>
            <category>kubeflow</category>
            <category>kubernetes</category>
        </item>
        <item>
            <title><![CDATA[Nuclio 개념과 아키텍처]]></title>
            <link>https://jwher.github.io/posts/nuclio</link>
            <guid>https://jwher.github.io/posts/nuclio</guid>
            <pubDate>Wed, 02 Jun 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Automate the Data Science Pipeline with Serverless Functions]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="nuclio" src="/assets/images/nuclio-376212de6c9ee3da1e859db93128e595.png" width="640" height="467" class="img_ev3q"><br>
<em>Automate the Data Science Pipeline with Serverless Functions</em>  </p><p>disclaimer: 필자도 배우는 중입니다. 정확히 이해가 가지 않은 개념은 <em>기울게?</em> 표시했습니다. 많은 의견 부탁드립니다! <del>죄송합니다!</del></p><h1>목차</h1><ul><li><a href="#nuclio%EC%9D%98-%ED%95%84%EC%9A%94%EC%84%B1">nuclio의 필요성</a></li><li><a href="#nuclio-architecture">nuclio architecture</a></li></ul><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="nuclio의-필요성">nuclio의 필요성<a href="#nuclio의-필요성" class="hash-link" aria-label="Direct link to nuclio의 필요성" title="Direct link to nuclio의 필요성">​</a></h2><p><em>server역할을 하는데 serverless라고??</em></p><p>딥러닝 모델 알고리즘(function)이 외부와 통신하려면 어떤 방법을 사용해야 할까요?
당연히 서버와 인터페이스(ex REST API) 프로그램을 추가로 개발해야 합니다.😭</p><blockquote><p><img loading="lazy" alt="homer-brain" src="/assets/images/homer-brain-1c9d50d11567f55c55dd3b1c027d5d91.gif" width="300" height="280" class="img_ev3q"><br>
<!-- -->나는 딥러닝밖에 모르는데...</p></blockquote><p>이런 딥러닝 모델 개발자, 데이터 과학자를 위해 <strong>서버 없이</strong> 인터페이스를 만들어 주려는 시도는 많았습니다.
nuclio 또한 고가용성 <strong>serverless</strong> 프레임워크로서 특히 data, I/O, 연산 집중적(compute intensive) 작업에 초점을 두고 있습니다.
nuclio는 딥러닝 모델의 <strong>serverless function</strong>의 서빙과 인터페이스를 제공합니다.</p><p>nuclio는 서버를 운영하는데 필요한 load balancing과 scaling을 아주 잘(10-100 times faster) 지원합니다.
하지만 다른 serverless 프로젝트는 아래 요구사항을 잘 해결하지 못했습니다.</p><ul><li>최소한의 CPU/GPU와 I/O 오버헤드, 병렬화의 최대로 Real-time 처리</li><li>다양한 data source, trigger, processing models, ML framework와 저수준 통합(Native integration)</li><li>data-path 가속을 통한 상태 함수(stateful function) <em>(stateless REST와 반대 개념?)</em></li><li>저수준 장치, 랩탑, edge <em>(edge computing?)</em>, op-premise, public cloud와 이식성</li><li><strong>오픈소스</strong> 근데 이제 기업용을 곁들인(로깅, 모니터링, 보안, 사용성)  </li></ul><p>nuclio는 이 요구사항을 모두 충족합니다.😄  </p><br><blockquote><p>When this happens, do that</p></blockquote><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사례와-일반적인-실수">사례와 일반적인 실수<a href="#사례와-일반적인-실수" class="hash-link" aria-label="Direct link to 사례와 일반적인 실수" title="Direct link to 사례와 일반적인 실수">​</a></h3><p>nuclio function이 배포되면 worker 마다 런타임(python interpreter, JVM, goroutine...)이 생성되고 실행 컨텍스트에 따라 서빙됩니다.
앞서 살펴봤듯이 nuclio 런타임에는 다중 스레딩 컨셉이 적용되어 있습니다.</p><ul><li>필요없는 lock을 방지하기 위해 worker(threads <em>?</em>)간 데이터 공유를 하지 않습니다</li><li>Thread-local storage(TLS)를 사용해 <strong>전역변수</strong>를 사용하지 않고 상태(state)를 관리합니다</li></ul><p>그렇다면 function lifetime 동안 데이터베이스와 연결을 유지하는 상황을 생각해봅시다.
요청마다 데이터베이스 연결을 생성하는 것은 비효율적입니다.
따라서 다음과 같이 데이터베이스 연결을 <strong>전역변수</strong>로 만드는 방법을 생각해 볼 수 있습니다.  </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">my_db_connection </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> my_db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create_connection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">handler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> event</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    my_db_connection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>하지만 이 방법은 두가지 큰 문제가 있습니다.  </p><ol><li>전역변수는 worker 사이에서 공유될 수 있습니다(Go에서는 언제나 공유됩니다).
이는 데이터베이스에 접근할 때 Race condition을 발생시킬 수 있습니다.  </li><li>데이터베이스 연결에 실패하면 function이 왜 import 되지 않았는지 이해하기 어렵습니다
(scratching your head trying to understand).</li></ol><p>nuclio에서 올바른 해결책은 <code>init_context</code> 사용입니다. 💡  </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">handler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> event</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">user_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">my_db_connection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">init_context</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Create the DB connection under "context.user_data"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">setattr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">user_data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'my_db_connection'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> my_db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create_connection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="nuclio-architecture">nuclio architecture<a href="#nuclio-architecture" class="hash-link" aria-label="Direct link to nuclio architecture" title="Direct link to nuclio architecture">​</a></h2><p><img loading="lazy" alt="function processor" src="/assets/images/function-processor-3a2193379a90fef4ddfc1fb0b8756ff0.png" width="1427" height="673" class="img_ev3q"></p><p>nuclio 구조는 function의 성능 최대화, 추상화, 플랫폼간 이식성을 목표하고 있습니다.  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="event-source-listeners">Event-source listeners<a href="#event-source-listeners" class="hash-link" aria-label="Direct link to Event-source listeners" title="Direct link to Event-source listeners">​</a></h3><p>function은 이벤트 기반으로 실행되고, function runtime engine으로 푸쉬합니다.
event-source listener는 소켓, 메시지 큐, 외부 이벤트 가져오기(polling)를 할 수 있습니다.
event listner는 정확히 한번 또는 최소한 한번 실행을 보장하고 오류를 처리합니다.  </p><p><img loading="lazy" alt="event src" src="/assets/images/event-src-ccd1846aa4a406e16b3b28407e92c46f.png" width="1428" height="682" class="img_ev3q">  </p><p>event source는 동작이나 흐름 관리로 분류할 수 있습니다(divided into classes). nuclio는 다음 event를 지원합니다.</p><ol><li>Synchronous Request/Response: HTTP요청이나 Remote Procedure Calls 같이 client가 즉시 응답을 원함</li><li>Asynchronous Message-Queue Request: RabbitMQ, MQTT, emails, scheduled event 같이 메시지가 subscriber에게 분배되고 교횐됨</li><li>Message or Record Streams: Kafka, AWS Kinesis, lguazio V3IO 같이 정렫된 메시지나 기록의 순차적 업데이트</li><li>Record or Data Polling(ETL): 주기적이거나 트리거된 외부에서 필터된 기록, 데이터 오브젝트</li></ol><p><a href="#%EA%B6%81%EA%B8%88%EC%A0%90">궁금점-graceful shutdown</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="runtime-engine">Runtime engine<a href="#runtime-engine" class="hash-link" aria-label="Direct link to Runtime engine" title="Direct link to Runtime engine">​</a></h3><p>runtime engine은 function 환경(변수, 컨텍스트, 로그, 데이터 바인딩 ...)을 초기화하고 worker에 이벤트를 공급(feed), 결과 반환을 합니다.
runtime은 non-blocking 연산과 CPU 최적화를 위해 독립적인 병렬(parallel) worker로 이루어집니다(goroutine, python asyncio, akka <em>?</em>, thread)</p><p>nuclio는 현재 세가지 processor runtime 구현이 있습니다.</p><ol><li>Native: real-time, inline Go 또는 C 루틴</li><li>SHMEM: 공유메모리를 이용하는 Python, Java, Node.js언어
processor는 SHMEM function 런타임을 이용해 zero-copy 공유 메모리 채널로 통신합니다.  </li><li>Shell: CLI 실행환경이나 바이너리(excutables). stdout과 stderr를 맵핑해서 function 결과를 만듭니다.</li></ol><p><a href="#%EA%B6%81%EA%B8%88%EC%A0%90">궁금점-worker</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-bindings">Data bindings<a href="#data-bindings" class="hash-link" aria-label="Direct link to Data bindings" title="Direct link to Data bindings">​</a></h3><p><em>가장 멋진 부분이라 생각합니다</em></p><p>function은 외부 파일, 오브젝트, database, messaging system과 지속적인 연결로 이점(benefit)을 얻습니다.
Data binding은 SDK나 연결, 자격 관리의 통합을 없에 개발을 단순화 합니다.
또한, 같은 종류(class)의 다른 데이터 서비스를 맵핑해 재사용성과 이식성을 가능하게 합니다.</p><p>data binding은 prefetching, 캐싱, micro-batching을 처리해 대기시간을 줄이고 I/O 성능을 향상시킵니다.
data binding은 특별한 function 코드 없이 zero-copy, zero-serialization, and non-blocking operation, real-time 처리를 위해 설계되었습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="control-framework">Control Framework<a href="#control-framework" class="hash-link" aria-label="Direct link to Control Framework" title="Direct link to Control Framework">​</a></h3><p>control framework는 초기화, 다른 프로세서 컴포넌트 컨트롤, 프로세서와 function의 logging 제공, 실행 통계 모니터링,
작은 원격 관리 포털 서빙을 합니다.
control framework는 추상화 인터페이스를 제공해 IoT 장치, 컨테이너, 오케스트레이터, cloud간에 이식성을 제공합니다(allowing).<br>
<img loading="lazy" alt="build deploy" src="/assets/images/build-deploy-b291a184317f71b882f3db62ab22007f.png" width="1669" height="462" class="img_ev3q"></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="궁금점">궁금점<a href="#궁금점" class="hash-link" aria-label="Direct link to 궁금점" title="Direct link to 궁금점">​</a></h2><ul><li>graceful shutdown<br>종료시, 이벤트 큐 처리, worker에 있는 작업 처리가 되는지?
⇒ 모델 교체나 버전 업그레이드로 종료하면, 기존 작업 요청에 어떻게 반응할까요?
단순 연결 종료, 요청받은 이벤트까지만 처리, 리디렉션 등 다양한 정책이 있을텐데 누클리오는 어떨까요
</li><li>worker<br>worker로 docker container 또는 kubernetes pod를 사용하는 것으로 보이는데(공부가 부족해서일지도)
이것을 scale out(즉, 컨테이너 증가)로 병렬화를 하는 것인지, 아니면 컨테이너 OS 프로세스를 증가시키는건지,
OS thread를 사용하는지, PL이 제공하는 경량 thread(goroutine, erlang)를 증가시키는 것인지?
⇒ Runtime engine에서 힌트를 얻을 수 있습니다만, 언어에 따라 scale up 방식이 다른 걸까요?</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h2><p><a href="https://theburningmonk.com/2019/04/comparing-nuclio-and-aws-lambda/" target="_blank" rel="noopener noreferrer">Comparing Nuclio and AWS Lambda</a><br>
<a href="https://nuclio.io/docs/latest/" target="_blank" rel="noopener noreferrer">Nuclio Documentation</a></p>]]></content:encoded>
            <category>tech</category>
            <category>kubernetes</category>
            <category>docker</category>
        </item>
        <item>
            <title><![CDATA[자주쓰는 쿠버네티스 명령어]]></title>
            <link>https://jwher.github.io/posts/kubernetes-usage</link>
            <guid>https://jwher.github.io/posts/kubernetes-usage</guid>
            <pubDate>Fri, 28 May 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Kubernetes Usage]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="kubernetes" src="/assets/images/kubernetes-f91022b1deed067a9393dd3c42381ab7.svg" width="723" height="702" class="img_ev3q"><br>
<em>쿠버네티스 사용하기</em>  </p><h1>목차</h1><ul><li><a href="#kubectl-%EC%84%A4%EC%B9%98">kubectl 설치</a></li><li><a href="#%EB%AA%85%EB%A0%B9%EC%96%B4">명령어</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kubectl-설치">kubectl 설치<a href="#kubectl-설치" class="hash-link" aria-label="Direct link to kubectl 설치" title="Direct link to kubectl 설치">​</a></h2><p>설마 kubectl이 없을까요...?<br>
<!-- -->쿠버네티스를 처음 접하신다면 쿠버네티스 구조를 다룬 <a href="/posts/welcome-to-kubernetes">이글</a>
먼저 보시는걸 추천합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">requirements<a href="#requirements" class="hash-link" aria-label="Direct link to requirements" title="Direct link to requirements">​</a></h3><ul><li>linux</li><li>kubernetes cluster</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="바이너리-설치">바이너리 설치<a href="#바이너리-설치" class="hash-link" aria-label="Direct link to 바이너리 설치" title="Direct link to 바이너리 설치">​</a></h3><details markdown="1" open="" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="false"><summary>Details</summary><div><div class="collapsibleContent_i85q"><ol><li>바이너리 파일을 다운로드 합니다.</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 다음 명령으로 최신 kubectl을 다운받습니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -LO </span><span class="token string" style="color:#e3116c">"https://dl.k8s.io/release/</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable function" style="color:#d73a49">curl</span><span class="token string variable" style="color:#36acaa"> -L -s https://dl.k8s.io/release/stable.txt</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">/bin/linux/amd64/kubectl"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># kubectl은 kubernetes 클러스터와 마이너 버전 차이만 연동 가능합니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 예를 들어, v1.21 kubectl은 v1.20, v1.21, v1.22 클러스터와 연동될 수 있습니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># version을 수정해 특정 버전을 다운받을 수 있습니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -LO https://dl.k8s.io/release/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">version</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/bin/linux/amd64/kubectl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># (선택사항) sha256 체크섬 검증</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -LO </span><span class="token string" style="color:#e3116c">"https://dl.k8s.io/{version}/bin/linux/amd64/kubectl.sha256"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable operator" style="color:#393A34">&lt;</span><span class="token string variable" style="color:#36acaa">kubectl.sha256</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c"> kubectl"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> sha256sum --check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl: OK </span><span class="token comment" style="color:#999988;font-style:italic"># 성공시</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>바이너리 파일을 설치합니다.  </li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 설치하기, 바이너리 파일을 이동하는 것 처럼 보입니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -o root -g root -m 0755 kubectl /usr/local/bin/kubectl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># root 권한이 없어도 ~/.local/bin에 설치할 수 있습니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> -p ~/.local/bin/kubectl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">mv</span><span class="token plain"> ./kubectl ~/.local/bin/kubectl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 그리고 ~/.local/bin/kubectl을 $PATH에 추가해줍니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token environment constant" style="color:#36acaa">$PATH</span><span class="token operator" style="color:#393A34">=</span><span class="token environment constant" style="color:#36acaa">$PATH</span><span class="token plain">:~/.local/bin/kubectl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 확인해봅시다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl cluster-info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Kubernetes master is running at https://server-name:port</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KubeDNS is running at https://server-name:port/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">To further debug and diagnose cluster problems, use </span><span class="token string" style="color:#e3116c">'kubectl cluster-info dump'</span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 실패시 나오는 메시지입니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The connection to the server </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">server-name:port</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> was refused - did you specify the right </span><span class="token function" style="color:#d73a49">host</span><span class="token plain"> or port?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># kubernetes 클러스터와 연결이 안되거나 config 파일에 문제가 있습니다</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="패키지-관리자-설치">패키지 관리자 설치<a href="#패키지-관리자-설치" class="hash-link" aria-label="Direct link to 패키지 관리자 설치" title="Direct link to 패키지 관리자 설치">​</a></h3><details markdown="1" open="" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="false"><summary>Details</summary><div><div class="collapsibleContent_i85q"><p>apt나 yum으로 관리되게 설치할 수 있습니다.  </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="데비안">데비안<a href="#데비안" class="hash-link" aria-label="Direct link to 데비안" title="Direct link to 데비안">​</a></h4><ol><li><code>apt</code> 인덱스 업데이트와 필요한 패키지를 설치합니다.</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -y apt-transport-https ca-certificates </span><span class="token function" style="color:#d73a49">curl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>구글 클라우드의 퍼블릭 사이닝 키를 다운받습니다.</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -fsSLo /usr/share/keyrings/kubernetes-archive-keyring.gpg https://packages.cloud.google.com/apt/doc/apt-key.gpg</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>쿠버네티스 <code>apt</code> 레프지토리를 추가합니다.</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tee</span><span class="token plain"> /etc/apt/sources.list.d/kubernetes.list</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li><code>apt</code> 인덱스 업데이트 후 kubectl을 설치합니다.</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -y kubectl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="레드햇">레드햇<a href="#레드햇" class="hash-link" aria-label="Direct link to 레드햇" title="Direct link to 레드햇">​</a></h4><p>yum 레포지토리에 추가 후 설치합니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> /etc/yum.repos.d/kubernetes.repo</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">[kubernetes]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">name=Kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">enabled=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">gpgcheck=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">repo_gpgcheck=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yum </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -y kubectl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="다른-패키지-관리자">다른 패키지 관리자<a href="#다른-패키지-관리자" class="hash-link" aria-label="Direct link to 다른 패키지 관리자" title="Direct link to 다른 패키지 관리자">​</a></h3><details markdown="1" open="" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="false"><summary>Details</summary><div><div class="collapsibleContent_i85q"><p><em>직접 해보지 않았습니다</em></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="snap">snap<a href="#snap" class="hash-link" aria-label="Direct link to snap" title="Direct link to snap">​</a></h4><p>우분투일때</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ snap </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> kubectl --classic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl version --client</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="brew">brew<a href="#brew" class="hash-link" aria-label="Direct link to brew" title="Direct link to brew">​</a></h4><p>maybe mac...</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ brew </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> kubectl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl version --client</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br></div></div></details><h2 class="anchor anchorWithStickyNavbar_LWe7" id="명령어">명령어<a href="#명령어" class="hash-link" aria-label="Direct link to 명령어" title="Direct link to 명령어">​</a></h2><p><em>cheat sheet</em><br>
<!-- -->도커 명령어와 유사한 명령어가 많습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="조회">조회<a href="#조회" class="hash-link" aria-label="Direct link to 조회" title="Direct link to 조회">​</a></h3><details markdown="1" open="" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="false"><summary>Details</summary><div><div class="collapsibleContent_i85q"><h4 class="anchor anchorWithStickyNavbar_LWe7" id="버전-조회">버전 조회<a href="#버전-조회" class="hash-link" aria-label="Direct link to 버전 조회" title="Direct link to 버전 조회">​</a></h4><p>가볍게 시작해봅시다</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl version </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Client Version: version.Info</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">Major:</span><span class="token string" style="color:#e3116c">"1"</span><span class="token plain">, Minor:</span><span class="token string" style="color:#e3116c">"16"</span><span class="token plain">, GitVersion:</span><span class="token string" style="color:#e3116c">"v1.16.0"</span><span class="token plain">, GitCommit:</span><span class="token string" style="color:#e3116c">"2bd9643cee5b3b3a5ecbd3af49d09018f0773c77"</span><span class="token plain">, GitTreeState:</span><span class="token string" style="color:#e3116c">"clean"</span><span class="token plain">, BuildDate:</span><span class="token string" style="color:#e3116c">"2019-09-18T14:36:53Z"</span><span class="token plain">, GoVersion:</span><span class="token string" style="color:#e3116c">"go1.12.9"</span><span class="token plain">, Compiler:</span><span class="token string" style="color:#e3116c">"gc"</span><span class="token plain">, Platform:</span><span class="token string" style="color:#e3116c">"linux/amd64"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Server Version: version.Info</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">Major:</span><span class="token string" style="color:#e3116c">"1"</span><span class="token plain">, Minor:</span><span class="token string" style="color:#e3116c">"16"</span><span class="token plain">, GitVersion:</span><span class="token string" style="color:#e3116c">"v1.16.15"</span><span class="token plain">, GitCommit:</span><span class="token string" style="color:#e3116c">"2adc8d7091e89b6e3ca8d048140618ec89b39369"</span><span class="token plain">, GitTreeState:</span><span class="token string" style="color:#e3116c">"clean"</span><span class="token plain">, BuildDate:</span><span class="token string" style="color:#e3116c">"2020-09-02T11:31:21Z"</span><span class="token plain">, GoVersion:</span><span class="token string" style="color:#e3116c">"go1.13.15"</span><span class="token plain">, Compiler:</span><span class="token string" style="color:#e3116c">"gc"</span><span class="token plain">, Platform:</span><span class="token string" style="color:#e3116c">"linux/amd64"</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="노드-조회">노드 조회<a href="#노드-조회" class="hash-link" aria-label="Direct link to 노드 조회" title="Direct link to 노드 조회">​</a></h4><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        STATUS   ROLES    AGE   VERSION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpuslave    Ready    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">   34d   v1.16.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">master      Ready    master   41d   v1.16.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">slave       Ready    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">   41d   v1.16.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="노드-라벨-조회">노드 라벨 조회<a href="#노드-라벨-조회" class="hash-link" aria-label="Direct link to 노드 라벨 조회" title="Direct link to 노드 라벨 조회">​</a></h4><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get nodes –-show-labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME       STATUS   ROLES    AGE   VERSION    LABELS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">master     Ready    master   37d   v1.16.15   beta.kubernetes.io/arch</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">amd64,beta.kubernetes.io/os</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">linux,kubernetes.io/hostname</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">master,kubernetes.io/os</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">linux,node-role.kubernetes.io/master</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">,type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">master</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="namespace-조회">namespace 조회<a href="#namespace-조회" class="hash-link" aria-label="Direct link to namespace 조회" title="Direct link to namespace 조회">​</a></h4><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get ns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                   STATUS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default                Active   41d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">istio-system           Active   41d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-node-lease        Active   41d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-public            Active   41d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system            Active   41d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nuclio                 Active   6d8h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="리소스-종류-조회">리소스 종류 조회<a href="#리소스-종류-조회" class="hash-link" aria-label="Direct link to 리소스 종류 조회" title="Direct link to 리소스 종류 조회">​</a></h4><p>어떤 resource를 공부해야 할지 궁금하다면?<br>
<em>주의: 해당 출력은 깁니다. less나 다른 명령어 조합을 추천합니다</em></p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 간단하지만 도움이 되는</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl api-resources</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="리소스-조회">리소스 조회<a href="#리소스-조회" class="hash-link" aria-label="Direct link to 리소스 조회" title="Direct link to 리소스 조회">​</a></h4><p>리소스/커스텀 리소스 목록을 조회합니다.
<code>all</code>을 사용해 존재하는 모든 리소스를 조회할 수 있습니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">pod</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">deployment</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">replicationcontroller</span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">service</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">all</span><span class="token operator" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-n namespace</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 파드 조회</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                  READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my-pod                                </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          28h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>wide</code>를 사용해 자세한 내용을 출력할 수 있습니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">resource</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> -o wide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 파드 조회</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                  READY   STATUS    RESTARTS   AGE   IP             NODE      NOMINATED NODE   READINESS GATES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my-pod                                </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          28h   </span><span class="token number" style="color:#36acaa">10.244</span><span class="token plain">.0.109   worker    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">           </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>json</code> 파일이나 <code>yaml</code> 파일로 출력할 수 있습니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">resource</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> -o </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">json</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">yaml</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>확인하고 싶은 필드만 필터링 할 수 있습니다. 🍎</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">resource</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> -o custom-columns</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">NAME:json.path,NAME:json.path,CONTAINERS:.spec.containers</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">*</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.name</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="리소스">리소스<a href="#리소스" class="hash-link" aria-label="Direct link to 리소스" title="Direct link to 리소스">​</a></h4><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get nodes –-show-labels</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="자원-사용량-조회">자원 사용량 조회<a href="#자원-사용량-조회" class="hash-link" aria-label="Direct link to 자원 사용량 조회" title="Direct link to 자원 사용량 조회">​</a></h4><p>heapster가 설치되어 있어야 합니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl </span><span class="token function" style="color:#d73a49">top</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">nodename</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="로그-확인">로그 확인<a href="#로그-확인" class="hash-link" aria-label="Direct link to 로그 확인" title="Direct link to 로그 확인">​</a></h4><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl logs </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">resource</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-n </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">namespace</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-c </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">container</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>리소스 생성에 문제가 있을 때는 쿠버네티스 로그만 확인할 수 있습니다</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl describe </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">resource</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-n </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">namespace</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br></div></div></details><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="생성">생성<a href="#생성" class="hash-link" aria-label="Direct link to 생성" title="Direct link to 생성">​</a></h3><details markdown="1" open="" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="false"><summary>Details</summary><div><div class="collapsibleContent_i85q"><h4 class="anchor anchorWithStickyNavbar_LWe7" id="파일을-통한-리소스-생성">파일을 통한 리소스 생성<a href="#파일을-통한-리소스-생성" class="hash-link" aria-label="Direct link to 파일을 통한 리소스 생성" title="Direct link to 파일을 통한 리소스 생성">​</a></h4><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl apply -f </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">file.yaml</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>간단한 deploy는 스트림으로 생성하기도 합니다</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl apply -f -</span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="서비스-생성">서비스 생성<a href="#서비스-생성" class="hash-link" aria-label="Direct link to 서비스 생성" title="Direct link to 서비스 생성">​</a></h4><p>존재하는 deploy/pod를 서비스로 노출할 수 있습니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl expose </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">deploy/pod</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--name servicename</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--type ClusterIP</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">LoadBalancer</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">NodePort</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br></div></div></details><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="네트워크">네트워크<a href="#네트워크" class="hash-link" aria-label="Direct link to 네트워크" title="Direct link to 네트워크">​</a></h3><details markdown="1" open="" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="false"><summary>Details</summary><div><div class="collapsibleContent_i85q"><h4 class="anchor anchorWithStickyNavbar_LWe7" id="k8s-api-서비스-사용">k8s api 서비스 사용<a href="#k8s-api-서비스-사용" class="hash-link" aria-label="Direct link to k8s api 서비스 사용" title="Direct link to k8s api 서비스 사용">​</a></h4><p>프록시 실행 명령어 입니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/{URI}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="포트포워딩">포트포워딩<a href="#포트포워딩" class="hash-link" aria-label="Direct link to 포트포워딩" title="Direct link to 포트포워딩">​</a></h4><p>간단히 테스트 할 수 있어 자주 사용합니다</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl port-forward </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">resource/name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">port from:port to</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-n </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">namespace</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--address</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">ip</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 백그라운드에 계속 유지시키고 싶으면  </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">nohup</span><span class="token plain"> kubectl port-forward </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">args</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /dev/null </span><span class="token operator" style="color:#393A34">&amp;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="파일복사">파일복사<a href="#파일복사" class="hash-link" aria-label="Direct link to 파일복사" title="Direct link to 파일복사">​</a></h4><p>호스트 -&gt; 게스트</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">host/path</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">namespace</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">podname</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">guest/path</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-c </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">container</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>게스트 -&gt; 호스트</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">namespace</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">podname</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">guest/path</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-c </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">container</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">host/path</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br></div></div></details><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="문제-확인">문제 확인<a href="#문제-확인" class="hash-link" aria-label="Direct link to 문제 확인" title="Direct link to 문제 확인">​</a></h3><details markdown="1" open="" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="false"><summary>Details</summary><div><div class="collapsibleContent_i85q"><h4 class="anchor anchorWithStickyNavbar_LWe7" id="컨테이너-접속">컨테이너 접속<a href="#컨테이너-접속" class="hash-link" aria-label="Direct link to 컨테이너 접속" title="Direct link to 컨테이너 접속">​</a></h4><p>컨테이너를 직접 확인해봅시다</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl </span><span class="token builtin class-name">exec</span><span class="token plain"> -it </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">podname</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-n </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">namespace</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-c </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">container</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> -- /bin/sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>다른 명령어를 실행시켜도 됩니다</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl </span><span class="token builtin class-name">exec</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">resource</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> -- </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">command</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>쉘이 실행중이면 attach 명령어를 사용할 수 있습니다</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl attach </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">podname</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-n </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">namespace</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-c </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">container</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em><code>kubectl</code>을 사용하지 않고 해당 컨테이너가 실행되고 있는 노드에서 docker 명령어를 사용할 수도 있습니다</em>  </p><br></div></div></details><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="수정삭제">수정/삭제<a href="#수정삭제" class="hash-link" aria-label="Direct link to 수정/삭제" title="Direct link to 수정/삭제">​</a></h3><details markdown="1" open="" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="false"><summary>Details</summary><div><div class="collapsibleContent_i85q"><p>⚠<em>주의: 백업 수단을 만들고 진행하세요</em><br>
<!-- -->변경 전 <code>kubectl get {resource} -o yaml &gt; {resource}.yaml</code>등의 명령어로 백업하고 진행합니다.  </p><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="리소스-재시작">리소스 재시작<a href="#리소스-재시작" class="hash-link" aria-label="Direct link to 리소스 재시작" title="Direct link to 리소스 재시작">​</a></h4><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl rollout restart </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">resource</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-n </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">namespace</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>리소스 삭제 후 재생성</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">resource</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-n </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">namespace</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> -o yaml </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> kubectl replace --force -f-</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="리소스-롤백">리소스 롤백<a href="#리소스-롤백" class="hash-link" aria-label="Direct link to 리소스 롤백" title="Direct link to 리소스 롤백">​</a></h4><p><a href="https://jwher.github.io/k8s-tip-rollback" target="_blank" rel="noopener noreferrer">롤백</a>  </p><p>롤아웃 기록 확인</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl rollout </span><span class="token function" style="color:#d73a49">history</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">resource</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-n </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">namespace</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REVISION  CHANGE-CAUSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token plain">         </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>롤백</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl rollout undo </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">resource</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-n </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">namespace</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--to-revision</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">revision</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="리소스-강제-삭제">리소스 강제 삭제<a href="#리소스-강제-삭제" class="hash-link" aria-label="Direct link to 리소스 강제 삭제" title="Direct link to 리소스 강제 삭제">​</a></h4><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl delete </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">resource</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-n </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">namespace</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  --grace-period</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> -force</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl patch </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">resource</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-n </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">namespace</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> -p </span><span class="token string" style="color:#e3116c">'{"metadata": {"finalizers": null}}'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="모든-리소스-삭제">모든 리소스 삭제<a href="#모든-리소스-삭제" class="hash-link" aria-label="Direct link to 모든 리소스 삭제" title="Direct link to 모든 리소스 삭제">​</a></h4><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl delete all --all -n </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">namespace</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="편집">편집<a href="#편집" class="hash-link" aria-label="Direct link to 편집" title="Direct link to 편집">​</a></h4><p>시스템 기본 에디터를 사용합니다(확인 필요)</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl edit </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">resource</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-n </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">namespace</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>환경변수로 에디터 선택이 가능합니다</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token assign-left variable" style="color:#36acaa">KUBE_EDITOR</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"nano"</span><span class="token plain"> kubectl edit </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">resource</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-n </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">namespace</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="노드-라벨-설정">노드 라벨 설정<a href="#노드-라벨-설정" class="hash-link" aria-label="Direct link to 노드 라벨 설정" title="Direct link to 노드 라벨 설정">​</a></h4><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl label nodes </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">key</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="노드-지정">노드 지정<a href="#노드-지정" class="hash-link" aria-label="Direct link to 노드 지정" title="Direct link to 노드 지정">​</a></h4><p><a href="https://jwher.github.io/k8s-tip-nodeselector" target="_blank" rel="noopener noreferrer">노드셀렉터</a></p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl edit </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">resource</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-n </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">namespace</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#spec&gt;nodeSelector&gt;key=value 값을 설정합니다.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="노드-제거">노드 제거<a href="#노드-제거" class="hash-link" aria-label="Direct link to 노드 제거" title="Direct link to 노드 제거">​</a></h4><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl drain </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">nodename</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> --delete-local-data --force --ignore-daemonsets</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 제거가 잘 되면 status가 Evit로 표시됩니다</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br></div></div></details><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="응용">응용<a href="#응용" class="hash-link" aria-label="Direct link to 응용" title="Direct link to 응용">​</a></h3><details markdown="1" open="" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="false"><summary>Details</summary><div><div class="collapsibleContent_i85q"><h4 class="anchor anchorWithStickyNavbar_LWe7" id="running-상태가-아닌-pod-삭제">Running 상태가 아닌 pod 삭제<a href="#running-상태가-아닌-pod-삭제" class="hash-link" aria-label="Direct link to Running 상태가 아닌 pod 삭제" title="Direct link to Running 상태가 아닌 pod 삭제">​</a></h4><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl delete pod </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-n </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">namespace</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">kubectl get pod </span><span class="token variable punctuation" style="color:#393A34">[</span><span class="token variable" style="color:#36acaa">-n </span><span class="token variable punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">namespace</span><span class="token variable punctuation" style="color:#393A34">}</span><span class="token variable punctuation" style="color:#393A34">]</span><span class="token variable" style="color:#36acaa"> --field-selector</span><span class="token variable operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">status.phase</span><span class="token variable operator" style="color:#393A34">!=</span><span class="token variable" style="color:#36acaa">Running -o</span><span class="token variable operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">custom-columns</span><span class="token variable operator" style="color:#393A34">=</span><span class="token variable string" style="color:#e3116c">''</span><span class="token variable" style="color:#36acaa">:metadata.name</span><span class="token variable" style="color:#36acaa">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br></div></div></details><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p>개념 이해에 도움이 되는 글입니다<br>
<a href="/posts/welcome-to-kubernetes">쿠버네티스 개념</a><br>
<a href="/posts/kubernetes-architecture">쿠버네티스 아키텍처</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h2><p><a href="https://kubernetes.io/ko/docs/tasks/tools/install-kubectl-linux/#install-using-native-package-management" target="_blank" rel="noopener noreferrer">[공식]리눅스에 kubectl 설치 및 설정</a><br>
<a href="https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands" target="_blank" rel="noopener noreferrer">[공식]kubectl-commands</a><br>
<a href="https://kubernetes.io/ko/docs/reference/kubectl/cheatsheet/" target="_blank" rel="noopener noreferrer">[공식]kubectl 치트 시트</a></p>]]></content:encoded>
            <category>tech</category>
            <category>kubernetes</category>
        </item>
        <item>
            <title><![CDATA[나에게 필요한 연재에 대해]]></title>
            <link>https://jwher.github.io/posts/blog-essay</link>
            <guid>https://jwher.github.io/posts/blog-essay</guid>
            <pubDate>Thu, 27 May 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[블로그 생각]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="pen" src="/assets/images/pen-f06decce87d949b992ebd56c8e3fc66e.svg" width="441" height="905" class="img_ev3q"><br>
<em>'나에게 필요한' 연재에 대해</em>  </p><h1>목차</h1><ul><li>Install 시리즈</li><li>앞으로 추가할 컨텐츠</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="나에게-필요한-연재">나에게 필요한 연재<a href="#나에게-필요한-연재" class="hash-link" aria-label="Direct link to 나에게 필요한 연재" title="Direct link to 나에게 필요한 연재">​</a></h2><p>나에게 필요한 연재는 공학적 관점에서 작성한 글입니다.<br>
<!-- -->하지만 기본적인 개념 설명도 <strong>혼재</strong>되어 있습니다. 이는 제가 몰랐던 것을 적을 때도 있고, 설명을 쉽게 하기위한 내용도 있기 때문입니다.  </p><p>나에게 필요한 연재는 <em>설치</em>만 다룬 문서도 있지만, <em>개념</em>이 너무 많이 들어가 내용이 길고 난해해진 문서가 있습니다.  </p><p>국기 게양에 대한 글이 있다고 가정해 봅시다</p><blockquote><p>국기 게양은 이렇게 한다.</p><p>성리학(性理學)과 이기론(異氣論)을 아는가?<br>
<!-- -->세상의 규칙인 리(理, 과학/수학)과 실제 존재하는 기(氣, 공학)으로 만물은 존재한다<br>
<!-- -->이치가 없이 실제하지 않고 실제하지 않는 이치는 무(無)이다.<br>
<!-- -->동서고금의 철학은 전부 리와 기의 작용을 두고 설명한 것이다.</p><p>대한민국의 국기도 만물의 이치인 태극(太極)과 자연에 실제하는 4괘(卦)로 이루어져 있다.</p></blockquote><p>이 글을 읽는 사람은 대부분 이런 생각을 할겁니다.</p><blockquote><p><em>아니.. 뭐 어쩌라고...</em></p></blockquote><p>두번째로 가장 큰 문제는 너무 <strong><a href="/posts/install-kubeflow/">긴 글</a></strong> 이 있습니다.
개념 설명이 함께 있어 긴 경우와, 단순 명령어 나열로 길어진 글을 개선하려고 합니다.  </p><p>세번째로 같은 <strong>규칙</strong>으로 쓰이지 않았습니다. 물론 많이 수정했고 템플릿을 사용해 작성하고 있으나, 아직도 몇가지 규칙은
지켜지지 않고 있습니다다.</p><p>... 물론 기술블로그로써 가장 큰 문제는 <del>글이 적다</del>는 것입니다. 😢</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="앞으로-추가할-컨텐츠">앞으로 추가할 컨텐츠<a href="#앞으로-추가할-컨텐츠" class="hash-link" aria-label="Direct link to 앞으로 추가할 컨텐츠" title="Direct link to 앞으로 추가할 컨텐츠">​</a></h2><ul class="contains-task-list containsTaskList_mC6p"><li class="task-list-item"><input type="checkbox" checked="" disabled=""> <!-- -->링크 명료화  </li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->번역용어/어투 통일  </li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->과학/공학 문서 분리   </li><li class="task-list-item"><input type="checkbox" checked="" disabled=""> <!-- -->Timezone 에러 수정  </li><li class="task-list-item"><input type="checkbox" checked="" disabled=""> <!-- -->Disqus 광고 해결</li></ul><ul class="contains-task-list containsTaskList_mC6p"><li class="task-list-item"><input type="checkbox" checked="" disabled=""> <!-- -->kubernetes architecture  </li><li class="task-list-item"><input type="checkbox" checked="" disabled=""> <!-- -->kubernetes usage  </li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->istio  </li><li class="task-list-item"><input type="checkbox" checked="" disabled=""> <!-- -->nuclio  </li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->hadoop  </li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Deep learning 개념 시리즈    </li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->NLP(BERT)  </li></ul><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h2><p><a href="https://github.com/jwher" target="_blank" rel="noopener noreferrer">허정원 깃허브</a></p>]]></content:encoded>
            <category>blog</category>
            <category>update</category>
        </item>
        <item>
            <title><![CDATA[Alphapose 논문 리뷰와 사용]]></title>
            <link>https://jwher.github.io/posts/alphapose</link>
            <guid>https://jwher.github.io/posts/alphapose</guid>
            <pubDate>Mon, 24 May 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Alphapose 논문 리뷰와 사용]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="alphapose-logo" src="/assets/images/alphapose-logo-51aa3bc8632dee0ded1f95a8b9bd51d5.jpg" width="832" height="563" class="img_ev3q"><br>
<em>Regional Multi-Person pose Estimation</em>  </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="computer-vision">Computer Vision<a href="#computer-vision" class="hash-link" aria-label="Direct link to Computer Vision" title="Direct link to Computer Vision">​</a></h2><p>컴퓨터 비전은 기계의 시각적인 부분을 연구합니다. 범위를 좁혀 보면, 사람의 시각을 사용해야 하는 일을
컴퓨터가 수행할 수 있도록 만드는 것을 목표로 하고 있습니다.  </p><p>한국에서 인공지능이 대중적인 관심을 끌게 된 것은 단연 <a href="https://ko.wikipedia.org/wiki/%EC%95%8C%ED%8C%8C%EA%B3%A0" target="_blank" rel="noopener noreferrer">Alpha GO</a>
이후겠지만, 학자들이 다시 인공지능(신경망)에 관심을 갖게 된 것은 컴퓨터 비전의 <a href="https://en.wikipedia.org/wiki/AlexNet" target="_blank" rel="noopener noreferrer">AlexNet</a>입니다.  </p><p><img loading="lazy" alt="alexnet" src="/assets/images/alexnet-2cae39c7c6aae763b6e1c1ded716b119.jpg" width="248" height="203" class="img_ev3q"><br>
<em>AlexNet 신경망에 대해 공부할때 한번씩 봤을 이미지</em>  </p><p>컴퓨터 비전은 다시 하위에 많은 영역이 있습니다. 예를 들어 Alex Net은 Object Detection에 해당합니다.
여기에서 다루는 Alphapose는 Pose Estimation을 위한 Keypoint Detection에 해당합니다.
(Pose를 '자세'로 번역할 수 있겠지만, 용어의 혼동을 피해 '포즈'라고 부르겠습니다)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="체험해보자">체험해보자<a href="#체험해보자" class="hash-link" aria-label="Direct link to 체험해보자" title="Direct link to 체험해보자">​</a></h3><p>컴퓨터 비전을 처음 접하는 사람이라면 감이 잘 안잡힐 수 있습니다.<br>
<!-- -->구글 <a href="https://experiments.withgoogle.com/collection/ai/move-mirror/view" target="_blank" rel="noopener noreferrer">Move Mirror</a> 링크를 통해 Pose Estimation이 뭔지 브라우저에서 체험해 볼 수 있습니다.
<a href="https://experiments.withgoogle.com/collection/ai/move-mirror/view" target="_blank" rel="noopener noreferrer">Move Mirror</a>는 webcam으로 들어온 사진을 <a href="https://github.com/tensorflow/tfjs" target="_blank" rel="noopener noreferrer">Javascript library</a>로 포즈를 인식하고,
가장 유사한 사진을 보여줍니다. </p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="alphapose">Alphapose<a href="#alphapose" class="hash-link" aria-label="Direct link to Alphapose" title="Direct link to Alphapose">​</a></h2><p><em>왜 Alphapose인데?</em></p><p><img loading="lazy" alt="alphapose_17" src="/assets/images/alphapose_17-887138a3b554288e634662685cb177c9.gif" width="320" height="180" class="img_ev3q"></p><p>딥러닝 모델에서 <em>속도</em>와 <em>정확도</em>는 Trade Off 관계입니다. 모델이 커지고 레이어가 많아질수록 정확해지지만, 속도는 느려지죠. 하지만 대부분 출판되는 논문은 <em>정확도</em>에 초점을 두고 있습니다.
하지만, 현실에서 등장하는 vision 문제는, 동영상과 실시간 스트리밍을 처리해야 되고 <em>속도</em> 에 중점을 준 모델이 필요합니다.</p><p><a href="https://openaccess.thecvf.com/CVPR2017" target="_blank" rel="noopener noreferrer">CVPR 2017</a> Carnegie Mellon University에서 <a href="https://github.com/CMU-Perceptual-Computing-Lab/openpose" target="_blank" rel="noopener noreferrer">OpenPose</a>를 발표했습니다.
<a href="https://github.com/MVIG-SJTU/AlphaPose" target="_blank" rel="noopener noreferrer">Alphapose</a>는 조금 뒤인 <a href="https://openaccess.thecvf.com/ICCV2017" target="_blank" rel="noopener noreferrer">ICCV 2017</a>에 나왔고, OpenPose보다 뛰어난 성능을 보여줍니다. Alphapose는 pytorch 기반으로 작성되었습니다.
마침 업무에서도 pytorch 기반 모델로 통일하기로 했고, 상업용 라이선스도 alphapose가 더 싸 선택하게 되었습니다.</p><p>둘 다 현재(2021) 기준으로 굉장히 오래되었으나, Alphapose는 <a href="http://human-pose.mpi-inf.mpg.de/" target="_blank" rel="noopener noreferrer">MPII</a> 데이터 셋에서 아직도 1위를 기록하고 있습니다. <a href="https://cocodataset.org/#home" target="_blank" rel="noopener noreferrer">COCO</a> 데이터 셋 에서도 pytorch 기반 모델 중에 2번째로 뛰어난 순위를 기록하고 있습니다.<br>
<!-- -->(사용해 보진 않았으나 2019년에는 MXNet 버전도 나왔습니다)  </p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="왜-빠른데">왜 빠른데?<a href="#왜-빠른데" class="hash-link" aria-label="Direct link to 왜 빠른데?" title="Direct link to 왜 빠른데?">​</a></h3><p>Alphapose는 backbone으로 <a href="https://pjreddie.com/media/files/papers/YOLOv3.pdf" target="_blank" rel="noopener noreferrer">YOLOv3</a>을 사용합니다(github master branch 기준).<br>
<img loading="lazy" alt="alphapose-yolo" src="/assets/images/alphapose-yolo-c4e819ba87490a1aeee13722c16d828e.png" width="1006" height="625" class="img_ev3q">
<em>0.5 IOU에서 속도/정확도 tradeoff</em></p><p>논문에서는 ResNet backbone인 RetinaNet 보다 3배 빠른 <em>속도</em>를 보였다고 소개합니다.
<em>정확도</em>에서도 RetinaNet보다 오히려 조금 나음을 보여주고 있습니다.
현재(21.05) 최신 모델인 HRNet과 성능을 비교해 보지 못해 가장 좋은지는 모르겠습니다만, 상당히 빠르고 정확함을 알 수 있습니다.
(YOLO의 backbone인 Darknet은 다른 포스트에서 다루겠습니다)</p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="paper">Paper<a href="#paper" class="hash-link" aria-label="Direct link to Paper" title="Direct link to Paper">​</a></h3><p><a href="https://openaccess.thecvf.com/content_iccv_2017/html/Fang_RMPE_Regional_Multi-Person_ICCV_2017_paper.html" target="_blank" rel="noopener noreferrer">원문</a></p><p>최신 Human detector의 등장으로 Regional Multi-Person pose Estimation의 성능은 향상되었으나,
localization과 recognition의 작은 오류는 피할 수 없습니다.
Alphapose는 two-step 모델(bounding box-&gt;pose estimation)로써 bounding box의 정확도가 품질을 좌우합니다.
따라서 이 논문은 부정확한 bbx(bounding box)를 줄이기 위해 세 항목을 제안합니다.</p><ul><li><a href="#sstn">SSTN</a>: Symmetric Spatial Transformer Network</li><li><a href="#nms">NMS</a>: Parametric Pose Non-Maximum Suppression</li><li><a href="#pgpg">PGPG</a>: Pose-Guided Proposals Generator</li></ul><p>이 방법으로 부정확하고 중첩된 bbox를 줄여 MPII 데이터 셋에서 76.7 mAP 성능을 기록했습니다.</p><p><img loading="lazy" alt="alphapose-architecture" src="/assets/images/alphapose-architecture-bc8c438c49e5927a849e5720fccdbe89.png" width="742" height="234" class="img_ev3q"><br>
<em>RMPE 프레임워크</em></p><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sstn">SSTN<a href="#sstn" class="hash-link" aria-label="Direct link to SSTN" title="Direct link to SSTN">​</a></h4><p><img loading="lazy" alt="sstn" src="/assets/images/alphapose-fig4-1b30a540728df708f1232d2ae87f5a8f.png" width="602" height="239" class="img_ev3q"></p><p>STN(Spatial Transformer Network)이 좋은 사람 영역을 추출하도록, 학습 단계에서 Parallel SPPE(Single Person Pose Estimator)를 둡니다. 하지만 여기서 사용된 SPPE는 SDTN이 빠져있습니다.
학습할 때 parallel SPPE의 가중치(weight)를 고정하고 직접 참(truth) 포즈와 비교해 STN을 업데이트 합니다.
이때, 정확한 위치(center-located)에 있지 않으면 STN에 큰 오류가 전파되어 성능이 향상됩니다.</p><p>성능 향상치는 <a href="#ablation-studies">ablation studies의 a</a>에서 비교하고 있습니다. </p><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="nms">NMS<a href="#nms" class="hash-link" aria-label="Direct link to NMS" title="Direct link to NMS">​</a></h4><p>가장 정확한(confident) 포즈를 레퍼런스로 선택합니다.
그리고 너무 가까운 포즈는 elimination criterion(pose similarity)을 사용해 지웁니다.
이때 포즈 거리(pose distance)를 지표(metric)로 사용해 계산하게 됩니다.</p><p><img loading="lazy" alt="ksim" src="/assets/images/ksim-a2e9d58f617b446eba26ca2c05b30d8a.png" width="580" height="154" class="img_ev3q">
<img loading="lazy" alt="hsim" src="/assets/images/hsim-9d4efb7faf4a8e1458d37d173a800552.png" width="518" height="102" class="img_ev3q">
<img loading="lazy" alt="distance" src="/assets/images/distance-934b23dc6ef4a5ae60fceb650c86abe0.png" width="632" height="58" class="img_ev3q"></p><p>포즈i와 포즈j간 distance function은, 포즈간 몇개의 관절(joint)이 일치하는지 의마하는 soft matching function <strong>Ksim</strong>과, 부분간의 공간거리인 <strong>Hsim</strong>의 합으로 이루어집니다.
여기서 λ는 두 거리간 weight balancing 입니다.</p><p>성능 향상치는 <a href="#ablation-studies">ablation studies의 c</a>에서 비교하고 있습니다. </p><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="pgpg">PGPG<a href="#pgpg" class="hash-link" aria-label="Direct link to PGPG" title="Direct link to PGPG">​</a></h4><p>two-stage 모델에서 데이터 augmentation은 SSTN+SSPE가 불완전한 사람의 의도에 적응하게 만들어야 합니다.
정답(ground truth) bbx와 감지된(detected) bbx의 offset은 포즈마다 다릅니다. 이 분포를 모델링 할 수 있으면 사람이 만든(generated by the human detector) 것과 비슷한 샘플을 많이 얻을 수 있습니다.</p><p>성능 향상치는 <a href="#ablation-studies">ablation studies의 b</a>에서 비교합니다.</p><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ablation-studies">Ablation Studies<a href="#ablation-studies" class="hash-link" aria-label="Direct link to Ablation Studies" title="Direct link to Ablation Studies">​</a></h4><p><img loading="lazy" alt="ablation" src="/assets/images/alphapose-ablation-4c669e36905bb29a9a54078fe08717c9.png" width="1012" height="337" class="img_ev3q"><br>
<em>w/o는 without(x)의 의미입니다</em></p><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="failure-cases">Failure cases<a href="#failure-cases" class="hash-link" aria-label="Direct link to Failure cases" title="Direct link to Failure cases">​</a></h4><p><img loading="lazy" alt="failure" src="/assets/images/alphapose-failure-dad4dd5a970474d923e56c4813d2c7c3.png" width="602" height="86" class="img_ev3q">  </p><ol><li>SPPE는 희소하게 발생하는 특이한 자세에서 실패합니다</li><li>너무 겹치는 사람을 구분하지 못합니다</li><li>사람 인식(detect)을 실패하면 찾을 수 없습니다</li><li>반대로 사람과 비슷한 사물을 오인식 할 수 있습니다</li></ol><br><p>리뷰를 하고 보니 안타깝게도 paper에는 속도 관련 이야기가 없었습니다.
정확도는 높아졌으나, SPPE를 부착했을 때 어느정도 속도가 나오는지 정량적으로 측정해 보고 싶습니다.
기회가 되면 속도를 측정해 비교해 보고 싶습니다. </p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="사용하기">사용하기<a href="#사용하기" class="hash-link" aria-label="Direct link to 사용하기" title="Direct link to 사용하기">​</a></h2><p><img loading="lazy" alt="alphapose" src="/assets/images/alphapose-error-07ccf41a4267d1fda42d9559b3aa1929.gif" width="1280" height="720" class="img_ev3q"></p><ul><li>cuda 11.0</li><li>cudnn 8.0</li><li>pytorch 1.7.0</li></ul><p>도커 이미지로 빌드하여 docker hub에 등록하였습니다. 간단하게 pull 해서 사용할 수 있습니다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> pull jwher/alphapose:v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ conda activate alphapose</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>자세한 demo inference 코드는 나중에 작성하겠습니다...</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h2><p><a href="https://openaccess.thecvf.com/menu" target="_blank" rel="noopener noreferrer">Computer Vision Foundation</a><br>
<a href="https://paperswithcode.com/area/computer-vision" target="_blank" rel="noopener noreferrer">Paper with codes</a><br>
<a href="https://ko.wikipedia.org/wiki/%EC%BB%B4%ED%93%A8%ED%84%B0_%EB%B9%84%EC%A0%84" target="_blank" rel="noopener noreferrer">[위키]컴퓨터_비전</a></p>]]></content:encoded>
            <category>paper</category>
            <category>ml</category>
        </item>
        <item>
            <title><![CDATA[지킬 블로그 업데이트]]></title>
            <link>https://jwher.github.io/posts/update-blog</link>
            <guid>https://jwher.github.io/posts/update-blog</guid>
            <pubDate>Sun, 23 May 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Update Blog]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="jekyll" src="/assets/images/jekyll-69d9f29eaaafbd806c47d69c7a95b7be.png" width="1617" height="783" class="img_ev3q"><br>
<em>Jekyll 블로그 사용하기</em>  </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="jekyll">Jekyll<a href="#jekyll" class="hash-link" aria-label="Direct link to Jekyll" title="Direct link to Jekyll">​</a></h2><p><em>지킬 박사와 하이드씨를 읽어 본 적이 있나요?</em></p><p>지킬은 소설속의 박사로 선과 악을 분리하는 약을 만듭니다.
하지만, 여기에서 다루는 Jekyll과 아직까지는 어떤 연관성도 찾지 못했습니다...  </p><p>Jekyll은 <a href="https://ko.wikipedia.org/wiki/%EB%A3%A8%EB%B9%84_%EC%98%A8_%EB%A0%88%EC%9D%BC%EC%A6%88" target="_blank" rel="noopener noreferrer">Ruby on Rails</a>
프레임워크에서 동작하는 정적 사이트 라이브러리입니다. 따라서 Ruby 특징을 갖추고 있습니다.  </p><p>공식 사이트에선 다음과 같은 장점을 소개하고 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="심플함">심플함<a href="#심플함" class="hash-link" aria-label="Direct link to 심플함" title="Direct link to 심플함">​</a></h3><p>ROR 프레임워크를 사용하기 때문에 애자일하게(빠르게) 개발할 수 있다는 장점을 지닙니다.  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="정적">정적<a href="#정적" class="hash-link" aria-label="Direct link to 정적" title="Direct link to 정적">​</a></h3><p>마크다운(.md), Liquid, HTML&amp;CSS를 넣으면 바로 사이트를 완성할 수 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="블로그-지향적">블로그 지향적<a href="#블로그-지향적" class="hash-link" aria-label="Direct link to 블로그 지향적" title="Direct link to 블로그 지향적">​</a></h3><p>고유주소, 카테고리, 페이지, 포스트, 사용자 레이아웃 등 기능이 이미 포함되어 있습니다.  </p><p>Ruby로 직접 개발한다면 다음과 같은 명령어를 사용할 수 있습니다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Ruby gem을 통해 설치합니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ gem </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> jekyll bundler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ jekyll new </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">blog</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">cd</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">blog</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ bundle </span><span class="token builtin class-name">exec</span><span class="token plain"> jekyll serve</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># http://localhost:4000 에서 확인할 수 있습니다</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="직접-해보자">직접 해보자<a href="#직접-해보자" class="hash-link" aria-label="Direct link to 직접 해보자" title="Direct link to 직접 해보자">​</a></h3><p><em>3초면 될껄요?</em></p><p>사실 위와 같은 장점과 함께 Github Pages로 <strong>무료 호스팅</strong> 이 된다는 점이
Jekyll 선택에 가장 큰 요소였습니다.  </p><p>최근엔 한국에서도 워드프레스를 많이 사용하고, 네이버 블로그 등 플랫폼은 많으나 좀더 자유로운 환경을 찾았습니다.<br>
<!-- -->직접 개발하기엔 시간과 비용이 부족했고, Jekyll의 장점이 필요했습니다.</p><p>Ruby에 대한 이해가 부족했지만, 서버 호스팅, 도메인 비용과 웹 사이트를 직접 개발한다고 생각하면...<br>
<!-- -->Ruby 지식 부족으로 인한 시행착오를 겪었지만 2021.05.23일 블로그를 리뉴얼했습니다.   </p><p>소개는 이만 줄이고 만들어봅시다.<br>
<em>(github 아이디가 없지는 않겠지...?)</em></p><ol><li><p><a href="https://github.com/topics/jekyll" target="_blank" rel="noopener noreferrer">깃헙 토픽</a> 에 가서 마음에 드는 테마를 고릅니다.
<img loading="lazy" alt="jekyll github" src="/assets/images/jekyll-github-7e754b4a188508e9a18e169b1940d05b.png" width="608" height="860" class="img_ev3q"><br>
<em>다양한 테마를 바로 사용할 수 있습니다</em></p></li><li><p>마음에 드는 테마를 fork 합니다.
<img loading="lazy" alt="jekyll install steps" src="/assets/images/jekyll-install-steps-25a5ec8304282bf758b0bbefa55857ee.gif" width="1090" height="640" class="img_ev3q">
<em>본 블로그에 사용한 beautiful-jekyll</em></p></li><li><p>Settings에서 레포지토리를 Rename 합니다.
Github Pages 호스팅을 위해 {yourusername}.github.io로 이름이 바뀌어야 합니다.</p></li><li><p>레포지토리의 _config.yml을 수정합니다.
각각의 테마마다 형식이 다릅니다. 테마별 설명대로 수정해줍니다.</p></li></ol><br><p>자! 이제 {yourusername}.github.io에 접속하면 나만의 블로그를 찾을 수 있습니다.<br>
<!-- -->글을 추가하려면 테마마다 다르겠지만 _post 밑에 마크다운<code>.md</code> 파일을 작성해 주면 됩니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="disqus를-사용해-댓글-만들어-주기">Disqus를 사용해 댓글 만들어 주기<a href="#disqus를-사용해-댓글-만들어-주기" class="hash-link" aria-label="Direct link to Disqus를 사용해 댓글 만들어 주기" title="Direct link to Disqus를 사용해 댓글 만들어 주기">​</a></h2><p><em>정적이네...</em></p><p>Jekyll의 단점이라면, 정적 사이트로써 블로그 접속자와 소통이 어렵다는 것입니다.<br>
<!-- -->시간을 쪼개서 포스팅을 하다 보니 자세하게 글을 작성하지 못하는데,
다른 사람에겐 어떤 부분이 어렵고 설명이 필요한지 몰라 답답했습니다.</p><p>이런 단점을 없에주는, 소셜 계정 댓글 서비스인 Disqus를 사용법을 소개합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="직접-해-보자">직접 해 보자<a href="#직접-해-보자" class="hash-link" aria-label="Direct link to 직접 해 보자" title="Direct link to 직접 해 보자">​</a></h3><ol><li><a href="https://disqus.com/" target="_blank" rel="noopener noreferrer">https://disqus.com/</a> 에 가서 구글계정의 소셜로그인으로 가입합니다.</li><li>Get Started 버튼을 누릅니다.</li><li>I want to install Disqus on my site를 선택합니다.</li><li>설정 페이지가 나오면 Website Name을 지정해 주고 Create Site 버튼을 누릅니다.<br><em>Website Name을 기억하자</em>  </li><li>Let's get started를 누르면 What platform is your site on?에서 Jekyll을 선택합니다.  </li><li>설정을 마치고 Configure 버튼을 누릅니다.<br><em>Setup Complete! 페이지가 나오면 완료된것입니다</em>  </li><li>이제 {yourusername}.github.io 저장소 안에 있는 _config.yaml 파일을 열어서 편집합니다.<br>disqus: 구문을 찾아서 다음과 같은 식으로 수정합니다.<br>disqus: "Website Name"<br><em>혹시나 Disqus를 지원하지 않는 테마이면...</em>  </li><li>{yourusername}.github.io 페이지를 확인헤서 잘 반영되었는지 봅니다.<br>테마에 따라 post header에 <code>comments: true</code> 등을 추가해야 할 수 있습니다.</li></ol><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="search-console-사용하기">Search console 사용하기<a href="#search-console-사용하기" class="hash-link" aria-label="Direct link to Search console 사용하기" title="Direct link to Search console 사용하기">​</a></h2><p><em>아무도 주소를 모르는 집</em></p><p>블로그 게시글에 방문하려면 검색엔진에 등록이 되어야 합니다.
안타깝게도 이는 자동으로 이루어지지 않습니다.
<strong>구글</strong>에 등록하기 위해선 <a href="https://search.google.com/search-console" target="_blank" rel="noopener noreferrer">search console</a>을 이용해야 합니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="여기까지-오다니">여기까지 오다니<a href="#여기까지-오다니" class="hash-link" aria-label="Direct link to 여기까지 오다니" title="Direct link to 여기까지 오다니">​</a></h2><p>어찌어찌 해서 내가 원하는 blog를 작성할 수 있었습니다.<br>
<!-- -->다른 분들이 먼저 좋은 귿을 작성해 주셔서 감사합니다:)  </p><p>22년 현재는 <a href="/posts/first-post-with-docusaurus">다른 프레임워크</a>를 사용하고 있습니다!</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h2><p><a href="http://jekyllrb-ko.github.io/" target="_blank" rel="noopener noreferrer">[공식]Jekyll</a><br>
<a href="https://dymaxionkim.github.io/beautiful-jekyll/2017-01-10-make-blog/" target="_blank" rel="noopener noreferrer">Github에 Beautiful-jekyll을 구축하는 순서 설명</a></p>]]></content:encoded>
            <category>blog</category>
            <category>update</category>
        </item>
        <item>
            <title><![CDATA[타르(tar) 파일 설치하기]]></title>
            <link>https://jwher.github.io/posts/install-tar.gz</link>
            <guid>https://jwher.github.io/posts/install-tar.gz</guid>
            <pubDate>Mon, 10 May 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Install Tar.Gz]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="gnuzip" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAe1BMVEX///8AAADk5ORbW1vIyMiXl5fh4eHU1NRJSUmTk5NTU1OAgIDOzs719fW3t7fc3Nzr6+urq6t6enqkpKTv7+9wcHAhISG9vb34+PiGhoadnZ1AQEAvLy8oKCgICAgcHBwTExNpaWlCQkI2NjaLi4tYWFhOTk5kZGQ6OjowAzlEAAAH8ElEQVR4nO2da2OqPAzHreL9ioqoZ246d5zf/xM+29mjktJCeoEE1/+7DaH9QWnaNA2tFkJpcngV9WmQYirlUdFLjXQ/GtcKGNfO96VujYATCkAhZvUR1vkCZhXVBbgiAhRiXhPhiIxws64FcP1GRihetnUQtm/FvV0GdQggXmol7NRRWmsLn+KyhiJrJpxKDbUGs0hMKOLKi6QmrN4skhOKXsVF0hMeKzaL9ITiPK20SAaEYlRpkRwIRVJlkSwIxUeFRfIgrNIsMiGs0CxyIazOLLIhFIuKiuRDeK3ILPIhrMosMiIUp0qK5ERYjVlkRViJWeRFWIVZZEZYgROVG+HRu1nkRiiuvp2o7Ai9O1H5Efo2iwwJxdBrkRwJ/ZpFloRezSJPQp9mkSmhR7PIlFCcvZlFroT+zCJbQm9OVL6EvswiY0JPZpEzofAS/saa0ItZ5E0oPKwtMic8uDtRmRN6cKJyJ3Q3i+wJnZ2o/Aldp1INIBy4FdkAQsdwlJoJWxaEou1UYt2El6cn7D89YSt6esKvxzhDKX1vLCFWnUCIUyAkVCBEKhASKhAiFQgJFQiRCoSECoRIBUJCBUKkAiGhAiFSiwYQ2kUPLdJV91u722XO+y4v7c+3qu3+/b1KDUi3e7jzvyka7JGRUvGGuqrW2qAiUJbU1XQSIg3DJ3UdHfVZBvhBXUNnlSx7z6nr50HFcUTv5Rdgr/ciQKK0V541eeq38FtFb+If6sp50R894LS5tj6rjT7arV1+diOkn230qKvmSfrN+4Hwode3w8vmWGElneRGeE320by9WE+308Wi3Zusxp8y6aA7xOmgOKELc4meP5fDeJZG/fm812u3e735JO0m18oIk5mqm9r2Vn+zv9ppC5D0rjohc6nZVjfh2/bHFRCOimLjp/vHD9H5Vf+oTshkaiwanLRaKbit7oRJSWB8Jl6rJsJWa6bpCWwIR6WB/10CwtY08UWIyAibefnrI9R4JIwJr4gY1WzsK5rwXXWCGaES0ZQwwXiwsjGFaMKr6gRDQtVswZAQF++/y5yBJZwoTzAlVISkmhEiNzRknQNIe/hIVoojbE+i2SzKj6qzN9eCULlXs52uhrvxbthdTdo/7yiYlSy/RjsqSa/zyYjw4UFKpP0HCyHLhFCRrjiCY6bjaPhVkTR/b/KCz3b2OGBGKEQH1ioXHG5CmBvGxKoU9G97jJf1AHqsdeaIKaE0x50JSQaE8ks4P8i/MFAfXCqbRtuYUFoKcyCUxtlO6cvhvl2Qrd+cEN4uOW88nlDqFPfCQWdwKegvsSAE/jR5CI4nhI8w19yNBEuFy3cWhGB5Qh7XoAnhOo6bwx8ue0mtwYIQOLZli4gmhHanIxwEewb5ZlkQgh1rJ0tCmNfezeEPDZjcI1sQgkxD8moLlhCmKypxjRQLmtXcMMuCEGRrlz9vgCUEk0KbnYF3QbOabw0WhABCvh6WEEzrXTpSOALZ5kdF5oTgnuVmF1hCcOjkQAh7LMWU1ZjwCO5Zzk4jCTfgkLRmkyqkGxDAcYNq+50p4QvsuHLLukjCv9kjW+llVp2tMZgH8CPl+2xGeJTytuTLRRKCpi7PwVRna/Z/Qi/dyZawPfh2HR7fdzPZqZK/JJIQNC75PuEJ9+A36g7LyYuhaDpIQlA1ufZoQugjyE/H3QkVwRVIwlX2iPUzhG4VzVZtF0KVTxhJCEYN8uowlhAOuHXzSwfCrup6Nu/hVFohQBLCAbfWpW5PqF6BsulL5cEyjlBK6KCN6bQlbGtaPZIQxmycbAjhgFvZoBwIp9oLIgmP4JDUzY9+dMm+rDlC9AzahnAx1F8POy4FTUzTz2chZMI3ePGCWB1Dwu06HRZGMWMJ4fXV88MiQug9zPvezQgXu32cRvH+Y1m2io8nhKMRdcKKAkIYXVboIrCYH3ohlJYslO1CTwhjILeF8WRUhNJ4RPkQ9YRwwK1ejSYnXMGjqvmflhA28ZKFGzLCF+mwYvlFRwjTU5U5ecgIcytP+bamI4T7V8pWpugI5YeYHzprCGHsRuk3k+kI80lQ59LjUBNCT6tmsMCDUJE+c55k17LUhNDPUL6JipJQmVuyH49Po8Gok3QnWZY7ITrP3635UhKaJF68EeI/jM6CUDJsCEKDDxXzIJTtfikhyn3EihAdEPs/ocG2XC6EcvhKCaHBV+7YEKKiL+91aCahuCIswKTRhF9j6biwrfZWndLLMycU4tiJladu+/FnZtXToqfRxepn/SAmu12c9ltchnE6/1mfXPf6UfwxkqPJx9jdFsPubZCr22+xfPy/W7T7wCthIxQIm69A2Hz9ZsJyf0MzpM/jMnUJcuajou962KRE56eir105xTmzUZFb4jm6msKxf/EKSjNUvI/pGXrTkoxYqO09rFXqj2h6Z4Pwfrptq6AWzqPktO+AVB3sl9j6O3knURP0uuuXoz206EffujfZwSTipcl9SWv27+++5cdXnz/3ZSAkVCBEKhASKhAiFQgJFQiRCoSECoRIBUJCBUKkAiGhAiFSgZBQgRCpQEioQIhUICRUIEQqEBIqECIVCAkVCJEKhIQKhEgFQkIFQqR+EeFl3uel+cUzIWMFwt9OuJaTEPPTG26nuVaj8iKIpUzdYSCnjwXUInTOB524Rwu/ugKy//iqQRoOnUpzIJEK9SHuMkWqD6/w0As62U+J0uTA73V8PSRFH/O76z8f2KLfUNqEcQAAAABJRU5ErkJggg==" width="225" height="225" class="img_ev3q"><br>
<em>가끔은 예측하지 못한 결과에 대비해야 할 수도...</em>  </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="gnu-zip">GNU Zip<a href="#gnu-zip" class="hash-link" aria-label="Direct link to GNU Zip" title="Direct link to GNU Zip">​</a></h2><p><em>zip은 많이 봤는데...</em></p><p>줄여서 gzip, .gz 포맷으로 사용되는 free software입니다.<br>
<!-- -->1992년 10월 31일에 처음 공개되었으며
Jean-loup Gailly와 Mark Adler가 개발했습니다. </p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tape-archive">Tape Archive<a href="#tape-archive" class="hash-link" aria-label="Direct link to Tape Archive" title="Direct link to Tape Archive">​</a></h2><p>줄여서 .tar 포맷으로 사용되는 posix 표준입니다.<br>
<!-- -->초기 유닉스 시대에 테입 백업 용도로 개발되었으나,
현재는 많은 파일을 디렉토리 구조, 파일 속성들을 보존하면서 하나의 큰 파일로 묶는 데 주로 사용되고 있습니다.</p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-packaging-tool이-있는데-왜">Advanced Packaging Tool이 있는데 왜?<a href="#advanced-packaging-tool이-있는데-왜" class="hash-link" aria-label="Direct link to Advanced Packaging Tool이 있는데 왜?" title="Direct link to Advanced Packaging Tool이 있는데 왜?">​</a></h3><p>사실 리눅스(debian)를 사용하다보면 대부분 apt 명령어를 사용해서 프로그램을 설치합니다.<br>
<!-- -->하지만 apt repository에 등록되지 않은 프로그램을 사용하거나,
특정한 버전이 필요할 때, 인터넷 연결이 없을 때, <strong>apt가 고장났을 때</strong> .deb(.rpm) 파일이나
.gz파일을 사용하여 패키지 설치를 할 필요가 있습니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tar-설치하기">Tar 설치하기<a href="#tar-설치하기" class="hash-link" aria-label="Direct link to Tar 설치하기" title="Direct link to Tar 설치하기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="node를-설치해-보자">Node를 설치해 보자<a href="#node를-설치해-보자" class="hash-link" aria-label="Direct link to Node를 설치해 보자" title="Direct link to Node를 설치해 보자">​</a></h3><p>node를 예시로 설명하겠습니다. 😊</p><ol><li>node pakcage 리스트 확인  </li></ol><p>노드는 <a href="https://www.nodejs.org/download/release/" target="_blank" rel="noopener noreferrer">https://www.nodejs.org/download/release/</a> 에 패키지 다운로드 목록을 제공합니다.
<img loading="lazy" alt="패키지 목록" src="/assets/images/packagelist_node-f671331655daee24f520866f3e4c21bd.png" width="722" height="342" class="img_ev3q"></p><br><ol start="2"><li>파일 다운로드  </li></ol><p>설치파일을 받는 방법은 다양하겠으나(wget, scp, docker cp...) wget을 사용했습니다.<br>
<!-- -->필요한 파일의 url을 복사합니다<br>
<img loading="lazy" alt="패키지 목록" src="/assets/images/packagelinkcopy_node-fcfaaea8c14d6cf5e75cc7a88a031a58.png" width="567" height="237" class="img_ev3q"></p><br><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 복사한 링크를 붙여넣는다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://nodejs.org/download/release/latest-v12.x/node-v12.22.1-linux-x64.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--2021-05-10 05:39:45--  https://nodejs.org/download/release/latest-v12.x/node-v12.22.1-linux-x64.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Resolving nodejs.org </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nodejs.org</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. </span><span class="token number" style="color:#36acaa">104.20</span><span class="token plain">.22.46, </span><span class="token number" style="color:#36acaa">104.20</span><span class="token plain">.23.46, </span><span class="token number" style="color:#36acaa">2606</span><span class="token plain">:4700:10::6814:162e, </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Connecting to nodejs.org </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nodejs.org</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">|</span><span class="token number" style="color:#36acaa">104.20</span><span class="token plain">.22.46</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">:443</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. connected.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HTTP request sent, awaiting response</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Length: </span><span class="token number" style="color:#36acaa">23138380</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">22M</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">application/gzip</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Saving to: </span><span class="token string" style="color:#e3116c">'node-v12.22.1-linux-x64.tar.gz'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node-v12.22.1-linux-x64.tar.gz                              </span><span class="token number" style="color:#36acaa">100</span><span class="token plain">%</span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">22</span><span class="token plain">.07M  </span><span class="token number" style="color:#36acaa">7</span><span class="token plain">.88MB/s    </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">.8s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2021</span><span class="token plain">-05-10 05:39:48 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">7.88</span><span class="token plain"> MB/s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> - </span><span class="token string" style="color:#e3116c">'node-v12.22.1-linux-x64.tar.gz'</span><span class="token plain"> saved </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">23138380</span><span class="token plain">/23138380</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><ol start="3"><li>설치하기</li></ol><p>다음과 같이 압축을 풀어 실행 파일을 얻습니다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> -zxvf </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">some-tar.gz</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>사용된 옵션의 의미는 다음과 같습니다.<br>
<code>-z</code> : gzip 압축 풀기<br>
<code>-x</code> : tar 파일 추출<br>
<code>-v</code> : verbose<br>
<code>-f</code> : 파일 이름 지정  </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="심볼릭-링크-만들기">심볼릭 링크 만들기<a href="#심볼릭-링크-만들기" class="hash-link" aria-label="Direct link to 심볼릭 링크 만들기" title="Direct link to 심볼릭 링크 만들기">​</a></h2><p><em>설치했는데 실행이 안된다?</em></p><p>리눅스(데비안) 실행파일은 대부분 <code>/bin</code>, <code>/usr/bin</code> 폴더 밑에 존재하고 경로는 <code>$PATH</code>로 관리됩니다.
(windows에서 환경변수와 유사합니다)<br>
<!-- -->apt를 사용하여 설치하면 <code>/bin</code>에 설치되거나 파일 경로를 알아셔 연결해줍니다.
하지만, 실행파일만 다운로드하면 실행파일 경로를 연결해 주어야 간편하게 프로그램을 사용할 수 있습니다.</p><p><code>.bashrc</code> 파일에 <code>$PATH</code> 환경변수로 실행파일 위치를 지정해 줄 수 있으나,
좀더 우아한 한 방법을 써 봅시다</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ln</span><span class="token plain"> -s </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">full/path/to/origin</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> /bin/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">origin</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># node가 설치된 경로에서</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/node/node-v12.22.1-linux-x64/bin$ </span><span class="token function" style="color:#d73a49">ln</span><span class="token plain"> -s </span><span class="token environment constant" style="color:#36acaa">$PWD</span><span class="token plain">/node /bin/node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/node/node-v12.22.1-linux-x64/bin$ </span><span class="token function" style="color:#d73a49">ln</span><span class="token plain"> -s </span><span class="token environment constant" style="color:#36acaa">$PWD</span><span class="token plain">/npm /bin/npm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 확인해보자</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">cd</span><span class="token plain"> ~</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"> -v </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> -v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">v12.22.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">6.14</span><span class="token plain">.12</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h2><p><a href="https://ko.wikipedia.org/wiki/Gzip" target="_blank" rel="noopener noreferrer">[위키]Gzip</a><br>
<a href="https://ko.wikipedia.org/wiki/Tar_(%ED%8C%8C%EC%9D%BC_%ED%8F%AC%EB%A7%B7)" target="_blank" rel="noopener noreferrer">[위키]Tar</a></p>]]></content:encoded>
            <category>tech</category>
            <category>linux</category>
        </item>
        <item>
            <title><![CDATA[쿠브플로우를 설치하는 다양한 방법]]></title>
            <link>https://jwher.github.io/posts/install-kubeflow</link>
            <guid>https://jwher.github.io/posts/install-kubeflow</guid>
            <pubDate>Wed, 21 Apr 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Install Kubeflow]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="kubeflow" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNzYuOTMgMjc0LjU1Ij48dGl0bGU+bG9nbzwvdGl0bGU+PGcgaWQ9IkxheWVyXzIiIGRhdGEtbmFtZT0iTGF5ZXIgMiI+PGcgaWQ9IkxheWVyXzEtMiIgZGF0YS1uYW1lPSJMYXllciAxIj48cGF0aCBkPSJNOTUuOSw2Mi4xNSwxMDAsMTY0LjI1bDczLjc1LTk0LjEyYTYuNzksNi43OSwwLDAsMSw5LjYtMS4xMWw0NiwzNi45Mi0xNS02NS42MVoiIGZpbGw9IiM0Mjc5ZjQiLz48cG9seWdvbiBwb2ludHM9IjEwMi41NSAxODIuOTggMTY3Ljk3IDE4Mi45OCAxMjcuOCAxNTAuNzUgMTAyLjU1IDE4Mi45OCIgZmlsbD0iIzAwMjhhYSIvPjxwb2x5Z29uIHBvaW50cz0iMTgwLjE4IDgzLjkyIDEzNi4xOCAxNDAuMDYgMTgzLjA2IDE3Ny42NyAyMjcuNTMgMTIxLjkxIDE4MC4xOCA4My45MiIgZmlsbD0iIzAxNGJkMSIvPjxwb2x5Z29uIHBvaW50cz0iODMuNTYgNTIuMyA4My41NyA1Mi4yOSAxMjIuMjYgMy43NyA1OS44NyAzMy44MiA0NC40NiAxMDEuMzMgODMuNTYgNTIuMyIgZmlsbD0iI2JlZGNmZiIvPjxwb2x5Z29uIHBvaW50cz0iNDUuMzIgMTIyLjA1IDg2Ljc2IDE3NC4wMSA4Mi44MSA3NS4wMyA0NS4zMiAxMjIuMDUiIGZpbGw9IiM2Y2ExZmYiLz48cG9seWdvbiBwb2ludHM9IjIwMi4zMSAyOC43MyAxNDIuNjUgMCAxMDUuNTIgNDYuNTYgMjAyLjMxIDI4LjczIiBmaWxsPSIjYTFjM2ZmIi8+PHBhdGggZD0iTTEuNiwyNzJWMjI3LjIySDcuMzR2MjMuNDFsMjAuNDgtMjMuNDFoNi40bC0xNy4zOSwxOS43LDE5LDI1LjA3SDI5LjFsLTE1LjkyLTIwLjgtNS44NCw2LjY1VjI3MloiIGZpbGw9IiM0Mjc5ZjQiIHN0cm9rZT0iIzQyNzlmNCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjMuMiIvPjxwYXRoIGQ9Ik00MS42MiwyNjIuMjFWMjQwaDUuNDN2MjIuMzlhNC42Nyw0LjY3LDAsMCwwLDIuMzUsNC4xOSwxMSwxMSwwLDAsMCwxMSwwLDQuNjksNC42OSwwLDAsMCwyLjMzLTQuMTlWMjQwaDUuNDN2MjIuMTlhOS4wOCw5LjA4LDAsMCwxLTQuMSw3Ljg3LDE2LjIsMTYuMiwwLDAsMS0xOC4zNywwQTkuMDcsOS4wNywwLDAsMSw0MS42MiwyNjIuMjFaIiBmaWxsPSIjNDI3OWY0IiBzdHJva2U9IiM0Mjc5ZjQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIzLjIiLz48cGF0aCBkPSJNNzcuNDYsMjcyVjIyNGg1LjQzdjE2LjgxYTI5LjI5LDI5LjI5LDAsMCwxLDkuMzItMS43MywxMy4xLDEzLjEsMCwwLDEsNi4yLDEuNDEsMTAuNzEsMTAuNzEsMCwwLDEsNC4xOCwzLjc0LDE4LjA3LDE4LjA3LDAsMCwxLDIuMjMsNS4wNiwyMS4yNiwyMS4yNiwwLDAsMSwuNzMsNS41OHEwLDguNDMtNC4zOCwxMi43OVQ4Ny4zNSwyNzJabTUuNDMtNC44N2g0LjU1cTYuNzcsMCw5LjcyLTIuOTV0My05LjUxYTE0LjIxLDE0LjIxLDAsMCwwLTItNy41Miw2LjU1LDYuNTUsMCwwLDAtNi0zLjIyLDI0LjczLDI0LjczLDAsMCwwLTkuMjUsMS41NFoiIGZpbGw9IiM0Mjc5ZjQiIHN0cm9rZT0iIzQyNzlmNCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjMuMiIvPjxwYXRoIGQ9Ik0xMTIuMzYsMjU1Ljk0cTAtNy43MSw0LjA5LTEyLjNhMTMuNzUsMTMuNzUsMCwwLDEsMTAuOC00LjU5cTEzLjM1LDAsMTMuMzYsMTguODZIMTE3Ljc5YTEyLjMsMTIuMywwLDAsMCwyLjksNy4wN3EyLjU5LDMuMTEsNy45LDMuMWEyNC45MiwyNC45MiwwLDAsMCwxMC41NS0ydjVhMjcuNzQsMjcuNzQsMCwwLDEtOS44NiwxLjg3LDE5LjgzLDE5LjgzLDAsMCwxLTcuNy0xLjM3LDEzLjMxLDEzLjMxLDAsMCwxLTUuMjgtMy43NiwxNi4yMSwxNi4yMSwwLDAsMS0zLTUuMzhBMjAuODQsMjAuODQsMCwwLDEsMTEyLjM2LDI1NS45NFptNS42Mi0yLjEyaDE3LjI2YTE0LjkxLDE0LjkxLDAsMCwwLTIuMzctNy4xMiw2LjQ0LDYuNDQsMCwwLDAtNS42Mi0yLjc4LDguMiw4LjIsMCwwLDAtNi4yMSwyLjcyQTEyLjA3LDEyLjA3LDAsMCwwLDExOCwyNTMuODJaIiBmaWxsPSIjNDI3OWY0IiBzdHJva2U9IiM0Mjc5ZjQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIzLjIiLz48cGF0aCBkPSJNMTQ3LjMyLDI0NC44OVYyNDBoNXYtNy41OWE4LjE0LDguMTQsMCwwLDEsMi4zMS02LjA1LDcuNzksNy43OSwwLDAsMSw1LjY5LTIuMjhoNy44NlYyMjloLTVjLTIuMjEsMC0zLjY3LjQ1LTQuMzcsMS4zNHMtMS4wNiwyLjU1LTEuMDYsNVYyNDBoOC40NnY0Ljg3aC04LjQ2VjI3MmgtNS40NHYtMjcuMVoiIGZpbGw9IiMwMDI4YWEiIHN0cm9rZT0iIzAwMjhhYSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjMuMiIvPjxwYXRoIGQ9Ik0xNzUuMjYsMjcyVjIyNGg1LjQzdjQ4WiIgZmlsbD0iIzAwMjhhYSIgc3Ryb2tlPSIjMDAyOGFhIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMy4yIi8+PHBhdGggZD0iTTE5NC40MSwyNjguMDVhMTcuODYsMTcuODYsMCwxLDEsMTIuMzMsNC45QTE2LjU3LDE2LjU3LDAsMCwxLDE5NC40MSwyNjguMDVabTMuODQtMjAuNjVhMTMuMTYsMTMuMTYsMCwwLDAsMCwxNy4yLDEyLjA3LDEyLjA3LDAsMCwwLDE3LDAsMTMuMDksMTMuMDksMCwwLDAsMC0xNy4yLDEyLjA3LDEyLjA3LDAsMCwwLTE3LDBaIiBmaWxsPSIjMDAyOGFhIiBzdHJva2U9IiMwMDI4YWEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIzLjIiLz48cGF0aCBkPSJNMjI4LjQ1LDI0MGg1Ljc1bDcuMywyNS4zMkwyNDguOTMsMjQwaDUuMzZsNy4zNCwyNS4zNEwyNjksMjQwaDUuNzRMMjY0LjcsMjcyaC02LjEybC02LjgzLTI0LjU4TDI0NSwyNzJoLTYuNDdaIiBmaWxsPSIjMDAyOGFhIiBzdHJva2U9IiMwMDI4YWEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIzLjIiLz48L2c+PC9nPjwvc3ZnPg==" width="277" height="275" class="img_ev3q"></p><p><em>쿠브플로우를 설치하는 다양한 방법</em></p><h1>목차</h1><ul><li><a href="#%EC%9A%94%EA%B5%AC%EC%82%AC%ED%95%AD">요구사항</a></li><li><a href="#linux-machine">Linux Machine</a></li><li><a href="#window-machine">Window Machine</a></li><li><a href="#virtual-machine">Virtual Machine</a></li><li><a href="#kind">Kind</a></li></ul><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="요구사항">요구사항<a href="#요구사항" class="hash-link" aria-label="Direct link to 요구사항" title="Direct link to 요구사항">​</a></h2><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="쿠브플로우에-대한-이해">쿠브플로우에 대한 이해<a href="#쿠브플로우에-대한-이해" class="hash-link" aria-label="Direct link to 쿠브플로우에 대한 이해" title="Direct link to 쿠브플로우에 대한 이해">​</a></h3><p>쿠브플로우 또는 쿠베플로우(kubeflow)라고도 불리는데요,
<a href="/posts/welcome-to-kubeflow/">쿠브플로우 역할</a> 을 정확히 이해하고 목적에 맞는 배포판을 설치하는 것을 추천합니다.</p><p>GCP, AWS에서 SaaS로 쿠버네티스-쿠브플로우를 사용할 수 있습니다.
클라우드를 적극 활용중이거나 충분한 스펙의 하드웨어가 없다면 추천드립니다!<br>
<a href="https://cloud.google.com/kubernetes-engine" target="_blank" rel="noopener noreferrer">GKE</a> <a href="https://aws.amazon.com/ko/eks/" target="_blank" rel="noopener noreferrer">EKS</a>  </p><p>이 글에서는 다양한 쿠브플로우를 on-premise 환경에 직접 설치하는 방법을 설명합니다.  </p><p><del>사실, 쿠버네티스 클러스터만 갖추어져 있으면 설치방법은 대부분 동일합니다.</del><br>
<a href="/posts/install-kubernetes">나에게 필요한 쿠버네티스 설치하기</a></p><p>진짜 아무것도 모르겠고, 더 공부하기도 싫다면 추천하는 방법입니다.<br>
<a href="#%EB%B2%88%EC%99%B8-minikf">miniKF</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="주의사항">주의사항<a href="#주의사항" class="hash-link" aria-label="Direct link to 주의사항" title="Direct link to 주의사항">​</a></h3><ul><li>현재(2021.05.23) github release는 1.2 버전입니다. 하지만 공식 doc이 1.3 버전으로 바뀌었습니다.</li><li>공식 문서가 굉장히 낡았고 업데이트가 잘 안 되어 있습니다. 1.3으로 버전을 바꾸고 오래된 항목을 삭제한듯 보입니다.</li><li>본 글은 현재 최신인 1.2 버전의 설치를 다루고 있습니다. <a href="https://v1-2-branch.kubeflow.org/" target="_blank" rel="noopener noreferrer">링크</a>  </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="최소사양">최소사양<a href="#최소사양" class="hash-link" aria-label="Direct link to 최소사양" title="Direct link to 최소사양">​</a></h3><p><em>아래 설치 방법들 중 최소 요구사항입니다</em></p><ul><li>kubernetes</li><li>A minimum of 0.6 CPU in cluster  </li><li>10GB 이상의 노드 저장 공간</li></ul><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="linux-machine">Linux Machine<a href="#linux-machine" class="hash-link" aria-label="Direct link to Linux Machine" title="Direct link to Linux Machine">​</a></h2><p><img loading="lazy" alt="linux" src="/assets/images/linux-daaf1e0a5d7c5ad620d5a28efca1434f.svg" width="640" height="640" class="img_ev3q"></p><p>가장 일반적인 구성방식입니다.
다른 설치법의 기본이 되니 참고해주세요 😀  </p><p>kfctl과 kustomize를 이용한 설치 방법을 설명합니다.<br>
<!-- -->여기에선 다중 사용자의 인증기능을 제공하는 dex 버전을 사용했습니다.<br>
<a href="https://v1-2-branch.kubeflow.org/docs/started/k8s/kfctl-k8s-istio/" target="_blank" rel="noopener noreferrer">[공식]istio</a><br>
<a href="https://v1-2-branch.kubeflow.org/docs/started/k8s/kfctl-istio-dex/" target="_blank" rel="noopener noreferrer">[공식]dex</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="requirments">requirments<a href="#requirments" class="hash-link" aria-label="Direct link to requirments" title="Direct link to requirments">​</a></h3><ul><li>kubernetes master node</li><li>4 CPU 이상</li><li>50GB 이상 디스크</li><li>12GB 이상 메모리</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="설치">설치<a href="#설치" class="hash-link" aria-label="Direct link to 설치" title="Direct link to 설치">​</a></h3><p>쿠버네티스가 없으신 분은 <a href="/posts/install-kubernetes/">이글</a> 설치법을 참고해주세요.<br>
<em>호환되는 kubernetes 버전을 꼭 확인해주세요.</em> 😊  </p><table><thead><tr><th>쿠버네티스 버전</th><th>쿠브플로우0.4</th><th>쿠브플로우0.5</th><th>쿠브플로우0.6</th><th>쿠브플로우0.7</th><th>쿠브플로우1.0</th><th>쿠브플로우1.1</th><th>쿠브플로우1.2</th></tr></thead><tbody><tr><td>1.11</td><td><strong>호환</strong></td><td><strong>호환</strong></td><td>호환 안됨</td><td>호환 안됨</td><td>호환 안됨</td><td>호환 안됨</td><td>호환 안됨</td></tr><tr><td>1.12</td><td><strong>호환</strong></td><td><strong>호환</strong></td><td>호환 안됨</td><td>호환 안됨</td><td>호환 안됨</td><td>호환 안됨</td><td>호환 안됨</td></tr><tr><td>1.13</td><td><strong>호환</strong></td><td><strong>호환</strong></td><td>호환 안됨</td><td>호환 안됨</td><td>호환 안됨</td><td>호환 안됨</td><td>호환 안됨</td></tr><tr><td>1.14</td><td><strong>호환</strong></td><td><strong>호환</strong></td><td><strong>호환</strong></td><td><strong>호환</strong></td><td><strong>호환</strong></td><td><strong>호환</strong></td><td><strong>호환</strong></td></tr><tr><td>1.15</td><td>호환 안됨</td><td><strong>호환</strong></td><td><strong>호환</strong></td><td><strong>호환</strong></td><td><strong>호환</strong></td><td><strong>호환</strong></td><td><strong>호환</strong></td></tr><tr><td>1.16</td><td>호환 안됨</td><td>호환 안됨</td><td>호환 안됨</td><td>호환 안됨</td><td><strong>호환</strong></td><td><strong>호환</strong></td><td><strong>호환</strong></td></tr><tr><td>1.17</td><td>호환 안됨</td><td>호환 안됨</td><td>호환 안됨</td><td>호환 안됨</td><td>알려진 문제 없음</td><td>알려진 문제 없음</td><td>알려진 문제 없음</td></tr><tr><td>1.18</td><td>호환 안됨</td><td>호환 안됨</td><td>호환 안됨</td><td>호환 안됨</td><td>알려진 문제 없음</td><td>알려진 문제 없음</td><td>알려진 문제 없음</td></tr><tr><td>1.19</td><td>호환 안됨</td><td>호환 안됨</td><td>호환 안됨</td><td>호환 안됨</td><td>알려진 문제 없음</td><td>알려진 문제 없음</td><td>알려진 문제 없음</td></tr><tr><td>1.20</td><td>호환 안됨</td><td>호환 안됨</td><td>호환 안됨</td><td>호환 안됨</td><td>알려진 문제 없음</td><td>알려진 문제 없음</td><td>알려진 문제 없음</td></tr></tbody></table><p><a href="https://v1-2-branch.kubeflow.org/docs/started/k8s/overview/" target="_blank" rel="noopener noreferrer">참조</a>
<em>알려진 문제가 없다고 하지만 쿠버네티스1.2-쿠브플로우1.2 버전은 여러 오류가 발생합니다</em> 😓<br>
<em>쿠버네티스 1.16 버전을 사용하는 것을 권장합니다</em>  </p><p><em>쿠브플로우 0.6 이후 버전부터 kustomize를 사용합니다</em><br>
<em>따라서 쿠브플로우 0.6 이상 버전을 권장합니다</em>  </p><br><ol><li><p>필요한 파일을 받기 위해 wget을 설치합니다.(curl을 사용해도 됩니다)</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">wget</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. kfctl을 설치합니다.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kfctl은 쿠브플로우 컴포넌트를 배포하기 위한 커멘드라인 툴입니다.  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">쿠버네티스 커맨드라인 툴인 kubectl을 생각해보면 쉽겠죠?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```shell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># https://github.com/kubeflow/kfctl/releases 에서 kfctl 최신 버전을 확인합니다</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ wget https://github.com/kubeflow/kfctl/releases/download/v1.2.0/kfctl_v1.2.0-0-gbc038f9_linux.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># tar 파일을 풀어줍니다</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ tar -xvf kfctl_{tag}_{platform}.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Export path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ export PATH=$PATH:$PWD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ export PATH=$PATH:{kfctl_path}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>쿠브플로우를 설치합니다</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 설치 yaml을 저장합니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://raw.githubusercontent.com/kubeflow/manifests/v1.2-branch/kfdef/kfctl_istio_dex.v1.2.0.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kfctl apply -V -f </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">config_file</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.생략</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INFO</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">0285</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Successfully applied application kfserving    </span><span class="token assign-left variable" style="color:#36acaa">filename</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"kustomize/kustomize.go:291"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INFO</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">0285</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Applied the configuration Successfully</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">       </span><span class="token assign-left variable" style="color:#36acaa">filename</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"cmd/apply.go:75"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>(가끔 pv를 직접 생성해 줘야 하는 문제가 있습니다. 나중에 작성하겠습니다.)</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="window-machine">Window Machine<a href="#window-machine" class="hash-link" aria-label="Direct link to Window Machine" title="Direct link to Window Machine">​</a></h2><p><img loading="lazy" alt="windows" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+DTwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DTxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiIGhlaWdodD0iODgiIHdpZHRoPSI4OCI+DTxwYXRoIHN0eWxlPSJmaWxsOiMwMGFkZWY7IiBkPSJtMCwxMi40MDIsMzUuNjg3LTQuODYwMiwwLjAxNTYsMzQuNDIzLTM1LjY3LDAuMjAzMTN6bTM1LjY3LDMzLjUyOSwwLjAyNzcsMzQuNDUzLTM1LjY3LTQuOTA0MS0wLjAwMi0yOS43OHptNC4zMjYxLTM5LjAyNSw0Ny4zMTgtNi45MDYsMCw0MS41MjctNDcuMzE4LDAuMzc1NjV6bTQ3LjMyOSwzOS4zNDktMC4wMTExLDQxLjM0LTQ3LjMxOC02LjY3ODQtMC4wNjYzLTM0LjczOXoiLz4NPC9zdmc+" width="88" height="88" class="img_ev3q"></p><p>고사양의 개인 PC가 있고, 쿠브플로우를 체험해 보고 싶다면 추천합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="requirments-1">requirments<a href="#requirments-1" class="hash-link" aria-label="Direct link to requirments" title="Direct link to requirments">​</a></h3><ul><li>docker desktop</li><li>kubernetes</li></ul><p>kubernetes 저사양 node 등에 맞춰 다양한 버전이 있습니다. <a href="/posts/install-kubernetes/">이글</a>
에서 여러 kubernetes에 차이점을 잘 설명하고 있습니다.
<a href="https://jwher.github.io/2021-04-13-install-docker/#windows-docker-%EC%84%A4%EC%B9%98" target="_blank" rel="noopener noreferrer">Docker desktop</a>에
kubernetes를 활성화 시킵니다. (현재 micro k8s를 사용합니다)  </p><p>쿠버네티스 클러스터를 구성하셨다면 kfctl을 사용해 linux 버전과 같은 방법으로 설치합니다.  </p><p>(커맨드라인 입력 자료가 없어져 요청주시면 다시 작성하겠습니다.)  </p><p>configuration을 환경에 맞게 수정해 주어야 합니다. 다음 <a href="https://sidepun.ch/entry/Kubeflow-%EC%84%A4%EC%B9%98-WSL2-Ubuntu-Docker-Desktop" target="_blank" rel="noopener noreferrer">블로그</a>
에서 잘 설명해 주셔서 참고 부탁드립니다 😓</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="virtual-machine">Virtual Machine<a href="#virtual-machine" class="hash-link" aria-label="Direct link to Virtual Machine" title="Direct link to Virtual Machine">​</a></h2><p><img loading="lazy" alt="virtualbox" src="/assets/images/virtualbox-37b5b45eadbe54fd9993250bdfc84d2c.svg" width="512" height="512" class="img_ev3q"></p><p>Virtual Machine을 호스팅 할 수 있는 고사양의 PC/Server가 있고
다른 애플리케이션과 충돌, 쿠버네티스 버전 관리, 테스트 서버 운영이 필요하다면 추천합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">requirements<a href="#requirements" class="hash-link" aria-label="Direct link to requirements" title="Direct link to requirements">​</a></h3><ul><li>kubernetes 구성 능력</li></ul><p>VM 또한 쿠버네티스의 노드로 구성 가능합니다. VM을 통해 kubernetes cluster를 구성한다면
Linux에서 kfctl을 사용한 쿠브플로우 설치 방법과 같습니다.  </p><p>클러스터간 통신이 되게 네트워크를 구성만 유의해 줍시다. 😉<br>
<a href="https://jwher.github.io/2021-04-15-Install-Virtualbox-with-no-GUI/" target="_blank" rel="noopener noreferrer">virtualbox vm 생성</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="번외-minikf">번외: miniKF<a href="#번외-minikf" class="hash-link" aria-label="Direct link to 번외: miniKF" title="Direct link to 번외: miniKF">​</a></h2><p><img loading="lazy" alt="minikf" src="/assets/images/minikf-f9132f76c81bd09e9c0537f3cc5b1cd8.svg" width="1277" height="473" class="img_ev3q"></p><p>miniKF를 통해 간편히 설치할 수 있습니다.
한개의 VM 단일 노드 쿠버네티스에서 작동하는 쿠브플로우로
그나마 일반적인 PC에서 쿠브플로우를 학습용으로 사용해 볼 수 있습니다.<br>
<a href="https://www.kubeflow.org/docs/distributions/minikf/minikf-vagrant/" target="_blank" rel="noopener noreferrer">공식 문서</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="requirements-1">requirements<a href="#requirements-1" class="hash-link" aria-label="Direct link to requirements" title="Direct link to requirements">​</a></h3><ul><li>12GB RAM  </li><li>2 CPUs  </li><li>50GB disk space  </li><li>Linux, macOS, Windows</li><li>Virtualbox/Vagrant</li></ul><p>Virtualbox/Vagrant를 사용하여 잘 구성된 kubeflow 클러스터 vm을 실행시킵니다.
편하고, 잘 동작하는 쿠브플로우를 빠르게 구성할 수 있는 장점이 있으나
VM 환경이 같는 한계, 현재 지원이 종료된 문제가 있습니다.</p><ol><li><p>virtualbox/vagrant가 설치된 환경을 준비합니다</p></li><li><p>vagrant를 사용하여 arrikto/minikf VM을 구동시킵니다. </p></li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> vagrant init arrikto/minikf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> vagrant up</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>몇 번 종료될 때가 있습니다. 당황하지 말고 vagrant up을 다시 실행시키면 됩니다.<br>
<!-- -->계속 실패할 경우 cache 파일을 전부 삭제하고 다시 시도합니다.  </p><p>설치가 완료되면 <a href="http://10.10.10.10%EC%97%90%EC%84%9C" target="_blank" rel="noopener noreferrer">http://10.10.10.10에서</a> kubeflow를 사용할 수 있습니다.
<em>참 쉽죠?</em>   </p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kind">Kind<a href="#kind" class="hash-link" aria-label="Direct link to Kind" title="Direct link to Kind">​</a></h2><p><img loading="lazy" alt="kind" src="/assets/images/kind-a79de9a39747e0406c36d1da90e210aa.svg" width="985" height="594" class="img_ev3q"></p><p>쿠버네티스의 한 버전인 Kubernetes in Docker를 사용하여 쿠브플로우를 설치합니다.
Docker Image로 된 쿠버네티스로 단일 노드 쿠버네티스를 빠르게 구성하고자 하면 추천합니다.  </p><p>이 글에선 Windows 환경의 WSL2 ubuntu에서 설치하는 방법을 소개합니다.  </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="requirements-2">requirements<a href="#requirements-2" class="hash-link" aria-label="Direct link to requirements" title="Direct link to requirements">​</a></h4><ul><li>docker가 설치된 컴퓨터</li></ul><ol><li>Kind 설치  </li></ol><p><a href="https://jwher.github.io/2021-04-13-install-kubernetes/#kind-%EC%84%A4%EC%B9%98" target="_blank" rel="noopener noreferrer">Kind 설치</a> 를 참고해
쿠버네티스 클러스터를 생성해 주세요.</p><ol start="2"><li>Install kubeflow</li></ol><p>쿠브플로우를 설치하기 위해 kfctl과 kustomize를 이용합니다.
linux에서 쿠브플로우를 설치하는 방법과 동일합니다.</p><p>필요한 파일을 받기 위해 wget을 설치합니다.(curl을 사용해도 됩니다)</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">wget</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>kfctl을 설치합니다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># https://github.com/kubeflow/kfctl/releases 에서 kfctl 최신 버전을 확인합니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://github.com/kubeflow/kfctl/releases/download/v1.2.0/kfctl_v1.2.0-0-gbc038f9_linux.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># tar 파일을 풀어줍니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> -xvf kfctl_</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">tag</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">_</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">platform</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Export path</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable environment constant" style="color:#36acaa">PATH</span><span class="token operator" style="color:#393A34">=</span><span class="token environment constant" style="color:#36acaa">$PATH</span><span class="token builtin class-name">:</span><span class="token environment constant" style="color:#36acaa">$PWD</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable environment constant" style="color:#36acaa">PATH</span><span class="token operator" style="color:#393A34">=</span><span class="token environment constant" style="color:#36acaa">$PATH</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">kfctl_path</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>쿠브플로우를 설치합니다</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 설치 yaml을 저장합니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://raw.githubusercontent.com/kubeflow/manifests/v1.2-branch/kfdef/kfctl_istio_dex.v1.2.0.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kfctl apply -V -f </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">config_file</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.생략</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INFO</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">0285</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Successfully applied application kfserving    </span><span class="token assign-left variable" style="color:#36acaa">filename</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"kustomize/kustomize.go:291"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INFO</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">0285</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Applied the configuration Successfully</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">       </span><span class="token assign-left variable" style="color:#36acaa">filename</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"cmd/apply.go:75"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br>3. 설치 완료 후 쿠브플로우를 확인해 봅니다.<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get ns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                 STATUS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">auth                 Active   101s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cert-manager         Active   6m17s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default              Active   45m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">istio-system         Active   6m16s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">knative-serving      Active   95s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-node-lease      Active   45m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-public          Active   45m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system          Active   45m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubeflow             Active   6m17s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">local-path-storage   Active   45m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 볼륨도 맵핑이 잘 되었나 확인합니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get pvc -A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE      NAME              STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">istio-system   authservice-pvc   Bound    pvc-48952a53-882e-436b-8396-97cee94acf28   10Gi       RWO            standard       4m31s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubeflow       katib-mysql       Bound    pvc-9afd9ddf-3f1e-4b05-9fac-2cd56af6393a   10Gi       RWO            standard       4m28s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubeflow       metadata-mysql    Bound    pvc-0f0e907b-7786-42bb-bc40-1b784ac6cddb   10Gi       RWO            standard       4m28s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubeflow       minio-pvc         Bound    pvc-1d18caf0-08e6-44d8-b366-223e67dee1e5   20Gi       RWO            standard       4m28s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubeflow       mysql-pv-claim    Bound    pvc-c4dbe4b2-6a39-467f-a0be-5f54ff45054d   20Gi       RWO            standard       4m28s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>설치 후 pod 생성까지 시간이 좀 걸리니 기다려야 합니다 :)</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="삭제">삭제<a href="#삭제" class="hash-link" aria-label="Direct link to 삭제" title="Direct link to 삭제">​</a></h3><p>쿠브플로우 설치시 종종 파드가 crash나 pending 상태에서 멈춥니다. 😭<br>
<!-- -->일반적인 오류가 아닐 때 재설치를 위해 삭제해야 합니다.  </p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kfctl delete -f </span><span class="token variable" style="color:#36acaa">${CONFIG_FILE}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>하지만 모든 쿠브플로우 리소스가 쿠버네티스에서 삭제되지 않습니다.
여러가지 CRD: Custom Resource Define이 남아있죠.</p><p>쿠버네티스에 대한 이해가 부족하시다면
가장 효과적인 방법은 쿠버네티스 클러스터의 재설치입니다...<br>
<a href="https://jwher.github.io/2021-05-28-kubernetes-usage/" target="_blank" rel="noopener noreferrer">쿠버네티스 사용하기</a>  </p><p>이전에 당근마켓 기술블로그에서 쿠브플로우 애로 관련 글을 봤었는데 없어진 듯 하네요...
<a href="https://medium.com/daangn/%EB%94%A5%EB%9F%AC%EB%8B%9D-%EC%B6%94%EC%B2%9C-%EC%8B%9C%EC%8A%A4%ED%85%9C-in-production-fa623877e56a" target="_blank" rel="noopener noreferrer">당근</a><br>
<!-- -->쿠버네티스를 다루는 회사
<a href="https://github.com/mojokb/kubeflow-book/blob/master/uninstall/kubeflow-uninstall.txt" target="_blank" rel="noopener noreferrer">두다지</a><br>
<!-- -->여러 팀들이 동일하게 겪은 문제라 생각하니 마음이 한결 편해지는 것 같습니다:D</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h2><p><a href="https://v1-2-branch.kubeflow.org/docs/" target="_blank" rel="noopener noreferrer">[공식]Documentation</a><br>
<a href="https://kind.sigs.k8s.io/" target="_blank" rel="noopener noreferrer">[공식]Kind</a></p>]]></content:encoded>
            <category>tech</category>
            <category>kubeflow</category>
            <category>kubernetes</category>
            <category>virtualbox</category>
            <category>linux</category>
        </item>
        <item>
            <title><![CDATA[GUI 없이 버추얼박스 사용하기]]></title>
            <link>https://jwher.github.io/posts/virtualbox-with-no-gui</link>
            <guid>https://jwher.github.io/posts/virtualbox-with-no-gui</guid>
            <pubDate>Thu, 15 Apr 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Virtualbox With No Gui]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="virtualbox" src="/assets/images/virtualbox-37b5b45eadbe54fd9993250bdfc84d2c.svg" width="512" height="512" class="img_ev3q"><br>
<em>GUI 없이 버추얼박스 사용하기</em></p><p>리눅스 서버에 virtualbox로 가상 환경을 구성해야 합니다. 😲<br>
<!-- -->CLI는 잘 모르는데 어떡하죠? 한번 같이 vm을 실행시켜 봅시다!  </p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="요구사항">요구사항<a href="#요구사항" class="hash-link" aria-label="Direct link to 요구사항" title="Direct link to 요구사항">​</a></h2><p>가상 머신을 사용하기 위해선 vm 매니저로 virtual box나 vmware가 필요합니다:D<br>
<!-- -->oracle virtualbox를 기준으로 설명하겠습니다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 설치를 자세히 설명하진 않겠습니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># https://www.virtualbox.org/wiki/Downloads</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> virtualbox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 설치가 되었으면 확인해 봅시다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ vboxmanage --version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="가상-머신-생성하기">가상 머신 생성하기<a href="#가상-머신-생성하기" class="hash-link" aria-label="Direct link to 가상 머신 생성하기" title="Direct link to 가상 머신 생성하기">​</a></h2><p>먼저 설치 가능한 OS Type을 확인해야 합니다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ vboxmanage list ostypes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. 전략 </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ID:          Ubuntu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description: Ubuntu </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">32</span><span class="token plain">-bit</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Family ID:   Linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Family Desc: Linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">64</span><span class="token plain"> bit:      </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ID:          Ubuntu_64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description: Ubuntu </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">64</span><span class="token plain">-bit</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Family ID:   Linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Family Desc: Linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">64</span><span class="token plain"> bit:      </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. 후략 </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>저는 Ubuntu 18.04 LTS를 설치하려고 합니다.
목록에서 ubuntu_64가 존재하는지 확인해야겠네요.  </p><br><p>확인이 끝났으면 가상 머신을 생성합시다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># --register 옵션을 사용해 등록까지 한번에 합니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 여러 설정을 지금 해줄 수 있습니다. 추후에 modifyvm 명령어로 수정해도 됩니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ vboxmanage createvm --name </span><span class="token string" style="color:#e3116c">"your awesome vm"</span><span class="token plain"> --register</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Virtual machine </span><span class="token string" style="color:#e3116c">'your awesome vm'</span><span class="token plain"> is created and registered.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">UUID: 9a846e25-5227-4824-b396-2174264cb232</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Settings file: </span><span class="token string" style="color:#e3116c">'/some/path/your awesome vm.vbox'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 만일 --register를 사용하지 않았다면, 명령어를 한번 더 입력해야 합니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ vboxmanage registervm </span><span class="token string" style="color:#e3116c">"/some/path/your awesome vm.vbox"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>주의! virtualbox는 user마다 사용환경이 분리되어 있어 sudo를 사용하면 생성한 vm이 보이지 않습니다</em>
<del>(어떻게 알았냐고요? 저도 알고싶지 않았어요...)</del></p><br><p>가상 머신 등록을 마쳤으면 여려 spec을 설정합시다.</p><ul><li><code>--ostype</code>: 위에서 확인한 type을 입력합니다.</li><li><code>--cpus</code>: 사용할 cpu 크기를 설정합니다.</li><li><code>--memory</code>: 사용할 메모리를 설정합니다. (MB)</li><li><code>--vram</code>: 비디오 메모리를 설정합니다. (MB)</li><li><code>--mouse</code>: usbtablet으로 설정하면 mstsc에서 마우스 통합을 사용할 수 있습니다.</li><li><code>--x2apic on</code> <code>--ioapic on</code>: Advanced Programmable Interrupt Controller.
on을 설정해야 guest machine에서 cpu를 온전히 잡습니다.</li><li><code>--pae</code>: Physical Address Extension. on/off 값으로 메모리 4GB 이상일 때 사용합니다.  </li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ vboxmanage modifyvm </span><span class="token string" style="color:#e3116c">"your awesome vm"</span><span class="token plain"> --ostype ubuntu_64 --cpus </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"> --memory </span><span class="token number" style="color:#36acaa">20480</span><span class="token plain"> --vram </span><span class="token number" style="color:#36acaa">16</span><span class="token plain"> --mouse usbtablet --x2apic on --ioapic on --pae on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 설정은 다음 명령어로 확인할 수 있습니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ vboxmanage showvminfo </span><span class="token string" style="color:#e3116c">"your awesome vm"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Name:                        your awesome vm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Groups:                      /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Guest OS:                    Ubuntu </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">64</span><span class="token plain">-bit</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">UUID:                        570ea192-d2ed-4ebd-91e9-b8d98e0498e6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. 생략 </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>마지막으로 storage와 dvddrive를 설정합시다.</p><ul><li><code>--filename</code>: 생성할 이미지 이름입니다. 주의! 경로를 지정하지 않으면 작업공간에 생깁니다. </li><li><code>--size</code>: 사용할 storage 크기입니다. (MB)</li><li><code>--format</code>: 포멧 설정입니다. (default VDI)</li><li><code>--variant</code>: Standard/Fixed 값으로 동적할당/정적할당 입니다.  </li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ vboxmanage createmedium disk --filename </span><span class="token string" style="color:#e3116c">"awesome storage.vdi"</span><span class="token plain"> --size </span><span class="token number" style="color:#36acaa">20240</span><span class="token plain"> --format VDI --variant fix </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># storage controller를 추가합니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ vboxmanage storagectl </span><span class="token string" style="color:#e3116c">"your awesome vm"</span><span class="token plain"> --name </span><span class="token string" style="color:#e3116c">"SATA"</span><span class="token plain"> --add sata --portcount </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 생성한 컨트롤러에 이미지를 연결합니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ vboxmanage storageattach </span><span class="token string" style="color:#e3116c">"your awesome vm"</span><span class="token plain"> --storagectl </span><span class="token string" style="color:#e3116c">"SATA"</span><span class="token plain"> --port </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> --device </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> --type hdd --medium </span><span class="token string" style="color:#e3116c">"awesome storage.vdi"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 부팅에 사용할 iso 파일을 연결할 dvddrive를 설정합니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 먼저 storage contoller를 추가합니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ vboxmanage storagectl </span><span class="token string" style="color:#e3116c">"your awesome vm"</span><span class="token plain"> --name </span><span class="token string" style="color:#e3116c">"IDE"</span><span class="token plain"> --add ide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 생성한 컨트롤러와 iso 파일을 vm에 연결해 줍니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ vboxmanage storageattach </span><span class="token string" style="color:#e3116c">"your awesome vm"</span><span class="token plain"> --storagectl </span><span class="token string" style="color:#e3116c">"IDE"</span><span class="token plain"> --port </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> --device </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> --type dvddrive --medium </span><span class="token string" style="color:#e3116c">"ubuntu.iso"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="virtualbox-extension-pack-설치">virtualbox extension pack 설치<a href="#virtualbox-extension-pack-설치" class="hash-link" aria-label="Direct link to virtualbox extension pack 설치" title="Direct link to virtualbox extension pack 설치">​</a></h2><p>길고 긴 설정 끝에 vm을 시작하려는데,<br>
<!-- -->어라? ssh에서 vm에 os install을 어떻게 진행할까요?<br>
<del><em>나중에 고민한 끝에 OS가 설치된 VDI를 연결시키면 된다는걸 알았습니다...</em></del></p><p>ubuntu server버전으로 headless(No gui, console)로 할 수 있을까 고민해봤지만,<br>
<!-- -->마침 이미지 버전도 <strong>GUI</strong>이고 <strong>그래픽 인터페이스 화면</strong>을 사용해 install을 하기로 했습니다!<br>
<img loading="lazy" alt="honest" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHCBYWFRgVFhYYGBgaGhgaGBwcGhgYGBgcGBgZGRgYGBocIS4lHB4rIRgYJjgmKy8xNTU1GiQ7QDs0Py40NTEBDAwMEA8QHhISHz0rJCs0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NP/AABEIALQBGQMBIgACEQEDEQH/xAAbAAABBQEBAAAAAAAAAAAAAAACAAEDBAUGB//EAEQQAAIBAgMDBwoFAgQFBQAAAAECAAMRBBIhBTFBEyJRUpGS0QYVMmFxcoGhscFCYoKi0hQjQ1Ph4hZjsvDxM0Rzk8L/xAAaAQADAQEBAQAAAAAAAAAAAAAAAQIDBAUG/8QAJxEAAgIBAwQDAQADAQAAAAAAAAECEQMSITEEE0FRFCJhoSMy8VL/2gAMAwEAAhEDEQA/AJqPoJ7q/QRRsOOYnuL9I9p4cluz6aMtkODHEa0Uii9XsK0cCMIQETRSaGtFaFaNliGNHjWigA4ijXivAQo4jRjHYxzEI0QhYhNEJIVgxi/QbR4mjgQDkZRJFWOsImUmZyIGGsa0laDaSy1wABHyxyI14D1JCtHAivHUydx6kLLGIhxhHYAWitDyxAQsLGyRZY+aImFisYJHyxXiiGV8P6Ce6v0EkBkVBeYvur9BDvNZ3bMYcBhbxmWMGjXkqxtqhzHzQGcSKrWtKqxaktyxniziZnLkxX+MTgNZbNPPBNSU0cw1vJ0lqdlkNCDSAXiYt6oaRuSXJYvGZhIVQneezSGKYg1QKTlwHmiDRwI+UyShs0cRZYWWNMl8jaRwI1o+aOkRqYQaMTFaDYxhafIjFFljgSWUmCY0MgRaRkgiOIQjiKyqQDAxwsKM0GxJb2NGijiItAxR4+aNABFCZ42eOhWQYetzFv1V+gjs95Fhkui+6v0EkCzolVs4I6hG3C8gIY8Zayi2sC1+FpNorSyDIemDUQbt8sZeyEUhYqZSGHA6ZJTpjolkJFlEGNbEeXojqtoZjMwAuTb1mKh66HilYYtD6N39xWe3dEX9TxKVAP8A438I9DDulxUJk3JyHD4xG9Eg+yxI9vRJ+Wmbi/Jusiobkz0R7m1rRDFHohjEg8IaKDu2QwlMkLLBCjpi0setMWkYgQKjhQSTYDeeAme228ODY1kv7wj7cnwhdyC5ZqgiGNZSoYpHF0ZWHSCCPlLAaTTT3L2a2DZJGRH5QdMPMDAaITCkuSR5RFQ00NETCKGA5tFTFaFmjl5CzGCbmNRBySJs0bNIGMBqwEtQb4IeWMeS3eCzWlQVydwidzxj7bJfURJHqweVkDteDaarHsYS6h3sWsM1kX3V+ghipIcOpyL7q/QQyhktfZlaqiiTPeMz30tEEMQQ9Emim0FEY4QyQU4Bt4IM0DEvkQtvtuHSToB2kS0KYlTaq2pP06ZN2r5hkGv5sscWm0iZRdWZ+FapVeybrXJPoKMxVL9JOVmtv1UaCbuH2Sg1e9Rul7ED3V3LJNl4EUkCC1zdnI0zM2rHt+VpdM0lLekRGO1sFE4DdCyxQpDKKmKwKP6Si/Bhow9jDUTFxFR6TGm3PY/+kd2e59Fuhl4+rXpE6WZ22cOXpll9NP7ie8oOnsIup9TS4tN0yZLa0Z1HBgWZ+e/Em9h6kXcolkiNhsSjqGQhgbHT1i8k0kSbvcnxsQlpnbZ2wmHXM2rH0FG9vAeuadRgATwFyZ5Nt3aJr1mc3y3so6FG7x+M3wY9ct+EY58rhHbkW1NtVa557HLwUaKOjTj8ZmExo89FJJUjzXJydtk+GxTocyMVPSDabzeV9c0Wpk846BxowHEacfXOanQ+TPk2cWHIcIEKg3Um+a/rHRJnGHMkaYp5L0xfJijEte+Zr9Nzebmy/KytSIDHlF6G3/Bt/bedbtbyQwq0czEoyLbMpAzlV4qdCxsd05R/JGtYMjK4IB4qR6rGZ68U1ubKGeDtHoGydsJXQMh95TvU9BEvb5xnkjsOrQqM9QgAqVyg3zXI1NtLC07dXB4Tzs2OMZ1F2j1MGWUoXJUxyZE5MlNpA1pmipAyN61hHMBvVNVRi7bK71DwgpSvvlhaeuupjuunRFb8CpVcgMwG6C+7WCWtoIMtRMZZL4HC3j8lHRpJysqiLDwx5i+6v0EsKJDhUGRPdX6CWAJzye7O+MdhwI9orxZpJVCiMbSEB64rFQhKldM1WinDMzn2Iht+5lPwlwiVv/cUzwyVR8b0z9FMvH/sTL/U1hHvHkWJzZGy+llOX220+cZLZFVxtNWCs6Kx3AsAfVpLEzNmJSFIWy6jnlrZi1ufnvre99DNNRa3RKarYI2wpXxWHDplJNjvtpccVPqMnJjNFwwZzuCTJno7sjHKOlGJZCB0C5X9EtR8Ls1npr/UWaoM12UkZczEhVYWNgLD4SPDIVd6ZJbJlKk6nK4Ngx4kFWF+i0ufloyS8EO0kLUqgXeUcD25TaeOme4Ok8p8qNlGhWNvQYlkPtOq+0To6Oa3icvV42kmYklo0mdgqgsxIAA1JJ4CQza8lsalHEpUqeiLgm18uZSA3wvO1ukcMUm0mSP5K4pWVTSN3NhqCAd9mPDdPTfJjYow1EJe7MczngWIAsPUALSXDbdwzsqJWRmbcAbndeagnDmzTapqj08OGEXqi7K+JRXDUzYkqwPGwYFb+reZg0arKoV0cOoAayMwJAtcFQQQd82cPQbLURrqWZyHFtQ5OW3rUWGvVkGJLYelTVOcFKIzNcmzWQNpvOYjtmOzVG9u7KtFwwDA3B1BEtI8rUKJUuTa7sWsBZQSBew9ZF/aTLCPMJNWdMIyW5LkMXJ2j8tBLkyLNHFsHkjC5EndFmJhB7S1Ih4wVpW6Iz0gd8MuTHzQ1Mjtp8lVsL64v6QdMsXkmWXGcmZSxRRS/pR0xf0olkLHlXIXbiQ4f0E91f8ApElvBwiXRfdX6CG6iZyjuzVSpAkQGaDnPsjGTQ9ViNSSJUkVorQaEmWVeVdoKQq1FBJpsHAG9hYq6/FS3xtDUyRXhF6XY3TVF+jWV1VlYMpAII3EHdJJgoj0iWpWZCbtTOmp1JQ/hJ6DofVLtHbFM6MSjdDjL2E6H4Ga0nujK2uS4+FQnMUUnpIBMlEFKgYXBBHSNQYRiKVCMaK8ZnsLmAjK8okBRGOtqtLTUXDOqEaepjHo0lS4UAX1Pr4ayLE4jl3VU1powZn4Oy+iqdIB1J9QHTLIEc3SSJju20ct5e1qi0UKkhS1ntccObcjhvnnj12IsWYjfYkkfOezYzCrURkcXVhYj/vcZ5ztnySrUiTTBqJwt6QHQy/cTs6XJBR0vZnH1eOcpalujmI95ZGBqXtyb391vCXqnk5iQAeRcgi+mtvaBuM69SXk4lCT4RlKxGo3z23yaxLVMLRd/SKi56bErm+Nr/Geb7C8k6lWrkqg01UKz39KzE2CjpNjvnqlIpTUICqhFAAuBlAFh9Jy9TOLVLk7OlhKLbfBM9VVF2IA6SQB85lbWxKOiojKzM6aKQbBXV2JtuACn5QNoVEdlZGLOgYAIodTmte9+aDzd9+mTYJHCDPlz6k5RYWvoPWQOM4m1FWd8VqdEjJeROlpaAgskwo6dVESU5IKcNUhgQoWtgLTEfkxDAhARi1EfJxGnJQIWgjSIlKiEUY60umE1W0jeueAlqkZ/aXANToEjyiC+bdA5Iy9SJ0P2HhafMTW3NX6CSqoHETjU8sAEUcmdAovnHAAdEL/AIwXhTv+rwWaSwybMfkRrk61lF/bBZBOUPlc3+SO+fusA+Vbf5S9/wD2yeyw+VE6vJ6o60zOVHlS+4U17zn/APMY+UlfgqD4MfvDssPkxOsNOOyWnInyixH/ACx+hv5QT5QYjrJ3D/KLsP2UuqidYElfaNbIl9LkqqggtckgGyjVrC5sOic0fKDEdZO4f5SPzzXzh8y3UEDmXAzWuQCd+g1gsLTsUuqjWx1GzqjIMiPSe7O2U56Tc9ix5rA39KXziao30W/SyMPqDOIr+UdZxlcqwPTSBkNDb2IQELUex4FLge7caCPtze7oyWeKOqweKqOqhqjK+XnDIgAIsHym1jYnpkxwan0yz++xI7vo/KcRR2k6Wyuwtu5gsLgA6W3mwJ6SLyU7fq3A5U3P5F/jKeKTezGuojW6O7Fo95xB2xXH+KfiqeEjba9VtTWOnABB9BI7L9l/Kj6O0rY1EJDE6AFrKSFB0BYgaDQ7+iTkzz87WqKHHKE51yvopuACOO70jJKe2sSAAGO4AXVOEbwbWmEeqje52WNxyUxd2t0DeT7ANTMXaPlBdRyJytfnF1I5tuF9L3tvnMYvE1HfO7LmtbW2g6AAJXDuL6/ta30nZh6fCknNu/4cubq8jbUFt/Todn+Uzoz1GVHLBFvcr6BbhrvzGVcVtqo9R6gslwgJAVgoUmxuwJ/Eb26Jio5W3OQfp17bSxymYWz3v+WdiXSretzkeTM9rOvoeUiKFVgzgCzVAoCkjewS97ToaNZWAZWBB1BB0M8wsbAZ27oH1lrZ9c0QVUqQTm5yo2p6L7p5/UYMLp42782d2DrMitTW34d/VrMXVEIBKsxJGawUqLAdJLDsMHB7RV0QsQGYLprbMw9G/tnIU9v10vkyC/Vpr9bwKu3sS7KzEc03AKrlvwJAOpmHYVG/y1dnoAaPmnBN5TYgb2pj9P8ArGXykxJ/EPgmnzkdiRfy4Hf54uUE4IeUeI/Ifag+zQP+Ja5/Ev6UuO0xrAxvq8Z6AasE1J5+dv4nrt3EH1EBtsYn/Mf4ZfoFgsD9kPqo+j0FqkA1J58dq1z/AIlTtAgf1tc/jqf/AGGPsfpPyo+j0JqkHOJ5+2NrD/EqfBifrG841uvV7wldl+xfJXot0tjEqOfoQPwDiPbCXYA41G+AA+t5fw+Np5F56eiv4h0CE20qQ/Gvbf6RSnkt0c6UKKQ2DT4lz+rwjtsukthZ9d1mc/Q6Sd9oUWFi6kfGCNo0735QWta3D23tFqn5sKiRvsukCBlck9DOe3XSS+a6XV/cx+pkh2jT669sgbaVK9856NAxH0iub9h9UE2yqXVPwZh9DBOyKf5++3jHbHUrg5x2m3ZD850uuvzhc/0PoReaKf5++/jHOyKY63fbxknnKl11jNtKj11heT9B6CIbMpkXBYj1O3jGbY6Hi/fMm86Ueuvzjec6XX+TeELyfovqVvMadZ+0H7RLsZRuZh3fCWfOdLrftbwi86Uut+1vCO8g6gVzsgHe7dieEXmROs/7f4yx5ypdcdh8I/nKl11+cLyCqJXGxk67/t/jEdkL137V8JZGPpddO0R/66n107whqyBUSoNioNzP+z+MFdlId1RifanhL39bT66d4QUxdLg6doENWQKiVPMq787difxgNsYNpyj6e78wBL7bQpDe6dt/pI/ONFdzDXoUm/tsJSlkBqJTGwR1z3QY52MeDj4oPGWW2nSItnIv6mH2kKbRRd7kjoCMfmdTBSyP/gVEBdlNwqL8E/1iq7NKjM1UAe70/GTJtWkNwYexG8IY2vSO/MPajeELyeg+pBT2MN4c69AXX6wxscdd/wBvhJ12nS69vgw+0LznS66/OJyyDSgVvM69d+1fCP5mTrv3h4SyNo0uuPnE20qXXHYfCLVkD6lRtmItgXfXdqCT8o7bLW4F3I4nMot8ryVtrU912PsVvCRJtKio0zDp5jEn2m2sf+QX1D82072OYnf6TfYw12bS6g+Nz9TBO2KfDMf0N4SJtrjgjn25R97xVkfsLiiz5updRYvNtLqL85UO126n7v8ASN52fqDvf6R6Z+/6GqJTp4CoVHMXcPxDo9kkGz6vUXvDwm1Q9BfdH0EkhLM7ewlBUYY2dV6FH6j/ABlHlObmtwJt7J1DTlcN6C+6PpNMctSbZMko8GguzqhAIKWOu9uPwgtg6g0vTueGZr/9Mu4em7UEytY5F9h5o3nfAXBBbZ31PQLk9t79kTluwopDCVSLhUI9T+IjjC1Op2Mpm2uGUcL+3X5QUdj6K5V6W+yj72k91vhFaTHGEqdQ95fGF/Q1OqPiw+026ha3NAJ9e4euNTp8SxJ7B8BF3WLQjnawKMyuACqhtDcWN/CTJhKhFwm+1ucsfbCf3G/Mg+RYfcTTwCKaLuUV2VcOwYtXGTlqi09QlQLa17ab9950JakmiHszOXAVeqB7W8IR2ZU/J3m8JsolGkaHKsvJGlhqlVVe9VmeinNVL5i7vc6aWzEkcaoooMpdwQMTh6b1Va4NJqNY1HG/LooazC6ldRpGsUr5DUikNlP1kHwY/eLzVU6y91vGa7YVSAHRKb5MUyojtURkTB1HSqSXe5WoOa9xnsTY5bwXJugH4my/hJ9FjoGdVuSANWG/4GJqUWlfI1pZleaH6ydw+MXmh+uvcP8AKaW0aWSkzBChyNqtWlULHM4HLKai2qE2YGncBXC5SUBjqtBhRUBM4qUuWYPiCjo9VLckzVCjWW4fhziVuFM0WKd8i1I56pSKuyNlOW2oFgbgH7yxhNnM65gyqLsAMt9ASOn1GdBs/CUOeGoq4arWFSryrJ/S0kINF8oPokZtQRmVStyZXpUVRcOEWwfC0ajm2mdhvBzXJbnE6DcN99Fkg4xbTFFpujN8ztwde5/uj+aW/wAxe7/ulupk5OqzKpJWotO1Sqa3KMSEYolQqiJziSyi+QAAkx6L4ZMQQ92pilhsy3qcoar0Bn5BabqWsxV3zbsrDQkXFjm1dlOUU+Cn5qfrr3T/ACi80t117h/lLLUkVqSsAztiHV1V2RSmSgyim9R84QjPYtY5mI0Oou4zC5KbswptzbrkCUmRrgXdhXY1ObmGSzXJGo3weKXv+C1L0Y1LZzNc51sDa+U623kc6SDZLf5i9w/ymsqgCw+Ejo0SDmbVvko6B4zleVmulGf5qbrjun+UzsrBmQ2uHyDo1IAJ7QZ05mAFviGH/MB7qg/aXjk5XZEopFjzS3XXuH+UbzU/WXunxmusToGFjumfdkXoRjnZj9ZD8GEAbNqfk7W8JrphkBBA+Z8YqtMncxUeq1z8TDuMWlGSdnVPy95v4ytiaLoVDZedfcTw9o9k6NV0mZtqnzVYfgOvusLH52PwlQyXKmTKNK0ZigllVRcsbDgNxJJ7Ja83VPyd4/xg7OW9ZfUrn46L9zNuXKWnYlIzae10CqMrnQbl9XrMfzwvUfsXxkVLZd1FnbcOCnhJPNPS7fAKIpLHbKuVDNtcndTPxIH0vMpVKpYekBYdF+E2V2SnEuf1W+lo77JpncCp6QT87wjOEdkDjJ8gYfaNNVVbOMoA9FuAtwhLtCkCTqCd5ytfttITshuFTtXX5EQhsg8anYo+8T0c2NakWhtKl1x8xGO1KfWJ9isftK42OOLv+3wlbaWCVFADOWZrC7dGrHT1D5wUYN0mNuSRoHatPpbut4QG2xSG9j3WH2lLAYTlM12IytlAFt2VWvr7029mU+SpYoLXal/boG96l7nE01LLyamxIJTTXn9E0jhg5aSXKSVnP43Gq7hl3Bco1FyS3ACPgdquihQRlBbmjLlcNmDCsjAipzTls25QLWNyeiGLdcUrrX5R/wCjRadQh2FNzhaNXMyOlyDkd7gNY1ASCQRD2ptKnVoVSzqHvgs78nyecqzZ6iXsSgOY5ci63O5rDpjDSqTMnKzn124CVLU1sKIo2D5SUFDkM6MytY83NuO62u+R1NoKxUqjizq5zVkqI5VXUXQUlBPPOp4XHGdbi8W1Wo61WsKWJxlNLKgIprhMTdQotnKAI1ydTW36iZNGnRahRV1Nl5fIbV0ZlNdic606LrcHTRyJTToVlGhtcrmyUKQzJVQ2SmhHK0np5gype4z39diOMfD7fyOjsiMFYMULkZra2JANuyVMdTValk9HUj09RZOuiE65/wAI+86LyZqkoi1HcjPWGGU84FaWBrq4UseagLoLi/OUi2hIyUdT38Ft0jPxPlG702RQwvlBJekw5rq9iFw6ki6jcwlLDbbq02QrVsqMhCLUdVsjBslg5AU2tumltXAU3rVmcW5ygkEiw5Knv4Wmoxcmlyj1WX+irZQ3OVnDVmLVCWur8k9AjQkq43CUvtJq+CeEcxV2kjhlqoHJqvUQrUVCmcBcmtNrgZNDod8VPaJBsgOUKiKr1OUKBMwADBF5uugtpYzp0qE18Sqq9qeKxpZFsKWJFWo6KlcHgMhFyG5psADzpkYjZVjTSoDmp4amNDa96uIObT1Eb+gwyJKLvgI7vYhbyhPJpTYVECNUN6WJNENyjKTmXI1yMtgb8TAbbp5V6oXR05M/3TnymnRQlaoW4f8Asg5spvmYEWM6bySwLrSZ0qFQTXQh6lQJfMeYiLlCsRlJcEsM1xY2tn0MIyY3EIHqZiqZmzM1UEBCyrXZ6bqRenfRswNj6MqKdLcG92Za7d51P+2XWk+cCpVNR2LOjMhqZBlS1MWULvuTcybEeVTlWTI6hxlbn0TdbgkECgpI5o3Ee2W9vYFyKKBny3q5WqWqPoqXXlOVc5QMllAUXJO+UfJfEumIQq7qiOKmICswQU6JvUZ1GmXKpXXeWA3kRNu9IeLBG3E6r6b9F8Y425TO4P2DxlnD0ERKBQuWSntF0zooflUoo6c1XYEqQGU33qNLx8aAcPWc5Wd8Ng3qM7kMWzVlWoDmXNUKLTYDXMTqDeZfGiX3GQedkPXH6W+0zKOItVz5SQWc+uxuFNj6gO2Wk2W53uB7F8TJV2QOLue6PtMU4RtIp6pBna69R/2+MDzv+Q94Q/NKdL94xDZCdL94yP8AGV9gBtj8jdqmH53Xqv2L/KI7ITpfvGZdWlkd0BJAK2ub71BOvtvHGMJcEuUkannZeq/7f5QG2mjAqyPYix0HH4ytg8EXXPmyi5A0udCQSfiJO2yW4OO7/rBqEX+iuTKGz6+RsxDEZWUbr+kCCRfiBNPzqnVfsHjITspusvdPjG81t117p8ZUnCTsKkaWHPNX3R9BJLzDw206hyjk7Cw3nUi3CSna+tsgv727pJ0sJEsTtjWWPs14pTqbRpqL3J9gY/QSWriUT0mA9XE+wb5nol6L1omLRyZz+PrtUYLcIF5wJNmG8Bm+ektHFO4AUlUA9I+m3rt+GadlpJ2ZvLE1c3CZ22v8M/mYdqHwlHB11VmqAM5ylVAuSddWJO7UQ8Viy6C4JbOrZVVjlHEE232vLjj0yTB5E4lrYv8Aie+p7VUfaaGZkzlXKK4GcZabBgtiM2dDoLA23XF5g4Os6kgIwUvmY6ZiAoCqAdwNtTJcVnqFc1stwSt7C35jx/8AMppqdp0T3IqNM1lqO5SsKhLBbIxSlfLlKZcuQArlNrEHTdAq0A1s2SwIOlHDodOGZEDAeoGZdXlL5y+6+UKLADdxvraRDDMwGdQQdbFib+8d5+Fo3f8A6F3Y+jcqIWytyj3VWRCXL5UdSjqoe4AKkjs6BI7uoWmpDKmbIHpUHVM7Z2AZ0ZjdiTa/ZM84gg8nnyKAPRU6X4KNSfbwloYrIuisQOLnL231k3NeStUHuVNopaoNRcqxayog1yKLKgCgcw7h09MvbOZ2RHzvny2DkhmClXpqgzXAUI7ADhcnfMmo71GZghF+apJsABfifWSd0mq16qqqqMtgFsgJIAAFyxlu6ST3J1xs2Wp5gwdi5b0ibAnQKPRAGgUdkixNYU8zcq6l75zfM1UsrKS4a+ZrMwvv13zMRyiEi639Jic7t0b9FGsPCJTDZ3YO/AC7keskb2/7EhJxbdla4vZGxRqVBnIqH+45qPmp0nzOxZi9nQ5Td20FhrEtM5mdmzMwUHmogst7aIoHE62mcm0ixIUBFU2LOQNegLx/1k9faaKpazEDebWHaZnLuPZlqUOSy1IEZWCOt2Kq6I4QsAGKFhdb5RcXsTra8HPWVyyOQzKFditNg4BSwyFbC2RLWAAAAlSjtK4uV14KvOIFvxNuBgYXaJY52IsdERRmY/mJ+EpPKlzwJygaTl2ZXd85UMF5lNAMxUn0FF/RE53lGCtTzMEauCyXIViKtgWHHTpmpR2kC7K4CAAEXIuSSfD5zGxFUF3y3YcoGBAJ3MrXBHxl43K3q/BSlGtjo+S1BLNzWLJay5GbLmZGWzA8xdb6W0kVXDOzNzyyuVZ89nzFCcl812Nr6a9A4CANojgjn4AfUiRHab3IFJrDiWW3wtM08nsHKBoU6ZG9iewDsEkBmAmPd2FyyqCCQqkZvy3PD16S1V2i43KF9pzEfAeMmWKQ+9E1SYN5kYXaBylnLOx3KFtlHAE9J9shRqoqsMxNkFyb5Qx1IVd2nTBYXvbE8sTdvMLaQtWPQyq3YSp+3bJsOXUF2uzHrPoB0KALfGU9p1HdlyoRZWUm4PpW3ey00xw0y52JlkjJGvszm0kvppmN+Ga7feWaVVWAZTcHcen1zHqs7plPNAFgoPQLDMZE6vkVQ2oCrYHKABobW3xOCk22/Iu9FbI3zFaY7YioAAmXTKLb9NLksdTpLXLv0p2HxkPG/ZXeiUKe5fd8JJh6S9A3mPFNZcs4/I9SgDv4btSPpDo0lBFgPbxiih4GHiFF72F/YJGYopC4EKPFFAaFFFFAYL7j7DEm5fYIoo/BLHp+mJYrRRQfgQx3SExRRLgZNS3GEUAvboiik+SkV6AF72F/ZLBUEPcCKKN8j8A4ZBmA4SNVGbQAandpFFK8iROyj5wK8UUhcg+CAx4opT4ESpwgsNY8UXkGRmEh1EUUfgQmOkZeMUUBoYwTHigIaPFFGI//2Q==" width="281" height="180" class="img_ev3q"></p><br>GUI를 원격으로 보여주려면 virtualbox extension pack이 설치되어야 합니다.<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># https://www.virtualbox.org/wiki/Downloads에서 버전에 맞는 extension pack을 받습니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> -O </span><span class="token string" style="color:#e3116c">"확장팩 이름"</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"url"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> vboxmanage extpack </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"확장팩 이름"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>이제 vm이 GUI를 실행시켜 주도록 설정하고 실행합니다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ vboxmanage modifyvm </span><span class="token string" style="color:#e3116c">"your awesome vm"</span><span class="token plain"> --vrde on --vrdeport </span><span class="token string" style="color:#e3116c">"port number"</span><span class="token plain"> --vrdemulticon on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ vboxheadless --startvm </span><span class="token string" style="color:#e3116c">"your awesome vm"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Oracle VM VirtualBox Headless Interface </span><span class="token number" style="color:#36acaa">6.0</span><span class="token plain">.20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">C</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2008</span><span class="token plain">-2020 Oracle Corporation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">All rights reserved.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VRDE server is listening on port </span><span class="token number" style="color:#36acaa">5031</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 아래 명령어로 실행시킬 수 있으나 포트번호가 나오지 않습니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ vboxmanage startvm </span><span class="token string" style="color:#e3116c">"your awesome vm"</span><span class="token plain"> --vboxheadless</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 또한, vboxheadless 옵션을 주지 않으면 다음과 같은 에러가 납니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Waiting </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> VM </span><span class="token string" style="color:#e3116c">"your awesome vm"</span><span class="token plain"> to power on</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VBoxManage: error: The virtual machine </span><span class="token string" style="color:#e3116c">'your awesome vm'</span><span class="token plain"> has terminated unexpectedly during startup because of signal </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VBoxManage: error: Details: code NS_ERROR_FAILURE </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">0x80004005</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">, component MachineWrap, interface IMachine</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="네트워크-설정과-rdp">네트워크 설정과 RDP<a href="#네트워크-설정과-rdp" class="hash-link" aria-label="Direct link to 네트워크 설정과 RDP" title="Direct link to 네트워크 설정과 RDP">​</a></h2><p>저는 VM이 사설망과 연결되어야 했기에 네트워크 어댑터를 설정해 주었습니다.<br>
<!-- -->별도로 네트워크 세팅이 필요 없으면 건너뛰어도 됩니다. (기본적으로 NAT로 설정되어 있습니다)</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># nat과 bridge를 둘 다 사용하기 위해 다음과 같이 구성했습니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ vboxmanage modifyvm </span><span class="token string" style="color:#e3116c">"your awesome vm"</span><span class="token plain"> --nic1 nat --nic2 bridged --bridgeadapter2 </span><span class="token string" style="color:#e3116c">"host interface"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rdpremote-desktop-protocol-사용">RDP(remote desktop protocol) 사용<a href="#rdpremote-desktop-protocol-사용" class="hash-link" aria-label="Direct link to RDP(remote desktop protocol) 사용" title="Direct link to RDP(remote desktop protocol) 사용">​</a></h3><p><em>드디어 무중霧中을 빠져나와...</em></p><p><img loading="lazy" alt="mstsc" src="/assets/images/mstsc-03edae31a81e0260dc40213a5a0a8336.png" width="980" height="850" class="img_ev3q"><br>
<!-- -->작업중인 로컬 PC에서 원격 데스크톱 연결을 열어줍니다.</p><br><p><img loading="lazy" alt="mstsc connection" src="/assets/images/mstsc-connection-336924a1beb9f88de18b2b165ee73b35.png" width="610" height="378" class="img_ev3q"><br>
<!-- -->호스트 컴퓨터의 ip와 vm 설정에 사용한 GUI 포트를 입력합니다.  </p><br><p><img loading="lazy" alt="mstsc ubuntu" src="/assets/images/mstsc-ubuntu-b8a9be20a118d0a073eb6d5ac59e725e.png" width="1920" height="1080" class="img_ev3q"><br>
<!-- -->이제 그리웠던 GUI를 사용할 수 있습니다! 😊</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="vboxmanage-the-machine-locked-for-a-session-문제">vboxmanage The machine locked for a session 문제<a href="#vboxmanage-the-machine-locked-for-a-session-문제" class="hash-link" aria-label="Direct link to vboxmanage The machine locked for a session 문제" title="Direct link to vboxmanage The machine locked for a session 문제">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">~$ vboxheadless --startvm your awesome vm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Oracle VM VirtualBox Headless Interface </span><span class="token number" style="color:#36acaa">5.2</span><span class="token plain">.44</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">C</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2008</span><span class="token plain">-2020 Oracle Corporation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">All rights reserved.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VBoxHeadless: error: The machine </span><span class="token string" style="color:#e3116c">'your awesome vm'</span><span class="token plain"> is already locked </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> a session </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">or being unlocked</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VBoxHeadless: error: Details: code VBOX_E_INVALID_OBJECT_STATE </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">0x80bb0007</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">, component MachineWrap, interface IMachine, callee nsISupports</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VBoxHeadless: error: Context: </span><span class="token string" style="color:#e3116c">"LockMachine(session, LockType_VM)"</span><span class="token plain"> at line </span><span class="token number" style="color:#36acaa">947</span><span class="token plain"> of </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> VBoxHeadless.cpp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이런 에러와 함께 어떤 명령도 실행되지 않을 때가 있습니다.  </p><p>다음 명령어로 VM을 강제종료 할 수 있습니다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ vboxmanage startvm kube-slave-kf --type emergencystop</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h2><p><a href="https://docs.oracle.com/en/virtualization/virtualbox/6.1/user/vboxmanage.html" target="_blank" rel="noopener noreferrer">[공식]VBoxManage</a>  </p>]]></content:encoded>
            <category>tech</category>
            <category>virtualbox</category>
            <category>linux</category>
        </item>
        <item>
            <title><![CDATA[나에게 필요한 도커 설치하기]]></title>
            <link>https://jwher.github.io/posts/install-docker</link>
            <guid>https://jwher.github.io/posts/install-docker</guid>
            <pubDate>Tue, 13 Apr 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Install Docker]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="docker" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUwMCIgaGVpZ2h0PSIyMTAwIiB2aWV3Qm94PSIwIDAgMjU2IDIxNSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0zOC42MTcgMTczLjk4NHYtMTYuMzYyYzAtMi4xNSAxLjM0NC0zLjg3NyAzLjU3LTMuODc3aC42MTZjMi4yMjUgMCAzLjU2MyAxLjcyOSAzLjU2MyAzLjg3N3YzNC40NDdjMCA4LjQtNC4xNSAxNS4wODQtMTEuMzgyIDE5LjM0MmEyMS4zNzQgMjEuMzc0IDAgMCAxLTEwLjk0NSAyLjk4NWgtMS41MzdjLTguNDAyIDAtMTUuMDc3LTQuMTUzLTE5LjM0Mi0xMS4zOGEyMS4zMTQgMjEuMzE0IDAgMCAxLTIuOTg0LTEwLjk0N3YtMS41MzVjMC04LjQwMyA0LjE1Mi0xNS4wODMgMTEuMzc4LTE5LjM0OWEyMS4yOTggMjEuMjk4IDAgMCAxIDEwLjk0OC0yLjk4NWgxLjUzN2M1LjY4NiAwIDEwLjUxIDIuMjA0IDE0LjU3OCA1Ljc4NHpNNy45MjQgMTkxLjNjMCA2LjA2OCAyLjk0MSAxMC42MyA4LjI1OCAxMy41NCAyLjE1IDEuMTc2IDQuNDg0IDEuODA4IDYuOTM3IDEuODA4IDUuOTU2IDAgMTAuMzc0LTIuODEgMTMuNDIxLTcuODU3IDEuNDE3LTIuMzQ4IDIuMDc3LTQuOTE3IDIuMDc3LTcuNjQ4IDAtNS4yNi0yLjQ5LTkuMzY1LTYuNzI5LTEyLjQxNC0yLjU3LTEuODQ4LTUuNDYzLTIuNzc1LTguNjE4LTIuNzc1LTYuNDkyIDAtMTEuMTY0IDMuMjgtMTMuOTY4IDkuMTA2LS45NDYgMS45Ny0xLjM3OCA0LjA2MS0xLjM3OCA2LjI0em02NS4zMjQtMjMuMWgxLjA3NGM4Ljk3OCAwIDE1LjgwNiA0LjM1NSAyMC4xMzMgMTIuMTkyIDEuNzMgMy4xMzUgMi42NTYgNi41NTcgMi42NTYgMTAuMTQydjEuNTM1YzAgOC40LTQuMTQyIDE1LjA5My0xMS4zODUgMTkuMzQzLTMuMzUzIDEuOTY3LTcuMDU3IDIuOTg0LTEwLjk0MyAyLjk4NGgtMS41MzVjLTguNDAyIDAtMTUuMDc5LTQuMTUzLTE5LjM0Mi0xMS4zOGEyMS4zMTYgMjEuMzE2IDAgMCAxLTIuOTg3LTEwLjk0N3YtMS41MzVjMC04LjQwNCA0LjE2OS0xNS4wNjIgMTEuMzc3LTE5LjM0NyAzLjM1MS0xLjk5MSA3LjA1OC0yLjk4NyAxMC45NTItMi45ODd6bS0xNC41OCAyMy4xYzAgNS44OSAyLjg5IDEwLjIyMyA3Ljg2NSAxMy4yNyAyLjMzNiAxLjQzIDQuOTA5IDIuMDc4IDcuNjM4IDIuMDc4IDUuODIgMCAxMC4xMjItMi45NTEgMTMuMTE2LTcuODYzIDEuNDI4LTIuMzQyIDIuMDc0LTQuOTE1IDIuMDc0LTcuNjQyIDAtNS40NzctMi42MzgtOS42NjEtNy4xNDgtMTIuNjkzLTIuNDcxLTEuNjYzLTUuMjIyLTIuNDk2LTguMTk4LTIuNDk2LTYuNDkyIDAtMTEuMTY0IDMuMjgtMTMuOTY3IDkuMTA2LS45NDggMS45Ny0xLjM4IDQuMDYxLTEuMzggNi4yNHptNzAuNjU2LTE0LjcyN2MtMS4xNy0uNTQ4LTMuMzYtLjczLTQuNjI0LS43NzgtNi40NzQtLjI0NC0xMS4xNTggMy40MDItMTMuOTA2IDkuMTEzLS45NDkgMS45Ny0xLjM4MiA0LjA1NS0xLjM4MiA2LjIzNSAwIDYuNjM3IDMuNDg1IDExLjI4NCA5LjQwOSAxNC4xMTcgMi4xNjQgMS4wMzQgNC45NTggMS4yMyA3LjMyMyAxLjIzIDIuMDggMCA1LjAyLTEuMjc0IDYuODY2LTIuMTUxbC4zMi0uMTUyaDEuNDMzbC4xNTguMDMyYzEuNzYyLjM2NyAzLjA5MiAxLjQ4NCAzLjA5MiAzLjM4di43NjdjMCA0LjcxOC04LjYyMiA1Ljc5OC0xMS45MTIgNi4wMjgtMTEuNjEuODAzLTIwLjI5My01LjU3My0yMy42MDMtMTYuNjQ3LS41NzUtMS45MjMtLjgzNC0zLjgzMy0uODM0LTUuODM3di0xLjUzM2MwLTguNDAzIDQuMTctMTUuMDU5IDExLjM3Ny0xOS4zNCAzLjM1MS0xLjk5IDcuMDU3LTIuOTkgMTAuOTUtMi45OWgxLjUzNmM0LjEzIDAgNy45MzQgMS4xNzMgMTEuMzQ0IDMuNTAybC4yOC4xOTQuMTc3LjI5MmMuMzY4LjYxLjY4NSAxLjMxNi42ODUgMi4wNDJ2Ljc2N2MwIDEuOTc4LTEuNDggMy4wNDItMy4yNjYgMy4zODZsLS4xNDguMDI2aC0uNDU4Yy0xLjE1NiAwLTMuNzg1LTEuMTk3LTQuODE3LTEuNjgzem0yNS4xMzQgNS4yNDdjMy4wMS0zLjAxNCA2LjAzLTYuMDIyIDkuMDg1LTguOTg2Ljg1MS0uODI3IDQuMDc0LTQuMzI3IDUuMzQzLTQuMzI3aDEuMzg4bC4xNTguMDMzYzEuNzY4LjM2NyAzLjA5MiAxLjQ4NiAzLjA5MiAzLjM4NnYuNzY2YzAgMS4yOTYtMS41MTggMi44MDItMi4zNTUgMy42ODktMS43OCAxLjg4Ny0zLjY1NCAzLjcxMi01LjQ3NiA1LjU2bC05LjM2MiA5LjUwNGM0LjAzMSA0LjA0IDguMDU4IDguMDgzIDEyLjA1NiAxMi4xNTRhMzEzLjMwNCAzMTMuMzA0IDAgMCAxIDMuMzAxIDMuMzk2Yy4zODUuNDA1Ljk1My45MDkgMS4yNzYgMS40Ny4zNDcuNTI2LjU2IDEuMTE5LjU2IDEuNzUydi44bC0uMDQ1LjE4NWMtLjQzNSAxLjc2OC0xLjU1NyAzLjE5NC0zLjUxNiAzLjE5NGgtLjYxN2MtMS4yODIgMC0yLjczLTEuNDUtMy42MDgtMi4yNzktMS44MS0xLjcwNi0zLjU1Ny0zLjUtNS4zMzEtNS4yNDNsLTUuOTQ5LTUuODR2OS4zMzRjMCAyLjE1LTEuMzQ2IDMuODc4LTMuNTY5IDMuODc4aC0uNjFjLTIuMjI2IDAtMy41Ny0xLjcyOC0zLjU3LTMuODc4di01Mi41OTZjMC0yLjE1IDEuMzQ1LTMuODcgMy41Ny0zLjg3aC42MWMyLjIyMyAwIDMuNTY5IDEuNzIgMy41NjkgMy44N3YyNC4wNDh6bTk2LjU3Ny0xMy4zMTNoLjc3YzIuMzI0IDAgMy44NzUgMS41NjYgMy44NzUgMy44NzcgMCAzLjIwOC0zLjA2NyA0LjAyOS01LjcyIDQuMDI5LTMuNDggMC02LjgwMyAyLjEwNy05LjIwMiA0LjQ3LTIuOTkxIDIuOTQ5LTQuMyA2LjcyNi00LjMgMTAuODc4djE4Ljc1OWMwIDIuMTUtMS4zNDMgMy44NzYtMy41NyAzLjg3NmgtLjYxMmMtMi4yMjcgMC0zLjU2OS0xLjcyNS0zLjU2OS0zLjg3NnYtMTkuODM2YzAtNy42MTcgMy43MDgtMTMuODM1IDkuODktMTguMTk2IDMuNjkxLTIuNjA1IDcuOTE5LTMuOTggMTIuNDM4LTMuOTh6bS01NS4wNzQgMzcuMTc2YzIuODIuOTg1IDYuMDM1Ljg0NCA4LjkyOC4zNCAxLjQ4LS42MjkgNS4yNjQtMi4yOCA2LjY1Ni0yLjAzOGwuMjE3LjAzNy4yLjA5OGMuODUuNDEyIDEuNjYxLjk5NSAyLjA5NSAxLjg2IDEuMDE0IDIuMDI3LjUyNyA0LjA2NS0xLjQ2NSA1LjIxNmwtLjY2My4zODNjLTcuMzUgNC4yNDItMTUuMTY4IDMuNjU0LTIyLjQ5NS0uMzA4LTMuNTAzLTEuODk0LTYuMTgzLTQuNzA1LTguMTYtOC4xMzJsLS40NjItLjgwMWMtNC43MTktOC4xNzItNC4wODItMTYuNzY4IDEuMjQtMjQuNTM5IDEuODM3LTIuNjg2IDQuMjM4LTQuNzYxIDcuMDQ1LTYuMzg0bDEuMDYyLS42MTNjNi45MjItMy45OTYgMTQuMzQxLTMuNzIyIDIxLjQ1LS4yMTUgMy44MjMgMS44ODYgNi45MiA0LjY5NyA5LjA1NCA4LjM5NGwuMzg0LjY2NmMxLjU1IDIuNjg2LS40NTggNS4wMjYtMi41MzEgNi42MjYtMi40MDYgMS44NTYtNC44MzUgNC4wOS03LjE0MSA2LjA4LTUuMTQyIDQuNDM5LTEwLjI3NiA4Ljg4OC0xNS40MTQgMTMuMzN6bS02LjY1NS00LjY3NGM1Ljc1LTQuOTMgMTEuNTAyLTkuODY1IDE3LjIzNy0xNC44MTYgMS45Ni0xLjY5IDQuMTA5LTMuNDQ0IDYuMDUzLTUuMjIxLTEuNTYtMS45NjYtNC4xNjYtMy4zODMtNi4zOC00LjIyOC00LjQ3LTEuNzAzLTguODc3LTEuMTMxLTEyLjk3NiAxLjIzNS01LjM2NSAzLjA5OC03LjY1IDguMDMxLTcuNDUgMTQuMTcuMDggMi40MTguNzMgNC43NDggMi4wMTMgNi44MDUuNDUyLjcyNS45NTcgMS40MDYgMS41MDMgMi4wNTV6TTE0Ny40ODggNDUuNzMyaDIyLjg2NnYyMy4zNzVoMTEuNTYxYzUuMzQgMCAxMC44MzEtLjk1MSAxNS44ODctMi42NjQgMi40ODUtLjg0MyA1LjI3My0yLjAxNSA3LjcyNC0zLjQ5LTMuMjI4LTQuMjE0LTQuODc2LTkuNTM1LTUuMzYtMTQuNzgtLjY2LTcuMTM1Ljc4LTE2LjQyMSA1LjYwOC0yMi4wMDVsMi40MDQtMi43OCAyLjg2NCAyLjMwM2M3LjIxMSA1Ljc5MyAxMy4yNzYgMTMuODg5IDE0LjM0NSAyMy4xMTggOC42ODMtMi41NTQgMTguODc4LTEuOTUgMjYuNTMxIDIuNDY3bDMuMTQgMS44MTItMS42NTIgMy4yMjZDMjQ2LjkzMyA2OC45NDYgMjMzLjQgNzIuODYgMjIwLjE3IDcyLjE2N2MtMTkuNzk3IDQ5LjMwOS02Mi44OTggNzIuNjUzLTExNS4xNTcgNzIuNjUzLTI3IDAtNTEuNzctMTAuMDkzLTY1Ljg3Ni0zNC4wNDdsLS4yMzEtLjM5LTIuMDU1LTQuMTgyYy00Ljc2OC0xMC41NDQtNi4zNTItMjIuMDk1LTUuMjc4LTMzLjYzN2wuMzIzLTMuNDU3SDUxLjQ1VjQ1LjczMmgyMi44NjVWMjIuODY2aDQ1LjczM1YwaDI3LjQ0djQ1LjczMiIgZmlsbD0iIzM2NDU0OCIvPjxwYXRoIGQ9Ik0yMjEuNTcgNTQuMzhjMS41MzMtMTEuOTE2LTcuMzg0LTIxLjI3NS0xMi45MTQtMjUuNzE5LTYuMzczIDcuMzY4LTcuMzYzIDI2LjY3OCAyLjYzNSAzNC44MDgtNS41OCA0Ljk1Ni0xNy4zMzcgOS40NDgtMjkuMzc2IDkuNDQ4SDM1LjM3Yy0xLjE3IDEyLjU2NyAxLjAzNiAyNC4xNCA2LjA3NSAzNC4wNDVsMS42NjcgMy4wNWE1Ni41MzYgNTYuNTM2IDAgMCAwIDMuNDU1IDUuMTg0YzYuMDI1LjM4NyAxMS41OC41MiAxNi42NjIuNDA4aC4wMDJjOS45ODctLjIyIDE4LjEzNi0xLjQgMjQuMzEyLTMuNTRhMS43NjEgMS43NjEgMCAwIDEgMS4xNTMgMy4zMjZjLS44MjIuMjg2LTEuNjc4LjU1Mi0yLjU2Mi44MDVoLS4wMDNjLTQuODYzIDEuMzg5LTEwLjA3OCAyLjMyMy0xNi44MDYgMi43MzguNC4wMDctLjQxNi4wNi0uNDE4LjA2LS4yMjkuMDE1LS41MTcuMDQ4LS43NDcuMDYtMi42NDguMTQ5LTUuNTA2LjE4LTguNDI4LjE4LTMuMTk2IDAtNi4zNDMtLjA2LTkuODYyLS4yNGwtLjA5LjA2YzEyLjIxIDEzLjcyNCAzMS4zMDIgMjEuOTU1IDU1LjIzNCAyMS45NTUgNTAuNjQ4IDAgOTMuNjA4LTIyLjQ1MiAxMTIuNjMyLTcyLjg1NyAxMy40OTYgMS4zODUgMjYuNDY3LTIuMDU3IDMyLjM2Ny0xMy41NzUtOS4zOTgtNS40MjMtMjEuNDg0LTMuNjk0LTI4LjQ0My0uMTk2IiBmaWxsPSIjMjJBMEM4Ii8+PHBhdGggZD0iTTIyMS41NyA1NC4zOGMxLjUzMy0xMS45MTYtNy4zODQtMjEuMjc1LTEyLjkxNC0yNS43MTktNi4zNzMgNy4zNjgtNy4zNjMgMjYuNjc4IDIuNjM1IDM0LjgwOC01LjU4IDQuOTU2LTE3LjMzNyA5LjQ0OC0yOS4zNzYgOS40NDhINDQuMDQ4Yy0uNTk4IDE5LjI0NiA2LjU0NCAzMy44NTUgMTkuMTggNDIuNjg3aC4wMDNjOS45ODctLjIyIDE4LjEzNi0xLjQgMjQuMzEyLTMuNTRhMS43NjEgMS43NjEgMCAwIDEgMS4xNTMgMy4zMjZjLS44MjIuMjg2LTEuNjc4LjU1Mi0yLjU2Mi44MDVoLS4wMDNjLTQuODYzIDEuMzg5LTEwLjUyNiAyLjQ0My0xNy4yNTQgMi44NTgtLjAwMiAwLS4xNjMtLjE1NS0uMTY1LS4xNTUgMTcuMjM3IDguODQyIDQyLjIzIDguODEgNzAuODg1LTIuMTk3IDMyLjEzLTEyLjM0NCA2Mi4wMjktMzUuODYgODIuODktNjIuNzU3LS4zMTQuMTQyLS42Mi4yODctLjkxNy40MzYiIGZpbGw9IiMzN0IxRDkiLz48cGF0aCBkPSJNMzUuNjQ1IDg4LjE4NmMuOTEgNi43MzIgMi44OCAxMy4wMzUgNS44IDE4Ljc3NmwxLjY2NyAzLjA1YTU2LjQzMiA1Ni40MzIgMCAwIDAgMy40NTUgNS4xODRjNi4wMjYuMzg3IDExLjU4MS41MiAxNi42NjQuNDA4IDkuOTg3LS4yMiAxOC4xMzYtMS40IDI0LjMxMi0zLjU0YTEuNzYxIDEuNzYxIDAgMCAxIDEuMTUzIDMuMzI2Yy0uODIyLjI4Ni0xLjY3OC41NTItMi41NjIuODA1aC0uMDAzYy00Ljg2MyAxLjM4OS0xMC40OTYgMi4zODMtMTcuMjI0IDIuNzk5LS4yMzEuMDE0LS42MzQuMDE3LS44NjcuMDMtMi42NDYuMTQ4LTUuNDc1LjIzOS04LjM5OC4yMzktMy4xOTUgMC02LjQ2My0uMDYxLTkuOTgtLjI0IDEyLjIxIDEzLjcyNCAzMS40MiAyMS45ODUgNTUuMzUyIDIxLjk4NSA0My4zNiAwIDgxLjA4NC0xNi40NTggMTAyLjk3OS01Mi44MjJIMzUuNjQ1IiBmaWxsPSIjMUI4MUE1Ii8+PHBhdGggZD0iTTQ1LjM2NyA4OC4xODZjMi41OTIgMTEuODIgOC44MjEgMjEuMDk5IDE3Ljg2NCAyNy40MTggOS45ODctLjIyIDE4LjEzNi0xLjQgMjQuMzEyLTMuNTRhMS43NjEgMS43NjEgMCAwIDEgMS4xNTMgMy4zMjZjLS44MjIuMjg2LTEuNjc4LjU1Mi0yLjU2Mi44MDVoLS4wMDNjLTQuODYzIDEuMzg5LTEwLjYxNSAyLjM4My0xNy4zNDQgMi43OTkgMTcuMjM2IDguODQgNDIuMTU3IDguNzEzIDcwLjgxLTIuMjkzIDE3LjMzNC02LjY2IDM0LjAxNy0xNi41NzQgNDguOTg0LTI4LjUxNUg0NS4zNjciIGZpbGw9IiMxRDkxQjQiLz48cGF0aCBkPSJNNTUuMjYgNDkuNTQzaDE5LjgxOHYxOS44MThINTUuMjZWNDkuNTQzem0xLjY1MSAxLjY1MmgxLjU2NFY2Ny43MWgtMS41NjRWNTEuMTk1em0yLjk0IDBoMS42MjdWNjcuNzFoLTEuNjI2VjUxLjE5NXptMy4wMDIgMGgxLjYyN1Y2Ny43MWgtMS42MjdWNTEuMTk1em0zLjAwNCAwaDEuNjI2VjY3LjcxaC0xLjYyNlY1MS4xOTV6bTMuMDAzIDBoMS42MjZWNjcuNzFINjguODZWNTEuMTk1em0zLjAwMiAwaDEuNTY1VjY3LjcxaC0xLjU2NVY1MS4xOTV6TTc4LjEyNiAyNi42NzdoMTkuODE5djE5LjgxN2gtMTkuODJWMjYuNjc3em0xLjY1MiAxLjY1MmgxLjU2M3YxNi41MTRoLTEuNTYzVjI4LjMyOXptMi45NCAwaDEuNjI2djE2LjUxNGgtMS42MjVWMjguMzI5em0zLjAwMiAwaDEuNjI2djE2LjUxNEg4NS43MlYyOC4zMjl6bTMuMDAzIDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAzIDBoMS42Mjd2MTYuNTE0aC0xLjYyN1YyOC4zMjl6bTMuMDAyIDBoMS41NjZ2MTYuNTE0aC0xLjU2NlYyOC4zMjl6IiBmaWxsPSIjMjNBM0MyIi8+PHBhdGggZD0iTTc4LjEyNiA0OS41NDNoMTkuODE5djE5LjgxOGgtMTkuODJWNDkuNTQzem0xLjY1MiAxLjY1MmgxLjU2M1Y2Ny43MWgtMS41NjNWNTEuMTk1em0yLjk0IDBoMS42MjZWNjcuNzFoLTEuNjI1VjUxLjE5NXptMy4wMDIgMGgxLjYyNlY2Ny43MUg4NS43MlY1MS4xOTV6bTMuMDAzIDBoMS42MjZWNjcuNzFoLTEuNjI2VjUxLjE5NXptMy4wMDMgMGgxLjYyN1Y2Ny43MWgtMS42MjdWNTEuMTk1em0zLjAwMiAwaDEuNTY2VjY3LjcxaC0xLjU2NlY1MS4xOTV6IiBmaWxsPSIjMzRCQkRFIi8+PHBhdGggZD0iTTEwMC45OTMgNDkuNTQzaDE5LjgxOHYxOS44MThoLTE5LjgxOFY0OS41NDN6bTEuNjUxIDEuNjUyaDEuNTYzVjY3LjcxaC0xLjU2M1Y1MS4xOTV6bTIuOTQgMGgxLjYyNlY2Ny43MWgtMS42MjZWNTEuMTk1em0zLjAwMyAwaDEuNjI2VjY3LjcxaC0xLjYyNlY1MS4xOTV6bTMuMDAzIDBoMS42MjZWNjcuNzFoLTEuNjI2VjUxLjE5NXptMy4wMDIgMGgxLjYyOFY2Ny43MWgtMS42MjhWNTEuMTk1em0zLjAwMyAwaDEuNTY0VjY3LjcxaC0xLjU2NFY1MS4xOTV6IiBmaWxsPSIjMjNBM0MyIi8+PHBhdGggZD0iTTEwMC45OTMgMjYuNjc3aDE5LjgxOHYxOS44MTdoLTE5LjgxOFYyNi42Nzd6bTEuNjUxIDEuNjUyaDEuNTYzdjE2LjUxNGgtMS41NjNWMjguMzI5em0yLjk0IDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAzIDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAzIDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAyIDBoMS42Mjh2MTYuNTE0aC0xLjYyOFYyOC4zMjl6bTMuMDAzIDBoMS41NjR2MTYuNTE0aC0xLjU2NFYyOC4zMjl6TTEyMy44NTkgNDkuNTQzaDE5LjgxOHYxOS44MThoLTE5LjgxOFY0OS41NDN6bTEuNjUyIDEuNjUyaDEuNTYzVjY3LjcxaC0xLjU2M1Y1MS4xOTV6bTIuOTQgMGgxLjYyNlY2Ny43MWgtMS42MjZWNTEuMTk1em0zLjAwMiAwaDEuNjI2VjY3LjcxaC0xLjYyNlY1MS4xOTV6bTMuMDAzIDBoMS42MjdWNjcuNzFoLTEuNjI3VjUxLjE5NXptMy4wMDMgMGgxLjYyN1Y2Ny43MWgtMS42MjdWNTEuMTk1em0zLjAwMyAwaDEuNTY0VjY3LjcxaC0xLjU2NFY1MS4xOTV6IiBmaWxsPSIjMzRCQkRFIi8+PHBhdGggZD0iTTEyMy44NTkgMjYuNjc3aDE5LjgxOHYxOS44MTdoLTE5LjgxOFYyNi42Nzd6bTEuNjUyIDEuNjUyaDEuNTYzdjE2LjUxNGgtMS41NjNWMjguMzI5em0yLjk0IDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAyIDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAzIDBoMS42Mjd2MTYuNTE0aC0xLjYyN1YyOC4zMjl6bTMuMDAzIDBoMS42Mjd2MTYuNTE0aC0xLjYyN1YyOC4zMjl6bTMuMDAzIDBoMS41NjR2MTYuNTE0aC0xLjU2NFYyOC4zMjl6IiBmaWxsPSIjMjNBM0MyIi8+PHBhdGggZD0iTTEyMy44NTkgMy44MWgxOS44MThWMjMuNjNoLTE5LjgxOFYzLjgxem0xLjY1MiAxLjY1MWgxLjU2M3YxNi41MTZoLTEuNTYzVjUuNDZ6bTIuOTQgMGgxLjYyNnYxNi41MTZoLTEuNjI2VjUuNDZ6bTMuMDAyIDBoMS42MjZ2MTYuNTE2aC0xLjYyNlY1LjQ2em0zLjAwMyAwaDEuNjI3djE2LjUxNmgtMS42MjdWNS40NnptMy4wMDMgMGgxLjYyN3YxNi41MTZoLTEuNjI3VjUuNDZ6bTMuMDAzIDBoMS41NjR2MTYuNTE2aC0xLjU2NFY1LjQ2eiIgZmlsbD0iIzM0QkJERSIvPjxwYXRoIGQ9Ik0xNDYuNzI1IDQ5LjU0M2gxOS44MTh2MTkuODE4aC0xOS44MThWNDkuNTQzem0xLjY1IDEuNjUyaDEuNTY1VjY3LjcxaC0xLjU2NFY1MS4xOTV6bTIuOTQgMGgxLjYyN1Y2Ny43MWgtMS42MjZWNTEuMTk1em0zLjAwNCAwaDEuNjI3VjY3LjcxaC0xLjYyN1Y1MS4xOTV6bTMuMDAyIDBoMS42MjdWNjcuNzFoLTEuNjI3VjUxLjE5NXptMy4wMDQgMGgxLjYyNlY2Ny43MWgtMS42MjZWNTEuMTk1em0zLjAwMiAwaDEuNTY0VjY3LjcxaC0xLjU2NFY1MS4xOTV6IiBmaWxsPSIjMjNBM0MyIi8+PHBhdGggZD0iTTk2LjcwNCAxMDEuNDkyYTUuNDY4IDUuNDY4IDAgMSAxLS4wMDIgMTAuOTM1IDUuNDY4IDUuNDY4IDAgMCAxIC4wMDItMTAuOTM1IiBmaWxsPSIjRDNFQ0VDIi8+PHBhdGggZD0iTTk2LjcwNCAxMDMuMDQzYy41IDAgLjk3Ny4wOTQgMS40MTcuMjY1YTEuNTk4IDEuNTk4IDAgMCAwIC43OTggMi45OGMuNjA1IDAgMS4xMy0uMzM1IDEuNDAyLS44MzFhMy45MTUgMy45MTUgMCAxIDEtMy42MTctMi40MTRNMCA5MC4xNjJoMjU0LjMyN2MtNS41MzctMS40MDQtMTcuNTItMy4zMDItMTUuNTQ0LTEwLjU2LTEwLjA3IDExLjY1Mi0zNC4zNTMgOC4xNzUtNDAuNDgyIDIuNDMtNi44MjQgOS44OTgtNDYuNTU0IDYuMTM1LTQ5LjMyNS0xLjU3Ni04LjU1NiAxMC4wNDEtMzUuMDY3IDEwLjA0MS00My42MjMgMC0yLjc3MyA3LjcxMS00Mi41MDIgMTEuNDc0LTQ5LjMyNyAxLjU3NS02LjEyOCA1Ljc0Ni0zMC40MSA5LjIyMy00MC40OC0yLjQyOEMxNy41MjIgODYuODYgNS41MzkgODguNzU4IDAgOTAuMTYzIiBmaWxsPSIjMzY0NTQ4Ii8+PHBhdGggZD0iTTExMS4yMzcgMTQwLjg5Yy0xMy41NC02LjQyNS0yMC45NzEtMTUuMTYtMjUuMTA2LTI0LjY5NC01LjAzIDEuNDM1LTExLjA3NSAyLjM1My0xOC4xIDIuNzQ3LTIuNjQ2LjE0OC01LjQzLjIyNC04LjM1LjIyNC0zLjM2OCAwLTYuOTE3LS4xLTEwLjY0My0uMjk3IDEyLjQxNyAxMi40MSAyNy42OTIgMjEuOTY0IDU1Ljk3NiAyMi4xMzggMi4wODggMCA0LjE2LS4wNCA2LjIyMy0uMTE4IiBmaWxsPSIjQkREOUQ3Ii8+PHBhdGggZD0iTTkxLjE2IDEyNC45OTRjLTEuODczLTIuNTQzLTMuNjktNS43MzktNS4wMjYtOC44LTUuMDMgMS40MzctMTEuMDc3IDIuMzU1LTE4LjEwMyAyLjc1IDQuODI2IDIuNjE5IDExLjcyNyA1LjA0NiAyMy4xMyA2LjA1IiBmaWxsPSIjRDNFQ0VDIi8+PC9nPjwvc3ZnPg==" width="2500" height="2100" class="img_ev3q"><br>
<em>나에게 필요한 도커 설치하기</em>  </p><h1>목차</h1><ul><li><a href="#%EC%9A%94%EA%B5%AC%EC%82%AC%ED%95%AD">요구사항</a></li><li><a href="#ubnutu-docker-%EC%84%A4%EC%B9%98">Ubuntu docker 설치</a></li><li><a href="#centos-docker-%EC%84%A4%EC%B9%98">CentOS docker 설치</a></li><li><a href="#windows-docker-%EC%84%A4%EC%B9%98">Windows docker 설치</a></li></ul><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="요구사항">요구사항<a href="#요구사항" class="hash-link" aria-label="Direct link to 요구사항" title="Direct link to 요구사항">​</a></h2><p>이 글은 다양한 환경에서 내게 필요한 버전의 도커 설치법을 설명합니다. 🎉<br>
<!-- -->도커에 대해 이해가 부족하시다면 <a href="https://jwher.github.io/2021-06-19-welcome-to-docker/" target="_blank" rel="noopener noreferrer">이 글</a> 을 먼저 읽는 걸 추천합니다!<br>
<!-- -->도커를 설치하기 전에 환경을 필요한 점검해 봅시다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="os">OS<a href="#os" class="hash-link" aria-label="Direct link to OS" title="Direct link to OS">​</a></h3><ul><li>Windows</li><li>Ubuntu</li><li>CentOS</li><li><em>이 외에 Debian, Fedora 기반 linux, Mac</em><br><em>(장비를 보유하고, 테스트 할 수 있으면 추가로 작성하겠습니다)</em></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-driver">Storage Driver<a href="#storage-driver" class="hash-link" aria-label="Direct link to Storage Driver" title="Direct link to Storage Driver">​</a></h3><ul><li>overlay2 (권장)</li><li><a href="https://docs.docker.com/storage/storagedriver/aufs-driver/" target="_blank" rel="noopener noreferrer">aufs</a></li><li>btrfs</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="architecture">Architecture<a href="#architecture" class="hash-link" aria-label="Direct link to Architecture" title="Direct link to Architecture">​</a></h3><ul><li>x86_64</li><li>amd64</li><li>arm64</li></ul><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ubuntu-docker-설치">Ubuntu docker 설치<a href="#ubuntu-docker-설치" class="hash-link" aria-label="Direct link to Ubuntu docker 설치" title="Direct link to Ubuntu docker 설치">​</a></h2><p><img loading="lazy" alt="ubuntu" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyODUiIGhlaWdodD0iMjg1IiB2aWV3Qm94PSItMTQyLjUgLTE0Mi41IDI4NSAyODUiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KPGNpcmNsZSBmaWxsPSIjREQ0ODE0IiByPSIxNDEuNzMyIi8+PGcgaWQ9IlUiIGZpbGw9IiNGRkZGRkYiPjxjaXJjbGUgY3g9Ii05Ni4zNzcyIiByPSIxOC45MjE1Ii8+CjxwYXRoIGQ9Ik0tNDUuNjA1OSw2OC4zOTVDLTYyLjE2NTUsNTcuMzMxNi03NC40ODQ0LDQwLjQxNzUtNzkuNjAxMSwyMC42MDY1LTczLjYyMywxNS43MzU0LTY5LjgwNDcsOC4zMTY0LTY5LjgwNDcsMC02OS44MDQ3LTguMzE2NC03My42MjMtMTUuNzM1NC03OS42MDExLTIwLjYwNjUtNzQuNDg0NC00MC40MTc1LTYyLjE2NTUtNTcuMzMxNi00NS42MDU5LTY4LjM5NUwtMzEuNzcxNS00NS4yMjEyQy00NS45ODI0LTM1LjIxOTctNTUuMjc1NC0xOC43MDI2LTU1LjI3NTQsMC01NS4yNzU0LDE4LjcwMjYtNDUuOTgyNCwzNS4yMTk3LTMxLjc3MTUsNDUuMjIxMloiLz48L2c+Cjx1c2UgeGxpbms6aHJlZj0iI1UiIHRyYW5zZm9ybT0icm90YXRlKDEyMCkiLz48dXNlIHhsaW5rOmhyZWY9IiNVIiB0cmFuc2Zvcm09InJvdGF0ZSgyNDApIi8+PC9zdmc+" width="285" height="285" class="img_ev3q"></p><ol><li>이전 버전 확인 &amp; 제거</li></ol><p>이미 도커가 설치되어 있다면, 다시 설치할 필요가 없겠죠? :D</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Ubuntu</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> remove </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> docker-engine docker.io containerd runc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><ol start="2"><li>레포지토리 설정</li></ol><p>도커를 설치하고 업데이트 하기 위해 필요한 repository 위치를 설정해야 합니다.<br>
<!-- -->repository 위치를 설정해 주기 위해 필요한 기본 라이브러리를 설치해 줍시다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Ubuntu</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  apt-transport-https </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ca-certificates </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gnupg </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  lsb-release</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>HTTPS를 통해 repository를 사용할 수 있게 해줍니다</em>  </p><br><p>필요한 패키지를 설치했으면 도커의 official GPG key를 추가해 줍시다.(Ubuntu만)  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Ubuntu</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -fsSL https://download.docker.com/linux/ubuntu/gpg </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>다음 명령어로 stable repository를 설정합니다. nightly나 test repository를 사용하기 위해서는 <code>stable</code> 다음에
<code>nightly</code>, <code>test</code>를 추가합니다.
아키텍처를 설정할 때엔 <code>arch</code> 다음에 <code>amd64</code>, <code>armhf</code>, <code>arm64</code>를 변경합니다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Ubuntu x86_64/amd64 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">"deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable" style="color:#36acaa">lsb_release -cs</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c"> stable"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tee</span><span class="token plain"> /etc/apt/sources.list.d/docker.list </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /dev/null</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em><a href="https://docs.docker.com/engine/install/" target="_blank" rel="noopener noreferrer">여기</a> 에서 버전과 nightly 지원을 확인할 수 있습니다</em></p><br><ol start="3"><li>도커 설치  </li></ol><p>repository를 추가했으니 <code>apt</code>를 업데이트 하고 설치합니다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Ubuntu</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> docker-ce docker-ce-cli containerd.io</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p><strong>특정 버전</strong>을 설치하기 위해선 다음과 같이 합니다.  </p><br><p>a. repo에서 가능한 버전을 리스트 합니다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Ubuntu</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">apt-cache</span><span class="token plain"> madison docker-ce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker-ce </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain">:20.10.6-3-0-ubuntu-focal </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> https://download.docker.com/linux/ubuntu focal/stable amd64 Packages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker-ce </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain">:20.10.5-3-0-ubuntu-focal </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> https://download.docker.com/linux/ubuntu focal/stable amd64 Packages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker-ce </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain">:20.10.4-3-0-ubuntu-focal </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> https://download.docker.com/linux/ubuntu focal/stable amd64 Packages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. 생략 </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>b. <code>VERSION_STRING</code>을 사용하여 특정 버전을 설치 합니다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Ubuntu</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> docker-ce</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">VERSION_STRING</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> docker-ce-cli</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">VERSION_STRING</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> containerd.io</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>설치가 완료되었으면 확인해 봅시다. 😊  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run hello-world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Unable to </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> image </span><span class="token string" style="color:#e3116c">'hello-world:latest'</span><span class="token plain"> locally</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">latest: Pulling from library/hello-world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b8dfde127a29: Pull complete </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Digest: sha256:308866a43596e83578c7dfa15e27a73011bdd402185a84c5cd7f32a88b501a24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Status: Downloaded newer image </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> hello-world:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello from Docker</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">This message shows that your installation appears to be working correctly.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">To generate this message, Docker took the following steps:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">. The Docker client contacted the Docker daemon.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">. The Docker daemon pulled the </span><span class="token string" style="color:#e3116c">"hello-world"</span><span class="token plain"> image from the Docker Hub.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">amd64</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">. The Docker daemon created a new container from that image </span><span class="token function" style="color:#d73a49">which</span><span class="token plain"> runs the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    executable that produces the output you are currently reading.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">. The Docker daemon streamed that output to the Docker client, </span><span class="token function" style="color:#d73a49">which</span><span class="token plain"> sent it</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    to your terminal.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">To try something </span><span class="token function" style="color:#d73a49">more</span><span class="token plain"> ambitious, you can run an Ubuntu container with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run -it ubuntu </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Share images, automate workflows, and </span><span class="token function" style="color:#d73a49">more</span><span class="token plain"> with a </span><span class="token function" style="color:#d73a49">free</span><span class="token plain"> Docker ID:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> https://hub.docker.com/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For </span><span class="token function" style="color:#d73a49">more</span><span class="token plain"> examples and ideas, visit:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> https://docs.docker.com/get-started/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="centos-docker-설치">CentOS docker 설치<a href="#centos-docker-설치" class="hash-link" aria-label="Direct link to CentOS docker 설치" title="Direct link to CentOS docker 설치">​</a></h2><p><img loading="lazy" alt="centos" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjI1NnB4IiBoZWlnaHQ9IjI1NnB4IiB2aWV3Qm94PSIwIDAgMjU2IDI1NiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCI+Cgk8Zz4KCQk8cGF0aCBkPSJNMTA3Ljg2MDQ0NiwxMTguNjQxMTY4IEwxMTcuMDg4NjQ1LDEyNy44MTc5MTEgTDEwNy44NjA0NDYsMTM2Ljk5Mjg4IEw0Mi45MDEwOTc2LDEzNi45OTI4OCBMNDIuOTAxMDk3NiwxNjcuNTY0MjgyIEwzLjI4NjAyNjQyLDEyNy44MTc5MTEgTDQyLjkwMTA5NzYsODguNzM4NjgyMyBMNDIuOTAxMDk3NiwxMTguNjQxMTY4IEwxMDcuODYwNDQ2LDExOC42NDExNjggTDEwNy44NjA0NDYsMTE4LjY0MTE2OCBMMTA3Ljg2MDQ0NiwxMTguNjQxMTY4IEwxMDcuODYwNDQ2LDExOC42NDExNjggWiBNMTM2LjQxNDQ1NCw0MC41NzMyIEwyMTUuMzQyOTY0LDQwLjU3MzIgTDIxNS4zNDI5NjQsMTE5LjUwMzQ4NCBMMTM2LjQxNDQ1NCwxMTkuNTAzNDg0IEwxMzYuNDE0NDU0LDQwLjU3MzIgTDEzNi40MTQ0NTQsNDAuNTczMiBMMTM2LjQxNDQ1NCw0MC41NzMyIEwxMzYuNDE0NDU0LDQwLjU3MzIgWiIgZmlsbD0iIzkzMjI3OSI+PC9wYXRoPgoJCTxwYXRoIGQ9Ik0xMzcuMjc0OTk2LDEwNy44NjA0NDYgTDEyOC4xMDAwMjcsMTE3LjA4ODY0NSBMMTE4LjkyNTA1OCwxMDcuODYwNDQ2IEwxMTguOTI1MDU4LDQyLjkwMTA5NzYgTDg4LjM1MTg4MjEsNDIuOTAxMDk3NiBMMTI4LjEwMDAyNywzLjI4NjAyNjQyIEwxNjcuMTc3NDgxLDQyLjkwMTA5NzYgTDEzNy4yNzQ5OTYsNDIuOTAxMDk3NiBMMTM3LjI3NDk5NiwxMDcuODYwNDQ2IEwxMzcuMjc0OTk2LDEwNy44NjA0NDYgTDEzNy4yNzQ5OTYsMTA3Ljg2MDQ0NiBMMTM3LjI3NDk5NiwxMDcuODYwNDQ2IFogTTEzNi40MTQ0NTQsMTM2LjQxNDQ1NCBMMjE1LjM0Mjk2NCwxMzYuNDE0NDU0IEwyMTUuMzQyOTY0LDIxNS4zNDQ3MzggTDEzNi40MTQ0NTQsMjE1LjM0NDczOCBMMTM2LjQxNDQ1NCwxMzYuNDE0NDU0IEwxMzYuNDE0NDU0LDEzNi40MTQ0NTQgTDEzNi40MTQ0NTQsMTM2LjQxNDQ1NCBMMTM2LjQxNDQ1NCwxMzYuNDE0NDU0IFoiIGZpbGw9IiNFRkE3MjQiPjwvcGF0aD4KCQk8cGF0aCBkPSJNMTQ4LjA1NzQ5MiwxMzcuMjc0OTk2IEwxMzguODI3NTE5LDEyOC4xMDAwMjcgTDE0OC4wNTc0OTIsMTE4LjkyNTA1OCBMMjEzLjAxNTA2NywxMTguOTI1MDU4IEwyMTMuMDE1MDY3LDg4LjM1MTg4MjEgTDI1Mi42MzE5MTEsMTI4LjEwMDAyNyBMMjEzLjAxNTA2NywxNjcuMTc3NDgxIEwyMTMuMDE1MDY3LDEzNy4yNzQ5OTYgTDE0OC4wNTc0OTIsMTM3LjI3NDk5NiBMMTQ4LjA1NzQ5MiwxMzcuMjc0OTk2IEwxNDguMDU3NDkyLDEzNy4yNzQ5OTYgTDE0OC4wNTc0OTIsMTM3LjI3NDk5NiBaIE00MC41NzMyLDEzNi40MTQ0NTQgTDExOS41MDE3MDksMTM2LjQxNDQ1NCBMMTE5LjUwMTcwOSwyMTUuMzQ0NzM4IEw0MC41NzMyLDIxNS4zNDQ3MzggTDQwLjU3MzIsMTM2LjQxNDQ1NCBMNDAuNTczMiwxMzYuNDE0NDU0IEw0MC41NzMyLDEzNi40MTQ0NTQgTDQwLjU3MzIsMTM2LjQxNDQ1NCBaIiBmaWxsPSIjMjYyNTc3Ij48L3BhdGg+CgkJPHBhdGggZD0iTTExOC42NDExNjgsMTQ4LjA1NzQ5MiBMMTI3LjgxNjEzNywxMzguODI3NTE5IEwxMzYuOTkyODgsMTQ4LjA1NzQ5MiBMMTM2Ljk5Mjg4LDIxMy4wMTY4NDEgTDE2Ny41NjQyODIsMjEzLjAxNjg0MSBMMTI3LjgxNjEzNywyNTIuNjMxOTExIEw4OC43NDA0NTY1LDIxMy4wMTY4NDEgTDExOC42NDExNjgsMjEzLjAxNjg0MSBMMTE4LjY0MTE2OCwxNDguMDU3NDkyIEwxMTguNjQxMTY4LDE0OC4wNTc0OTIgTDExOC42NDExNjgsMTQ4LjA1NzQ5MiBMMTE4LjY0MTE2OCwxNDguMDU3NDkyIFogTTQwLjU3MzIsNDAuNTczMiBMMTE5LjUwMTcwOSw0MC41NzMyIEwxMTkuNTAxNzA5LDExOS41MDM0ODQgTDQwLjU3MzIsMTE5LjUwMzQ4NCBMNDAuNTczMiw0MC41NzMyIEw0MC41NzMyLDQwLjU3MzIgTDQwLjU3MzIsNDAuNTczMiBMNDAuNTczMiw0MC41NzMyIFoiIGZpbGw9IiM5Q0NEMkEiPjwvcGF0aD4KCQk8cGF0aCBkPSJNMzcuNzUzODE3NiwzNy43NTM4MTc2IEwxMjIuMzIxMDkyLDM3Ljc1MzgxNzYgTDEyMi4zMjEwOTIsMTIyLjMyMTA5MiBMMzcuNzUzODE3NiwxMjIuMzIxMDkyIEwzNy43NTM4MTc2LDM3Ljc1MzgxNzYgTDM3Ljc1MzgxNzYsMzcuNzUzODE3NiBMMzcuNzUzODE3NiwzNy43NTM4MTc2IEwzNy43NTM4MTc2LDM3Ljc1MzgxNzYgTDM3Ljc1MzgxNzYsMzcuNzUzODE3NiBaIE00My4zOTA4MDc4LDExNi42ODQxMDEgTDExNi42ODIzMjcsMTE2LjY4NDEwMSBMMTE2LjY4MjMyNyw0My4zOTI1ODIyIEw0My4zOTA4MDc4LDQzLjM5MjU4MjIgTDQzLjM5MDgwNzgsMTE2LjY4NDEwMSBMNDMuMzkwODA3OCwxMTYuNjg0MTAxIEw0My4zOTA4MDc4LDExNi42ODQxMDEgTDQzLjM5MDgwNzgsMTE2LjY4NDEwMSBaIE0xMzMuNTk2ODQ2LDM3Ljc1MzgxNzYgTDIxOC4xNjQxMjEsMzcuNzUzODE3NiBMMjE4LjE2NDEyMSwxMjIuMzIxMDkyIEwxMzMuNTk2ODQ2LDEyMi4zMjEwOTIgTDEzMy41OTY4NDYsMzcuNzUzODE3NiBMMTMzLjU5Njg0NiwzNy43NTM4MTc2IEwxMzMuNTk2ODQ2LDM3Ljc1MzgxNzYgTDEzMy41OTY4NDYsMzcuNzUzODE3NiBaIE0xMzkuMjMzODM3LDExNi42ODQxMDEgTDIxMi41MjUzNTYsMTE2LjY4NDEwMSBMMjEyLjUyNTM1Niw0My4zOTI1ODIyIEwxMzkuMjMzODM3LDQzLjM5MjU4MjIgTDEzOS4yMzM4MzcsMTE2LjY4NDEwMSBMMTM5LjIzMzgzNywxMTYuNjg0MTAxIEwxMzkuMjMzODM3LDExNi42ODQxMDEgTDEzOS4yMzM4MzcsMTE2LjY4NDEwMSBaIE0xMzMuNTk2ODQ2LDEzMy41OTY4NDYgTDIxOC4xNjQxMjEsMTMzLjU5Njg0NiBMMjE4LjE2NDEyMSwyMTguMTY1ODk1IEwxMzMuNTk2ODQ2LDIxOC4xNjU4OTUgTDEzMy41OTY4NDYsMTMzLjU5Njg0NiBMMTMzLjU5Njg0NiwxMzMuNTk2ODQ2IEwxMzMuNTk2ODQ2LDEzMy41OTY4NDYgTDEzMy41OTY4NDYsMTMzLjU5Njg0NiBaIE0xMzkuMjMzODM3LDIxMi41MjUzNTYgTDIxMi41MjUzNTYsMjEyLjUyNTM1NiBMMjEyLjUyNTM1NiwxMzkuMjMzODM3IEwxMzkuMjMzODM3LDEzOS4yMzM4MzcgTDEzOS4yMzM4MzcsMjEyLjUyNTM1NiBMMTM5LjIzMzgzNywyMTIuNTI1MzU2IEwxMzkuMjMzODM3LDIxMi41MjUzNTYgTDEzOS4yMzM4MzcsMjEyLjUyNTM1NiBaIE0zNy43NTM4MTc2LDEzMy41OTY4NDYgTDEyMi4zMjEwOTIsMTMzLjU5Njg0NiBMMTIyLjMyMTA5MiwyMTguMTY1ODk1IEwzNy43NTM4MTc2LDIxOC4xNjU4OTUgTDM3Ljc1MzgxNzYsMTMzLjU5Njg0NiBMMzcuNzUzODE3NiwxMzMuNTk2ODQ2IEwzNy43NTM4MTc2LDEzMy41OTY4NDYgTDM3Ljc1MzgxNzYsMTMzLjU5Njg0NiBaIE00My4zOTA4MDc4LDIxMi41MjUzNTYgTDExNi42ODIzMjcsMjEyLjUyNTM1NiBMMTE2LjY4MjMyNywxMzkuMjMzODM3IEw0My4zOTA4MDc4LDEzOS4yMzM4MzcgTDQzLjM5MDgwNzgsMjEyLjUyNTM1NiBMNDMuMzkwODA3OCwyMTIuNTI1MzU2IEw0My4zOTA4MDc4LDIxMi41MjUzNTYgTDQzLjM5MDgwNzgsMjEyLjUyNTM1NiBMNDMuMzkwODA3OCwyMTIuNTI1MzU2IFoiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KCQk8cGF0aCBkPSJNNjAuMTg4MjIyNiwxODcuNzU3NzMgTDAuMzg4NTc0Mzk4LDEyNy45NTgwODIgTDYwLjE4NjQ0ODQsNjguMTYwMjA4IEwxMTkuOTg2MDk3LDEyNy45NTgwODIgTDYwLjE4ODIyMjYsMTg3Ljc1NzczIEw2MC4xODgyMjI2LDE4Ny43NTc3MyBMNjAuMTg4MjIyNiwxODcuNzU3NzMgTDYwLjE4ODIyMjYsMTg3Ljc1NzczIEw2MC4xODgyMjI2LDE4Ny43NTc3MyBMNjAuMTg4MjIyNiwxODcuNzU3NzMgWiBNOC4zNjIzMzM5OSwxMjcuOTU4MDgyIEw2MC4xODgyMjI2LDE3OS43ODM5NyBMMTEyLjAxMjMzNywxMjcuOTU4MDgyIEw2MC4xODY0NDg0LDc2LjEzMzk2NzUgTDguMzYyMzMzOTksMTI3Ljk1ODA4MiBMOC4zNjIzMzM5OSwxMjcuOTU4MDgyIEw4LjM2MjMzMzk5LDEyNy45NTgwODIgTDguMzYyMzMzOTksMTI3Ljk1ODA4MiBaIE0xMjcuOTU4MDgyLDExOS45ODYwOTcgTDY4LjE2MDIwOCw2MC4xODgyMjI2IEwxMjcuOTU4MDgyLDAuMzg4NTc0Mzk4IEwxODcuNzU1OTU2LDYwLjE4ODIyMjYgTDEyNy45NTgwODIsMTE5Ljk4NjA5NyBMMTI3Ljk1ODA4MiwxMTkuOTg2MDk3IEwxMjcuOTU4MDgyLDExOS45ODYwOTcgTDEyNy45NTgwODIsMTE5Ljk4NjA5NyBaIE03Ni4xMzM5Njc1LDYwLjE4ODIyMjYgTDEyNy45NTgwODIsMTEyLjAxMjMzNyBMMTc5Ljc4Mzk3LDYwLjE4ODIyMjYgTDEyNy45NTgwODIsOC4zNjIzMzM5OSBMNzYuMTMzOTY3NSw2MC4xODgyMjI2IEw3Ni4xMzM5Njc1LDYwLjE4ODIyMjYgTDc2LjEzMzk2NzUsNjAuMTg4MjIyNiBMNzYuMTMzOTY3NSw2MC4xODgyMjI2IFogTTE5NS43Mjk3MTYsMTg3Ljc1NzczIEwxMzUuOTMxODQxLDEyNy45NTgwODIgTDE5NS43Mjk3MTYsNjguMTYwMjA4IEwyNTUuNTI3NTg5LDEyNy45NTgwODIgTDE5NS43Mjk3MTYsMTg3Ljc1NzczIEwxOTUuNzI5NzE2LDE4Ny43NTc3MyBMMTk1LjcyOTcxNiwxODcuNzU3NzMgTDE5NS43Mjk3MTYsMTg3Ljc1NzczIFogTTE0My45MDM4MjcsMTI3Ljk1ODA4MiBMMTk1LjcyOTcxNiwxNzkuNzgzOTcgTDI0Ny41NTM4MjksMTI3Ljk1ODA4MiBMMTk1LjcyOTcxNiw3Ni4xMzM5Njc1IEwxNDMuOTAzODI3LDEyNy45NTgwODIgTDE0My45MDM4MjcsMTI3Ljk1ODA4MiBMMTQzLjkwMzgyNywxMjcuOTU4MDgyIEwxNDMuOTAzODI3LDEyNy45NTgwODIgWiBNMTI3Ljk1ODA4MiwyNTUuNTI3NTg5IEw2OC4xNjAyMDgsMTk1LjcyOTcxNiBMMTI3Ljk1ODA4MiwxMzUuOTMxODQxIEwxODcuNzU1OTU2LDE5NS43Mjk3MTYgTDEyNy45NTgwODIsMjU1LjUyNzU4OSBMMTI3Ljk1ODA4MiwyNTUuNTI3NTg5IEwxMjcuOTU4MDgyLDI1NS41Mjc1ODkgTDEyNy45NTgwODIsMjU1LjUyNzU4OSBaIE03Ni4xMzM5Njc1LDE5NS43Mjk3MTYgTDEyNy45NTgwODIsMjQ3LjU1MzgyOSBMMTc5Ljc4Mzk3LDE5NS43Mjk3MTYgTDEyNy45NTgwODIsMTQzLjkwNTYwMSBMNzYuMTMzOTY3NSwxOTUuNzI5NzE2IEw3Ni4xMzM5Njc1LDE5NS43Mjk3MTYgTDc2LjEzMzk2NzUsMTk1LjcyOTcxNiBMNzYuMTMzOTY3NSwxOTUuNzI5NzE2IEw3Ni4xMzM5Njc1LDE5NS43Mjk3MTYgTDc2LjEzMzk2NzUsMTk1LjcyOTcxNiBaIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+Cgk8L2c+Cjwvc3ZnPgo=" width="256" height="256" class="img_ev3q"></p><ol><li>이전 버전 확인 &amp; 제거  </li></ol><p><del>설마 apt가 없는 걸 확인하고 오셨나요...?</del>  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># CentOS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$  </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> yum remove </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  docker-client </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  docker-client-latest </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  docker-common </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  docker-latest </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  docker-latest-logrotate </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  docker-logrotate </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  docker-engine</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><ol start="2"><li>레포지토리 설정  </li></ol><p>도커를 설치하고 업데이트 하기 위해 필요한 repository 위치를 설정해야 합니다.<br>
<!-- -->repository 위치를 설정해 주기 위해 필요한 기본 라이브러리를 설치해 줍시다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># CentOS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> yum </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -y yum-utils</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>CentOS에서 nightly나 test repository를 사용하기 위해서는 <code>--enable</code> 옵션에 <code>docker-ce-nightly</code>
또는 <code>docker-ce-test</code>를 추가해 줍니다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># CentOS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> yum-config-manager </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --add-repo </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    https://download.docker.com/linux/centos/docker-ce.repo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em><a href="https://docs.docker.com/engine/install/" target="_blank" rel="noopener noreferrer">여기</a> 에서 버전과 nightly 지원을 확인할 수 있습니다</em></p><br><ol start="3"><li>도커 설치  </li></ol><p>도커 최신 버전을 설치하려면 다음 명령어를 입력합니다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># CentOS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> docker-ce docker-ce-cli containerd.io</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p><strong>특정 버전</strong>을 설치하기 위해선 다음과 같이 합니다.  </p><br><p>a. repo에서 가능한 버전을 리스트 합니다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># CentOS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ yum list docker-ce --showduplicates </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sort</span><span class="token plain"> -r</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. 전략 </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker-ce.x86_64            </span><span class="token number" style="color:#36acaa">17.03</span><span class="token plain">.2.ce-1.el7.centos            docker-ce-stable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker-ce.x86_64            </span><span class="token number" style="color:#36acaa">17.03</span><span class="token plain">.1.ce-1.el7.centos            docker-ce-stable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker-ce.x86_64            </span><span class="token number" style="color:#36acaa">17.03</span><span class="token plain">.0.ce-1.el7.centos            docker-ce-stable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Loaded plugins: fastestmirror, langpacks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Installed Packages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Determining fastest mirrors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Available Packages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * updates: mirror.kakao.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * extras: mirror.kakao.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * epel: ftp.iij.ad.jp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * centos-sclo-sclo: mirror.kakao.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * centos-sclo-rh: mirror.kakao.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * base: mirror.kakao.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>b. <code>VERSION_STRING</code>을 사용하여 특정 버전을 설치 합니다.<br>
<!-- -->예를 들면 <code>docker-ce-17.03.0</code>입니다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># CentOS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> yum </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> docker-ce-</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">VERSION_STRING</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> docker-ce-cli-</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">VERSION_STRING</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> containerd.io</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>3. 도커 시작  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># CentOS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$  </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl start </span><span class="token function" style="color:#d73a49">docker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>설치가 완료되었으면 확인해 봅시다. 😊  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run hello-world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello from Docker</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">This message shows that your installation appears to be working correctly.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">To generate this message, Docker took the following steps:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">. The Docker client contacted the Docker daemon.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">. The Docker daemon pulled the </span><span class="token string" style="color:#e3116c">"hello-world"</span><span class="token plain"> image from the Docker Hub.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">amd64</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">. The Docker daemon created a new container from that image </span><span class="token function" style="color:#d73a49">which</span><span class="token plain"> runs the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    executable that produces the output you are currently reading.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">. The Docker daemon streamed that output to the Docker client, </span><span class="token function" style="color:#d73a49">which</span><span class="token plain"> sent it</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    to your terminal.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">To try something </span><span class="token function" style="color:#d73a49">more</span><span class="token plain"> ambitious, you can run an Ubuntu container with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run -it ubuntu </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Share images, automate workflows, and </span><span class="token function" style="color:#d73a49">more</span><span class="token plain"> with a </span><span class="token function" style="color:#d73a49">free</span><span class="token plain"> Docker ID:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> https://hub.docker.com/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For </span><span class="token function" style="color:#d73a49">more</span><span class="token plain"> examples and ideas, visit:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> https://docs.docker.com/get-started/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="windows-docker-설치">Windows docker 설치<a href="#windows-docker-설치" class="hash-link" aria-label="Direct link to Windows docker 설치" title="Direct link to Windows docker 설치">​</a></h2><p><img loading="lazy" alt="windows" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+DTwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DTxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiIGhlaWdodD0iODgiIHdpZHRoPSI4OCI+DTxwYXRoIHN0eWxlPSJmaWxsOiMwMGFkZWY7IiBkPSJtMCwxMi40MDIsMzUuNjg3LTQuODYwMiwwLjAxNTYsMzQuNDIzLTM1LjY3LDAuMjAzMTN6bTM1LjY3LDMzLjUyOSwwLjAyNzcsMzQuNDUzLTM1LjY3LTQuOTA0MS0wLjAwMi0yOS43OHptNC4zMjYxLTM5LjAyNSw0Ny4zMTgtNi45MDYsMCw0MS41MjctNDcuMzE4LDAuMzc1NjV6bTQ3LjMyOSwzOS4zNDktMC4wMTExLDQxLjM0LTQ3LjMxOC02LjY3ODQtMC4wNjYzLTM0LjczOXoiLz4NPC9zdmc+" width="88" height="88" class="img_ev3q"></p><p><em>맥으로 테스트 해보지 못했으나 동일한 절차일 듯 합니다</em>  </p><ol><li><a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener noreferrer">여기</a> 에서 Docker Desktop for Windows를 다운받습니다.</li></ol><p><img loading="lazy" alt="download" src="/assets/images/docker-desktop-download-fe14d79290ccd7c918e35082fca2d5cc.png" width="602" height="352" class="img_ev3q"></p><br><ol start="2"><li>다운받은 인스톨러를 실행합니다.  </li></ol><p><img loading="lazy" alt="install" src="/assets/images/docker-desktop-install-81c6fe61285922cdfed85b791289a707.png" width="602" height="416" class="img_ev3q"></p><ul><li>첫 번째 옵션(Install required Windows components for WSL 2)은 Docker를 동작하는데 필요한 Windows Subsystem Linux(WSL)의 설치를 진행합니다.</li><li>두 번째 옵션(Add shortcut to desktop)은 바탕화면에 바로가기 아이콘을 생성합니다.</li></ul><p>설치가 완료되면 컴퓨터가 재시작됩니다.  </p><br><ol start="3"><li>컴퓨터를 재시작되면 Docker Desktop이 실행됩니다. 특별한 사용 방법을 익힐 것이 아니면 Skip tutorial을 눌러줍시다.  </li></ol><p><img loading="lazy" alt="installed" src="/assets/images/docker-desktop-installed-48d4e518b52cc3f627a8c13b4cce0306.png" width="602" height="346" class="img_ev3q"></p><br><p>CLI를 통해 사용 가능한지도 확인해 봅시다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> -v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Docker version </span><span class="token number" style="color:#36acaa">19.03</span><span class="token plain">.12, build 0ed913b8-</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p><em>북마크 하고 보세요</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sudo">sudo<a href="#sudo" class="hash-link" aria-label="Direct link to sudo" title="Direct link to sudo">​</a></h3><p>도커 실행 권한을 추가해 superuser를 사용하지 않을 수 있습니다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">usermod</span><span class="token plain"> -aG </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token environment constant" style="color:#36acaa">$USER</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">service</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> restart</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="용량-확보">용량 확보<a href="#용량-확보" class="hash-link" aria-label="Direct link to 용량 확보" title="Direct link to 용량 확보">​</a></h3><p>도커를 사용하다보면 build cache와 사용하지 않는 image, container가
용량을 차지하는 경우가 있습니다.
다음 명령어로 용량을 확보할 수 있습니다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 빌드 캐시 삭제하기</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> builder prune</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 종료된(exited) 컨테이너 전부 삭제하기</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">docker</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable function" style="color:#d73a49">ps</span><span class="token variable" style="color:#36acaa"> --filter </span><span class="token variable assign-left variable" style="color:#36acaa">status</span><span class="token variable operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">exited -q</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 사용하지 않는 이미지를 정리하기</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> image prune -a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 사용하지 않는 build 캐시, 볼륨, 이미지 전부를 정리하기</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> system prune -a --volumes</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="초기화">초기화<a href="#초기화" class="hash-link" aria-label="Direct link to 초기화" title="Direct link to 초기화">​</a></h3><p>불행히 도커를 전부 삭제해야 할 일이 생겼을 수 있습니다.
모든 도커 캐시, 이미지, 컨테이너, 볼륨, 설정을 삭제하는 방법은 다음과 같습니다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Ubuntu</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> purge docker-ce docker-ce-cli containerd.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이미지, 컨테이너, 볼륨, 설정은 자동으로 지워지지 않습니다.
다음 명령어로 지워주세요.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> -rf /var/lib/docker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> -rf /var/lib/containerd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h2><p><a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener noreferrer">[공식]Install Docker Engine on Ubuntu</a><br>
<a href="https://docs.docker.com/engine/install/centos/" target="_blank" rel="noopener noreferrer">[공식]Install Docker Engine on CentOS</a></p>]]></content:encoded>
            <category>tech</category>
            <category>docker</category>
            <category>linux</category>
        </item>
        <item>
            <title><![CDATA[나에게 필요한 쿠버네티스 설치하기]]></title>
            <link>https://jwher.github.io/posts/install-kubernetes</link>
            <guid>https://jwher.github.io/posts/install-kubernetes</guid>
            <pubDate>Tue, 13 Apr 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Install Kubernetes]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="kubernetes" src="/assets/images/kubernetes-f91022b1deed067a9393dd3c42381ab7.svg" width="723" height="702" class="img_ev3q"><br>
<em>나에게 필요한 쿠버네티스 설치하기</em>  </p><h1>목차</h1><ul><li><a href="#%EB%B0%B0%ED%8F%AC%EB%B2%84%EC%A0%84">배포버전</a></li><li><a href="#kubeadm-%EC%84%A4%EC%B9%98">Kubeadm 설치</a></li><li><a href="#mini-kube-%EC%84%A4%EC%B9%98">Mini Kube 설치</a></li><li><a href="#docker-desktop-%EC%84%A4%EC%B9%98">Docker Desktop 설치</a></li><li><a href="#kind-%EC%84%A4%EC%B9%98">Kind 설치</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="배포버전">배포버전<a href="#배포버전" class="hash-link" aria-label="Direct link to 배포버전" title="Direct link to 배포버전">​</a></h2><p>이 글은 다양한 환경에서 내게 필요한 버전의 쿠버네티스 설치법을 설명합니다. 🎉<br>
<!-- -->쿠버네티스에 대해 이해가 부족하시다면 <a href="/posts/welcome-to-kubernetes/">이 글</a> 을 먼저 읽는 걸 추천합니다!</p><p>kubernetes 저사양 node 등에 맞춰 다양한 배포판이 있습니다.
각각 배포판의 특징을 설명하면 다음과 같습니다.</p><ul><li><a href="https://kubernetes.io/ko/docs/setup/production-environment/tools/kubeadm/install-kubeadm/" target="_blank" rel="noopener noreferrer">Kubeadm</a>
(<a href="https://github.com/kubernetes/kubernetes" target="_blank" rel="noopener noreferrer">github</a>)<br>CNCF: Cloud Native Computing Foundation 의 공식 쿠버네티스입니다.
여러 리눅스 노드에서 동작하는 일반적인 쿠버네티스(k8s) 입니다.</li><li><a href="https://snapcraft.io/microk8s" target="_blank" rel="noopener noreferrer">Micro K8s</a>
(<a href="https://github.com/ubuntu/microk8s#list-of-available-addons" target="_blank" rel="noopener noreferrer">github</a>)<br><em>사용해 보지 않았습니다</em><br>단일 노드에서 동작하는 경량화된 쿠버네티스입니다. 리눅스 패키지 관리 툴 Snap을 사용해 설치할 수 있습니다.</li><li><a href="https://minikube.sigs.k8s.io/docs/start/" target="_blank" rel="noopener noreferrer">Mini Kube</a>
(<a href="https://github.com/kubernetes/minikube" target="_blank" rel="noopener noreferrer">github</a>)<br>리눅스, 윈도우, 맥에서 동작하는 단일 노드 쿠버네티스입니다.
Virtual box나 VM ware를 사용해 리눅스 머신으로 쿠버네티스를 구성합니다.</li><li><a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener noreferrer">Docker Desktop</a><br>맥/윈도우에서 동작하는 도커 데스크탑에 포함된 기능입니다.
실제 동작하는 쿠버네티스 도커 데스크탑 버전에 따라 micro k8s, kind 등 다른 것으로 알고 있습니다.</li><li><a href="https://kind.sigs.k8s.io/docs/user/quick-start/" target="_blank" rel="noopener noreferrer">Kind</a>
(<a href="https://github.com/kubernetes-sigs/kind" target="_blank" rel="noopener noreferrer">github</a>)<br>Kind: Kubernetes in docker 로써 쿠버네티스 클러스터를 도커로(...) 만들었습니다.
따라서 도커가 동작하는 리눅스, 윈도우, 맥에서 사용할 수 있습니다.</li><li><a href="https://k9scli.io/" target="_blank" rel="noopener noreferrer">K9s</a>
(<a href="https://github.com/derailed/k9s" target="_blank" rel="noopener noreferrer">github</a>)<br><em>사용해 보지 않았습니다</em><br>CLI를 친숙하게 이용할 수 있게 해주는 도구입니다. (쿠버네티스가 아닙니다!)  </li><li><a href="https://k3s.io/" target="_blank" rel="noopener noreferrer">K3s</a>
(<a href="https://github.com/k3s-io/k3s" target="_blank" rel="noopener noreferrer">github</a>)<br><em>사용해 보지 않았습니다</em><br>다양한 edge 환경(IoT, ARM)에서 사용되는 저사양(512MB 램, 200MB 디스크) 쿠버네티스 입니다.
어떠한 리눅스 배포에서 동작하도록 만들어졌습니다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="나한테-맞는게-없는데">나한테 맞는게 없는데...<a href="#나한테-맞는게-없는데" class="hash-link" aria-label="Direct link to 나한테 맞는게 없는데..." title="Direct link to 나한테 맞는게 없는데...">​</a></h3><p><em>그냥 한번 체험해 보고 싶어요</em><br>
<!-- -->GCP, AWS에서 PaaS로 쿠버네티스를 사용할 수 있습니다!
<a href="https://cloud.google.com/kubernetes-engine" target="_blank" rel="noopener noreferrer">GKE</a> <a href="https://aws.amazon.com/ko/eks/" target="_blank" rel="noopener noreferrer">EKS</a><br>
<!-- -->클라우드를 적극 활용중이거나 충분한 스펙의 하드웨어가 없다면 추천드립니다!</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kubeadm-설치">Kubeadm 설치<a href="#kubeadm-설치" class="hash-link" aria-label="Direct link to Kubeadm 설치" title="Direct link to Kubeadm 설치">​</a></h2><p><img loading="lazy" alt="kubeadm" src="/assets/images/kubeadm-255514d9d57e05a71895ce15b44c88e5.svg" width="1292" height="1475" class="img_ev3q"><br>
<strong>Deprecated</strong><br>
<em>리눅스 서버가 여러대고 on premise 쿠버네티스가 필요할 때</em><br>
<!-- -->쿠버네티스를 설치하기 전에 환경을 필요한 점검해 봅시다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="os">OS<a href="#os" class="hash-link" aria-label="Direct link to OS" title="Direct link to OS">​</a></h3><ul><li>데비안 배포판 (Ubuntu 20.04 기준 작성)</li><li>레드햇 배포판 (CentOS는 추후 작성하겠습니다)</li><li><a href="https://kubernetes.io/docs/setup/production-environment/windows/intro-windows-in-kubernetes/" target="_blank" rel="noopener noreferrer">윈도우 서버</a>
는 사용해 보지 못했습니다</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hardware-spec">Hardware spec<a href="#hardware-spec" class="hash-link" aria-label="Direct link to Hardware spec" title="Direct link to Hardware spec">​</a></h3><ul><li>2 CPU 이상</li><li>2 GB 이상의 램</li><li>머신 전체 네트워크 연결</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="software-setting">Software setting<a href="#software-setting" class="hash-link" aria-label="Direct link to Software setting" title="Direct link to Software setting">​</a></h3><p><em>Dockershim은 쿠버네티스 릴리스 1.24부터 제거되었습니다.</em>
<em><a href="https://kubernetes.io/ko/docs/setup/production-environment/container-runtimes/" target="_blank" rel="noopener noreferrer">[공식]container runtimes</a></em>
<em>에서 소개하는 다른 컨테이너 런타임을 사용해 주세요.</em><br>
<del><a href="/posts/install-docker">도커 설치</a></del>  </p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>도커 데몬 드라이버 변경</summary><div><div class="collapsibleContent_i85q"><div markdown="1"><p>도커 데몬 드라이버를 systemd로 변경해 줍니다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">vi</span><span class="token plain"> /etc/docker/daemon.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 아래 내용으로 파일을 만듭니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># exec-opts에 주목해 주세요</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">"exec-opts"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"native.cgroupdriver=systemd"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">"log-driver"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"json-file"</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">"log-opts"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"max-size"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"100m"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">"storage-driver"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"overlay2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 또는 다음 명령어로 한번에 파일을 생성할 수 있습니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /etc/docker/daemon.json </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  "exec-opts": ["native.cgroupdriver=systemd"],</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  "storage-driver": "overlay2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># systemd에 경로를 만들어 주고 docker service를 재시작 합니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> -p /etc/systemd/system/docker.service.d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl daemon-reload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl restart </span><span class="token function" style="color:#d73a49">docker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>swap 비활성화(必)</summary><div><div class="collapsibleContent_i85q"><div markdown="1"><p>쿠버네티스는 스왑 메모리를 지원하지 않습니다.
따라서 linux 스왑 메모리를 비활성화 해주어야 합니다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> swapoff -a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 다음 명령어는 잘못 삽입되면 시스템의 정지를 불러올 수 있습니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> -i </span><span class="token string" style="color:#e3116c">'2s/^/#/'</span><span class="token plain"> /etc/fstab</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 따라서, /ect/fstab을 열어 직접 확인하고 스왑메모리에 대한 줄만 주석 처리합시다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">vi</span><span class="token plain"> /etc/fstab</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># /etc/fstab: static file system information.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Use 'blkid' to print the universally unique identifier for a</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># device; this may be used with UUID= as a more robust way to name devices</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># that works even if disks are added and removed. See fstab(5).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># / was on /dev/sda2 during installation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">UUID</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">f33b74a8-d88b-4e05-aa01-86d51a883c53 /               ext4    </span><span class="token assign-left variable" style="color:#36acaa">errors</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">remount-ro </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># /boot/efi was on /dev/sda1 during installation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">UUID</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">9AD5-66E5  /boot/efi       vfat    </span><span class="token assign-left variable" style="color:#36acaa">umask</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">0077      </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#주석 /swapfile                                 none            swap    sw              0       0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>방화벽(必) (firewalld)</summary><div><div class="collapsibleContent_i85q"><div markdown="1"><p>firewall daemon 을 비활성화 시켜줍시다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># firewalld의 종료 방법입니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl stop firewalld</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>포트 개방 (iptables)</summary><div><div class="collapsibleContent_i85q"><div markdown="1"><p>kubernetes 재설치를 진행하다 보면
간혹 iptables에 이전 rule들이 남아있어 문제가 생깁니다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># kubeadm join이 안될 시 iptables를 확인해 봅니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># iptables 조회</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> iptables -L</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># iptables 초기화(flush) 실행하기 전 backup을 꼭 합시다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> iptables -F</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div></details><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kubeadm-설치하기">Kubeadm 설치하기<a href="#kubeadm-설치하기" class="hash-link" aria-label="Direct link to Kubeadm 설치하기" title="Direct link to Kubeadm 설치하기">​</a></h3><ol><li>네트워크 확인<br>쿠버네티스는 MAC과 product_uuid를 사용하여 클러스터의 노드를 식별합니다.
따라서, 네트워크 인터페이스의 MAC 주소가 고유한지 확인해 주어야 합니다.</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ifconfig</span><span class="token plain"> -a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 다음 출력은 virtualbox NAT 네트워크로 머신 간 네트워크 어댑터를 설정한 내용입니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> enp0s3: </span><span class="token assign-left variable" style="color:#36acaa">flags</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">416</span><span class="token operator file-descriptor important" style="color:#393A34">3</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">UP,BROADCAST,RUNNING,MULTICAST</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">  mtu </span><span class="token number" style="color:#36acaa">1500</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      inet </span><span class="token number" style="color:#36acaa">10.0</span><span class="token plain">.2.9  netmask </span><span class="token number" style="color:#36acaa">255.255</span><span class="token plain">.255.0  broadcast </span><span class="token number" style="color:#36acaa">10.0</span><span class="token plain">.2.255</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      inet6 fe80::f80d:352b:ef2a:da26  prefixlen </span><span class="token number" style="color:#36acaa">64</span><span class="token plain">  scopeid 0x2</span><span class="token operator file-descriptor important" style="color:#393A34">0</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">link</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ether 08:00:27:62:15:3e  txqueuelen </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Ethernet</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      RX packets </span><span class="token number" style="color:#36acaa">80558</span><span class="token plain">  bytes </span><span class="token number" style="color:#36acaa">120842058</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">120.8</span><span class="token plain"> MB</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      RX errors </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">  dropped </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">  overruns </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">  frame </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      TX packets </span><span class="token number" style="color:#36acaa">6397</span><span class="token plain">  bytes </span><span class="token number" style="color:#36acaa">424385</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">424.3</span><span class="token plain"> KB</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      TX errors </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">  dropped </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> overruns </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">  carrier </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">  collisions </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 해당 내용을 보면 inet 10.0.2.9가 NAT 네트워크에서 ip 주소이고</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ether 08:00:27:62:15:3e가 맥 주소임을 확인할 수 있습니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> /sys/class/dmi/id/product_uuid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">f570f467-9980-1a47-b9c8-1933b3838dff</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>사용할 노드간 통신이 원활한지 확인해 봅시다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># ping, curl ,telnet 등을 사용할 수 있습니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ping</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">ip-addr</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PING </span><span class="token number" style="color:#36acaa">10.0</span><span class="token plain">.2.9 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10.0</span><span class="token plain">.2.9</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">56</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">84</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> bytes of data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">64</span><span class="token plain"> bytes from </span><span class="token number" style="color:#36acaa">10.0</span><span class="token plain">.2.9: </span><span class="token assign-left variable" style="color:#36acaa">icmp_seq</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ttl</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">64</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">time</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0.777</span><span class="token plain"> ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">64</span><span class="token plain"> bytes from </span><span class="token number" style="color:#36acaa">10.0</span><span class="token plain">.2.9: </span><span class="token assign-left variable" style="color:#36acaa">icmp_seq</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ttl</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">64</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">time</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1.01</span><span class="token plain"> ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">64</span><span class="token plain"> bytes from </span><span class="token number" style="color:#36acaa">10.0</span><span class="token plain">.2.9: </span><span class="token assign-left variable" style="color:#36acaa">icmp_seq</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ttl</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">64</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">time</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1.01</span><span class="token plain"> ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. 생략 </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>다음 포트는 사용가능해야 합니다.  </p><p><strong>마스터 노드</strong>  </p><table><thead><tr><th>프로토콜</th><th>방향</th><th>포트 범위</th><th>목적</th><th>사용자</th></tr></thead><tbody><tr><td>TCP</td><td>인바운드</td><td>6443*</td><td>쿠버네티스 API 서버</td><td>모두</td></tr><tr><td>TCP</td><td>인바운드</td><td>2379-2380</td><td>etcd 서버 클라이언트 API</td><td>kube-apiserver, etcd</td></tr><tr><td>TCP</td><td>인바운드</td><td>10250</td><td>kubelet API</td><td>자체, 컨트롤 플레인</td></tr><tr><td>TCP</td><td>인바운드</td><td>10251</td><td>kube-scheduler</td><td>자체</td></tr><tr><td>TCP</td><td>인바운드</td><td>10252</td><td>kube-controller-manager</td><td>자체</td></tr></tbody></table><p><strong>워커 노드</strong>  </p><table><thead><tr><th>프로토콜</th><th>방향</th><th>포트 범위</th><th>목적</th><th>사용자</th></tr></thead><tbody><tr><td>TCP</td><td>인바운드</td><td>10250</td><td>kubelet API</td><td>자체, 컨트롤 플레인</td></tr><tr><td>TCP</td><td>인바운드</td><td>30000-32767</td><td>NodePort 서비스†</td><td>모두</td></tr></tbody></table><p><em>NodePort 대역이 30000-32767인 것에 주목합시다</em></p><ol start="2"><li>kubeadm, kubelet, kubectl 설치  </li></ol><p><em>해당 내용은 master, worker 노드 둘다 해주어야 합니다</em>  </p><p>쿠버네티스를 설치하고 업데이트 하기 위해 필요한 repository 위치를 설정해 주어야 합니다.<br>
<!-- -->repository 위치를 설정해 주기 위해 필요한 기본 라이브러리를 먼저 설치해 줍시다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -y apt-transport-https ca-certificates </span><span class="token function" style="color:#d73a49">curl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>구글 클라우드의 공개 사이닝 키를 다운로드 합니다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -fsSLo /usr/share/keyrings/kubernetes-archive-keyring.gpg https://packages.cloud.google.com/apt/doc/apt-key.gpg</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>쿠버네티스 <code>apt</code> 레포지토리를 추가합니다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial master"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tee</span><span class="token plain"> /etc/apt/sources.list.d/kubernetes.list</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p><code>apt</code> 패키지 색인을 업데이트하고, kubelet, kubeadm, kubectl을 설치하고 해당 버전을 고정합니다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -y kubelet kubeadm kubectl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> apt-mark hold kubelet kubeadm kubectl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br>3. 마스터 노드, 워커 노드 join a. 마스터 노드 설정 Container Network Interface로 [flannel](https://github.com/flannel-io/flannel)를 사용할 예정입니다. (Calico 플러그인도 존재합니다) flannel의 default cidr 네트워크를 구성할 것이기에 10.244.0.0/16을 사용하여 kubeadm을 init 시켜줍시다.<p>api 서버의 노출 주소는 Master 노드의 ip 주소를 적습니다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> kubeadm init --pod-network-cidr</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">10.244</span><span class="token plain">.0.0/16 --apiserver-advertise-address</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">10.0</span><span class="token plain">.2.9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. 생략 </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Your Kubernetes control-plane has initialized successfully</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  To start using your cluster, you need to run the following as a regular user:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> -p </span><span class="token environment constant" style="color:#36acaa">$HOME</span><span class="token plain">/.kube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> -i /etc/kubernetes/admin.conf </span><span class="token environment constant" style="color:#36acaa">$HOME</span><span class="token plain">/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chown</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">id</span><span class="token variable" style="color:#36acaa"> -u</span><span class="token variable" style="color:#36acaa">)</span><span class="token builtin class-name">:</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">id</span><span class="token variable" style="color:#36acaa"> -g</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"> </span><span class="token environment constant" style="color:#36acaa">$HOME</span><span class="token plain">/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Alternatively, </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> you are the root user, you can run:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">KUBECONFIG</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/etc/kubernetes/admin.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  You should now deploy a pod network to the cluster.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Run </span><span class="token string" style="color:#e3116c">"kubectl apply -f [podnetwork].yaml"</span><span class="token plain"> with one of the options listed at:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    https://kubernetes.io/docs/concepts/cluster-administration/addons/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Then you can </span><span class="token function" style="color:#d73a49">join</span><span class="token plain"> any number of worker nodes by running the following on each as root:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kubeadm </span><span class="token function" style="color:#d73a49">join</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10.0</span><span class="token plain">.2.9:6443 --token zxdtkt.mi91c5sbky3ubp08 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --discovery-token-ca-cert-hash sha256:dc525e7dfce2d699346d6898814936f8276b4b821afa41933f2036ca70f5a04f </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>kubectl을 사용하기 위해 콘솔 출력 결과대로 설정을 해줍시다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> -p </span><span class="token environment constant" style="color:#36acaa">$HOME</span><span class="token plain">/.kube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> -i /etc/kubernetes/admin.conf </span><span class="token environment constant" style="color:#36acaa">$HOME</span><span class="token plain">/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chown</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">id</span><span class="token variable" style="color:#36acaa"> -u</span><span class="token variable" style="color:#36acaa">)</span><span class="token builtin class-name">:</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">id</span><span class="token variable" style="color:#36acaa"> -g</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"> </span><span class="token environment constant" style="color:#36acaa">$HOME</span><span class="token plain">/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 정상 설치가 되었는지 모든 cluster pod를 조회해 봅시다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get pods -A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE     NAME                               READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system   coredns-558bd4d5db-nkcmg           </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">/1     Pending   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          6m47s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system   coredns-558bd4d5db-pnmll           </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">/1     Pending   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          6m47s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system   etcd-gpuadmin                      </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          6m54s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system   kube-apiserver-gpuadmin            </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          7m1s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system   kube-controller-manager-gpuadmin   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          7m1s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system   kube-proxy-wj24j                   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          6m47s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system   kube-scheduler-gpuadmin            </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          6m54s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>CNI 네트워크 에드온 Flannel을 배포합니다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>Flannel을 배포한 후 모든 pod를 조회하면 coredns가 Pending에서 Running으로 바뀌며 동작하는 것을 볼 수 있습니다. 😀</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get pod -A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE     NAME                               READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system   coredns-558bd4d5db-nkcmg           </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          46m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system   coredns-558bd4d5db-pnmll           </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          46m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system   etcd-gpuadmin                      </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          46m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system   kube-apiserver-gpuadmin            </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          46m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system   kube-controller-manager-gpuadmin   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          46m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system   kube-flannel-ds-g4vxx              </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          70s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system   kube-proxy-wj24j                   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          46m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system   kube-scheduler-gpuadmin            </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          46m</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><p>b. 워커 노드 설정  </p><p>마스터 노드를 설정하며 kubeadm 출력에서 나온 명령어가 있습니다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubeadm </span><span class="token function" style="color:#d73a49">join</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10.0</span><span class="token plain">.2.9:6443 --token zxdtkt.mi91c5sbky3ubp08 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --discovery-token-ca-cert-hash sha256:dc525e7dfce2d699346d6898814936f8276b4b821afa41933f2036ca70f5a04f </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>해당 명령어를 워커 노드에서 실행하면 join이 완료됩니다.</p><br><p>마스터 노드에서 노드를 조회해 확인해 봅시다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME       STATUS     ROLES                  AGE     VERSION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cwadmin    Ready      control-plane,master   2m41s   v1.21.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpuadmin   NotReady   </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">                 6s      v1.21.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 적당한 시간이 지나면 Ready로 바뀝니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME       STATUS   ROLES                  AGE     VERSION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cwadmin    Ready    control-plane,master   4m28s   v1.21.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpuadmin   Ready    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">                 113s    v1.21.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="mini-kube-설치">Mini Kube 설치<a href="#mini-kube-설치" class="hash-link" aria-label="Direct link to Mini Kube 설치" title="Direct link to Mini Kube 설치">​</a></h2><p><img loading="lazy" alt="minikube" src="/assets/images/minikube-c6a8c8a6668ff09793515c0825d083d9.svg" width="612" height="165" class="img_ev3q"></p><p><em>한대의 컴퓨터를 가지고 있고 여러 설정이 귀찮을 때</em><br>
<!-- -->쿠버네티스를 설치하기 전에 환경을 필요한 점검해 봅시다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="요구사항">요구사항<a href="#요구사항" class="hash-link" aria-label="Direct link to 요구사항" title="Direct link to 요구사항">​</a></h3><ul><li>2 CPU 이상</li><li>2GB 여유 메모리</li><li>20GB 여유 디스크</li><li>VM 매니저 (VirtualBox 기준 작성)</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mini-kube-설치하기">Mini Kube 설치하기<a href="#mini-kube-설치하기" class="hash-link" aria-label="Direct link to Mini Kube 설치하기" title="Direct link to Mini Kube 설치하기">​</a></h3><ol><li>설치하기</li></ol><p><a href="https://minikube.sigs.k8s.io/docs/start/" target="_blank" rel="noopener noreferrer">공식 페이지</a> 에서 설치파일을 받습니다.<br>
<!-- -->linux는 deb 또는 rpm 패키지, windows는 exe 인스톨러나 Chocolatey로 받을 수 있습니다.<br>
<a href="https://jwher.github.io/2021-05-10-install-tar.gz/" target="_blank" rel="noopener noreferrer">리눅스 패키지 설치</a></p><ol start="2"><li>클러스터 시작하기</li></ol><p>다음 명령어를 입력하여 클러스터를 시작합니다. 참 쉽죠?  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> minikube start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>클러스터 사용하기</li></ol><p>쿠버네티스 컨트롤(kubectl)을 사용해 클러스터와 상호작용 할 수 있습니다.
kubectl이 없다면 <a href="https://jwher.github.io/2021-05-28-kubernetes-usage/" target="_blank" rel="noopener noreferrer">이 글</a> 을 읽어보세요. 😊</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="docker-desktop-설치">Docker Desktop 설치<a href="#docker-desktop-설치" class="hash-link" aria-label="Direct link to Docker Desktop 설치" title="Direct link to Docker Desktop 설치">​</a></h2><p><img loading="lazy" alt="docker" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUwMCIgaGVpZ2h0PSIyMTAwIiB2aWV3Qm94PSIwIDAgMjU2IDIxNSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0zOC42MTcgMTczLjk4NHYtMTYuMzYyYzAtMi4xNSAxLjM0NC0zLjg3NyAzLjU3LTMuODc3aC42MTZjMi4yMjUgMCAzLjU2MyAxLjcyOSAzLjU2MyAzLjg3N3YzNC40NDdjMCA4LjQtNC4xNSAxNS4wODQtMTEuMzgyIDE5LjM0MmEyMS4zNzQgMjEuMzc0IDAgMCAxLTEwLjk0NSAyLjk4NWgtMS41MzdjLTguNDAyIDAtMTUuMDc3LTQuMTUzLTE5LjM0Mi0xMS4zOGEyMS4zMTQgMjEuMzE0IDAgMCAxLTIuOTg0LTEwLjk0N3YtMS41MzVjMC04LjQwMyA0LjE1Mi0xNS4wODMgMTEuMzc4LTE5LjM0OWEyMS4yOTggMjEuMjk4IDAgMCAxIDEwLjk0OC0yLjk4NWgxLjUzN2M1LjY4NiAwIDEwLjUxIDIuMjA0IDE0LjU3OCA1Ljc4NHpNNy45MjQgMTkxLjNjMCA2LjA2OCAyLjk0MSAxMC42MyA4LjI1OCAxMy41NCAyLjE1IDEuMTc2IDQuNDg0IDEuODA4IDYuOTM3IDEuODA4IDUuOTU2IDAgMTAuMzc0LTIuODEgMTMuNDIxLTcuODU3IDEuNDE3LTIuMzQ4IDIuMDc3LTQuOTE3IDIuMDc3LTcuNjQ4IDAtNS4yNi0yLjQ5LTkuMzY1LTYuNzI5LTEyLjQxNC0yLjU3LTEuODQ4LTUuNDYzLTIuNzc1LTguNjE4LTIuNzc1LTYuNDkyIDAtMTEuMTY0IDMuMjgtMTMuOTY4IDkuMTA2LS45NDYgMS45Ny0xLjM3OCA0LjA2MS0xLjM3OCA2LjI0em02NS4zMjQtMjMuMWgxLjA3NGM4Ljk3OCAwIDE1LjgwNiA0LjM1NSAyMC4xMzMgMTIuMTkyIDEuNzMgMy4xMzUgMi42NTYgNi41NTcgMi42NTYgMTAuMTQydjEuNTM1YzAgOC40LTQuMTQyIDE1LjA5My0xMS4zODUgMTkuMzQzLTMuMzUzIDEuOTY3LTcuMDU3IDIuOTg0LTEwLjk0MyAyLjk4NGgtMS41MzVjLTguNDAyIDAtMTUuMDc5LTQuMTUzLTE5LjM0Mi0xMS4zOGEyMS4zMTYgMjEuMzE2IDAgMCAxLTIuOTg3LTEwLjk0N3YtMS41MzVjMC04LjQwNCA0LjE2OS0xNS4wNjIgMTEuMzc3LTE5LjM0NyAzLjM1MS0xLjk5MSA3LjA1OC0yLjk4NyAxMC45NTItMi45ODd6bS0xNC41OCAyMy4xYzAgNS44OSAyLjg5IDEwLjIyMyA3Ljg2NSAxMy4yNyAyLjMzNiAxLjQzIDQuOTA5IDIuMDc4IDcuNjM4IDIuMDc4IDUuODIgMCAxMC4xMjItMi45NTEgMTMuMTE2LTcuODYzIDEuNDI4LTIuMzQyIDIuMDc0LTQuOTE1IDIuMDc0LTcuNjQyIDAtNS40NzctMi42MzgtOS42NjEtNy4xNDgtMTIuNjkzLTIuNDcxLTEuNjYzLTUuMjIyLTIuNDk2LTguMTk4LTIuNDk2LTYuNDkyIDAtMTEuMTY0IDMuMjgtMTMuOTY3IDkuMTA2LS45NDggMS45Ny0xLjM4IDQuMDYxLTEuMzggNi4yNHptNzAuNjU2LTE0LjcyN2MtMS4xNy0uNTQ4LTMuMzYtLjczLTQuNjI0LS43NzgtNi40NzQtLjI0NC0xMS4xNTggMy40MDItMTMuOTA2IDkuMTEzLS45NDkgMS45Ny0xLjM4MiA0LjA1NS0xLjM4MiA2LjIzNSAwIDYuNjM3IDMuNDg1IDExLjI4NCA5LjQwOSAxNC4xMTcgMi4xNjQgMS4wMzQgNC45NTggMS4yMyA3LjMyMyAxLjIzIDIuMDggMCA1LjAyLTEuMjc0IDYuODY2LTIuMTUxbC4zMi0uMTUyaDEuNDMzbC4xNTguMDMyYzEuNzYyLjM2NyAzLjA5MiAxLjQ4NCAzLjA5MiAzLjM4di43NjdjMCA0LjcxOC04LjYyMiA1Ljc5OC0xMS45MTIgNi4wMjgtMTEuNjEuODAzLTIwLjI5My01LjU3My0yMy42MDMtMTYuNjQ3LS41NzUtMS45MjMtLjgzNC0zLjgzMy0uODM0LTUuODM3di0xLjUzM2MwLTguNDAzIDQuMTctMTUuMDU5IDExLjM3Ny0xOS4zNCAzLjM1MS0xLjk5IDcuMDU3LTIuOTkgMTAuOTUtMi45OWgxLjUzNmM0LjEzIDAgNy45MzQgMS4xNzMgMTEuMzQ0IDMuNTAybC4yOC4xOTQuMTc3LjI5MmMuMzY4LjYxLjY4NSAxLjMxNi42ODUgMi4wNDJ2Ljc2N2MwIDEuOTc4LTEuNDggMy4wNDItMy4yNjYgMy4zODZsLS4xNDguMDI2aC0uNDU4Yy0xLjE1NiAwLTMuNzg1LTEuMTk3LTQuODE3LTEuNjgzem0yNS4xMzQgNS4yNDdjMy4wMS0zLjAxNCA2LjAzLTYuMDIyIDkuMDg1LTguOTg2Ljg1MS0uODI3IDQuMDc0LTQuMzI3IDUuMzQzLTQuMzI3aDEuMzg4bC4xNTguMDMzYzEuNzY4LjM2NyAzLjA5MiAxLjQ4NiAzLjA5MiAzLjM4NnYuNzY2YzAgMS4yOTYtMS41MTggMi44MDItMi4zNTUgMy42ODktMS43OCAxLjg4Ny0zLjY1NCAzLjcxMi01LjQ3NiA1LjU2bC05LjM2MiA5LjUwNGM0LjAzMSA0LjA0IDguMDU4IDguMDgzIDEyLjA1NiAxMi4xNTRhMzEzLjMwNCAzMTMuMzA0IDAgMCAxIDMuMzAxIDMuMzk2Yy4zODUuNDA1Ljk1My45MDkgMS4yNzYgMS40Ny4zNDcuNTI2LjU2IDEuMTE5LjU2IDEuNzUydi44bC0uMDQ1LjE4NWMtLjQzNSAxLjc2OC0xLjU1NyAzLjE5NC0zLjUxNiAzLjE5NGgtLjYxN2MtMS4yODIgMC0yLjczLTEuNDUtMy42MDgtMi4yNzktMS44MS0xLjcwNi0zLjU1Ny0zLjUtNS4zMzEtNS4yNDNsLTUuOTQ5LTUuODR2OS4zMzRjMCAyLjE1LTEuMzQ2IDMuODc4LTMuNTY5IDMuODc4aC0uNjFjLTIuMjI2IDAtMy41Ny0xLjcyOC0zLjU3LTMuODc4di01Mi41OTZjMC0yLjE1IDEuMzQ1LTMuODcgMy41Ny0zLjg3aC42MWMyLjIyMyAwIDMuNTY5IDEuNzIgMy41NjkgMy44N3YyNC4wNDh6bTk2LjU3Ny0xMy4zMTNoLjc3YzIuMzI0IDAgMy44NzUgMS41NjYgMy44NzUgMy44NzcgMCAzLjIwOC0zLjA2NyA0LjAyOS01LjcyIDQuMDI5LTMuNDggMC02LjgwMyAyLjEwNy05LjIwMiA0LjQ3LTIuOTkxIDIuOTQ5LTQuMyA2LjcyNi00LjMgMTAuODc4djE4Ljc1OWMwIDIuMTUtMS4zNDMgMy44NzYtMy41NyAzLjg3NmgtLjYxMmMtMi4yMjcgMC0zLjU2OS0xLjcyNS0zLjU2OS0zLjg3NnYtMTkuODM2YzAtNy42MTcgMy43MDgtMTMuODM1IDkuODktMTguMTk2IDMuNjkxLTIuNjA1IDcuOTE5LTMuOTggMTIuNDM4LTMuOTh6bS01NS4wNzQgMzcuMTc2YzIuODIuOTg1IDYuMDM1Ljg0NCA4LjkyOC4zNCAxLjQ4LS42MjkgNS4yNjQtMi4yOCA2LjY1Ni0yLjAzOGwuMjE3LjAzNy4yLjA5OGMuODUuNDEyIDEuNjYxLjk5NSAyLjA5NSAxLjg2IDEuMDE0IDIuMDI3LjUyNyA0LjA2NS0xLjQ2NSA1LjIxNmwtLjY2My4zODNjLTcuMzUgNC4yNDItMTUuMTY4IDMuNjU0LTIyLjQ5NS0uMzA4LTMuNTAzLTEuODk0LTYuMTgzLTQuNzA1LTguMTYtOC4xMzJsLS40NjItLjgwMWMtNC43MTktOC4xNzItNC4wODItMTYuNzY4IDEuMjQtMjQuNTM5IDEuODM3LTIuNjg2IDQuMjM4LTQuNzYxIDcuMDQ1LTYuMzg0bDEuMDYyLS42MTNjNi45MjItMy45OTYgMTQuMzQxLTMuNzIyIDIxLjQ1LS4yMTUgMy44MjMgMS44ODYgNi45MiA0LjY5NyA5LjA1NCA4LjM5NGwuMzg0LjY2NmMxLjU1IDIuNjg2LS40NTggNS4wMjYtMi41MzEgNi42MjYtMi40MDYgMS44NTYtNC44MzUgNC4wOS03LjE0MSA2LjA4LTUuMTQyIDQuNDM5LTEwLjI3NiA4Ljg4OC0xNS40MTQgMTMuMzN6bS02LjY1NS00LjY3NGM1Ljc1LTQuOTMgMTEuNTAyLTkuODY1IDE3LjIzNy0xNC44MTYgMS45Ni0xLjY5IDQuMTA5LTMuNDQ0IDYuMDUzLTUuMjIxLTEuNTYtMS45NjYtNC4xNjYtMy4zODMtNi4zOC00LjIyOC00LjQ3LTEuNzAzLTguODc3LTEuMTMxLTEyLjk3NiAxLjIzNS01LjM2NSAzLjA5OC03LjY1IDguMDMxLTcuNDUgMTQuMTcuMDggMi40MTguNzMgNC43NDggMi4wMTMgNi44MDUuNDUyLjcyNS45NTcgMS40MDYgMS41MDMgMi4wNTV6TTE0Ny40ODggNDUuNzMyaDIyLjg2NnYyMy4zNzVoMTEuNTYxYzUuMzQgMCAxMC44MzEtLjk1MSAxNS44ODctMi42NjQgMi40ODUtLjg0MyA1LjI3My0yLjAxNSA3LjcyNC0zLjQ5LTMuMjI4LTQuMjE0LTQuODc2LTkuNTM1LTUuMzYtMTQuNzgtLjY2LTcuMTM1Ljc4LTE2LjQyMSA1LjYwOC0yMi4wMDVsMi40MDQtMi43OCAyLjg2NCAyLjMwM2M3LjIxMSA1Ljc5MyAxMy4yNzYgMTMuODg5IDE0LjM0NSAyMy4xMTggOC42ODMtMi41NTQgMTguODc4LTEuOTUgMjYuNTMxIDIuNDY3bDMuMTQgMS44MTItMS42NTIgMy4yMjZDMjQ2LjkzMyA2OC45NDYgMjMzLjQgNzIuODYgMjIwLjE3IDcyLjE2N2MtMTkuNzk3IDQ5LjMwOS02Mi44OTggNzIuNjUzLTExNS4xNTcgNzIuNjUzLTI3IDAtNTEuNzctMTAuMDkzLTY1Ljg3Ni0zNC4wNDdsLS4yMzEtLjM5LTIuMDU1LTQuMTgyYy00Ljc2OC0xMC41NDQtNi4zNTItMjIuMDk1LTUuMjc4LTMzLjYzN2wuMzIzLTMuNDU3SDUxLjQ1VjQ1LjczMmgyMi44NjVWMjIuODY2aDQ1LjczM1YwaDI3LjQ0djQ1LjczMiIgZmlsbD0iIzM2NDU0OCIvPjxwYXRoIGQ9Ik0yMjEuNTcgNTQuMzhjMS41MzMtMTEuOTE2LTcuMzg0LTIxLjI3NS0xMi45MTQtMjUuNzE5LTYuMzczIDcuMzY4LTcuMzYzIDI2LjY3OCAyLjYzNSAzNC44MDgtNS41OCA0Ljk1Ni0xNy4zMzcgOS40NDgtMjkuMzc2IDkuNDQ4SDM1LjM3Yy0xLjE3IDEyLjU2NyAxLjAzNiAyNC4xNCA2LjA3NSAzNC4wNDVsMS42NjcgMy4wNWE1Ni41MzYgNTYuNTM2IDAgMCAwIDMuNDU1IDUuMTg0YzYuMDI1LjM4NyAxMS41OC41MiAxNi42NjIuNDA4aC4wMDJjOS45ODctLjIyIDE4LjEzNi0xLjQgMjQuMzEyLTMuNTRhMS43NjEgMS43NjEgMCAwIDEgMS4xNTMgMy4zMjZjLS44MjIuMjg2LTEuNjc4LjU1Mi0yLjU2Mi44MDVoLS4wMDNjLTQuODYzIDEuMzg5LTEwLjA3OCAyLjMyMy0xNi44MDYgMi43MzguNC4wMDctLjQxNi4wNi0uNDE4LjA2LS4yMjkuMDE1LS41MTcuMDQ4LS43NDcuMDYtMi42NDguMTQ5LTUuNTA2LjE4LTguNDI4LjE4LTMuMTk2IDAtNi4zNDMtLjA2LTkuODYyLS4yNGwtLjA5LjA2YzEyLjIxIDEzLjcyNCAzMS4zMDIgMjEuOTU1IDU1LjIzNCAyMS45NTUgNTAuNjQ4IDAgOTMuNjA4LTIyLjQ1MiAxMTIuNjMyLTcyLjg1NyAxMy40OTYgMS4zODUgMjYuNDY3LTIuMDU3IDMyLjM2Ny0xMy41NzUtOS4zOTgtNS40MjMtMjEuNDg0LTMuNjk0LTI4LjQ0My0uMTk2IiBmaWxsPSIjMjJBMEM4Ii8+PHBhdGggZD0iTTIyMS41NyA1NC4zOGMxLjUzMy0xMS45MTYtNy4zODQtMjEuMjc1LTEyLjkxNC0yNS43MTktNi4zNzMgNy4zNjgtNy4zNjMgMjYuNjc4IDIuNjM1IDM0LjgwOC01LjU4IDQuOTU2LTE3LjMzNyA5LjQ0OC0yOS4zNzYgOS40NDhINDQuMDQ4Yy0uNTk4IDE5LjI0NiA2LjU0NCAzMy44NTUgMTkuMTggNDIuNjg3aC4wMDNjOS45ODctLjIyIDE4LjEzNi0xLjQgMjQuMzEyLTMuNTRhMS43NjEgMS43NjEgMCAwIDEgMS4xNTMgMy4zMjZjLS44MjIuMjg2LTEuNjc4LjU1Mi0yLjU2Mi44MDVoLS4wMDNjLTQuODYzIDEuMzg5LTEwLjUyNiAyLjQ0My0xNy4yNTQgMi44NTgtLjAwMiAwLS4xNjMtLjE1NS0uMTY1LS4xNTUgMTcuMjM3IDguODQyIDQyLjIzIDguODEgNzAuODg1LTIuMTk3IDMyLjEzLTEyLjM0NCA2Mi4wMjktMzUuODYgODIuODktNjIuNzU3LS4zMTQuMTQyLS42Mi4yODctLjkxNy40MzYiIGZpbGw9IiMzN0IxRDkiLz48cGF0aCBkPSJNMzUuNjQ1IDg4LjE4NmMuOTEgNi43MzIgMi44OCAxMy4wMzUgNS44IDE4Ljc3NmwxLjY2NyAzLjA1YTU2LjQzMiA1Ni40MzIgMCAwIDAgMy40NTUgNS4xODRjNi4wMjYuMzg3IDExLjU4MS41MiAxNi42NjQuNDA4IDkuOTg3LS4yMiAxOC4xMzYtMS40IDI0LjMxMi0zLjU0YTEuNzYxIDEuNzYxIDAgMCAxIDEuMTUzIDMuMzI2Yy0uODIyLjI4Ni0xLjY3OC41NTItMi41NjIuODA1aC0uMDAzYy00Ljg2MyAxLjM4OS0xMC40OTYgMi4zODMtMTcuMjI0IDIuNzk5LS4yMzEuMDE0LS42MzQuMDE3LS44NjcuMDMtMi42NDYuMTQ4LTUuNDc1LjIzOS04LjM5OC4yMzktMy4xOTUgMC02LjQ2My0uMDYxLTkuOTgtLjI0IDEyLjIxIDEzLjcyNCAzMS40MiAyMS45ODUgNTUuMzUyIDIxLjk4NSA0My4zNiAwIDgxLjA4NC0xNi40NTggMTAyLjk3OS01Mi44MjJIMzUuNjQ1IiBmaWxsPSIjMUI4MUE1Ii8+PHBhdGggZD0iTTQ1LjM2NyA4OC4xODZjMi41OTIgMTEuODIgOC44MjEgMjEuMDk5IDE3Ljg2NCAyNy40MTggOS45ODctLjIyIDE4LjEzNi0xLjQgMjQuMzEyLTMuNTRhMS43NjEgMS43NjEgMCAwIDEgMS4xNTMgMy4zMjZjLS44MjIuMjg2LTEuNjc4LjU1Mi0yLjU2Mi44MDVoLS4wMDNjLTQuODYzIDEuMzg5LTEwLjYxNSAyLjM4My0xNy4zNDQgMi43OTkgMTcuMjM2IDguODQgNDIuMTU3IDguNzEzIDcwLjgxLTIuMjkzIDE3LjMzNC02LjY2IDM0LjAxNy0xNi41NzQgNDguOTg0LTI4LjUxNUg0NS4zNjciIGZpbGw9IiMxRDkxQjQiLz48cGF0aCBkPSJNNTUuMjYgNDkuNTQzaDE5LjgxOHYxOS44MThINTUuMjZWNDkuNTQzem0xLjY1MSAxLjY1MmgxLjU2NFY2Ny43MWgtMS41NjRWNTEuMTk1em0yLjk0IDBoMS42MjdWNjcuNzFoLTEuNjI2VjUxLjE5NXptMy4wMDIgMGgxLjYyN1Y2Ny43MWgtMS42MjdWNTEuMTk1em0zLjAwNCAwaDEuNjI2VjY3LjcxaC0xLjYyNlY1MS4xOTV6bTMuMDAzIDBoMS42MjZWNjcuNzFINjguODZWNTEuMTk1em0zLjAwMiAwaDEuNTY1VjY3LjcxaC0xLjU2NVY1MS4xOTV6TTc4LjEyNiAyNi42NzdoMTkuODE5djE5LjgxN2gtMTkuODJWMjYuNjc3em0xLjY1MiAxLjY1MmgxLjU2M3YxNi41MTRoLTEuNTYzVjI4LjMyOXptMi45NCAwaDEuNjI2djE2LjUxNGgtMS42MjVWMjguMzI5em0zLjAwMiAwaDEuNjI2djE2LjUxNEg4NS43MlYyOC4zMjl6bTMuMDAzIDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAzIDBoMS42Mjd2MTYuNTE0aC0xLjYyN1YyOC4zMjl6bTMuMDAyIDBoMS41NjZ2MTYuNTE0aC0xLjU2NlYyOC4zMjl6IiBmaWxsPSIjMjNBM0MyIi8+PHBhdGggZD0iTTc4LjEyNiA0OS41NDNoMTkuODE5djE5LjgxOGgtMTkuODJWNDkuNTQzem0xLjY1MiAxLjY1MmgxLjU2M1Y2Ny43MWgtMS41NjNWNTEuMTk1em0yLjk0IDBoMS42MjZWNjcuNzFoLTEuNjI1VjUxLjE5NXptMy4wMDIgMGgxLjYyNlY2Ny43MUg4NS43MlY1MS4xOTV6bTMuMDAzIDBoMS42MjZWNjcuNzFoLTEuNjI2VjUxLjE5NXptMy4wMDMgMGgxLjYyN1Y2Ny43MWgtMS42MjdWNTEuMTk1em0zLjAwMiAwaDEuNTY2VjY3LjcxaC0xLjU2NlY1MS4xOTV6IiBmaWxsPSIjMzRCQkRFIi8+PHBhdGggZD0iTTEwMC45OTMgNDkuNTQzaDE5LjgxOHYxOS44MThoLTE5LjgxOFY0OS41NDN6bTEuNjUxIDEuNjUyaDEuNTYzVjY3LjcxaC0xLjU2M1Y1MS4xOTV6bTIuOTQgMGgxLjYyNlY2Ny43MWgtMS42MjZWNTEuMTk1em0zLjAwMyAwaDEuNjI2VjY3LjcxaC0xLjYyNlY1MS4xOTV6bTMuMDAzIDBoMS42MjZWNjcuNzFoLTEuNjI2VjUxLjE5NXptMy4wMDIgMGgxLjYyOFY2Ny43MWgtMS42MjhWNTEuMTk1em0zLjAwMyAwaDEuNTY0VjY3LjcxaC0xLjU2NFY1MS4xOTV6IiBmaWxsPSIjMjNBM0MyIi8+PHBhdGggZD0iTTEwMC45OTMgMjYuNjc3aDE5LjgxOHYxOS44MTdoLTE5LjgxOFYyNi42Nzd6bTEuNjUxIDEuNjUyaDEuNTYzdjE2LjUxNGgtMS41NjNWMjguMzI5em0yLjk0IDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAzIDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAzIDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAyIDBoMS42Mjh2MTYuNTE0aC0xLjYyOFYyOC4zMjl6bTMuMDAzIDBoMS41NjR2MTYuNTE0aC0xLjU2NFYyOC4zMjl6TTEyMy44NTkgNDkuNTQzaDE5LjgxOHYxOS44MThoLTE5LjgxOFY0OS41NDN6bTEuNjUyIDEuNjUyaDEuNTYzVjY3LjcxaC0xLjU2M1Y1MS4xOTV6bTIuOTQgMGgxLjYyNlY2Ny43MWgtMS42MjZWNTEuMTk1em0zLjAwMiAwaDEuNjI2VjY3LjcxaC0xLjYyNlY1MS4xOTV6bTMuMDAzIDBoMS42MjdWNjcuNzFoLTEuNjI3VjUxLjE5NXptMy4wMDMgMGgxLjYyN1Y2Ny43MWgtMS42MjdWNTEuMTk1em0zLjAwMyAwaDEuNTY0VjY3LjcxaC0xLjU2NFY1MS4xOTV6IiBmaWxsPSIjMzRCQkRFIi8+PHBhdGggZD0iTTEyMy44NTkgMjYuNjc3aDE5LjgxOHYxOS44MTdoLTE5LjgxOFYyNi42Nzd6bTEuNjUyIDEuNjUyaDEuNTYzdjE2LjUxNGgtMS41NjNWMjguMzI5em0yLjk0IDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAyIDBoMS42MjZ2MTYuNTE0aC0xLjYyNlYyOC4zMjl6bTMuMDAzIDBoMS42Mjd2MTYuNTE0aC0xLjYyN1YyOC4zMjl6bTMuMDAzIDBoMS42Mjd2MTYuNTE0aC0xLjYyN1YyOC4zMjl6bTMuMDAzIDBoMS41NjR2MTYuNTE0aC0xLjU2NFYyOC4zMjl6IiBmaWxsPSIjMjNBM0MyIi8+PHBhdGggZD0iTTEyMy44NTkgMy44MWgxOS44MThWMjMuNjNoLTE5LjgxOFYzLjgxem0xLjY1MiAxLjY1MWgxLjU2M3YxNi41MTZoLTEuNTYzVjUuNDZ6bTIuOTQgMGgxLjYyNnYxNi41MTZoLTEuNjI2VjUuNDZ6bTMuMDAyIDBoMS42MjZ2MTYuNTE2aC0xLjYyNlY1LjQ2em0zLjAwMyAwaDEuNjI3djE2LjUxNmgtMS42MjdWNS40NnptMy4wMDMgMGgxLjYyN3YxNi41MTZoLTEuNjI3VjUuNDZ6bTMuMDAzIDBoMS41NjR2MTYuNTE2aC0xLjU2NFY1LjQ2eiIgZmlsbD0iIzM0QkJERSIvPjxwYXRoIGQ9Ik0xNDYuNzI1IDQ5LjU0M2gxOS44MTh2MTkuODE4aC0xOS44MThWNDkuNTQzem0xLjY1IDEuNjUyaDEuNTY1VjY3LjcxaC0xLjU2NFY1MS4xOTV6bTIuOTQgMGgxLjYyN1Y2Ny43MWgtMS42MjZWNTEuMTk1em0zLjAwNCAwaDEuNjI3VjY3LjcxaC0xLjYyN1Y1MS4xOTV6bTMuMDAyIDBoMS42MjdWNjcuNzFoLTEuNjI3VjUxLjE5NXptMy4wMDQgMGgxLjYyNlY2Ny43MWgtMS42MjZWNTEuMTk1em0zLjAwMiAwaDEuNTY0VjY3LjcxaC0xLjU2NFY1MS4xOTV6IiBmaWxsPSIjMjNBM0MyIi8+PHBhdGggZD0iTTk2LjcwNCAxMDEuNDkyYTUuNDY4IDUuNDY4IDAgMSAxLS4wMDIgMTAuOTM1IDUuNDY4IDUuNDY4IDAgMCAxIC4wMDItMTAuOTM1IiBmaWxsPSIjRDNFQ0VDIi8+PHBhdGggZD0iTTk2LjcwNCAxMDMuMDQzYy41IDAgLjk3Ny4wOTQgMS40MTcuMjY1YTEuNTk4IDEuNTk4IDAgMCAwIC43OTggMi45OGMuNjA1IDAgMS4xMy0uMzM1IDEuNDAyLS44MzFhMy45MTUgMy45MTUgMCAxIDEtMy42MTctMi40MTRNMCA5MC4xNjJoMjU0LjMyN2MtNS41MzctMS40MDQtMTcuNTItMy4zMDItMTUuNTQ0LTEwLjU2LTEwLjA3IDExLjY1Mi0zNC4zNTMgOC4xNzUtNDAuNDgyIDIuNDMtNi44MjQgOS44OTgtNDYuNTU0IDYuMTM1LTQ5LjMyNS0xLjU3Ni04LjU1NiAxMC4wNDEtMzUuMDY3IDEwLjA0MS00My42MjMgMC0yLjc3MyA3LjcxMS00Mi41MDIgMTEuNDc0LTQ5LjMyNyAxLjU3NS02LjEyOCA1Ljc0Ni0zMC40MSA5LjIyMy00MC40OC0yLjQyOEMxNy41MjIgODYuODYgNS41MzkgODguNzU4IDAgOTAuMTYzIiBmaWxsPSIjMzY0NTQ4Ii8+PHBhdGggZD0iTTExMS4yMzcgMTQwLjg5Yy0xMy41NC02LjQyNS0yMC45NzEtMTUuMTYtMjUuMTA2LTI0LjY5NC01LjAzIDEuNDM1LTExLjA3NSAyLjM1My0xOC4xIDIuNzQ3LTIuNjQ2LjE0OC01LjQzLjIyNC04LjM1LjIyNC0zLjM2OCAwLTYuOTE3LS4xLTEwLjY0My0uMjk3IDEyLjQxNyAxMi40MSAyNy42OTIgMjEuOTY0IDU1Ljk3NiAyMi4xMzggMi4wODggMCA0LjE2LS4wNCA2LjIyMy0uMTE4IiBmaWxsPSIjQkREOUQ3Ii8+PHBhdGggZD0iTTkxLjE2IDEyNC45OTRjLTEuODczLTIuNTQzLTMuNjktNS43MzktNS4wMjYtOC44LTUuMDMgMS40MzctMTEuMDc3IDIuMzU1LTE4LjEwMyAyLjc1IDQuODI2IDIuNjE5IDExLjcyNyA1LjA0NiAyMy4xMyA2LjA1IiBmaWxsPSIjRDNFQ0VDIi8+PC9nPjwvc3ZnPg==" width="2500" height="2100" class="img_ev3q"></p><p><em>한대의 윈도우 컴퓨터를 가지고 있을 때, 커맨드 라인을 보면 어지러울 때</em><br>
<!-- -->먼저 <a href="https://jwher.github.io/2021-04-13-install-docker/#windows" target="_blank" rel="noopener noreferrer">도커 데스크탑</a> 이 없다면 설치합시다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker-desktop-설치하기">Docker Desktop 설치하기<a href="#docker-desktop-설치하기" class="hash-link" aria-label="Direct link to Docker Desktop 설치하기" title="Direct link to Docker Desktop 설치하기">​</a></h3><ol><li>대쉬보드를 열고 설정을 눌러줍니다</li></ol><p><img loading="lazy" alt="docker desktop k8s setting" src="/assets/images/docker-desktop-k8s-setting-2ea42bb809fe32a9b6771cfa6e44ac3e.png" width="602" height="347" class="img_ev3q"></p><br><ol start="2"><li>Kubernetes – Enable Kubernetes를 눌러줍니다</li></ol><p><img loading="lazy" alt="docker desktop k8s enable" src="/assets/images/docker-desktop-k8s-enable-782e3fb4049aaddfced6c4370c040001.png" width="602" height="347" class="img_ev3q"></p><br><ol start="3"><li>Apply &amp; Restart를 눌러줍니다.</li></ol><p><img loading="lazy" alt="docker desktop k8s restart" src="/assets/images/docker-desktop-k8s-restart-ebb84fc16f008053309563fd3c76b498.png" width="602" height="347" class="img_ev3q"></p><p>Kubernetes 설치는 많은 량의 docker container를 생성하기 때문에 상당한 시간을 소요로 합니다.<br>
<!-- -->완료되면 커맨드라인으로 확인해 봅시다.</p><p><em>kubectl이 없다면 <a href="/posts/kubernetes-usage/">이 글</a> 을 읽어보세요.</em> 😊</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> kubectl version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kind-설치">Kind 설치<a href="#kind-설치" class="hash-link" aria-label="Direct link to Kind 설치" title="Direct link to Kind 설치">​</a></h2><p><img loading="lazy" alt="kind" src="/assets/images/kind-a79de9a39747e0406c36d1da90e210aa.svg" width="985" height="594" class="img_ev3q"></p><p><em>한대의 컴퓨터를 가지고 있고, 쉬운 설치와 그나마 빠른(...) 성능이 필요할 때</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kind-설치하기">Kind 설치하기<a href="#kind-설치하기" class="hash-link" aria-label="Direct link to Kind 설치하기" title="Direct link to Kind 설치하기">​</a></h3><ol><li>Install Kind  </li></ol><p>OS에 맞게 설치합니다</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># On Linux</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -Lo ./kind https://kind.sigs.k8s.io/dl/v0.10.0/kind-linux-amd64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> +x ./kind</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># On Mac</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">~ </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -Lo ./kind https://kind.sigs.k8s.io/dl/v0.10.0/kind-darwin-amd64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># or</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">~ brew </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> kind</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># On Windows</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> curl.exe -Lo kind-windows-amd64.exe https://kind.sigs.k8s.io/dl/v0.10.0/kind-windows-amd64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># or</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> choco </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> kind</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>쿠버네티스 클러스터 생성  </li></ol><p>클러스터 생성 시 쿠브플로우를 사용할 것이므로 port-forwarding을 해주어야 합니다.<br>
<!-- -->다음 yaml을 작성합니다.<br>
<!-- -->(세부적인 ingress 설정은 <a href="https://kind.sigs.k8s.io/docs/user/ingress" target="_blank" rel="noopener noreferrer">[공식]Ingress</a>  참고합시다)</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Cluster</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kind.x</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">k8s.io/v1alpha4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">nodes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">role</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> control</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">plane</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># port forward 80 on the host to 80 on this node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">extraPortMappings</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">31380</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">hostPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">31380</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># optional: set the bind address on the host</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># 0.0.0.0 is the current default</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">listenAddress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0.0.0.0"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># optional: set the protocol to one of TCP, UDP, SCTP.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># TCP is the default</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br>클러스터를 생성합니다.<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> kind create cluster</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># or</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> kind create cluster --config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Creating cluster </span><span class="token string" style="color:#e3116c">"kind"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">• Ensuring </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"> image </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">kindest/node:v1.20.2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> 🖼  </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">✓ Ensuring </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"> image </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">kindest/node:v1.20.2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> 🖼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">• Preparing nodes 📦   </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">✓ Preparing nodes 📦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">• Writing configuration 📜  </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">✓ Writing configuration 📜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">• Starting control-plane 🕹️  </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">✓ Starting control-plane 🕹️</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">• Installing CNI 🔌  </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">✓ Installing CNI 🔌</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">• Installing StorageClass 💾  </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">✓ Installing StorageClass 💾</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Set kubectl context to </span><span class="token string" style="color:#e3116c">"kind-kind"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">You can now use your cluster with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl cluster-info --context kind-kind</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Have a question, bug, or feature request? Let us know</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"> https://kind.sigs.k8s.io/</span><span class="token comment" style="color:#999988;font-style:italic">#community 🙂</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Access Cluster</li></ol><p>쿠버네티스 노드 쉘에 접속합니다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 디폴트 쉘이 bash가 아니면</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># /bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl --version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Client Version: version.Info</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">Major:</span><span class="token string" style="color:#e3116c">"1"</span><span class="token plain">, Minor:</span><span class="token string" style="color:#e3116c">"20"</span><span class="token plain">, GitVersion:</span><span class="token string" style="color:#e3116c">"v1.20.2"</span><span class="token plain">, GitCommit:</span><span class="token string" style="color:#e3116c">"faecb196815e248d3ecfb03c680a4507229c2a56"</span><span class="token plain">, GitTreeState:</span><span class="token string" style="color:#e3116c">"clean"</span><span class="token plain">, BuildDate:</span><span class="token string" style="color:#e3116c">"2021-01-21T01:10:43Z"</span><span class="token plain">, GoVersion:</span><span class="token string" style="color:#e3116c">"go1.15.5"</span><span class="token plain">, Compiler:</span><span class="token string" style="color:#e3116c">"gc"</span><span class="token plain">, Platform:</span><span class="token string" style="color:#e3116c">"linux/amd64"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The connection to the server localhost:8080 was refused - did you specify the right </span><span class="token function" style="color:#d73a49">host</span><span class="token plain"> or port?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># conf 파일을 복사해 주면 kubectl을 이용할 수 있습니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> -p </span><span class="token environment constant" style="color:#36acaa">$HOME</span><span class="token plain">/.kube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> -i /etc/kubernetes/admin.conf </span><span class="token environment constant" style="color:#36acaa">$HOME</span><span class="token plain">/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">chown</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">id</span><span class="token variable" style="color:#36acaa"> -u</span><span class="token variable" style="color:#36acaa">)</span><span class="token builtin class-name">:</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">id</span><span class="token variable" style="color:#36acaa"> -g</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"> </span><span class="token environment constant" style="color:#36acaa">$HOME</span><span class="token plain">/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl --version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Client Version: version.Info</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">Major:</span><span class="token string" style="color:#e3116c">"1"</span><span class="token plain">, Minor:</span><span class="token string" style="color:#e3116c">"20"</span><span class="token plain">, GitVersion:</span><span class="token string" style="color:#e3116c">"v1.20.2"</span><span class="token plain">, GitCommit:</span><span class="token string" style="color:#e3116c">"faecb196815e248d3ecfb03c680a4507229c2a56"</span><span class="token plain">, GitTreeState:</span><span class="token string" style="color:#e3116c">"clean"</span><span class="token plain">, BuildDate:</span><span class="token string" style="color:#e3116c">"2021-01-21T01:10:43Z"</span><span class="token plain">, GoVersion:</span><span class="token string" style="color:#e3116c">"go1.15.5"</span><span class="token plain">, Compiler:</span><span class="token string" style="color:#e3116c">"gc"</span><span class="token plain">, Platform:</span><span class="token string" style="color:#e3116c">"linux/amd64"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Server Version: version.Info</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">Major:</span><span class="token string" style="color:#e3116c">"1"</span><span class="token plain">, Minor:</span><span class="token string" style="color:#e3116c">"20"</span><span class="token plain">, GitVersion:</span><span class="token string" style="color:#e3116c">"v1.20.2"</span><span class="token plain">, GitCommit:</span><span class="token string" style="color:#e3116c">"faecb196815e248d3ecfb03c680a4507229c2a56"</span><span class="token plain">, GitTreeState:</span><span class="token string" style="color:#e3116c">"clean"</span><span class="token plain">, BuildDate:</span><span class="token string" style="color:#e3116c">"2021-01-21T01:11:42Z"</span><span class="token plain">, GoVersion:</span><span class="token string" style="color:#e3116c">"go1.15.5"</span><span class="token plain">, Compiler:</span><span class="token string" style="color:#e3116c">"gc"</span><span class="token plain">, Platform:</span><span class="token string" style="color:#e3116c">"linux/amd64"</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br>쿠버네티스 클러스터를 확인해 봅시다.🎉<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                 STATUS   ROLES                  AGE   VERSION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind-control-plane   Ready    control-plane,master   23m   v1.20.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get pod -A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE            NAME                                         READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system          coredns-74ff55c5b-jwwg7                      </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          23m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system          coredns-74ff55c5b-v4l25                      </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          23m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system          etcd-kind-control-plane                      </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          23m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system          kindnet-fqkvr                                </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          23m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system          kube-apiserver-kind-control-plane            </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          23m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system          kube-controller-manager-kind-control-plane   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          23m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system          kube-proxy-hq6qz                             </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          23m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system          kube-scheduler-kind-control-plane            </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          23m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">local-path-storage   local-path-provisioner-78776bfc44-pv9gw      </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          23m</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p><em>북마크 하고 보세요!</em><br>
<img loading="lazy" alt="kitty" src="/assets/images/kitty-4182ce8d779635f09c8bdd18a8bb93e5.jpeg" width="1000" height="706" class="img_ev3q"></p><p>자, 이제 당신도 작고 귀여운 kubernetes를 가지고 있습니다!<br>
<!-- -->이제 잘 돌봐줘야겠네요</p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="worker-노드에서-kubectl-사용">worker 노드에서 kubectl 사용<a href="#worker-노드에서-kubectl-사용" class="hash-link" aria-label="Direct link to worker 노드에서 kubectl 사용" title="Direct link to worker 노드에서 kubectl 사용">​</a></h3><p>보안 문제로 권장하진 않으나 admin.config를 복사해 worker에서 kubectl을 사용할 수 있습니다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 앞서 kubeadm init 때 사용한 명령어 입니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># worker 노드에서</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> -p </span><span class="token environment constant" style="color:#36acaa">$HOME</span><span class="token plain">/.kube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># master 노드에 다음 위치 파일을 worker 노드로 복사합니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># scp를 사용한다면 master 노드에서</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">scp</span><span class="token plain"> /etc/kubernetes/admin.conf </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">@</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">ip</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token environment constant" style="color:#36acaa">HOME</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 권한 설정을 해줍니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># worker 노드에서</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chown</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">id</span><span class="token variable" style="color:#36acaa"> -u</span><span class="token variable" style="color:#36acaa">)</span><span class="token builtin class-name">:</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">id</span><span class="token variable" style="color:#36acaa"> -g</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"> </span><span class="token environment constant" style="color:#36acaa">$HOME</span><span class="token plain">/.kube/config</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>(인증서 발급으로 외부에서 API 서버 접속은 다음에 작성)</p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="토큰-재발급">토큰 재발급<a href="#토큰-재발급" class="hash-link" aria-label="Direct link to 토큰 재발급" title="Direct link to 토큰 재발급">​</a></h3><p>kubeadm에서 생성된 토큰은 만료기간이 하루입니다.<br>
<!-- -->따라서 새롭게 노드를 추가할 상황이 온다면 토큰을 재발급 받아야 합니다.  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 토큰을 조회합니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubeadm token list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TOKEN     TTL       EXPIRES   USAGES    DESCRIPTION      EXTRA </span><span class="token environment constant" style="color:#36acaa">GROUPS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 아무 것도 조회되지 않으면 새로 생성합니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubeadm token create</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ca cert hash를 얻기 위해 다음 명령어를 사용합니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ openssl x509 -pubkey -in /etc/kubernetes/pki/ca.crt </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> openssl rsa -pubin -outform der </span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">/dev/null </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> openssl dgst -sha256 -hex </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'s/^.* //'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 이제 TOKEN과 hash 값을 얻었으니 새롭게 노드를 join할 수 있습니다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 새 worker 노드에서</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubeadm </span><span class="token function" style="color:#d73a49">join</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">k8s API server ip</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">PORT </span><span class="token number" style="color:#36acaa">6443</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> --token </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">TOKEN</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> --discovery-token-ca-cert-hash sha256:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">HASH</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h2><p><a href="https://www.reddit.com/r/kubernetes/comments/be0415/k3s_minikube_or_microk8s/" target="_blank" rel="noopener noreferrer">[레딧]K3s, minikube or microk8s?</a><br>
<a href="https://kubernetes.io/ko/docs/setup/production-environment/tools/kubeadm/install-kubeadm/" target="_blank" rel="noopener noreferrer">[공식]kubeadm 설치하기</a><br>
<a href="https://medium.com/finda-tech/overview-8d169b2a54ff" target="_blank" rel="noopener noreferrer">쿠버네티스(kubernetes) 설치 및 환경 구성하기</a><br>
<a href="https://sarc.io/index.php/cloud/1383-join-token" target="_blank" rel="noopener noreferrer">쿠버네티스 노드 조인(Join)시 Token 값 확인</a>    </p>]]></content:encoded>
            <category>tech</category>
            <category>kubernetes</category>
            <category>docker</category>
            <category>linux</category>
        </item>
        <item>
            <title><![CDATA[쿠버네티스 기본 개념과 필요성]]></title>
            <link>https://jwher.github.io/posts/welcome-to-kubernetes</link>
            <guid>https://jwher.github.io/posts/welcome-to-kubernetes</guid>
            <pubDate>Mon, 12 Apr 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Welcome To Kubernetes]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="kubernetes" src="/assets/images/kubernetes-f91022b1deed067a9393dd3c42381ab7.svg" width="723" height="702" class="img_ev3q">
<em>쿠버네티스 세계에 오신 걸 환영합니다!</em></p><p>이 글은 쿠버네티스 창시자인 <strong>브렌던 번스</strong> 의 책 Managing Kubernetes를 참고하여 다시 작성했습니다.  </p><h1>목차</h1><ul><li><a href="#%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4%EB%9E%80?">쿠버네티스란?</a></li><li><a href="#%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4%EC%9D%98-%ED%95%84%EC%9A%94%EC%84%B1">쿠버네티스의 필요성</a></li><li><a href="#%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%EA%B0%9C%EB%85%90">쿠버네티스 개념</a></li></ul><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="쿠버네티스란">쿠버네티스란?<a href="#쿠버네티스란" class="hash-link" aria-label="Direct link to 쿠버네티스란?" title="Direct link to 쿠버네티스란?">​</a></h2><p>쿠버네티스는 컨테이너 애플리케이션을 배포하기 위한 <strong>오케스트레이터</strong>입니다.
도커와 컨테이너를 모르고 쿠버네티스를 먼저 접하셨다면,
<a href="https://jwher.github.io/2021-06-19-welcome-to-docker/" target="_blank" rel="noopener noreferrer">이 글</a> 을 먼저 읽는 것을 추천합니다.</p><p>컨테이너는 많은 이점을 지닙니다. 저는 <u>개발 환경 분리</u>을 가장 큰 이점이라 생각하는데요,
<strong>구글</strong>은 대규모 시스템(<em>ex: youtube</em>)를 운영하며 일주일에 20억개의 컨테이너를 배포한다고 합니다.  </p><p>이런 작업을 사람이 일일히 할 순 없겠죠.
구글은 컨테이너 기반 시스템을 오랜 기간동안 운영하며 쿠버네티스를 개발했으며,
2015년 오픈소스로 공개된 후 현재는 MSA(Micro Service Architecture)의 표준이라 할 정도로 널리 쓰이고 있습니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="쿠버네티스의-필요성">쿠버네티스의 필요성<a href="#쿠버네티스의-필요성" class="hash-link" aria-label="Direct link to 쿠버네티스의 필요성" title="Direct link to 쿠버네티스의 필요성">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="고가용성">고가용성<a href="#고가용성" class="hash-link" aria-label="Direct link to 고가용성" title="Direct link to 고가용성">​</a></h3><p><em>Availabiltity</em><br>
<!-- -->앞서 살펴봤듯이 쿠버네티스는 컨테이너 애플리케이션을 배포하는 오케스트레이션 API를 제공합니다.
하지만 배포만 잘한다고 뛰어난 오케스트레이터가 될 순 없을 것입니다.
쿠버네티스는 소프트웨어의 무중단 업데이트를 쉽게 수행할 수 있게 도와줍니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="확장성">확장성<a href="#확장성" class="hash-link" aria-label="Direct link to 확장성" title="Direct link to 확장성">​</a></h3><p><em>Scalability</em><br>
<!-- -->사용자 접근이 많아져 서버가 처리할 수 있는 양에 한계가 생기면 어떻게 할까요?
쿠버네티스는 빠르게 애플리케이션을 확장하고,
서비스의 여러 레플리카 간에 트래픽을 쉽게 분산할 수 있는 로드 밸런서를 제공합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="재해복구">재해복구<a href="#재해복구" class="hash-link" aria-label="Direct link to 재해복구" title="Direct link to 재해복구">​</a></h3><p><em>Disaster Recovery</em><br>
<!-- -->쿠버네티스는 오류가 있는 애플리케이션을 복구하는 자가 재해 복구 알고리즘을 제공합니다.</p><p>이 외에도 쿠버네티스는 보안, 문제 대응, 시스템 확장을 제공합니다.<br>
<a href="/posts/kubernetes-architecture">다음 글</a>에서 <strong>어떻게</strong> 쿠버네티스가 세가지 문제를 해결하는지 알아봅시다!</p><blockquote><p><img loading="lazy" alt="container" src="/assets/images/container-88a87b7facaec185ae8364fac8a770d5.png" width="2023" height="675" class="img_ev3q">
수많은 컨테이너를 혼자 싣긴 힘들겠죠 ☺️</p></blockquote><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="쿠버네티스-개념">쿠버네티스 개념<a href="#쿠버네티스-개념" class="hash-link" aria-label="Direct link to 쿠버네티스 개념" title="Direct link to 쿠버네티스 개념">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="선언적-구성">선언적 구성<a href="#선언적-구성" class="hash-link" aria-label="Direct link to 선언적 구성" title="Direct link to 선언적 구성">​</a></h3><p><em>declarative configuration</em>  </p><p>선언宣言 이란 무엇일까요?  </p><blockquote><p>吾等은 玆에 我 朝鮮의 獨立國임과 朝鮮人의 自主民임을 宣言하노라
―기미 독립 선언서</p></blockquote><p>일제 강점기, 민족대표 33명은 1919년 3월 1일에 독립을 선언합니다. 이처럼 선언은 '널리 펴서 말하는 것'을 말합니다.</p><p>너무 거창했나요?
쿠버네티스에서 운영자는 <code>이 앱을 그 서버에서 3개를 실행시키고 싶어</code> 라고 선언할 수 있습니다.
이런 선언문은 쿠버네티스가 이해할 수 있게 구조화된 YAML, JSON 파일으로 이루어집니다.  </p><p>이전까지는 운영자가 원하는 상태로 배포를 하기 위해서 여러 명령어를 작성했었습니다.
선언적 구성은 명령어의 숫자를 줄이는 것보다 더 좋은 장점이 있는데요,
운영자가 선언한 이상적인 상태를 이해하기 때문에 현재 상태를 관찰하고 스스로 수정과 복구를 할 수 있다는 것입니다.  </p><p>이런 작업을 수행하는 것은 쿠버네티스 컨트롤러입니다.
컨트롤러는 선언문과 현재 상태를 비교해 상태를 유지시킵니다.
상태를 관찰하는데 어려움은 <em>어떤</em> 그룹을 관찰할지 결정하는 것인데요,
다음 단락을 봅시다.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>TL;DR</summary><div><div class="collapsibleContent_i85q"><div markdown="1"><p>자연어로 실행되는 프로그래밍 언어를 꿈꿔온 저에겐 흥미있는 개념이였는데요,</p><p>학부에서 프로그래밍 언어를 들은 사람은
haskell, Erlang과 같은 함수형, Prolog와 같은 논리형 언어의 패러다임을 선언적 언어라 함을 기억할 것입니다.
좀더 친숙한 C, Java, python이 명령적(imperative) 언어는
내가 원하는 상태로 만드는 <em>과정</em>을 작성하지만, 선언적 언어는 원하는 <em>상태</em>를 작성하게 됩니다.  </p><p>명령형 언어는 목적을 달성하기 위한 방법을 최적화 할 수 있다는 장점이 있을 것입니다.
선언적 언어는 언듯 보면 <em>비효율</em>적일 것 같습니다.
특히 SQL 쿼리 최적화 작업, C보다 밑의 어셈블리 최적화를 진행하시는 분이라면 더더욱 이해하기 힘들 것입니다.  </p><p>그렇다면 선언형 언어의 장점은 무엇일까요?<br>
<!-- -->바로 목적을 이루는데 강건한(robust) 방법을 제공한다는 것입니다.
어려운 말들을 더 늘어놓자면 어떤 환경에서 실행시켜도 똑같은 결과를 주는 멱등성이 성립한다고 할까요?</p><p>컴퓨팅 성능의 향상과 함께 빠르게 개발이 가능한 파이썬과 같은 인터프리터 언어가 유행하게 된 것 처럼
우주선 프로그래밍에 쓰이던 선언형 언어도 유행하게 되는 날을 생각해 봅니다.</p></div></div></div></details><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="암시적동적-그룹화">암시적/동적 그룹화<a href="#암시적동적-그룹화" class="hash-link" aria-label="Direct link to 암시적/동적 그룹화" title="Direct link to 암시적/동적 그룹화">​</a></h3><p>일상속에서 접하기 쉬운 그룹은 <em>목록</em>으로 구성되어 있습니다.</p><blockquote><p>카카오톡 채팅방은 정해진 목록으로 참가자 그룹을 인식합니다.<br>
<!-- -->친구 광호, 민수, 우철이를 채팅방에 초대해서 그룹을 만들었습니다.</p></blockquote><p>새롭게 채팅방을 만들려고 하면 참가자 <em>목록</em>을 작성해 주어야 합니다.
이를 명시적/정적 그룹화라고 합니다.</p><br><p>다른 상황을 생각해 볼까요?<br>
<!-- -->고등학교 체육시간, 갑작스럽게 축구를 하게 되어 반을 두 팀으로 나누게 되었습니다.</p><blockquote><p>출석번호 홀수는 왼쪽, 짝수는 오른쪽 팀이야!</p></blockquote><p>다른 반이 축구팀에 합류해도 어느 그룹에 들어갈지 알 수 있겠네요!<br>
<!-- -->이를 암시적/동적 그룹화라고 합니다.</p><p>쿠버네티스도 라벨(레이블)을 사용하여 그룹을 암시적으로 표현합니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-설계-원칙">kubernetes 설계 원칙<a href="#kubernetes-설계-원칙" class="hash-link" aria-label="Direct link to kubernetes 설계 원칙" title="Direct link to kubernetes 설계 원칙">​</a></h2><p><em>새삼스럽게 쿠버네티스만 그런건 아닙니다...</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unix-철학">Unix 철학<a href="#unix-철학" class="hash-link" aria-label="Direct link to Unix 철학" title="Direct link to Unix 철학">​</a></h3><p>벨 연구소에서 Unix 개발을 주도한 켄 톰프슨이 고안한 것으로,
최소주의적인 모듈 방식의 소프트웨어 개발 방식을 말합니다.</p><p>유닉스 철학은 1978년 더글러스 매클로이가, 1994년 피터 H. 살루스가 다시 한번 정리하는데요,<br>
<!-- -->내용은 다음과 같습니다.</p><ul><li>Write programs that do one thing and do it well.<br>(한가지 기능만, 잘 수행하게)  </li><li>Write programs to work together.<br>(함께 작동할 수 있게)  </li><li>Write programs to handle text streams, because that is a universal interface.<br>(텍스트 스트림을 처리할 수 있게, 대중적인 인터페이스니까)  </li></ul><p>현재 대부분 지향하는 단순하고 짧고 명료하고 모듈 방식의 확장 가능한 코드 또한 유닉스 철학에서 영향을 받았다고 할 수 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="api-기반-상호-작용">Api 기반 상호 작용<a href="#api-기반-상호-작용" class="hash-link" aria-label="Direct link to Api 기반 상호 작용" title="Direct link to Api 기반 상호 작용">​</a></h3><p>API(Application Programming Interface)는 말 그대로 응용 프로그램에서 사용할 수 있도록,
운영 체제나 프로그래밍 언어가 제공하는 기능을 제어할 수 있게 만든 인터페이스를 뜻합니다.  </p><p>쿠버네티스에선 중앙 집중 API를 사용해 수많은 애플리케이션이 서로 상호작용 합니다.
시스템의 어떤 부분도 특권을 갖고 직접 접근할 수 없다는 점은 교체와 추가가 자유로운 장점을 제공합니다.
따라서 쿠버네티스는 소프트웨어가 업그레이드 되며 발생하는 버전 호환 문제를 쉽게 해결할 수 있습니다.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="그래서-어떻게-작동하는데">그래서 어떻게 작동하는데?<a href="#그래서-어떻게-작동하는데" class="hash-link" aria-label="Direct link to 그래서 어떻게 작동하는데?" title="Direct link to 그래서 어떻게 작동하는데?">​</a></h2><p><a href="/posts/kubernetes-architecture">다음 글</a>에서 쿠버네티스 구성요소와 작동방식을 이어서 설명합니다.  </p><p>아래는 2018년 구글 클라우드 해커톤 자료입니다;)<br>
<a href="https://www.youtube.com/watch?v=rdyUAduXi48" target="_blank" rel="noopener noreferrer">2018 Cloud Hackathon Tech Session - Kubernetes</a></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><p>kubernetes를 줄여 k8s라고 합니다. 이유는 긴 단어를 줄일 때 글자의 개수를 적는게 관례였기 때문이라고 하네요:D
<a href="https://kubernetes.io/docs/concepts/overview/what-is-kubernetes/" target="_blank" rel="noopener noreferrer">K8s as an abbreviation results from counting the eight letters between the "K" and the "s".</a>  </p><p><del>직접 한번 세보자...</del></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><p><a href="https://www.redhat.com/ko/topics/containers/what-is-kubernetes" target="_blank" rel="noopener noreferrer">[Redhat]쿠버네티스란?</a><br>
<a href="https://kubernetes.io/ko/docs/concepts/overview/what-is-kubernetes/" target="_blank" rel="noopener noreferrer">[공식]쿠버네티스란 무엇인가?</a><br>
<a href="https://ko.wikipedia.org/wiki/%EC%9C%A0%EB%8B%89%EC%8A%A4_%EC%B2%A0%ED%95%99" target="_blank" rel="noopener noreferrer">[위키]유닉스 철학</a><br>
<a href="https://ko.wikipedia.org/wiki/API" target="_blank" rel="noopener noreferrer">[위키]API</a></p>]]></content:encoded>
            <category>tech</category>
            <category>kubernetes</category>
            <category>docker</category>
        </item>
        <item>
            <title><![CDATA[First Post with Jekyll]]></title>
            <link>https://jwher.github.io/posts/first-post</link>
            <guid>https://jwher.github.io/posts/first-post</guid>
            <pubDate>Sun, 11 Apr 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Jekyll 페이지]]></description>
            <content:encoded><![CDATA[<p>github.io 테스트 입니다!
글을 작성할 만한 좋은 블로그 서비스를 찾고 있습니다.</p><p>2021.05.22 리뉴얼</p><p align="center"><img loading="lazy" src="/assets/img/blog-210522.png" class="img_ev3q"></p><p>2021.07.15 리뉴얼</p><p>You’ll find this post in your <code>_posts</code> directory. Go ahead and edit it and re-build the site to see your changes. You can rebuild the site in many different ways, but the most common way is to run <code>jekyll serve</code>, which launches a web server and auto-regenerates your site when a file is updated.</p><p>To add new posts, simply add a file in the <code>_posts</code> directory that follows the convention <code>YYYY-MM-DD-name-of-post.ext</code> and includes the necessary front matter. Take a look at the source for this post to get an idea about how it works.</p><p>Jekyll also offers powerful support for code snippets:</p><p>​<code>python
def print_hi(name):
  print("hello", name)
print_hi('Tom')
​</code></p><p>Check out the <a href="https://jekyllrb.com/docs/home" target="_blank" rel="noopener noreferrer">Jekyll docs</a> for more info on how to get the most out of Jekyll. File all bugs/feature requests at <a href="https://github.com/jekyll/jekyll" target="_blank" rel="noopener noreferrer">Jekyll’s GitHub repo</a>. If you have questions, you can ask them on <a href="https://talk.jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll Talk</a>.</p>]]></content:encoded>
            <category>blog</category>
            <category>update</category>
        </item>
    </channel>
</rss>
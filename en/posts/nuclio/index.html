<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Nuclio 개념과 아키텍처 | JWHer Tech Blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://jwher.github.io/en/posts/nuclio"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Nuclio 개념과 아키텍처 | JWHer Tech Blog"><meta data-rh="true" name="description" content="Automate the Data Science Pipeline with Serverless Functions"><meta data-rh="true" property="og:description" content="Automate the Data Science Pipeline with Serverless Functions"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2021-06-02T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/jwher"><meta data-rh="true" property="article:tag" content="tech,kubernetes,docker"><link data-rh="true" rel="icon" href="/en/img/logo.svg"><link data-rh="true" rel="canonical" href="https://jwher.github.io/en/posts/nuclio"><link data-rh="true" rel="alternate" href="https://jwher.github.io/en/posts/nuclio" hreflang="en"><link data-rh="true" rel="alternate" href="https://jwher.github.io/posts/nuclio" hreflang="kr"><link data-rh="true" rel="alternate" href="https://jwher.github.io/posts/nuclio" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/en/posts/rss.xml" title="JWHer Tech Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/posts/atom.xml" title="JWHer Tech Blog Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-XHBVCY40VB","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/en/assets/css/styles.e87f1c4a.css">
<link rel="preload" href="/en/assets/js/runtime~main.5a6ea9b6.js" as="script">
<link rel="preload" href="/en/assets/js/main.9c3efe19.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/logo.svg" alt="Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/en/img/logo.svg" alt="Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">JWHer Tech Blog</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/en/posts">Posts</a><a class="navbar__item navbar__link" href="/en/categories">Categories</a><a href="https://github.com/jwher" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link icon-github"></a><a href="https://www.linkedin.com/in/jwher" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link icon-linkedin"></a><a href="https://www.instagram.com/jwher96" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link icon-instagram"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="posts__header_mMDK"><div class="filter_lpre"></div><h2 class="presentation__title">Posts</h2><h6 class="presentation__subtitle">Let thine heart retain my words: Keep my commandments, and live.</h6></div><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/quantization">정확한 추론을 위한 양자화 기법</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/the-case-for-the-reduced-instruction-set-computer">RISC 컴퓨터를 위한 사례</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/docker-networking">도커 네트워킹</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/llama-open-and-efficient-foundation-language-models">LLaMa 공개된 효율적인 언어 모델</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/euclidean-algorithm">유클리드 호제법</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/chatgpt-duality-of-wealth-and-faith">ChatGPT: 부와 신앙의 이중성에 대해</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/cpp-coding-basic2">코딩 기초 트레이닝2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/cpp-coding-basic1">코딩 기초 트레이닝1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/discipleship-training-1">지도자의 부르심</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/the-docker-engine">도커 엔진</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/palm">Pathways를 이용한 언어모델 스케일링</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/cudabook-1">대규모 병렬프로세서 프로그래밍(소개)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/attention-is-all-you-need">Attention 다시보기</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/concurrency-models-4">7가지 동시성 모델(스레드와 락) 거인의 어깨 위에서</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/concurrency-models-3">7가지 동시성 모델(스레드와 락) 고유 락 개선하기</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/concurrency-models-2">7가지 동시성 모델(스레드와 락) 상호 배제와 메모리 모델</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/concurrency-models-1">7가지 동시성 모델(소개)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/requirement-levels">요구사항에 사용하는 RFC 키워드</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/hidden-technical-debt">머신러닝에 숨은 기술 부채</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/api-design-for-long-jobs">오래걸리는 API 설계</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/deep-learning-on-a-data-diet">학습에 중요한 데이터 찾기</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/ngrx">NGRX 반응형 웹을 위한 상태 관리</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/power-series">다양한 급수</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/build-opencv-with-java">Build OpenCV with Java</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/binomial-theorem">이항정리 - π값을 구하는 법</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/nvidia-gpu-architectures">Nvidia GPU 아키텍처</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/pytorch-in-m1">Pytorch in M1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/agile">Agile</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/first-post-with-docusaurus">First post with docusaurus</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/ensemble-methods">Ensemble Methods</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/uncertainty-estimation">Uncertainty Estimation</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/Intelligent-Computer-Vision-1">Intelligent Computer Vision 1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/kubernetes-architecture">쿠버네티스 아키텍처</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/kubeflow-guide">Kubeflow Guide</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/sagemaker">Sagemaker</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/blog-tech-map">Blog Tech Map</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/cncf">Cncf</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/envoy">Envoy</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/istio">Istio</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/dex">Dex</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/k8s-tip-configmap">K8S Tip Configmap</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/golang-setup">Golang Setup</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/docker-shared-volume">Docker Shared Volume</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/variable-autoencoder">Variable Autoencoder</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/k8s-tip-pv-terminating">K8S Tip Pv Terminating</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/free-wildcard-dns">Free Wildcard Dns</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/install-harbor">Install Harbor</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/install-helm">Install Helm</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/github-issue">Github Issue</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/k8s-tip-rollback">K8S Tip Rollback</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/k8s-tip-expose-service">K8S Tip Expose Service</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/uuid">Uuid</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/deploying-ml-model-on-kubernetes-nuclio">Deploying Ml Model On Kubernetes Nuclio</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/kubeflow-visualization-2">Kubeflow Visualization 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/linux-disk-free">Linux Disk Free</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/welcome-to-docker">Welcome To Docker</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/welcome-to-kubeflow">Welcome To Kubeflow</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/minio">Minio</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/k8s-tip-nodeselector">K8S Tip Nodeselector</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/information-theory">Information Theory</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/kubeflow-visualization-1">Kubeflow Visualization 1</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/en/posts/nuclio">Nuclio 개념과 아키텍처</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/kubernetes-usage">자주쓰는 쿠버네티스 명령어</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/blog-essay">나에게 필요한 연재에 대해</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/alphapose">Alphapose 논문 리뷰와 사용</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/update-blog">지킬 블로그 업데이트</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/install-tar.gz">타르(tar) 파일 설치하기</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/install-kubeflow">쿠브플로우를 설치하는 다양한 방법</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/virtualbox-with-no-gui">GUI 없이 버추얼박스 사용하기</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/install-docker">나에게 필요한 도커 설치하기</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/install-kubernetes">나에게 필요한 쿠버네티스 설치하기</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/welcome-to-kubernetes">쿠버네티스 기본 개념과 필요성</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/posts/first-post">First Post with Jekyll</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_xvU1" itemprop="headline">Nuclio 개념과 아키텍처</h1><div class="container_iJTo margin-vert--md"><time datetime="2021-06-02T00:00:00.000Z" itemprop="datePublished">June 2, 2021</time> · <!-- -->10 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_q4o9"><div class="avatar margin-bottom--sm"><a href="https://github.com/jwher" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/jwher.png" alt="Jeongwon Her"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/jwher" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jeongwon Her</span></a></div><small class="avatar__subtitle" itemprop="description">MLOps Engineer</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p><img loading="lazy" alt="nuclio" src="/en/assets/images/nuclio-376212de6c9ee3da1e859db93128e595.png" width="640" height="467" class="img_ev3q"><br>
<em>Automate the Data Science Pipeline with Serverless Functions</em>  </p><p>disclaimer: 필자도 배우는 중입니다. 정확히 이해가 가지 않은 개념은 <em>기울게?</em> 표시했습니다. 많은 의견 부탁드립니다! <del>죄송합니다!</del></p><h1>목차</h1><ul><li><a href="#nuclio%EC%9D%98-%ED%95%84%EC%9A%94%EC%84%B1">nuclio의 필요성</a></li><li><a href="#nuclio-architecture">nuclio architecture</a></li></ul><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="nuclio의-필요성">nuclio의 필요성<a href="#nuclio의-필요성" class="hash-link" aria-label="Direct link to nuclio의 필요성" title="Direct link to nuclio의 필요성">​</a></h2><p><em>server역할을 하는데 serverless라고??</em></p><p>딥러닝 모델 알고리즘(function)이 외부와 통신하려면 어떤 방법을 사용해야 할까요?
당연히 서버와 인터페이스(ex REST API) 프로그램을 추가로 개발해야 합니다.😭</p><blockquote><p><img loading="lazy" alt="homer-brain" src="/en/assets/images/homer-brain-1c9d50d11567f55c55dd3b1c027d5d91.gif" width="300" height="280" class="img_ev3q"><br>
<!-- -->나는 딥러닝밖에 모르는데...</p></blockquote><p>이런 딥러닝 모델 개발자, 데이터 과학자를 위해 <strong>서버 없이</strong> 인터페이스를 만들어 주려는 시도는 많았습니다.
nuclio 또한 고가용성 <strong>serverless</strong> 프레임워크로서 특히 data, I/O, 연산 집중적(compute intensive) 작업에 초점을 두고 있습니다.
nuclio는 딥러닝 모델의 <strong>serverless function</strong>의 서빙과 인터페이스를 제공합니다.</p><p>nuclio는 서버를 운영하는데 필요한 load balancing과 scaling을 아주 잘(10-100 times faster) 지원합니다.
하지만 다른 serverless 프로젝트는 아래 요구사항을 잘 해결하지 못했습니다.</p><ul><li>최소한의 CPU/GPU와 I/O 오버헤드, 병렬화의 최대로 Real-time 처리</li><li>다양한 data source, trigger, processing models, ML framework와 저수준 통합(Native integration)</li><li>data-path 가속을 통한 상태 함수(stateful function) <em>(stateless REST와 반대 개념?)</em></li><li>저수준 장치, 랩탑, edge <em>(edge computing?)</em>, op-premise, public cloud와 이식성</li><li><strong>오픈소스</strong> 근데 이제 기업용을 곁들인(로깅, 모니터링, 보안, 사용성)  </li></ul><p>nuclio는 이 요구사항을 모두 충족합니다.😄  </p><br><blockquote><p>When this happens, do that</p></blockquote><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사례와-일반적인-실수">사례와 일반적인 실수<a href="#사례와-일반적인-실수" class="hash-link" aria-label="Direct link to 사례와 일반적인 실수" title="Direct link to 사례와 일반적인 실수">​</a></h3><p>nuclio function이 배포되면 worker 마다 런타임(python interpreter, JVM, goroutine...)이 생성되고 실행 컨텍스트에 따라 서빙됩니다.
앞서 살펴봤듯이 nuclio 런타임에는 다중 스레딩 컨셉이 적용되어 있습니다.</p><ul><li>필요없는 lock을 방지하기 위해 worker(threads <em>?</em>)간 데이터 공유를 하지 않습니다</li><li>Thread-local storage(TLS)를 사용해 <strong>전역변수</strong>를 사용하지 않고 상태(state)를 관리합니다</li></ul><p>그렇다면 function lifetime 동안 데이터베이스와 연결을 유지하는 상황을 생각해봅시다.
요청마다 데이터베이스 연결을 생성하는 것은 비효율적입니다.
따라서 다음과 같이 데이터베이스 연결을 <strong>전역변수</strong>로 만드는 방법을 생각해 볼 수 있습니다.  </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">my_db_connection </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> my_db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create_connection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">handler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> event</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    my_db_connection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>하지만 이 방법은 두가지 큰 문제가 있습니다.  </p><ol><li>전역변수는 worker 사이에서 공유될 수 있습니다(Go에서는 언제나 공유됩니다).
이는 데이터베이스에 접근할 때 Race condition을 발생시킬 수 있습니다.  </li><li>데이터베이스 연결에 실패하면 function이 왜 import 되지 않았는지 이해하기 어렵습니다
(scratching your head trying to understand).</li></ol><p>nuclio에서 올바른 해결책은 <code>init_context</code> 사용입니다. 💡  </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">handler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> event</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">user_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">my_db_connection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">init_context</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Create the DB connection under &quot;context.user_data&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">setattr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">user_data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;my_db_connection&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> my_db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create_connection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="nuclio-architecture">nuclio architecture<a href="#nuclio-architecture" class="hash-link" aria-label="Direct link to nuclio architecture" title="Direct link to nuclio architecture">​</a></h2><p><img loading="lazy" alt="function processor" src="/en/assets/images/function-processor-3a2193379a90fef4ddfc1fb0b8756ff0.png" width="1427" height="673" class="img_ev3q"></p><p>nuclio 구조는 function의 성능 최대화, 추상화, 플랫폼간 이식성을 목표하고 있습니다.  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="event-source-listeners">Event-source listeners<a href="#event-source-listeners" class="hash-link" aria-label="Direct link to Event-source listeners" title="Direct link to Event-source listeners">​</a></h3><p>function은 이벤트 기반으로 실행되고, function runtime engine으로 푸쉬합니다.
event-source listener는 소켓, 메시지 큐, 외부 이벤트 가져오기(polling)를 할 수 있습니다.
event listner는 정확히 한번 또는 최소한 한번 실행을 보장하고 오류를 처리합니다.  </p><p><img loading="lazy" alt="event src" src="/en/assets/images/event-src-ccd1846aa4a406e16b3b28407e92c46f.png" width="1428" height="682" class="img_ev3q">  </p><p>event source는 동작이나 흐름 관리로 분류할 수 있습니다(divided into classes). nuclio는 다음 event를 지원합니다.</p><ol><li>Synchronous Request/Response: HTTP요청이나 Remote Procedure Calls 같이 client가 즉시 응답을 원함</li><li>Asynchronous Message-Queue Request: RabbitMQ, MQTT, emails, scheduled event 같이 메시지가 subscriber에게 분배되고 교횐됨</li><li>Message or Record Streams: Kafka, AWS Kinesis, lguazio V3IO 같이 정렫된 메시지나 기록의 순차적 업데이트</li><li>Record or Data Polling(ETL): 주기적이거나 트리거된 외부에서 필터된 기록, 데이터 오브젝트</li></ol><p><a href="#%EA%B6%81%EA%B8%88%EC%A0%90">궁금점-graceful shutdown</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="runtime-engine">Runtime engine<a href="#runtime-engine" class="hash-link" aria-label="Direct link to Runtime engine" title="Direct link to Runtime engine">​</a></h3><p>runtime engine은 function 환경(변수, 컨텍스트, 로그, 데이터 바인딩 ...)을 초기화하고 worker에 이벤트를 공급(feed), 결과 반환을 합니다.
runtime은 non-blocking 연산과 CPU 최적화를 위해 독립적인 병렬(parallel) worker로 이루어집니다(goroutine, python asyncio, akka <em>?</em>, thread)</p><p>nuclio는 현재 세가지 processor runtime 구현이 있습니다.</p><ol><li>Native: real-time, inline Go 또는 C 루틴</li><li>SHMEM: 공유메모리를 이용하는 Python, Java, Node.js언어
processor는 SHMEM function 런타임을 이용해 zero-copy 공유 메모리 채널로 통신합니다.  </li><li>Shell: CLI 실행환경이나 바이너리(excutables). stdout과 stderr를 맵핑해서 function 결과를 만듭니다.</li></ol><p><a href="#%EA%B6%81%EA%B8%88%EC%A0%90">궁금점-worker</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-bindings">Data bindings<a href="#data-bindings" class="hash-link" aria-label="Direct link to Data bindings" title="Direct link to Data bindings">​</a></h3><p><em>가장 멋진 부분이라 생각합니다</em></p><p>function은 외부 파일, 오브젝트, database, messaging system과 지속적인 연결로 이점(benefit)을 얻습니다.
Data binding은 SDK나 연결, 자격 관리의 통합을 없에 개발을 단순화 합니다.
또한, 같은 종류(class)의 다른 데이터 서비스를 맵핑해 재사용성과 이식성을 가능하게 합니다.</p><p>data binding은 prefetching, 캐싱, micro-batching을 처리해 대기시간을 줄이고 I/O 성능을 향상시킵니다.
data binding은 특별한 function 코드 없이 zero-copy, zero-serialization, and non-blocking operation, real-time 처리를 위해 설계되었습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="control-framework">Control Framework<a href="#control-framework" class="hash-link" aria-label="Direct link to Control Framework" title="Direct link to Control Framework">​</a></h3><p>control framework는 초기화, 다른 프로세서 컴포넌트 컨트롤, 프로세서와 function의 logging 제공, 실행 통계 모니터링,
작은 원격 관리 포털 서빙을 합니다.
control framework는 추상화 인터페이스를 제공해 IoT 장치, 컨테이너, 오케스트레이터, cloud간에 이식성을 제공합니다(allowing).<br>
<img loading="lazy" alt="build deploy" src="/en/assets/images/build-deploy-b291a184317f71b882f3db62ab22007f.png" width="1669" height="462" class="img_ev3q"></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="궁금점">궁금점<a href="#궁금점" class="hash-link" aria-label="Direct link to 궁금점" title="Direct link to 궁금점">​</a></h2><ul><li>graceful shutdown<br>종료시, 이벤트 큐 처리, worker에 있는 작업 처리가 되는지?
⇒ 모델 교체나 버전 업그레이드로 종료하면, 기존 작업 요청에 어떻게 반응할까요?
단순 연결 종료, 요청받은 이벤트까지만 처리, 리디렉션 등 다양한 정책이 있을텐데 누클리오는 어떨까요
</li><li>worker<br>worker로 docker container 또는 kubernetes pod를 사용하는 것으로 보이는데(공부가 부족해서일지도)
이것을 scale out(즉, 컨테이너 증가)로 병렬화를 하는 것인지, 아니면 컨테이너 OS 프로세스를 증가시키는건지,
OS thread를 사용하는지, PL이 제공하는 경량 thread(goroutine, erlang)를 증가시키는 것인지?
⇒ Runtime engine에서 힌트를 얻을 수 있습니다만, 언어에 따라 scale up 방식이 다른 걸까요?</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h2><p><a href="https://theburningmonk.com/2019/04/comparing-nuclio-and-aws-lambda/" target="_blank" rel="noopener noreferrer">Comparing Nuclio and AWS Lambda</a><br>
<a href="https://nuclio.io/docs/latest/" target="_blank" rel="noopener noreferrer">Nuclio Documentation</a></p></div><a href="https://www.buymeacoffee.com/jwher"><img style="margin:20px 0" src="https://img.buymeacoffee.com/button-api/?text=Buy me a coffee&amp;emoji=&amp;slug=jwher&amp;button_colour=40DCA5&amp;font_colour=ffffff&amp;font_family=Cookie&amp;outline_colour=000000&amp;coffee_colour=FFDD00"></a><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_Wr5y"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/posts/tags/tech">tech</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/posts/tags/kubernetes">kubernetes</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/posts/tags/docker">docker</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/jwher/jwher.github.io/tree/main/posts/2021-06-02-nuclio/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer><div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/posts/kubeflow-visualization-1"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Kubeflow Visualization 1</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/posts/kubernetes-usage"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">자주쓰는 쿠버네티스 명령어</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#nuclio의-필요성" class="table-of-contents__link toc-highlight">nuclio의 필요성</a><ul><li><a href="#사례와-일반적인-실수" class="table-of-contents__link toc-highlight">사례와 일반적인 실수</a></li></ul></li><li><a href="#nuclio-architecture" class="table-of-contents__link toc-highlight">nuclio architecture</a><ul><li><a href="#event-source-listeners" class="table-of-contents__link toc-highlight">Event-source listeners</a></li><li><a href="#runtime-engine" class="table-of-contents__link toc-highlight">Runtime engine</a></li><li><a href="#data-bindings" class="table-of-contents__link toc-highlight">Data bindings</a></li><li><a href="#control-framework" class="table-of-contents__link toc-highlight">Control Framework</a></li></ul></li><li><a href="#궁금점" class="table-of-contents__link toc-highlight">궁금점</a></li><li><a href="#reference" class="table-of-contents__link toc-highlight">Reference</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">
        <div class="copyright">
          Copyright © 2025, made by JWHer.<span class="heart-icon"></span>
        </div>
        </div></div></div></footer></div>
<script src="/en/assets/js/runtime~main.5a6ea9b6.js"></script>
<script src="/en/assets/js/main.9c3efe19.js"></script>
</body>
</html>
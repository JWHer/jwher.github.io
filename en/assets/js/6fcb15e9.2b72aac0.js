"use strict";(self.webpackChunkjwher_blog=self.webpackChunkjwher_blog||[]).push([[617],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return k}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var p=a.createContext({}),c=function(e){var n=a.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},u=function(e){var n=c(e.components);return a.createElement(p.Provider,{value:n},e.children)},s={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=c(t),k=r,m=d["".concat(p,".").concat(k)]||d[k]||s[k]||i;return t?a.createElement(m,o(o({ref:n},u),{},{components:t})):a.createElement(m,o({ref:n},u))}));function k(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=d;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var c=2;c<i;c++)o[c]=t[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},9616:function(e,n,t){t.r(n),t.d(n,{assets:function(){return u},contentTitle:function(){return p},default:function(){return k},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return s}});var a=t(7462),r=t(3366),i=(t(7294),t(3905)),o=["components"],l={authors:["jwher"],description:"Seven Concurrency Models in Seven Weeks - Chapter2 Day2",slug:"concurrency-models-3",tags:["tech","distributed computing","java"],title:"7\uac00\uc9c0 \ub3d9\uc2dc\uc131 \ubaa8\ub378(\uc2a4\ub808\ub4dc\uc640 \ub77d) \uace0\uc720 \ub77d \uac1c\uc120\ud558\uae30"},p=void 0,c={permalink:"/en/posts/concurrency-models-3",editUrl:"https://github.com/jwher/jwher.github.io/posts/2022-12-19-concurrency-models-3/index.md",source:"@site/posts/2022-12-19-concurrency-models-3/index.md",title:"7\uac00\uc9c0 \ub3d9\uc2dc\uc131 \ubaa8\ub378(\uc2a4\ub808\ub4dc\uc640 \ub77d) \uace0\uc720 \ub77d \uac1c\uc120\ud558\uae30",description:"Seven Concurrency Models in Seven Weeks - Chapter2 Day2",date:"2022-12-19T00:00:00.000Z",formattedDate:"December 19, 2022",tags:[{label:"tech",permalink:"/en/posts/tags/tech"},{label:"distributed computing",permalink:"/en/posts/tags/distributed-computing"},{label:"java",permalink:"/en/posts/tags/java"}],readingTime:19.765,truncated:!0,authors:[{name:"Jeongwon Her",title:"MLOps Engineer",url:"https://github.com/jwher",imageURL:"https://github.com/jwher.png",key:"jwher"}],frontMatter:{authors:["jwher"],description:"Seven Concurrency Models in Seven Weeks - Chapter2 Day2",slug:"concurrency-models-3",tags:["tech","distributed computing","java"],title:"7\uac00\uc9c0 \ub3d9\uc2dc\uc131 \ubaa8\ub378(\uc2a4\ub808\ub4dc\uc640 \ub77d) \uace0\uc720 \ub77d \uac1c\uc120\ud558\uae30"},prevItem:{title:"7\uac00\uc9c0 \ub3d9\uc2dc\uc131 \ubaa8\ub378(\uc2a4\ub808\ub4dc\uc640 \ub77d) \uac70\uc778\uc758 \uc5b4\uae68 \uc704\uc5d0\uc11c",permalink:"/en/posts/concurrency-models-4"},nextItem:{title:"7\uac00\uc9c0 \ub3d9\uc2dc\uc131 \ubaa8\ub378(\uc2a4\ub808\ub4dc\uc640 \ub77d) \uc0c1\ud638 \ubc30\uc81c\uc640 \uba54\ubaa8\ub9ac \ubaa8\ub378",permalink:"/en/posts/concurrency-models-2"}},u={authorsImageUrls:[void 0]},s=[{value:"Day 2: Beyond Intrinsic Locks",id:"day-2-beyond-intrinsic-locks",level:2},{value:"Interruptible Locking",id:"interruptible-locking",level:3},{value:"Timeouts",id:"timeouts",level:3},{value:"Hand-over-Hand Locking",id:"hand-over-hand-locking",level:3},{value:"Condition Variables",id:"condition-variables",level:3},{value:"Atomic Variables",id:"atomic-variables",level:3},{value:"Day 2 Wrap-Up",id:"day-2-wrap-up",level:2},{value:"What We Learned in Day 2",id:"what-we-learned-in-day-2",level:3},{value:"Day 2 Self-Study",id:"day-2-self-study",level:3}],d={toc:s};function k(e){var n=e.components,l=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},d,l,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"/posts/concurrency-models-3"},(0,i.kt)("img",{alt:"concurrency",src:t(4941).Z,width:"300",height:"400"})),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("em",{parentName:"p"},"\uc774 \uae00\uc740 Paul Butcher\uc758 Seven Concurrency Models in Seven Weeks\uc744 \uc77d\uace0 \uc791\uc131\ud588\uc2b5\ub2c8\ub2e4"),"  "),(0,i.kt)("p",null,"Declaring a method as synchronized is just syntactic sugar for surrounding the method\u2019s body"),(0,i.kt)("h2",{id:"day-2-beyond-intrinsic-locks"},"Day 2: Beyond Intrinsic Locks"),(0,i.kt)("p",null,"\uc790\ubc14 5\ub294 ",(0,i.kt)("inlineCode",{parentName:"p"},"java.util.concurrent"),"\ub97c \ub3c4\uc785\ud558\uba70 \ubaa8\ub4e0\uac83\uc774 \ubc14\ub00c\uc5c8\uc2b5\ub2c8\ub2e4.\n\uc774\ubc88\uc5d0\ub294 \ud5a5\uc0c1\ub41c \ub77d \uba54\ucee4\ub2c8\uc998\uc774 \uc81c\uacf5\ud558\ub294 \uac83\uc744 \uc0b4\ud3b4 \ubcf4\uaca0\uc2b5\ub2c8\ub2e4."),(0,i.kt)("p",null,"\uace0\uc720 \ub77d\uc740 \ud3b8\ub9ac\ud558\uc9c0\ub9cc \uc81c\ud55c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\uace0\uc720 \ub77d\uc744 \uc5bb\uae30 \uc704\ud574 \ube14\ub77d\ub41c \uc2a4\ub808\ub4dc\ub97c \uc778\ud130\ub7fd\ud2b8\ud560 \uc218 \uc788\ub294 \ubc29\ubc95\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"),(0,i.kt)("li",{parentName:"ul"},"\uace0\uc720 \ub77d\uc744 \uc694\uad6c\ud558\ub294 \ub3d9\uc548 \uc2dc\uac04\uc81c\ud55c\uc744 \ud560 \uc218 \uc788\ub294 \ubc29\ubc95\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."),(0,i.kt)("li",{parentName:"ul"},"\uace0\uc720 \ub77d\uc744 \uc694\uad6c\ud558\ub294 \ubc29\ubc95\uc740 ",(0,i.kt)("inlineCode",{parentName:"li"},"synchronized")," \ud55c \ubc29\ubc95 \ubfd0\uc785\ub2c8\ub2e4. \uc774 \ub73b\uc740 \ub77d \uc810\uc720\uc640 \ud574\uc81c\uac00 \uac19\uc740 \uba54\uc18c\ub4dc\uc5d0\uc11c \uc218\ud589\ub418\uc5b4\uc57c \ud558\uace0 \uc5c4\uaca9\ud558\uac8c \uc911\ucca9\ub418\uc57c \ud569\ub2c8\ub2e4.")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"ReentrantLock"),"\uc740 \uba85\ud655\ud55c \ub77d\uacfc \uc5b8\ub77d \uba54\uc18c\ub4dc\ub97c ",(0,i.kt)("inlineCode",{parentName:"p"},"synchronized")," \ub300\uc2e0 \uc81c\uacf5\ud558\uba74\uc11c \uc774\ub7f0 \uc81c\ud55c\uc744 \ub118\uc744 \uc218 \uc788\uac8c \ud574\uc90d\ub2c8\ub2e4.\n\uc5b4\ub5bb\uac8c \uace0\uc720 \ub77d\uc744 \uac1c\uc120\ud560\uc9c0 \ubcf4\uae30 \uc804\uc5d0, \uc5b4\ub5bb\uac8c ",(0,i.kt)("inlineCode",{parentName:"p"},"ReentrantLock"),"\uc774 ",(0,i.kt)("inlineCode",{parentName:"p"},"synchronized"),"\ub97c \ub300\uccb4\ud558\ub294\uc9c0 \uc0b4\ud3b4\ubd05\uc2dc\ub2e4."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"Lock lock = new ReentrantLock();\nlock.lock();\ntry {\n    \xabuse shared resources\xbb\n} finally {\n    lock.unlock();\n}\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"try ... finally")," \uad6c\ubb38\uc740 \uc5b8\uc81c\ub098 \ub77d\uc774 \ud574\uc81c\ub418\ub3c4\ub85d \ubcf4\uc7a5\ud558\ub294 \uc88b\uc740 \uc608\uc81c\uc785\ub2c8\ub2e4."),(0,i.kt)("h3",{id:"interruptible-locking"},"Interruptible Locking"),(0,i.kt)("p",null,"\uace0\uc720 \ub77d\uc774 \uc778\ud130\ub7fd\ud2b8\uac00 \ubd88\uac00\ub2a5 \ud558\ubbc0\ub85c, \ub370\ub4dc\ub77d\uc744 \ubcf5\uad6c\ud560 \ubc29\ubc95\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.\n\ub370\ub4dc\ub77d\uc744 \uc720\ubc1c\ud558\uace0 \uc2a4\ub808\ub4dc\ub97c \ud1b5\ud574 \uc778\ud130\ub7fd\ud2b8\ud558\ub294 \uc608\uc81c \ucf54\ub4dc\ub97c \uc0b4\ud3b4\ubd05\uc2dc\ub2e4."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'public class Uninterruptible {\n\n  public static void main(String[] args) throws InterruptedException {\n\n    final Object o1 = new Object(); final Object o2 = new Object();\n\n    Thread t1 = new Thread() {\n      public void run() {\n        try {\n          synchronized(o1) {\n            Thread.sleep(1000);\n            synchronized(o2) {}\n          }\n        } catch (InterruptedException e) { System.out.println("t1 interrupted"); }\n      }\n    };\n\n    Thread t2 = new Thread() {\n      public void run() {\n        try {\n          synchronized(o2) {\n            Thread.sleep(1000);\n            synchronized(o1) {}\n          }\n        } catch (InterruptedException e) { System.out.println("t2 interrupted"); }\n      }\n    };\n\n    t1.start(); t2.start();\n    Thread.sleep(2000);\n    t1.interrupt(); t2.interrupt();\n    t1.join(); t2.join();\n  }\n}\n')),(0,i.kt)("p",null,"\uc774 \ud504\ub85c\uadf8\ub7a8\uc740 JVM\uc774 \uc8fd\uc774\uc9c0 \uc54a\ub294 \ud55c \ub370\ub4dc\ub77d\uc0c1\ud0dc\uac00 \ub05d\ub098\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."),(0,i.kt)("p",null,"\ud558\uc9c0\ub9cc ",(0,i.kt)("inlineCode",{parentName:"p"},"ReentrantLock"),"\uc744 \uc0ac\uc6a9\ud574 \uc7ac\uad6c\ud604\ud558\uba74, ",(0,i.kt)("inlineCode",{parentName:"p"},"lockInterruptibly()")," \uba54\uc11c\ub4dc\ub97c \ud1b5\ud574 \ud574\uacb0\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java",metastring:"{7,9}","{7,9}":!0},'final ReentrantLock l1 = new ReentrantLock();\nfinal ReentrantLock l2 = new ReentrantLock();\n\nThread t1 = new Thread() {\n    public void run() {\n        try {\n>           l1.lockInterruptibly();\n            Thread.sleep(1000);\n>           l2.lockInterruptibly();\n        } catch (InterruptedException e) { System.out.println("t1 interrupted"); }\n    }\n};\n')),(0,i.kt)("p",null,"\uc774 \ubc84\uc804\uc740 ",(0,i.kt)("inlineCode",{parentName:"p"},"Thread.interrupt()"),"\uac00 \ud638\ucd9c\ub418\uba74 \uae68\ub057\uc774 \uc885\ub8cc\ub429\ub2c8\ub2e4.\n\uc880\ub354 \uc9c0\uc800\ubd84\ud574 \ubcf4\uc774\ub294 \uad6c\ubb38\uc740, \ub370\ub4dc\ub77d \uc2a4\ub808\ub4dc\uc5d0 \uc778\ud130\ub7fd\ud2b8 \uac00\ub2a5\ud558\uac8c \ud558\ub294 \uc791\uc740 \ube44\uc6a9\uc785\ub2c8\ub2e4."),(0,i.kt)("h3",{id:"timeouts"},"Timeouts"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"ReentrantLock"),"\uc740 \ub77d\uc744 \uc694\uad6c\ud560\ub54c \uc2dc\uac04\uc81c\ud55c\uc744 \ud5c8\uc6a9\ud568\uc73c\ub85c\uc368 \uace0\uc720 \ub77d\uc758 \uc81c\ud55c\uc744 \ud574\uacb0\ud569\ub2c8\ub2e4.\n",(0,i.kt)("a",{parentName:"p",href:"/posts/concurrency-models-2"},"day1")," \uc5d0\uc11c \uc0b4\ud3b4\ubcf8 \u201cdining philosophers\u201d\ub97c \ubd05\uc2dc\ub2e4."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java",metastring:"{16,21} showLineNumbers","{16,21}":!0,showLineNumbers:!0},"class Philosopher extends Thread {\n    private ReentrantLock leftChopstick, rightChopstick;\n    private Random random;\n\n    public Philosopher(ReentrantLock leftChopstick, ReentrantLock rightChopstick) {\n        this.leftChopstick = leftChopstick;\n        this.rightChopstick = rightChopstick;\n        random = new Random();\n    }\n\n    public void run() {\n        try {\n            while(true) {\n                Thread.sleep(random.nextInt(1000)); // Think for a while leftChopstick.lock();\n                try {\n>                       if (rightChopstick.tryLock(1000, TimeUnit.MILLISECONDS)) { // Got the right chopstick\n                            try {\n                                Thread.sleep(random.nextInt(1000)); // Eat for a while\n                            } finally { rightChopstick.unlock(); }\n                        } else {\n>                       // Didn't get the right chopstick - give up and go back to thinking\n                        }\n                    } finally { leftChopstick.unlock(); }\n                }\n        } catch(InterruptedException e) {}\n    }\n}\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"lock()"),"\uc744 \uc0ac\uc6a9\ud558\ub294 \ub300\uc2e0, \ub77d\uc744 \uc5bb\ub294\ub370 \uc2dc\uac04\uc81c\ud55c\uc744 \ub450\uace0 \uc2e4\ud328\ud558\ub294 ",(0,i.kt)("inlineCode",{parentName:"p"},"tryLock()"),"\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.\n\uc774 \ubc84\uc804\uc740 \uace0\uc815\ub41c \uc804\uc5ed \uc21c\uc11c\ub300\ub85c \uc5ec\ub7ec \ub77d \uc694\uccad\uc744 \ud574\uc57c\ud558\ub294 \uaddc\uce59\uc744 \uc9c0\ud0a4\uc9c0 \uc54a\uace0 \ub370\ub4dc\ub77d\uc5d0 \uac78\ub9ac\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.\n(\ucd5c\uc18c\ud55c \uc601\uc6d0\ud788 \ub370\ub4dc\ub77d\uc0c1\ud0dc\uc774\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4)"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Livelock"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"tryLock()"),"\uc740 \uc601\uc6d0\ud788 \ub370\ub4dc\ub77d\uc5d0 \ube60\uc9c0\ub294\uac78 \ub9c9\uc544\uc8fc\uc9c0\ub9cc, \uc88b\uc740 \ud574\uacb0\ucc45\uc744 \ub73b\ud558\ub294 \uac83\uc740 \uc544\ub2d9\ub2c8\ub2e4.\n\uccab\uc9f8\ub85c \ub370\ub4dc\ub77d\uc774 \ubc1c\uc0dd\ud588\uc744 \ub54c \ubcf5\uad6c\ud558\ub294 \ubc29\ubc95\uc744 \uc81c\uacf5\ud558\uc9c0 \ub370\ub4dc\ub77d\uc744 \ud53c\ud558\ub294 \ubc29\ubc95\uc774 \uc544\ub2d9\ub2c8\ub2e4.\n\ub458\uc9f8\ub85c ",(0,i.kt)("em",{parentName:"p"},"livelock"),"\uc774\ub77c \ubd88\ub9ac\ub294 \ud604\uc0c1\uc5d0 \ucde8\uc57d\ud569\ub2c8\ub2e4. \ubaa8\ub4e0 \uc2a4\ub808\ub4dc\uac00 \ub3d9\uc2dc\uc5d0 \uc2dc\uac04\uc81c\ud55c\uc744 \ucd08\uacfc\ud588\uc744 \ub54c \uc989\uc2dc \ub370\ub4dc\ub77d\uc5d0 \uac78\ub9b4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n\ub370\ub4dc\ub77d\uc774 \uc601\uc6d0\ud788 \uc9c0\uc18d\ub418\uc9c0 \uc54a\uc9c0\ub9cc, \uc9c4\ud589\ub3c4 \uc77c\uc5b4\ub098\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."),(0,i.kt)("p",null,"\uc774 \ud604\uc0c1\uc740 \uac01 \uc2a4\ub808\ub4dc\ub97c \ub2e4\ub978 \uc2dc\uac04\uc81c\ud55c \uac12\uc744 \uc124\uc815\ud558\uba70 \uc2dc\uac04\uc81c\ud55c\uc744 \ub3d9\uc2dc\uc5d0 \ubc1c\uc0dd\ud560 \uae30\ud68c\ub97c \uc904\uc774\ub294 \ubc29\ubc95 \ub4f1\uc73c\ub85c \uc644\ud654\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n\uadf8\ub7ec\ub098 \uc2dc\uac04\uc81c\ud55c\uc740 \uc88b\uc740 \ud574\uacb0\ucc45\uc778 \uacbd\uc6b0\ub294 \uc801\uc2b5\ub2c8\ub2e4. \ub370\ub4dc\ub77d\uc744 \ud53c\ud558\ub294 \ubc29\ubc95\uc774 \uccab\ubc88\uc9f8\ub85c \uace0\ubbfc\ub418\uc5b4\uc57c \ud560 \uac83\uc785\ub2c8\ub2e4.")),(0,i.kt)("h3",{id:"hand-over-hand-locking"},"Hand-over-Hand Locking"),(0,i.kt)("p",null,"\uc5f0\uacb0 \ub9ac\uc2a4\ud2b8\uc5d0 \ud55c \uc5d4\ud2b8\ub9ac\ub97c \ucd94\uac00\ud558\uae38 \uc6d0\ud558\ub294 \uc0c1\ud669\uc744 \uac00\uc815\ud574 \ubd05\uc2dc\ub2e4.\n\ud55c \ubc29\ubc95\uc740 \uc804\uccb4 \ub9ac\uc2a4\ud2b8\ub97c \ubcf4\ud638\ud558\ub294 \ud558\ub098\uc758 \ub77d\uc744 \uac00\uc9c0\ub294 \uc811\uadfc \ubc29\ubc95\uc774 \uc788\uc2b5\ub2c8\ub2e4.\n\uc774 \ubc29\ubc95\uc740 \ub77d\uc774 \uac78\ub838\uc744\ub54c \uc544\ubb34\ub3c4 \ub9ac\uc2a4\ud2b8\uc5d0 \uc811\uac74\ud560 \uc218 \uc5c6\uc74c\uc744 \uc758\ubbf8\ud569\ub2c8\ub2e4.\n",(0,i.kt)("em",{parentName:"p"},"Hand-over-hand")," \ub77d\uc740 \ub9ac\uc2a4\ud2b8\uc758 \uc791\uc740 \ubd80\ubd84\ub9cc \ub77d\uc744 \ud558\ub294 \ub300\uc548\uc73c\ub85c,\n\ub2e4\ub978 \uc2a4\ub808\ub4dc\uac00 \ub77d\uc774 \uac78\ub9b0 \ud2b9\uc815 \ub178\ub4dc\ub97c \uc81c\uc678\ud558\uace0 \uc790\uc720\ub86d\uac8c \uc811\uadfc\ud560 \uc218 \uc788\ub3c4\ub85d \ud558\ub294 \ubc29\ubc95\uc785\ub2c8\ub2e4."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Hand-over-hand locking",src:t(782).Z,width:"1598",height:"1486"}),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("em",{parentName:"p"},"Hand-over-hand locking"),"  "),(0,i.kt)("p",null,"\ub178\ub4dc\ub97c \uc0bd\uc785\ud558\ub824\ub294 \uc704\uce58\uc758 \uc591 \uc606\uc744 \ub77d\ud574\uc57c \ud569\ub2c8\ub2e4.\n1\ubc88\uacfc 2\ubc88 \ub178\ub4dc\ub97c \ub77d\ud558\uba70 \uc2dc\uc791\ud569\ub2c8\ub2e4.\n\uc0c8 \ub178\ub4dc\ub97c \uc0bd\uc785\ud558\uae30 \uc704\ud574 \ub77d\uc744 \ud574\uc57c\ud558\ub294 \ub9de\ub294 \uc9c0\uc810\uc774 \uc544\ub2c8\uae30 \ub54c\ubb38\uc5d0 1\ubc88 \ub178\ub4dc\uc758 \ub77d\uc744 \ud574\uc81c\ud558\uace0 3\ubc88 \ub178\ub4dc\ub97c \ub77d\ud569\ub2c8\ub2e4.\n\uc5ec\uc804\ud788 \ub9de\ub294 \uc9c0\uc810\uc774 \uc544\ub2c8\uae30 \ub54c\ubb38\uc5d0 2\ubc88 \ub178\ub4dc\uc758 \ub77d\uc744 \ud574\uc81c\ud558\uace0 4\ubc88 \ub178\ub4dc\ub97c \ub77d\ud569\ub2c8\ub2e4.\n\uc774 \uacfc\uc815\uc744 \uc801\uc808\ud55c \uc704\uce58\ub97c \ucc3e\uc744\ub54c\uae4c\uc9c0 \ubc18\ubcf5\ud558\uace0, \uc0c8 \ub178\ub4dc\ub97c \ub123\uc2b5\ub2c8\ub2e4.\n\ub9c8\uc9c0\ub9c9\uc73c\ub85c \uc0bd\uc785\ud55c \uc704\uce58\uc758 \ub178\ub4dc \uc591 \uc606\uc758 \ub77d\uc744 \ud574\uc81c\ud569\ub2c8\ub2e4."),(0,i.kt)("p",null,"\uc774 \ub77d\uacfc \uc5b8\ub77d\uc740 \uace0\uc720 \ub77d\uc73c\ub85c \ubd88\uac00\ub2a5\ud569\ub2c8\ub2e4. \ud558\uc9c0\ub9cc ",(0,i.kt)("inlineCode",{parentName:"p"},"ReentrantLock"),"\uc740 \uc6b0\ub9ac\uac00 ",(0,i.kt)("inlineCode",{parentName:"p"},"lock()"),"\uacfc ",(0,i.kt)("inlineCode",{parentName:"p"},"unlock()"),"\uc744 \uc6d0\ud558\ub294 \uc2dc\uc810\uc5d0 \ud638\ucd9c\ud560 \uc218 \uc788\uc5b4 \uac00\ub2a5\ud569\ub2c8\ub2e4. \uc5ec\uae30 \uc774 \ubc29\ubc95\uc73c\ub85c \uc815\ub82c \ub9c1\ud06c\ub4dc \ub9ac\uc2a4\ud2b8\ub97c \uad6c\ud604\ud55c \ud074\ub798\uc2a4\uc785\ub2c8\ub2e4."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java",metastring:"showLineNumbers",showLineNumbers:!0},"class ConcurrentSortedList {\n\n  private class Node {\n    int value;\n    Node prev;\n    Node next;\n    ReentrantLock lock = new ReentrantLock();\n\n    Node() {}\n\n    Node(int value, Node prev, Node next) {\n      this.value = value; this.prev = prev; this.next = next;\n    }\n  }\n\n  private final Node head;\n  private final Node tail;\n\n  public ConcurrentSortedList() {\n    head = new Node(); tail = new Node();\n    head.next = tail; tail.prev = head;\n  }\n\n  public void insert(int value) {\n    Node current = head;\n    current.lock.lock(); \n    Node next = current.next;\n    try {\n      while (true) {\n        next.lock.lock(); \n        try {\n          if (next == tail || next.value < value) { \n            Node node = new Node(value, current, next); \n            next.prev = node;\n            current.next = node;\n            return; \n          }\n        } finally { current.lock.unlock(); } \n        current = next;\n        next = current.next;\n      }\n    } finally { next.lock.unlock(); } \n  }\n}\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"insert()")," \uba54\uc11c\ub4dc\ub294 \uc0c8\ub85c \uc0bd\uc785\ub418\ub294 \ud56d\ubaa9\ubcf4\ub2e4 \uc791\uc740 \uc5d4\ud2b8\ub9ac\uac00 \ub098\uc62c\ub54c\uae4c\uc9c0 \ucc3e\uc73c\uba70 \ub9ac\uc2a4\ud2b8\uac00 \uc5b8\uc81c\ub098 \uc815\ub82c\ub41c \uc0c1\ud0dc\ub97c \ubcf4\uc7a5\ud569\ub2c8\ub2e4.\n\uc774\ub97c \ucc3e\uc73c\uba74 \uc0c8 \ub178\ub4dc\ub97c \uc9c1\uc804\uc5d0 \uc0bd\uc785\ud574 \ud574\uacb0\ud569\ub2c8\ub2e4."),(0,i.kt)("p",null,"\uc0bd\uc785 \ubfd0\ub9cc \uc544\ub2c8\ub77c \ub9ac\uc2a4\ud2b8\uc5d0 \uc548\uc804\ud558\uac8c \uc790\ub9ac\uc7a1\uc744 \uc218 \uc788\uac8c \ub2e4\ub978 \uc5f0\uc0b0\ub3c4 \uc9c0\uc6d0\ud569\ub2c8\ub2e4.\n\uc5ec\uae30 \ub9ac\uc2a4\ud2b8\uc5d0 \uc5bc\ub9c8\ub098 \ub9ce\uc740 \uac1c\uccb4\uac00 \uc788\ub294\uc9c0 \uc138\ub294 \uba54\uc11c\ub4dc\uac00 \uc788\uc2b5\ub2c8\ub2e4."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"public int size() {\n    Node current = tail;\n    int count = 0;\n\n    while (current.prev != head) {\n        ReentrantLock lock = current.lock;\n        lock.lock();\n        try {\n            ++count;\n            current = current.prev;\n        } finally { lock.unlock(); }\n    }\n    return count;\n}\n")),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Global Ordering \uaddc\ucc29\uc744 \uae68\uc9c0 \uc54a\ub098\uc694?"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"ConcurrentSortedList"),"\uc758 ",(0,i.kt)("inlineCode",{parentName:"p"},"insert()"),"\ub294 \ub9ac\uc2a4\ud2b8\uc758 head\ubd80\ud130 tail\ub85c \ucc3e\uc2b5\ub2c8\ub2e4.\n",(0,i.kt)("inlineCode",{parentName:"p"},"size()"),'\ub294 \ub9ac\uc2a4\ud2b8\uc758 tail\ubd80\ud130 head\ub85c \uc6c0\uc9c1\uc785\ub2c8\ub2e4.\n\uc774\uac8c "\ud56d\uc0c1 \uc804\uc5ed\uc73c\ub85c \uace0\uc815\ub41c \uc21c\uc11c\ub300\ub85c \uc5ec\ub7ec \ub77d\uc744 \uc5bb\ub294" \uaddc\uce59\uc744 \uc704\ubc30\ud558\uc9c0 \uc54a\ub098\uc694?'),(0,i.kt)("p",null,"\uadf8\ub807\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. ",(0,i.kt)("inlineCode",{parentName:"p"},"size()")," \uba54\uc11c\ub4dc\ub294 \uc808\ub300 ",(0,i.kt)("em",{parentName:"p"},"\uc5ec\ub7ec")," \ub77d\uc744 \uc7a1\uace0\uc788\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.\n\ud55c\ubc88\uc5d0 \ud558\ub098\uc758 \ub77d \uc774\uc0c1\uc73c\ub85c \uac16\uc9c0 \uc54a\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4.")),(0,i.kt)("h3",{id:"condition-variables"},"Condition Variables"),(0,i.kt)("p",null,"\ub3d9\uc2dc\uc131 \ud504\ub85c\uadf8\ub798\ubc0d\uc740 \uc885\uc885 \uc5b4\ub5a4 \uc77c\uc774 \uc77c\uc5b4\ub098\uae38 \uae30\ub2e4\ub9ac\ub294\uac83\uc5d0 \uc5f0\uad00\ub429\ub2c8\ub2e4.\n\uc544\ub9c8 \ud050\uc5d0\uc11c \uac1c\uccb4\ub97c \uc81c\uac70\ud558\uae30 \uc804\uc5d0 \ube44\uc9c0 \uc54a\uc740 \uc0c1\ud0dc\uc778\uc9c0 \uae30\ub2e4\ub824\uc57c \ud560 \uac83\uc785\ub2c8\ub2e4.\n\ub610\ub294 \ubc84\ud37c\uc5d0 \uac1c\uccb4\ub97c \ucd94\uac00\ud560 \ub54c \uac00\ub2a5\ud55c \uacf5\uac04\uc774 \uc788\ub294\uc9c0 \uae30\ub2e4\ub824\uc57c \ud569\ub2c8\ub2e4.\n\uc774\ub7f0 \uc0c1\ud669\uc744 \ud574\uacb0\ud558\uae30 \uc704\ud574 \ucee8\ub514\uc158 \ubcc0\uc218\uac00 \ub514\uc790\uc778\ub418\uc5b4\uc57c \ud569\ub2c8\ub2e4."),(0,i.kt)("p",null,"\ucee8\ub514\uc120 \ubcc0\uc218\ub97c \ud6a8\uacfc\uc801\uc73c\ub85c \uc0ac\uc6a9\ud558\uae30 \uc704\ud574, \ud2b9\ubcc4\ud55c \ud328\ud134\uc744 \ub530\ub77c\uc57c \ud569\ub2c8\ub2e4."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"ReentrantLock lock = new ReentrantLock();\nCondition condition = lock.newCondition();\n\nlock.lock();\ntry {\n    while (!\xabcondition is true\xbb)\n        condition.await();\n    \xabuse shared resources\xbb\n} finally { lock.unlock(); }\n")),(0,i.kt)("p",null,"\ucee8\ub514\uc158 \ubcc0\uc218\ub294 \ub77d\uacfc \uad00\ub828\uc788\uc2b5\ub2c8\ub2e4. \uadf8\ub9ac\uace0 \uc2a4\ub808\ub4dc\ub294 \uc870\uac74\uc774 \uac00\ub2a5\ud560 \ub54c\uae4c\uc9c0 \ub77d\uc744 \uc950\uace0 \uc788\uc5b4\uc57c \ud569\ub2c8\ub2e4.\n\ub77d\uc744 \uc950\uace0 \uc788\ub294 \ub3d9\uc548 \uc870\uac74\uc774 \ucc38\uc778\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4.\n\uc870\uac74\uc774 \ucc38\uc774 \ub418\uba74 \ud558\ub824\uace0 \ud558\ub294 \uc77c\uc744 \ud558\uace0 \ub77d\uc744 \ud574\uc81c\ud569\ub2c8\ub2e4."),(0,i.kt)("p",null,"\ub9cc\uc57d \uc870\uac74\uc774 \ucc38\uc774 \uc544\ub2c8\ub77c\uba74 ",(0,i.kt)("inlineCode",{parentName:"p"},"await()"),"\ub97c \ud638\ucd9c\ud574 ",(0,i.kt)("em",{parentName:"p"},"\uc790\ub3d9\uc73c\ub85c")," \ub77d\uc744 \ud574\uc81c\ud558\uace0 \ucee8\ub514\uc158 \ubcc0\uc218\ub97c \ube14\ub85d\ud569\ub2c8\ub2e4.\n\ub2e4\ub978 \uc2a4\ub808\ub4dc\uc758 \uad00\uc810\uc5d0\uc11c, \uc5f0\uc0b0\uc774 \uc77c\uc5b4\ub0ac\ub294\uc9c0 \uc544\ub2cc\uc9c0 \ub458\uc911 \ud558\ub098\uc778 \ud558\ub098\uc758 \uc5f0\uc0b0\uc73c\ub85c \ubcf4\uc774\uace0, \uc808\ubc18\ub9cc \ub41c \uc0c1\ud0dc\uac00 \uc5c6\uae30 \ub54c\ubb38\uc5d0, \uc5f0\uc0b0\uc774 ",(0,i.kt)("em",{parentName:"p"},"atomic")," \ud558\ub2e4\uace0 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,i.kt)("p",null,"\ub2e4\ub978 \uc2a4\ub808\ub4dc\uac00 ",(0,i.kt)("inlineCode",{parentName:"p"},"signal()")," \ub610\ub294 ",(0,i.kt)("inlineCode",{parentName:"p"},"signalAll()"),"\uc744 \ud638\ucd9c\ud574 \uc870\uac74\uc774 \ucc38\uc774 \ub428\uc744 \uc54c\ub9ac\uba74,\n",(0,i.kt)("inlineCode",{parentName:"p"},"await()"),"\ub294 \ube14\ub85d\uc744 \ud574\uc81c\ud558\uace0 \uc790\ub3d9\uc73c\ub85c \ub77d\uc744 \ub2e4\uc2dc \uc694\uad6c\ud569\ub2c8\ub2e4.\n\uc911\uc694\ud55c \uc810\uc740 ",(0,i.kt)("inlineCode",{parentName:"p"},"await()"),"\uc774 \ub9ac\ud134\ud558\ub294 \uc2dc\uc810\uc785\ub2c8\ub2e4. \uc774\ub294 \ub2e8\uc9c0 \uc870\uac74\uc774 \ucc38 ",(0,i.kt)("em",{parentName:"p"},"\uc77c\uc218\ub3c4")," \uc788\ub2e4\ub294\uac78 \ub098\ud0c0\ub0b4\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4.\n\uc774\uac8c ",(0,i.kt)("inlineCode",{parentName:"p"},"await()"),"\uc774 \ub8e8\ud504 \uc548\uc5d0\uc11c \ubd88\ub9ac\ub294 \uc774\uc720\uc785\ub2c8\ub2e4. \ub2e4\uc2dc \ub3cc\uc544\uac00 \uc870\uac74\uc774 \ucc38\uc778\uc9c0 \ud655\uc778\ud558\uace0 ",(0,i.kt)("inlineCode",{parentName:"p"},"await()"),"\uc744 \ud544\uc694\ud558\uba74 \ub2e4\uc2dc \ud638\ucd9c\ud574\uc57c \ud569\ub2c8\ub2e4."),(0,i.kt)("p",null,'\uc774\ub294 "\uc2dd\uc0ac\ud558\ub294 \ucca0\ud559\uc790" \ubb38\uc81c\uc5d0 \ub2e4\ub978 \ud574\uacb0\ucc45\uc744 \uc81c\uc2dc\ud569\ub2c8\ub2e4.'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"class Philosopher extends Thread {\n    private boolean eating;\n    private Philosopher left;\n    private Philosopher right;\n    private ReentrantLock table;\n    private Condition condition;\n    private Random random;\n\n    public Philosopher(ReentrantLock table) {\n        eating = false;\n        this.table = table;\n        condition = table.newCondition();\n        random = new Random();\n    }\n\n    public void setLeft(Philosopher left) { this.left = left; }\n    public void setRight(Philosopher right) { this.right = right; }\n\n    public void run() {\n        try {\n            while (true) {\n                think();\n                eat();\n            }\n        } catch (InterruptedException e) {}\n    }\n\n    private void think() throws InterruptedException {\n        table.lock();\n        try {\n            eating = false;\n            left.condition.signal();\n            right.condition.signal();\n        } finally { table.unlock(); }\n        Thread.sleep(1000);\n    }\n\n    private void eat() throws InterruptedException {\n        table.lock();\n        try {\n            while (left.eating || right.eating)\n                condition.await();\n            eating = true;\n        } finally { table.unlock(); }\n        Thread.sleep(1000);\n    }\n}\n")),(0,i.kt)("p",null,"\uc774 \ud574\uacb0\ucc45\uc740 ",(0,i.kt)("inlineCode",{parentName:"p"},"chopstick"),"\uc774 \uc544\ub2cc ",(0,i.kt)("inlineCode",{parentName:"p"},"table")," \ud558\ub098\uc758 \ub77d\uc744 \uc0ac\uc6a9\ud558\uc5ec \ub2e4\ub985\ub2c8\ub2e4.\n\ucca0\ud559\uc790\uac00 \uc591 \uc606\uc758 \uc2dd\uc0ac\ud558\ub294 \uc774\uc6c3\uacfc \ub3d9\uc2dc\uc5d0 \uc2dd\uc0ac\ud560 \uc218 \uc5c6\ub2e4\ub294 \uc0ac\uc2e4\uc744 \uc774\uc6a9\ud569\ub2c8\ub2e4.\n\ub2e4\ub978\ub9d0\ub85c, \ubc30\uace0\ud508 \ucca0\ud559\uc790\ub294 \uc774 \uc870\uac74\uc744 \uae30\ub2e4\ub9bd\ub2c8\ub2e4."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"!(left.eating || right.eating)\n")),(0,i.kt)("p",null,"\ucca0\ud559\uc790\uac00 \ubc30\uace0\ud504\uba74 \uba3c\uc800 \uc2dd\ud0c1\uc5d0 \ub77d\uc744 \uac78\uc5b4 \ub2e4\ub978 \ucca0\ud559\uc790\uac00 \uc0c1\ud0dc \ubcc0\ud654\ub97c \ud560 \uc218 \uc5c6\uac8c \ud569\ub2c8\ub2e4.\n\uadf8\ub9ac\uace0 \uc774\uc6c3\uc774 \uba39\uace0\uc788\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4. \uadf8\ub807\uc9c0 \uc54a\ub2e4\uba74 \uba39\uae30 \uc2dc\uc791\ud558\uace0 \uc2dd\ud0c1\uc758 \ub77d\uc744 \ud574\uc81c\ud569\ub2c8\ub2e4.\n\uba39\ub294\uc911\uc774\uc600\ub2e4\uba74 (\uc2dd\ud0c1\uc758 \ub77d\uc744 \ud574\uc81c\ud558\ub294) ",(0,i.kt)("inlineCode",{parentName:"p"},"await()"),"\uc744 \ud638\ucd9c\ud569\ub2c8\ub2e4."),(0,i.kt)("p",null,"\ucca0\ud559\uc790\uac00 \uc2dd\uc0ac\ub97c \ub05d\ub0b4\uace0 \uc0dd\uac01\uc744 \ud558\uae38 \uc6d0\ud55c\ub2e4\uba74, \uba3c\uc800 \uc2dd\ud0c1\uc5d0 \ub77d\uc744 \uac78\uace0 \uc2dd\uc0ac\uc911\uc774\uc9c0 \uc54a\uc74c\uc744 \uc124\uc815\ud569\ub2c8\ub2e4.\n\uadf8\ub9ac\uace0 \uc774\uc6c3\uc5d0\uac8c \uc2e0\ud638\ub97c \ubcf4\ub0b4 \uc2dd\uc0ac\uac00 \uac00\ub2a5\ud568\uc744 \uc54c\ub9ac\uace0 \uc2dd\ud0c1\uc758 \ub77d\uc744 \ud574\uc81c\ud569\ub2c8\ub2e4.\n\ub9cc\uc57d \uc774\uc6c3\uc774 \ud604\uc7ac \ub300\uae30\uc911\uc774\uc600\uc73c\uba74, \uae68\uc5b4\ub098 \uc2dd\ud0c1\uc758 \ub77d\uc744 \uc694\uad6c\ud558\uace0, \uadf8\ub4e4\uc774 \uba39\uc744 \uc218 \uc788\ub294 \uc0c1\ud0dc\uc778\uc9c0 \uc0b4\ud3b4\ubcfc \uac83\uc785\ub2c8\ub2e4."),(0,i.kt)("p",null,"\ube44\ub85d \uc0b4\ud3b4\ubcf8 \ud574\uacb0\ucc45\uc911 \ucf54\ub4dc\uac00 \ub354 \ubcf5\uc7a1\ud558\uc9c0\ub9cc, \ub354 \ub098\uc740 \ub3d9\uc2dc\uc131\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4.\n\uc774\uc804 \ud574\uacb0\ucc45\uc740 \ub2e4\ub978 \ucca0\ud559\uc790\ub4e4\uc774 \ud558\ub098\uc758 \uc813\uac00\ub77d\uc744 \uac00\uc9c0\uace0 \ub2e4\ub978\uc0ac\ub78c\uc744 \uae30\ub2e4\ub9ac\ub290\ub77c \ud55c\uba85\ub9cc \uc2dd\uc0ac\ub97c \ud558\ub294 \uacbd\uc6b0\uac00 \uc885\uc885 \uc788\uc5c8\uc2b5\ub2c8\ub2e4.\n\uc774 \ud574\uacb0\ucc45\uc73c\ub85c\ub294 \uc774\ub860\uc801\uc73c\ub85c \uba39\uc744 \uc218 \uc788\ub294 \uc0c1\ud0dc\ub77c\uba74(\uc774\uc6c3\uc774 \uba39\uace0\uc788\uc9c0 \uc54a\uc744 \ub54c) \uba39\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,i.kt)("h3",{id:"atomic-variables"},"Atomic Variables"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"/posts/concurrency-models-2#our-first-lock"},"day 1"),"\uc5d0\uc11c ",(0,i.kt)("inlineCode",{parentName:"p"},"increment()")," \uba54\uc11c\ub4dc\uc5d0 \ub3d9\uae30\ud654\ub97c \uc0ac\uc6a9\ud574 \uba40\ud2f0\uc2a4\ub808\ub4dc \uce74\uc6b4\ud130\ub97c \uace0\uc815\uc2dc\ucf30\uc2b5\ub2c8\ub2e4.\n\uc774\uc81c ",(0,i.kt)("inlineCode",{parentName:"p"},"java.util.concurrent.atomic"),"\uc774 \ub354 \uc88b\uc740 \uc635\uc158\uc744 \uc8fc\ub294 \uac83\uc744 \ubcf4\uc5ec\uc90d\ub2c8\ub2e4."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"public class Counting {\n    public static void main(String[] args) throws InterruptedException {\n        final AtomicInteger counter = new AtomicInteger();\n        \n        class CountingThread extends Thread {\n            public void run() {\n                for(int x = 0; x < 10000; ++x)\n                    counter.incrementAndGet();\n            }\n        }\n\n        CountingThread t1 = new CountingThread();\n        CountingThread t2 = new CountingThread();\n\n        t1.start(); t2.start();\n        t1.join(); t2.join();\n\n        System.out.println(counter.get());\n    }\n}\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"AtomicInteger"),"\uc758 ",(0,i.kt)("inlineCode",{parentName:"p"},"incrementAndGet()")," \uba54\uc11c\ub4dc\ub294 \uae30\ub2a5\uc801\uc73c\ub85c ",(0,i.kt)("inlineCode",{parentName:"p"},"++count"),"\uc640 \uac19\uc2b5\ub2c8\ub2e4.\n(",(0,i.kt)("inlineCode",{parentName:"p"},"count++"),"\uc640 \uac19\uc740 ",(0,i.kt)("inlineCode",{parentName:"p"},"getAndIncrement()")," \ub610\ud55c \uc81c\uacf5\ud569\ub2c8\ub2e4)\n",(0,i.kt)("inlineCode",{parentName:"p"},"++count"),"\uc640 \ub2e4\ub974\uac8c \uc774\ub294 \uc6d0\uc790\uc131\uc744 \uac00\uc9d1\ub2c8\ub2e4."),(0,i.kt)("p",null,"\ub77d \ub300\uc2e0\uc5d0 atomic \ubcc0\uc218\ub97c \uc0ac\uc6a9\ud558\ub294\uac74 \ub9ce\uc740 \uc774\uc810\uc774 \uc788\uc2b5\ub2c8\ub2e4.\n\uccab\uc9f8\ub85c \ub77d\uc744 \ud544\uc694\ud560\ub54c \uc694\uad6c\ud558\ub294 \uac83\uc744 \uc78a\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.\n\uc608\ub97c\ub4e4\uc5b4, ",(0,i.kt)("inlineCode",{parentName:"p"},"getCount()"),"\uac00 \ub3d9\uae30\ud654\ub418\uc9c0 \uc54a\uc544 \ubc1c\uc0dd\ud55c ",(0,i.kt)("inlineCode",{parentName:"p"},"Counter"),"\uc758 memory-visible \ubb38\uc81c\uac00 \uc774 \ucf54\ub4dc\uc5d0\uc11c \ubc1c\uc0dd\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.\n\ub458\uc9f8\ub85c \uc5b4\ub5a4 \ub77d\ub3c4 \uad00\ub828\ub418\uc5b4\uc788\uc9c0 \uc54a\uae30 \ub54c\ubb38\uc5d0 atomic \ubcc0\uc218\ub97c \ub370\ub4dc\ub77d\uc5d0 \uac78\ub9ac\uac8c \ud558\ub294 \uc5f0\uc0b0\uc740 \ubd88\uac00\ub2a5\ud569\ub2c8\ub2e4.\n\ub9c8\uc9c0\ub9c9\uc73c\ub85c, atomic \ubcc0\uc218\ub294 \ub77d\uc774\ub098 \ube14\ub85d \uc5c6\uc774 \ub2ec\uc131\ud558\ub294 ",(0,i.kt)("em",{parentName:"p"},"non-blocking"),", ",(0,i.kt)("em",{parentName:"p"},"lock-free")," \uc54c\uace0\ub9ac\uc998\uc758 \uae30\ucd08\uc785\ub2c8\ub2e4.\n\ub77d\uc774 \ub4e4\uc5b4\uac04 \ud504\ub85c\uadf8\ub7a8\uc774 \ub2e4\ub8e8\uae30 \uc5b4\ub835\ub2e4\uace0 \uc0dd\uac01\ud558\uba74, lock-free \ucf54\ub4dc\ub97c \uc9e4 \uc218 \uc788\uc744\ub54c\uae4c\uc9c0 \uae30\ub2e4\ub9ac\uc138\uc694.\n\ub2e4\ud589\uc774 ",(0,i.kt)("inlineCode",{parentName:"p"},"java.util.concurrent"),"\ub294 lock-free \ucf54\ub4dc\uac00 \uac00\ub2a5\ud558\uace0 \ub9cc\ub4e4\uc5b4 \uace0\ud1b5 \uc5c6\uc774 \uc774\uc810\uc744 \uc5bb\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n\uc774 \ud074\ub798\uc2a4\ub294 ",(0,i.kt)("a",{parentName:"p",href:"/posts/concurrency-models-4"},"day3"),"\uc5d0\uc11c \ub2e4\ub8f9\ub2c8\ub2e4."),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Volatile\uc740 \uc5b4\ub5a4\uac00\uc694?"),(0,i.kt)("p",null,"\uc790\ubc14\ub294 \ubcc0\uc218\ub97c ",(0,i.kt)("em",{parentName:"p"},"volatile"),"\ub85c \ud45c\uc2dc\ud574 \uc77d\uace0 \uc4f0\ub294 \uc21c\uc11c\uac00 \ubc14\ub00c\uc9c0 \uc54a\uac8c \ubcf4\uc7a5\ud569\ub2c8\ub2e4.\n",(0,i.kt)("a",{parentName:"p",href:"/posts/concurrency-models-2/#-mysterious-memory"},(0,i.kt)("inlineCode",{parentName:"a"},"Puzzle")),"\uc758 ",(0,i.kt)("inlineCode",{parentName:"p"},"answerReady"),"\ub97c volatile\ub85c \ub9cc\ub4e4\uc5b4 \ud574\uacb0\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,i.kt)("p",null,"Volatile\uc740 \ub3d9\uae30\ud654\uc5d0 \ub9e4\uc6b0 \uc57d\ud569\ub2c8\ub2e4.\n\uc608\ub97c\ub4e4\uc5b4 ",(0,i.kt)("inlineCode",{parentName:"p"},"count"),"\ub97c volatile\ub85c \ub9cc\ub4e4\uc5b4\ub3c4 ",(0,i.kt)("inlineCode",{parentName:"p"},"count++"),"\uac00 atomic\ud558\uac8c \ub3d9\uc791\ud558\ub294\uac83\uc744 \ubcf4\uc7a5\ud558\uc9c0 \uc54a\uae30 \ub54c\ubb38\uc5d0,\n",(0,i.kt)("inlineCode",{parentName:"p"},"Counter"),"\ub97c \ud574\uacb0\ud558\ub294\ub370 \ub3c4\uc6c0\uc744 \uc8fc\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."),(0,i.kt)("p",null,"\ucd5c\uadfc\uc5d0 \uace0\ub3c4\ub85c \ucd5c\uc801\ud654\ub41c JVM\uc740 \ub77d\uc5d0 \ub9e4\uc6b0 \uc801\uc740 \uc624\ubc84\ud5e4\ub4dc\ub97c \uc9c0\ub2c8\uace0 volatile \ubcc0\uc218\ub97c \uc0ac\uc6a9\ud558\ub294\uac8c \ub9de\ub294 \uacbd\uc6b0\ub294 \uc801\uc2b5\ub2c8\ub2e4.\n",(0,i.kt)("inlineCode",{parentName:"p"},"volatile")," \uc0ac\uc6a9\uc744 \uace0\ub824\ud558\uace0 \uc788\ub2e4\uba74 ",(0,i.kt)("inlineCode",{parentName:"p"},"java.util.concurrent.atomic")," \ud074\ub798\uc2a4\ub97c \uc0ac\uc6a9\ud558\ub294\uac78 \uba3c\uc800 \uace0\ub824\ud574\ubcf4\uc138\uc694.")),(0,i.kt)("h2",{id:"day-2-wrap-up"},"Day 2 Wrap-Up"),(0,i.kt)("p",null,"day1\uc5d0\uc11c \uae30\ubcf8\uc801\uc73c\ub85c \ubc30\uc6b4 \uac83\uc5d0 ",(0,i.kt)("inlineCode",{parentName:"p"},"java.util.concurrent.locks"),"\uc640 ",(0,i.kt)("inlineCode",{parentName:"p"},"java.util.concurrent.atomic"),"\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \ub354 \uc138\ub828\ub418\uace0 \uc720\uc5f0\ud55c \ubc29\ubc95\uc744 \ubc30\uc6e0\uc2b5\ub2c8\ub2e4.\n\uc774 \ubc29\ubc95\uc744 \uc774\ud574\ud558\ub294\uac8c \uc911\uc694\ud558\uc9c0\ub9cc, lock\uc744 \uc9c1\uc811 \uc0ac\uc6a9\ud574\uc57c \ud558\ub294 \uc608\uc81c\ub97c day3\uc5d0\uc11c \uc0b4\ud3b4\ubcfc \uac83\uc785\ub2c8\ub2e4."),(0,i.kt)("h3",{id:"what-we-learned-in-day-2"},"What We Learned in Day 2"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"ReentrantLock"),"\uacfc ",(0,i.kt)("inlineCode",{parentName:"p"},"java.util.concurrent.atomic"),"\uc774 \ub2e4\uc74c\uc5d0 \ub098\uc624\ub294 \uac83\uc744 \ud560 \uc218 \uc788\uc5b4 \uace0\uc720 \ub77d\uc758 \uc81c\ud55c\uc744 \uadf9\ubcf5\ud558\ub294 \uac83\uc744 \ud655\uc778\ud588\uc2b5\ub2c8\ub2e4.  "),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\ub77d\uc744 \uc694\uad6c\ud558\ub294 \uc911\uc5d0 interrupt"),(0,i.kt)("li",{parentName:"ul"},"\ub77d\uc744 \uc694\uad6c\ud558\ub294\ub370 \uc2dc\uac04\uc81c\ud55c"),(0,i.kt)("li",{parentName:"ul"},"\uc5b4\ub5a4 \uc21c\uc11c\ub85c\ub4e0 \ub77d \uc694\uad6c \ubc0f \ud574\uc81c"),(0,i.kt)("li",{parentName:"ul"},"\uc911\uc7ac\ub97c \uc704\ud55c \uc870\uac74\uc774 \ucc38\uc774 \ub420\ub54c\uae4c\uc9c0 \uae30\ub2e4\ub9ac\ub294 \ucee8\ub514\uc158 \ubcc0\uc218"),(0,i.kt)("li",{parentName:"ul"},"atomic \ubcc0\uc218\ub97c \uc0ac\uc6a9\ud574 \ub77d \uc0ac\uc6a9\uc744 \uc644\uc804\ud788 \ud68c\ud53c")),(0,i.kt)("h3",{id:"day-2-self-study"},"Day 2 Self-Study"),(0,i.kt)("p",null,"\ucc3e\uc544\ubcf4\uae30  "),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"ReentrantLock supports a fairness parameter. What does it mean for a lock to be \u201cfair\u201d? Why might you choose to use a fair lock? Why might you not?"),(0,i.kt)("li",{parentName:"ul"},"What is ReentrantReadWriteLock? How does it differ from ReentrantLock? When might you use it?"),(0,i.kt)("li",{parentName:"ul"},"What is a \u201cspurious wakeup\u201d? When can one happen and why doesn\u2019t a well-written program care if one does?"),(0,i.kt)("li",{parentName:"ul"},"What is AtomicIntegerFieldUpdater? How does it differ from AtomicInteger? When might you use it?")),(0,i.kt)("p",null,"\uc2e4\uc2b5  "),(0,i.kt)("p",null,"What would happen if the loop within the \u201cdining philosophers\u201d implementation that uses condition variables was replaced with a simple if statement? What failure modes might you see? What would happen if the call to signal() was replaced by signalAll()? What problems (if any) would this cause?"),(0,i.kt)("p",null,"Just as intrinsic locks are more limited than ReentrantLock, they also support a more limited type of condition variable. Rewrite the dining philosophers to use an intrinsic lock plus the wait() and notify() or notifyAll() methods. Why is it less efficient than using ReentrantLock?"),(0,i.kt)("p",null,"Write a version of ConcurrentSortedList that uses a single lock instead of hand-over-hand locking. Benchmark it against the other version. Does hand-over-hand locking provide any performance advantage? When might it be a good choice? When might it not?"))}k.isMDXComponent=!0},782:function(e,n,t){n.Z=t.p+"assets/images/hand-over-hand-locking-9afbfe2301051e47c935f4357b91018a.png"},4941:function(e,n,t){n.Z=t.p+"assets/images/icing-262e8ab8c3eef2927d9b58ff930d610c.jpeg"}}]);